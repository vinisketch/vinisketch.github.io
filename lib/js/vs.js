/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.


 The code include code from :

 Copyright (c) 2009 Matteo Spinelli, http://cubiq.org/
 Released under MIT license
 http://cubiq.org/dropbox/mit-license.txt
 Version 3.4.5 - Last updated: 2010.07.04
*/
window.vs={};window.vs.util={};window.vs.core={};window.vs.data={};window.vs.ui={};window.vs.fx={};window.vs.av={};window.vs.ext={};window.vs.ext.ui={};window.vs.ext.fx={};window.vs.SUPPORT_3D_TRANSFORM=!1;
(function(){var o=function(g){this.m11=this.m22=this.m33=this.m44=1;this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0;"string"==typeof g&&this.setMatrixValue(g)};o.displayName="FirminCSSMatrix";o.degreesToRadians=function(g){return g*Math.PI/180};o.determinant2x2=function(g,o,k,n){return g*n-o*k};o.determinant3x3=function(g,p,k,n,j,q,A,D,G){var r=o.determinant2x2;return g*r(j,q,D,G)-n*r(p,k,D,G)+A*r(p,k,j,q)};o.determinant4x4=function(g){var p=
o.determinant3x3,k=g.m21,n=g.m31,j=g.m41,q=g.m12,A=g.m22,D=g.m32,G=g.m42,r=g.m13,w=g.m23,c=g.m33,f=g.m43,K=g.m14,F=g.m24,B=g.m34,L=g.m44;return g.m11*p(A,w,F,D,c,B,G,f,L)-k*p(q,r,K,D,c,B,G,f,L)+n*p(q,r,K,A,w,F,G,f,L)-j*p(q,r,K,A,w,F,D,c,B)};[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(g){var p=g[0];Object.defineProperty(o.prototype,g[1],{set:function(g){this[p]=g},get:function(){return this[p]}})});o.prototype.isAffine=function(){return 0===this.m13&&
0===this.m14&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44};o.prototype.multiply=function(g){var p=new o;p.m11=g.m11*this.m11+g.m12*this.m21+g.m13*this.m31+g.m14*this.m41;p.m12=g.m11*this.m12+g.m12*this.m22+g.m13*this.m32+g.m14*this.m42;p.m13=g.m11*this.m13+g.m12*this.m23+g.m13*this.m33+g.m14*this.m43;p.m14=g.m11*this.m14+g.m12*this.m24+g.m13*this.m34+g.m14*this.m44;p.m21=g.m21*this.m11+g.m22*this.m21+g.m23*this.m31+g.m24*this.m41;
p.m22=g.m21*this.m12+g.m22*this.m22+g.m23*this.m32+g.m24*this.m42;p.m23=g.m21*this.m13+g.m22*this.m23+g.m23*this.m33+g.m24*this.m43;p.m24=g.m21*this.m14+g.m22*this.m24+g.m23*this.m34+g.m24*this.m44;p.m31=g.m31*this.m11+g.m32*this.m21+g.m33*this.m31+g.m34*this.m41;p.m32=g.m31*this.m12+g.m32*this.m22+g.m33*this.m32+g.m34*this.m42;p.m33=g.m31*this.m13+g.m32*this.m23+g.m33*this.m33+g.m34*this.m43;p.m34=g.m31*this.m14+g.m32*this.m24+g.m33*this.m34+g.m34*this.m44;p.m41=g.m41*this.m11+g.m42*this.m21+g.m43*
this.m31+g.m44*this.m41;p.m42=g.m41*this.m12+g.m42*this.m22+g.m43*this.m32+g.m44*this.m42;p.m43=g.m41*this.m13+g.m42*this.m23+g.m43*this.m33+g.m44*this.m43;p.m44=g.m41*this.m14+g.m42*this.m24+g.m43*this.m34+g.m44*this.m44;return p};o.prototype.isIdentityOrTranslation=function(){return 1===this.m11&&0===this.m12&&0===this.m13&&0===this.m14&&0===this.m21&&1===this.m22&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m31&&1===this.m33&&0===this.m34&&1===this.m44};o.prototype.adjoint=function(){var g=
new o,p=o.determinant3x3,k=this.m11,n=this.m12,j=this.m13,q=this.m14,A=this.m21,D=this.m22,G=this.m23,r=this.m24,w=this.m31,c=this.m32,f=this.m33,K=this.m34,F=this.m41,B=this.m42,L=this.m43,V=this.m44;g.m11=p(D,c,B,G,f,L,r,K,V);g.m21=-p(A,w,F,G,f,L,r,K,V);g.m31=p(A,w,F,D,c,B,r,K,V);g.m41=-p(A,w,F,D,c,B,G,f,L);g.m12=-p(n,c,B,j,f,L,q,K,V);g.m22=p(k,w,F,j,f,L,q,K,V);g.m32=-p(k,w,F,n,c,B,q,K,V);g.m42=p(k,w,F,n,c,B,j,f,L);g.m13=p(n,D,B,j,G,L,q,r,V);g.m23=-p(k,A,F,j,G,L,q,r,V);g.m33=p(k,A,F,n,D,B,q,r,V);
g.m43=-p(k,A,F,n,D,B,j,G,L);g.m14=-p(n,D,c,j,G,f,q,r,K);g.m24=p(k,A,w,j,G,f,q,r,K);g.m34=-p(k,A,w,n,D,c,q,r,K);g.m44=p(k,A,w,n,D,c,j,G,f);return g};o.prototype.inverse=function(){var g,p,k,n;if(this.isIdentityOrTranslation())return g=new o,0===this.m41&&0===this.m42&&0===this.m43||(g.m41=-this.m41,g.m42=-this.m42,g.m43=-this.m43),g;p=this.adjoint();g=o.determinant4x4(this);if(1.0E-8>Math.abs(g))return null;for(k=1;5>k;k++)for(n=1;5>n;n++)p["m"+k+n]/=g;return p};o.prototype.rotate=function(g,p,k){var n=
o.degreesToRadians;if("number"!=typeof g||isNaN(g))g=0;if(("number"!=typeof p||isNaN(p))&&("number"!=typeof k||isNaN(k)))k=g,p=g=0;if("number"!=typeof p||isNaN(p))p=0;if("number"!=typeof k||isNaN(k))k=0;var g=n(g),p=n(p),k=n(k),n=new o,j=new o,q=new o,A,k=k/2;A=Math.sin(k);k=Math.cos(k);q.m11=q.m22=1-2*A*A;q.m12=q.m21=2*A*k;q.m21*=-1;p/=2;A=Math.sin(p);k=Math.cos(p);j.m11=j.m33=1-2*A*A;j.m13=j.m31=2*A*k;j.m13*=-1;g/=2;A=Math.sin(g);k=Math.cos(g);n.m22=n.m33=1-2*A*A;n.m23=n.m32=2*A*k;n.m32*=-1;return q.multiply(j).multiply(n).multiply(this)};
o.prototype.rotateAxisAngle=function(g,p,k,n){if("number"!=typeof g||isNaN(g))g=0;if("number"!=typeof p||isNaN(p))p=0;if("number"!=typeof k||isNaN(k))k=0;if("number"!=typeof n||isNaN(n))n=0;0===g&&0===p&&0===k&&(k=1);var j=new o,q=Math.sqrt(g*g+p*p+k*k),A,D,G,n=(o.degreesToRadians(n)||0)/2;A=Math.cos(n);D=Math.sin(n);n=D*D;0===q?(p=g=0,k=1):1!==q&&(g/=q,p/=q,k/=q);1===g&&0===p&&0===k?(j.m22=j.m33=1-2*n,j.m23=j.m32=2*A*D,j.m32*=-1):0===g&&1===p&&0===k?(j.m11=j.m33=1-2*n,j.m13=j.m31=2*A*D,j.m13*=-1):
0===g&&0===p&&1===k?(j.m11=j.m22=1-2*n,j.m12=j.m21=2*A*D,j.m21*=-1):(q=D*A,A=g*g,D=p*p,G=k*k,j.m11=1-2*(D+G)*n,j.m12=2*(g*p*n+k*q),j.m13=2*(g*k*n-p*q),j.m21=2*(p*g*n-k*q),j.m22=1-2*(G+A)*n,j.m23=2*(p*k*n+g*q),j.m31=2*(k*g*n+p*q),j.m32=2*(k*p*n-g*q),j.m33=1-2*(A+D)*n);return this.multiply(j)};o.prototype.scale=function(g,p,k){var n=new o;if("number"!=typeof g||isNaN(g))g=1;if("number"!=typeof p||isNaN(p))p=g;if("number"!=typeof k||isNaN(k))k=1;n.m11=g;n.m22=p;n.m33=k;return this.multiply(n)};o.prototype.translate=
function(g,p,k){var n=new o;if("number"!=typeof g||isNaN(g))g=0;if("number"!=typeof p||isNaN(p))p=0;if("number"!=typeof k||isNaN(k))k=0;n.m41=g;n.m42=p;n.m43=k;return this.multiply(n)};o.prototype.setMatrixValue=function(g){var g=g.trim(),o=g.match(/^matrix(3d)?\(\s*(.+)\s*\)$/),k,n,j,q;if(o&&(g=!!o[1],o=o[2].split(/\s*,\s*/),k=o.length,n=Array(k),!(g&&16!==k)&&(g||6===k))){for(j=0;j<k;j++)if(q=o[j],q.match(/^-?\d+(\.\d+)?$/))n[j]=parseFloat(q);else return;for(j=0;j<k;j++)point=g?"m"+(Math.floor(j/
4)+1)+(j%4+1):String.fromCharCode(j+97),this[point]=n[j]}};o.prototype.toString=function(){var g=this,o,k;this.isAffine()?(k="matrix(",o="a,b,c,d,e,f".split(",")):(k="matrix3d(",o="m11,m12,m13,m14,m21,m22,m23,m24,m31,m32,m33,m34,m41,m42,m43,m44".split(","));return k+o.map(function(n){return g[n].toFixed(6)}).join(", ")+")"};this.FirminCSSMatrix=o}).call(this);
(function(){function o(a,b){Z.isNumber(a)&&(this.x=a);Z.isNumber(b)&&(this.y=b)}function g(a,b){for(var d in b)getter=b.__lookupGetter__(d),setter=b.__lookupSetter__(d),getter&&a.__defineGetter__(d,getter),setter&&a.__defineSetter__(d,setter),!getter&&!setter&&(a[d]=b[d]);return a}function p(a,b){for(var d in b){var e=Object.getOwnPropertyDescriptor(b,d);e&&(e.get||e.set)?Z.defineProperty(a,d,e):a[d]=b[d]}return a}function k(a,b,d){if(Object.prototype.hasOwnProperty.call(d,"set")){var e=d.set;D(e)&&
a.__defineSetter__(b,e)}Object.prototype.hasOwnProperty.call(d,"get")&&(e=d.get,D(e)&&a.__defineGetter__(b,e))}function n(a,b,d){function e(a,u){return Object.prototype.hasOwnProperty.call(a,u)}if("object"!=typeof d||null===d)throw new TypeError("bad desc");if("string"!=typeof b||null===b)throw new TypeError("bad property name");var c={};c.enumerable=e(d,"enumerable")?!!d.enumerable:!0;c.configurable=e(d,"configurable")?!!d.configurable:!0;e(d,"value")&&(c.value=d.value);e(d,"writable")&&(c.writable=
!!d.writable);if(e(d,"get")){var f=d.get;D(f)&&(c.get=f)}e(d,"set")&&(d=d.set,D(d)&&(c.set=d));if(("get"in c||"set"in c)&&("value"in c||"writable"in c))throw new TypeError("identity-confused descriptor");Object.defineProperty(a,b,c)}function j(a,b,d){if(d){a.__properties__||(a.__properties__=[]);if(!a.prototype)throw"defineClassProperty on a Class without prototype";Z.defineProperty(a.prototype,b,d);!1!=d.enumerable&&a.__properties__.push(b)}}function q(a){var b;switch(a){case null:return null;case void 0:return}if(a.clone)return a.clone();
switch(Y.call(a)){case "[object Object]":case "Object":b={};for(var d in a)b[d]=q(a[d]);return b;case "[object Array]":b=[];for(d=0;d<a.length;d++)b[d]=q(a[d]);return b;default:return a}}function A(a){return!!(a&&1===a.nodeType)}function D(a){return"function"===typeof a}function G(a){return"[object String]"===Y.call(a)}function r(a){return"undefined"===typeof a}function w(a,b){if(a){var d=a.className;return d&&0<d.length&&(d===b||RegExp("(^|\\s)"+b+"(\\s|$)").test(d))}}function c(){var a=arguments[0],
b,d=1;if(a){for(;d<arguments.length;d++)b=arguments[d],w(a,b)||(a.className=(a.className?a.className+" ":"")+b);return a}}function f(){var a=arguments[0],b,d=1;if(a&&a.className){for(;d<arguments.length;d++)b=arguments[d],a.className=K(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));return a}}function K(a){return!G(a)?"":a.replace(/^\s+/,"").replace(/\s+$/,"")}function F(a){if(!G(a))return"";var b=a.split("-"),d=b.length;if(1===d)return b[0];for(var a="-"===a.charAt(0)?b[0].charAt(0).toUpperCase()+
b[0].substring(1):b[0],e=1;e<d;e++)a+=b[e].charAt(0).toUpperCase()+b[e].substring(1);return a}function B(a){if(!A(a))return{};var b=L(a,"display"),d=a.style,e=d.visibility,c=d.position,f=d.display,h=0,u=0;if("none"!==b&&null!==b)return{width:a.offsetWidth,height:a.offsetHeight};d.visibility="hidden";d.position="absolute";d.display="block";h=a.clientWidth;u=a.clientHeight;d.display=f;d.position=c;d.visibility=e;return{width:h,height:u}}function L(a,b){if(A(a)){var b="float"===b?"cssFloat":F(b),d=a.style[b];
if(!d||"auto"===d)d=(d=P.defaultView.getComputedStyle(a,null))?d[b]:null;return"opacity"===b?d?parseFloat(d):1:"auto"===d?null:d}}function V(a,b){if(A(a)){var d=a.style;r(b)&&d.removeProperty("opacity");d.opacity=1===b||""===b?"":1.0E-5>b?0:b}}function S(a,b){if(!a)return null;if(!b&&a.getBoundingClientRect){var d=a.getBoundingClientRect();if(d)return new h.Point(d.left,d.top)}var e=d=0;for(parent=a,borderXOffset=0,borderYOffset=0;parent;)borderYOffset=borderXOffset=0,parent!=a&&(borderXOffset=parseInt(parent.currentStyle?
parent.currentStyle.borderLeftWidth:0,0),borderYOffset=parseInt(parent.currentStyle?parent.currentStyle.borderTopWidth:0,0),borderXOffset=isNaN(borderXOffset)?0:borderXOffset,borderYOffset=isNaN(borderYOffset)?0:borderYOffset),parent instanceof HTMLBodyElement?(d+=parent.offsetLeft-P.documentElement.scrollLeft+borderXOffset,e+=parent.offsetTop-P.documentElement.scrollTop+borderYOffset,parent=null):(d+=parent.offsetLeft-parent.scrollLeft+borderXOffset,e+=parent.offsetTop-parent.scrollTop+borderYOffset,
parent=parent.offsetParent);return new h.Point(d,e)}function J(a){var b=S(a);return{width:a.offsetWidth,height:a.offsetWidth,left:b.x,top:b.y}}function aa(a){return a&&a.getBoundingClientRect?a.getBoundingClientRect():null}function W(a){if(a&&a.childNodes)for(var b=a.childNodes.length;b--;)a.removeChild(a.firstChild)}function ea(a,b){a&&a.style?a.style.webkitTransform=b:console.warn("setElementTransform, elem null or without style")}function x(a){if(a)return a.style.webkitTransform}function ia(a,
b){a&&a.style?a.style.msTransform=b:console.warn("setElementTransform, elem null or without style")}function R(a){if(a)return a.style.msTransform}function T(a,b){a&&a.style?a.style.MozTransform=b:console.warn("setElementTransform, elem null or without style")}function M(a){if(a)return a.style.MozTransform}function ba(a,b){a&&a.style?a.style.transform=b:console.warn("setElementTransform, elem null or without style")}function H(a){if(a)return a.style.transform}function z(a,b){if(!t){var d=P.createElement("style");
d.appendChild(P.createTextNode(""));head=P.getElementsByTagName("head")[0];head.appendChild(d);t=P.styleSheets[P.styleSheets.length-1]}d=0;t.cssRules?d=t.cssRules.length:t.rules&&(d=t.rules.length);t.insertRule?t.insertRule(a+" {"+b+"}",d):t.addRule&&t.addRule(a,b,d)}var h=this.vs=this.vs||{},Z=h.util={};o.prototype={x:0,y:0,matrixTransform:function(a){var b=new CSSMatrix,b=b.translate(this.x,this.y,this.z||0),a=a.multiply(b),d=new o(a.m41,a.m42);delete b;delete a;return d}};h.Point=o;var P="undefined"!=
typeof window?window.document:null,$=P?P.createElement("vstestelem"):null,U=$?$.style:null,ca=/\/Date\((-?\d+)\)\//;U&&(void 0!==U.webkitTransform?h.SUPPORT_3D_TRANSFORM="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix:void 0!==U.MozTransform?h.SUPPORT_3D_TRANSFORM="MozPerspective"in U:void 0!==U.msTransform&&(h.SUPPORT_3D_TRANSFORM="MSCSSMatrix"in window&&"m11"in new MSCSSMatrix),h.CSS_VENDOR=function(){for(var a=["MozT","msT","OT","webkitT","t"],b,d=a.length;--d;)if(b=a[d]+"ransform",b in
U)return a[d].substr(0,a[d].length-1);return null}());h.SUPPORT_CSS_TRANSFORM=null!==h.CSS_VENDOR?!0:!1;h.CSSMatrix="WebKitCSSMatrix"in window?window.WebKitCSSMatrix:"MSCSSMatrix"in window?window.MSCSSMatrix:FirminCSSMatrix;h.CSSMatrix.prototype.isAffine||(h.CSSMatrix.prototype.isAffine=function(){return!(this.m13||this.m14||this.m23||this.m24||this.m31||this.m32||1!==this.m33&&this.m34||this.m43||1!==this.m44)});h.CSSMatrix.prototype.getMatrixStr=function(){return"matrix("+[~~(1E3*this.a)/1E3,~~(1E3*
this.b)/1E3,~~(1E3*this.c)/1E3,~~(1E3*this.d)/1E3,~~(1E3*this.e)/1E3,~~(1E3*this.f)/1E3].join(", ")+")"};h.CSSMatrix.prototype.getMatrix3dStr=function(){return"matrix3d("+[~~(1E3*this.m11)/1E3,~~(1E3*this.m12)/1E3,~~(1E3*this.m13)/1E3,~~(1E3*this.m14)/1E3,~~(1E3*this.m21)/1E3,~~(1E3*this.m22)/1E3,~~(1E3*this.m23)/1E3,~~(1E3*this.m24)/1E3,~~(1E3*this.m31)/1E3,~~(1E3*this.m32)/1E3,~~(1E3*this.m33)/1E3,~~(1E3*this.m34)/1E3,~~(1E3*this.m41)/1E3,~~(1E3*this.m42)/1E3,~~(1E3*this.m43)/1E3,~~(1E3*this.m44)/
1E3].join(", ")+")"};h.requestAnimationFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}).bind(window);h.cancelRequestAnimationFrame=(window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout).bind(window);h.setImmediate=(window.setImmediate||
function(a,b){return this.setTimeout(a,0,b)}).bind(window);h.clearImmediate=(window.clearImmediate||window.clearTimeout).bind(window);h.util.extend=Object.defineProperty?p:g;var Y=Object.prototype.toString,I=Array.isArray||function(a){return"[object Array]"===Y.call(a)},Q,C;U&&void 0!==U.transform?(Q=ba,C=H):U&&void 0!==U.webkitTransform?(Q=ea,C=x):U&&void 0!==U.msTransform?(Q=ia,C=R):U&&void 0!==U.MozTransform&&(Q=T,C=M);Array.prototype._remove=function(a,b){var d=this.slice((b||a)+1||this.length);
this.length=0>a?this.length+a:a;return this.push.apply(this,d)};var a=function(a,b){for(var d=this.length,b=b?b:0,b=0>b?0:b;b<d;){if(this[b]===a)return b;b++}return-1};Array.prototype.findItem=Array.prototype.indexOf?Array.prototype.indexOf:a;Array.prototype.remove=function(a,b){if("object"===typeof a||Z.isString(a))for(var d=0;d<this.length;)this[d]===a?this._remove(d):d++;else this._remove(a,b);return this};Array.prototype.removeAll=function(){for(;0<this.length;)this._remove(0);return this};Array.prototype.clone=
function(){for(var a=[],b=0;b<this.length;b++)a[b]=q(this[b]);return a};var t=null;Z.extend(Z,{vsTestElem:$,vsTestStyle:U,extendClass:function(a,b){if(a&&b&&a.prototype&&b.prototype)try{if(Object.__proto__)a.prototype.__proto__=b.prototype;else{var d=a.prototype;a.prototype=new b;Z.extend(a.prototype,d)}a.__properties__||(a.__properties__=[]);b.__properties__&&(a.__properties__=a.__properties__.concat(b.__properties__));return a}catch(e){console.error(e.message())}},defineProperty:Object.defineProperty?
n:k,defineClassProperty:j,defineClassProperties:function(a,b){if(!a.prototype)throw"defineClassProperties on a Class without prototype";for(var d=Object.keys(b),e=0,c=d.length,f,h;e<c;e++)f=d[e],h=b[f],j(a,f,h)},clone:q,free:function(a){a&&(a._free&&a._free(),a.destructor&&a.destructor(),delete a)},toJSON:function(a){return JSON.stringify(a)},isElement:A,isArray:I,isFunction:D,isString:G,isNumber:function(a){return"number"===typeof a&&isFinite(a)||a instanceof Number},isObject:function(a){try{return Object.getPrototypeOf(a)===
Object.prototype}catch(b){return!1}},isUndefined:r,hasClassName:w,addClassName:c,removeClassName:f,toggleClassName:function(a,b){return!a?void 0:w(a,b)?f(a,b):c(a,b)},htmlEncode:function(a){return!G(a)?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},strip:K,camelize:F,capitalize:function(a){return!G(a)?"":a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},underscore:function(a){return!G(a)?"":a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,
"$1_$2").replace(/-/g,"_").toLowerCase()},parseJSON:function(a){function b(a){if(G(a)){var d=ca.exec(a);d&&d[1]&&(a=new Date(parseInt(d[1])))}else if(I(a))for(d=0;d<a.length;d++)a[d]=b(a[d]);else if(!(a instanceof Date)&&a instanceof Object)for(d in a)a[d]=b(a[d]);return a}if(!a)return null;var d=JSON.parse(a);return!ca.test(a)?d:b(d)},addCssRule:z,addCssRules:function(a,b){if(I(b))for(var d=b.length;d--;)z(a,b[d])},getElementHeight:function(a){return!A(a)?void 0:B(a).height},getElementWidth:function(a){return!A(a)?
void 0:B(a).width},getElementDimensions:B,getElementStyle:L,setElementStyle:function(a,b){if(A(a)){var d=a.style,e;for(e in b)"opacity"===e?V(a,b[e]):(b[e]||d.removeProperty(e),d["float"===e||"cssFloat"===e?r(d.styleFloat)?"cssFloat":"styleFloat":e]=b[e])}},setElementOpacity:V,getElementOpacity:function(a){return!A(a)?void 0:L(a,"opacity")},getElementAbsolutePosition:S,setElementPos:function(a,b,d){a&&(a=a.style,a.left=b+"px",a.top=d+"px")},setElementSize:function(a,b,d){a&&(a=a.style,a.width=b+"px",
a.height=d+"px")},setElementVisibility:function(a,b){if(a){var d=a.style;d||Z.isString(a.innerHTML)?d.visibility=b?"visible":"hidden":b?a.setAttribute("visibility","visible"):a.setAttribute("visibility","hidden")}},isElementVisible:function(a){if(!a)return!1;var b=a.style;return b||Z.isString(a.innerHTML)?"hidden"===b.visibility?!1:!0:a instanceof CharacterData?!0:"hidden"===a.getAttribute("visibility")?!1:!0},removeAllElementChild:W,safeInnerHTML:function(a,b){a&&G(b)&&(window.MSApp&&window.MSApp.execUnsafeLocalFunction?
window.MSApp.execUnsafeLocalFunction(function(){a.innerHTML=b}):a.innerHTML=b)},setElementInnerText:function(a,b){if(a){W(a);Z.isString(b)||(b=void 0===b?"":null===b?"":Z.isNumber(b)?""+b:b.toString?b.toString():"");var d=b.split("\n"),e=0;if(d.length){a.appendChild(P.createTextNode(d[e]));for(e++;e<d.length;e++)a.appendChild(P.createElement("br")),a.appendChild(P.createTextNode(d[e]))}}},setElementTransform:Q,getElementTransform:C,getElementMatrixTransform:function(a){if(a){var a=P.defaultView.getComputedStyle(a,
null),b;a.transform?b=a.transform:a.webkitTransform?b=a.webkitTransform:a.msTransform?b=a.msTransform:a.MozTransform&&(b=a.MozTransform);if(b)return new h.CSSMatrix(b)}},setElementTransformOrigin:function(a,b){a&&a.style?a.style["-"+h.CSS_VENDOR.toLowerCase()+"-transform-origin"]=b:console.warn("setElementTransformOrigin, elem null or without style")},getBoundingClientRect:$&&$.getBoundingClientRect?aa:J,importFile:function(a,b,d,e,c){b||(b=P);var f;if("js"===e||0<=a.search("\\.js"))return e=b.createElement("script"),
e.setAttribute("type","text/javascript"),e.setAttribute("src",a),d&&(e.onload=function(){d.call(this,a)}),b.head||(b.head=b.querySelector("head")),c&&b.head.firstElementChild?b.head.insertBefore(e,b.head.firstElementChild):b.head.appendChild(e),e;if("css"===e||0<=a.search("\\.css")){f=b.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("type","text/css");f.setAttribute("href",a);f.setAttribute("media","screen");if(Z.isFunction(d)){var h=0;(function(){f.sheet?d.call(P,a):100>
h++?cssTimeout=setTimeout(arguments.callee,100):console.error("CSS load of "+a+" failed!")})()}b.head||(b.head=b.querySelector("head"));c&&b.head.firstElementChild?b.head.insertBefore(f,b.head.firstElementChild):b.head.appendChild(f);return f}},setActiveStyleSheet:function(a){var b=0,d=P.getElementsByTagName("link"),e,c,f=h.Application_applications;if(f)for(c in f)b=f[c],b.view&&(b.view.style.display="none");for(b=0;b<d.length;b++)e=d[b],e.getAttribute("title")&&(e.getAttribute("title")!==a?e.setAttribute("disabled",
!0):e.removeAttribute("disabled"));if(f)for(c in f)b=f[c],b.view&&(b.view.style.display="block")},preloadTemplate:function(a){var b=a+".xhtml",d;if(!h.ui||!h.ui.View||!h.ui.View.__comp_templates[b])d=new XMLHttpRequest,d.open("GET",b,!1),d.send(null),4===d.readyState?200===d.status||0===d.status?(data=d.responseText,h.ui&&h.ui.View&&(h.ui.View.__comp_templates[b]=data)):console.error("Template file for component '"+a+"' unfound"):console.error("Pb when load the component '"+a+"' template")},__date_reg_exp:ca,
_findItem:a,_defineProperty_api1:k,_defineProperty_api2:n,_extend_api1:g,_extend_api2:p})}).call(this);
(function(){function o(g){var j=g.vsGetCTM();p.setElementTransform(g,j.toString());delete j}var g=this.vs,p=g.util,k=g&&g.CSSMatrix;p.extend((window&&window.HTMLElement).prototype,{_vs_node_tx:0,_vs_node_ty:0,_vs_node_s:1,_vs_node_r:0,vsTranslate:function(g,j){this._vs_node_tx===g&&this._vs_node_ty===j||(this._vs_node_tx=g,this._vs_node_ty=j,o(this))},vsRotate:function(g){this._vs_node_r!==g&&(this._vs_node_r=g,o(this))},vsScale:function(g){this._vs_node_s!==g&&(this._vs_node_s=g,o(this))},vsSetNewTransformOrigin:function(g){if(g){this._vs_node_origin||
(this._vs_node_origin=[0,0]);var j=new k,j=j.translate(this._vs_node_origin[0],this._vs_node_origin[1],0),j=j.translate(this._vs_node_tx,this._vs_node_ty,0),j=j.rotate(0,0,this._vs_node_r),j=j.scale(this._vs_node_s,this._vs_node_s,1),j=j.translate(-this._vs_node_origin[0],-this._vs_node_origin[1],0);this._vs_transform||(this._vs_transform=j);this._vs_transform=j.multiply(this._vs_transform);delete j;this._vs_node_ty=this._vs_node_tx=0;this._vs_node_s=1;this._vs_node_r=0;this._vs_node_origin=[g.x,
g.y]}},vsClearTransformStack:function(){this._vs_transform&&delete this._vs_transform;this._vs_transform=void 0},vsGetCTM:function(){var g=new k;this._vs_node_origin||(this._vs_node_origin=[0,0]);g=g.translate(this._vs_node_origin[0],this._vs_node_origin[1],0);g=g.translate(this._vs_node_tx,this._vs_node_ty,0);g=g.rotate(0,0,this._vs_node_r);g=g.scale(this._vs_node_s,this._vs_node_s,1);g=g.translate(-this._vs_node_origin[0],-this._vs_node_origin[1],0);return this._vs_transform?g.multiply(this._vs_transform):
g},vsGetParentCTM:function(){function g(j){return!j?new k:g(j.parentNode).multiply(j.vsGetCTM())}return g(this.parentNode)}})}).call(this);
(function(){function o(a,u,m,b,e,d){this.configureWithEvent(a,b,e,d);this.type=u;this.identifier=m}function g(a,u){var m=[];a.nbPointers=a.touches.length;for(var b=0;b<a.nbPointers;b++){var e=a.touches[b],e=new o(e,U.TOUCH,e.identifier,e.clientX,e.clientY,a);m.push(e)}a.pointerList=m;m=[];for(b=0;b<a.targetTouches.length;b++)e=a.targetTouches[b],u&&ca[e.identifier]!=u||(e=new o(e,U.TOUCH,e.identifier,e.clientX,e.clientY,a),m.push(e));a.targetPointerList=m;m=[];for(b=0;b<a.changedTouches.length;b++)e=
a.changedTouches[b],e=new o(e,U.TOUCH,e.identifier,a.clientX,a.clientY,a),m.push(e);a.changedPointerList=m}function p(a,u){var m=[];m.push(new o(a,U.MOUSE,$,a.layerX,a.layerY));u?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=m,a.changedPointerList=m):(a.nbPointers=1,a.pointerList=m,a.targetPointerList=m,a.changedPointerList=[])}function k(a,u,m){var b=[],e=[],d=[],y=a.pointerId,E=Y[y];u?(E?(I[y]=E,Y[y]=void 0):(E=I[y],E||(E=new o(a,a.pointerType,y,a.layerX,a.layerY),I[y]=E)),I.forEach(function(y){y&&
d.push(y)}),I=[]):E?E.configureWithEvent(a):(E=new o(a,a.pointerType,y,a.layerX,a.layerY),Y[y]=E);Y.forEach(function(y){y&&(b.push(y),m&&ca[y.identifier]!=m||e.push(y))});a.nbPointers=b.length;a.pointerList=b;a.targetPointerList=e;a.changedPointerList=d}function n(a,u){p(a);u(a)}function j(a,u){p(a);u(a)}function q(a,u){p(a,!0);u(a)}function A(a,u,m){for(var b,e=a.targetTouches.length,d=0;d<e;d++)b=a.targetTouches[d],ca[b.identifier]=m;g(a);u(a)}function D(a,u,m){g(a,m);u(a)}function G(a,u){for(var m,
b=a.changedTouches.length,e=0;e<b;e++)m=a.changedTouches[e],ca[m.identifier]=void 0;g(a);u(a)}function r(a,u){g(a);u(a,u)}function w(a,u,m){ca[a.pointerId]=m;k(a,!1,m);u(a);0===Q&&(document.addEventListener(ba?"pointerup":"MSPointerUp",C),document.addEventListener(ba?"pointercancel":"MSPointerCancel",C));Q++}function c(a,u,m){k(a,!1,m);u(a)}function f(a,u){k(a,!0);u(a)}function K(a,u){k(a,!0);u(a)}function F(a,u,m){if(!u||!m||!m.__event_listeners)return-1;for(var b=0;b<m.__event_listeners.length;b++){var e=
m.__event_listeners[b];if(e.target===a&&e.type===u&&e.listener===m)return b}return-1}function B(u,m,e,d){var ga=d.listener?d.listener.id:void 0;ga||(ga=""+(new Date).getTime()+""+Math.floor(1E6*Math.random()),d.listener&&(d.listener.id=ga));switch(m){case z:return d.handler=function(u){a(u,e,ga)},!0;case h:return d.handler=function(a){t(a,e,ga)},!0;case Z:return d.handler=function(a){s(a,e)},!0;case P:return d.handler=function(a){b(a,e)},!0}return!1}function L(a,u,m){var b=document.createEvent("Event");
b.initEvent(a,!0,!0);for(var e in m)b[e]=m[e];u.dispatchEvent(b)}function V(a,u){if(!a||!u)return 0;var m=u.pageX-a.pageX,b=u.pageY-a.pageY;return Math.sqrt(m*m+b*b)}function S(a,u){return!a||!u?0:180*Math.atan2(u.pageY-a.pageY,u.pageX-a.pageX)/Math.PI}function J(a){var u=a.length,m=0,b=0,e=0;if(0===u)return{X:0,y:0};for(;m<u;m++)var d=a[m],b=b+d.pageX,e=e+d.pageY;return{x:b/u-qa.x,y:e/u-qa.y}}function aa(a){a.centroid={x:a.pageX,y:a.pageY};a.translation=[a.centroid.x-oa.x,a.centroid.y-oa.y];a.pointerList=
[new o(a,U.TOUCH,$)];a.targetPointerList=a.pointerList;a.nbPointers=1}function W(u,m,b,ga){var c=ga.listener?ga.listener.id:void 0;switch(m){case d:return ga.gesture_handler=function(u){a(u,ua,c)},u.addEventListener(R.POINTER_START,ga.gesture_handler),ga.handler=b,!0;case e:case v:return ga.handler=b,!0}return!1}function ea(a,u,m,b){switch(u){case d:return b.handler=function(a){oa={x:a.pageX,y:a.pageY};aa(a);m(a)},!0;case e:return b.handler=function(a){aa(a);m(a)},!0;case v:return b.handler=function(a){aa(a);
m(a)},!0}return!1}function x(a,u,m){var b=m.listener?m.listener.id:void 0;switch(u){case d:return a.removeEventListener(R.POINTER_START,m.gesture_handler,b),!0;case e:case v:return!0}return!1}function ia(a,u){switch(u){case d:case e:case v:return!0}return!1}var R=this.vs=this.vs||{},T=R.util=R.util||{},M=!1,ba=window.navigator.pointerEnabled,H=window.navigator.msPointerEnabled;if("undefined"!=typeof document&&"createTouch"in document)M=!0;else if(ba||H)M=!0;else if("undefined"!=typeof document&&window.navigator&&
window.navigator.userAgent&&(-1!==window.navigator.userAgent.indexOf("Android")||-1!==window.navigator.userAgent.indexOf("BlackBerry")))M=!0;var z,h,Z,P;M?(z=ba?"pointerdown":H?"MSPointerDown":"touchstart",h=ba?"pointermove":H?"MSPointerMove":"touchmove",Z=ba?"pointerup":H?"MSPointerUp":"touchend",P=ba?"pointercancel":H?"MSPointerCancel":"touchcancel"):(z="mousedown",h="mousemove",Z="mouseup",P=null);var $=31337;o.prototype.configureWithEvent=function(a,u,m,b){this.pageX=a.pageX;this.pageY=a.pageY;
"undefiend"!==typeof u&&(this.clientX=u);"undefiend"!==typeof m&&(this.clientY=m);a.target?this.target=a.target:b&&(this.target=b.target);a.currentTarget?this.currentTarget=a.currentTarget:b&&(this.currentTarget=b.currentTarget)};var U={TOUCH:2,PEN:3,MOUSE:4},ca=[],Y=[],I=[],Q=0,C=function(a){if(a=Y[a.pointerId])I[a.identifier]=a,Y[a.identifier]=void 0;Q--;0===Q&&(document.removeEventListener(ba?"pointerup":"MSPointerUp",C),document.removeEventListener(ba?"pointercancel":"MSPointerCancel",C))},a,
t,s,b;M?H?(a=w,t=c,s=f,b=K):(a=A,t=D,s=G,b=r):(a=n,t=j,b=s=q);R.createCustomEvent=L;R.removePointerListener=function(a,u,m,b){if(u)if(m){var e=F(a,u,m);if(-1===e)console.error("removePointerListener no binding");else{var d=m.__event_listeners[e];m.__event_listeners.remove(e);a:{switch(u){case z:case h:case Z:case P:m=!0;break a}m=!1}m||va(a,u,d);a.removeEventListener(u,d.handler,b);delete d}}else console.error("removePointerListener no listener")};R.addPointerListener=function(a,u,m,b){if(u)if(m){var e=
m;T.isFunction(m)||(e=m.handleEvent,T.isFunction(e)&&(e=e.bind(m)));if(-1!==F(a,u,m))console.error("addPointerListener binding already existing");else{m.__event_listeners||(m.__event_listeners=[]);var d={target:a,type:u,listener:m};m.__event_listeners.push(d);!B(a,u,e,d)&&!ka(a,u,e,d)&&(d.handler=e);a.addEventListener(u,d.handler,b)}}else console.error("addPointerListener no listener")};R.PointerTypes=U;R.POINTER_START=z;R.POINTER_MOVE=h;R.POINTER_END=Z;R.POINTER_CANCEL=P;var d,e,v,M={},H=["gesturestart",
"gesturechange","gestureend"];document.createElement("div");for(var N=0;N<H.length;N++){var da=H[N],da="on"+da,u=da in T.vsTestElem;u||(T.vsTestElem.setAttribute(da,"return;"),u="function"==typeof T.vsTestElem[da]);M[H[N]]=u}M.gestures=M.gesturestart&&M.gesturechange&&M.gestureend;"MSGestureEvent"in window&&(M.msGestures=!0);M.gestures=!1;M.msGestures=!1;var m=0,ga=0,oa,qa,la=function(a,u){var b=u?void 0:J(a.targetPointerList);return{scale:u?void 0:V(a.targetPointerList[0],a.targetPointerList[1])/
m,rotation:u?void 0:S(a.targetPointerList[0],a.targetPointerList[1])-ga,translation:u?void 0:[b.x-oa.x,b.y-oa.y],nbPointers:a.nbPointers,pointerList:a.pointerList,targetPointerList:a.targetPointerList,centroid:b,changedPointerList:a.changedPointerList}},ma=!1,ua=function(a){2>a.targetPointerList.length||(a.preventDefault(),ma?L(e,a.target,la(a)):(m=V(a.targetPointerList[0],a.targetPointerList[1]),ga=S(a.targetPointerList[0],a.targetPointerList[1]),qa=T.getElementAbsolutePosition(a.targetPointerList[0].target,
!0),oa=J(a.targetPointerList),document.addEventListener(R.POINTER_MOVE,pa),document.addEventListener(R.POINTER_END,O),document.addEventListener(R.POINTER_CANCEL,O),L(d,a.target,la(a)),ma=!0))},pa=function(a){a.preventDefault();t(a,function(a){2>a.targetPointerList.length?(document.removeEventListener(R.POINTER_MOVE,pa),document.removeEventListener(R.POINTER_END,O),document.removeEventListener(R.POINTER_CANCEL,O),ma=!1,L(v,a.target,la(a,!0))):L(e,a.target,la(a))})},O=function(a){a.preventDefault();
s(a,function(a){2>a.targetPointerList.length?(document.removeEventListener(R.POINTER_MOVE,pa),document.removeEventListener(R.POINTER_END,O),document.removeEventListener(R.POINTER_CANCEL,O),ma=!1,L(v,a.target,la(a,!0))):L(e,a.target,la(a))})};M.msGestures?(d="MSGestureStart",e="MSGestureChange",v="MSGestureEnd"):M.gestures?(d="gesturestart",e="gesturechange",v="gestureend"):(d="_gesture_start",e="_gesture_change",v="_gesture_end");var ka=M.gestures||M.msGestures?ea:W,va=M.gestures||M.msGestures?ia:
x;R.GESTURE_START=d;R.GESTURE_CHANGE=e;R.GESTURE_END=v}).call(this);
(function(o,g){function p(){return"vs_id_"+Z++}function k(){return"vs_id_"+(new Date).getTime()+""+Math.floor(1E6*Math.random())}function n(a,m){z.isNumber(a)&&(this.x=a);z.isNumber(m)&&(this.y=m)}function j(a){this.constructor=h.Object;this._id=z.isString(a)?a:a&&a.id?a.id:p();this.__df__=[];a&&(this.__config__=a)}function q(a){return a&&z.isFunction(a.clone)?a.clone():z.clone(a)}function A(a,m,b){var e=m.__lookupGetter__(a),d=m.__lookupSetter__(a),c=b.__lookupSetter__(a),f="_"+z.underscore(a);if(d||
e)c?b[a]=q(m[f]):b[f]=q(m[f])}function D(a,m,b){var e=m.getPropertyDescriptor(a),d=b.getPropertyDescriptor(a),c="_"+z.underscore(a);if(e&&d&&(e.get||e.set))d.set?b[a]=q(m[c]):b[c]=q(m[c])}function G(a,m){var b={},e,d,c,f;for(f in m){e=m[f];if(z.isNumber(e))d={},c="_"+z.underscore(f),e&H.core.Object.PROPERTY_IN&&(d.set=function(a,u){return function(m){this[u]=m;this.propertyChange(a)}}(f,c)),e&H.core.Object.PROPERTY_OUT&&(d.get=function(a){return function(){return this[a]}}(c));else if(z.isString(e)){c=
U.exec(e);if(!c||3!=c.length)throw"Unvalid property path: "+e;d={};d.set=function(a,u){return function(m){for(var b=this,e=a.split(".");b&&e.length;)b=b[e.shift()];b&&(b[u]=m);this.propertyChange(u)}}(c[1],c[2]);d.get=function(a,u){return function(){for(var m=this,b=a.split(".");m&&b.length;)m=m[b.shift()];if(m)return m[u]}}(c[1],c[2])}else"object"==typeof e&&(d=e);b[f]=d}z.defineClassProperties(a,b)}function r(a,m){this.obj=a;z.isFunction(m)?this.func_ptr=m:z.isString(m)&&(this.func_name=m)}function w(a,
m){this.func_ptr=a;this.args=m}function c(a,m){a&&m&&(Y={handler_list:m,event:a},B())}function f(a,m){function b(){g--;0>=g&&(m?C=!1:Q=!1)}function e(a){if(a)try{if(z.isFunction(a.func_ptr))a.func_ptr.call(a.obj,h);else if(z.isString(a.func_name)&&z.isFunction(a.obj[a.func_name]))a.obj[a.func_name](h);else z.isFunction(a.obj.notify)&&a.obj.notify(h)}catch(u){u.stack?console.error(u.stack):console.error(u)}b()}var d=a.handler_list,c=d.length,f,g=c,h=a.event;m?C=!0:Q=!0;c||b();for(f=0;f<c;f++)m?e(d[f]):
function(a){H.setImmediate(function(){e(a)})}(d[f])}function K(){if(I.length){var u=I.shift();if(u)try{a=!0,u.run()}catch(m){m.stack?console.error(m.stack):console.error(m)}H.util.free(u);a=!1;I.length&&s()}}function F(){function a(u){u.data===m&&K()}var m="vs.core.scheduler"+Math.random();o.addEventListener&&o.addEventListener("message",a,!1);return function(){o.postMessage(m,"*")}}function B(){function u(){t=!1;B()}Y&&(f(Y,!0),Y=null);0===ca.length&&0===I.length||t||(Q||C?H.setImmediate(u):(!a&&
I.length&&s(),ca.length&&!Q&&!C&&f(ca.shift())))}function L(a){this.parent=j;this.parent(a);this.constructor=h.EventSource;this.__bindings__={};this.__node_binds__={}}function V(a){this.parent=L;this.parent(a);this.constructor=H.core.Model;this.__links__=[]}function S(a){this.dataflow_node=[];this.dataflow_edges={};this.is_propagating=!1;this.__shouldnt_propagate__=0;this._list_node=[];this._edges_from={};a&&a.__df__&&a.__df__.push(this)}function J(a){this.parent=h.Object;this.parent(a);this.constructor=
J}function aa(a){this.parent=h.Task;this.parent();this.constructor=aa;this._tasksAndParams=[];this._state=J.STOPPED;arguments.length&&this.setTasks(arguments)}function W(a){this.parent=h.Task;this.parent();this.constructor=W;this._tasksAndParams=[];this._state=J.STOPPED;arguments.length&&this.setTasks(arguments)}function ea(a){this.parent=h.Task;this.parent();this.constructor=ea;this._state=J.STOPPED;this.time=a}function x(){this.deviceId=this.orientation=null;this.browserDetect();this.orientationDetect();
this.screenDetect()}function ia(a){this.parent=H.core.Model;this.parent(a);this.constructor=H.core.Array}function R(a){this.parent=h.EventSource;this.parent(a);this.constructor=H.core.DataStorage;this.__models__={}}function T(a){this.parent=R;this.parent(a);this.constructor=H.core.LocalStorage}function M(a){this.parent=R;this.parent(a);this.constructor=M;this._xhrs={};this._headers={}}var ba=o.document,H=o.vs,z=H.util,h=H.core,Z=0;h.createId=p;h.createUniqueId=k;n.prototype={x:0,y:0,matrixTransform:function(a){var m=
new H.CSSMatrix,m=m.translate(this.x,this.y,this.z||0),a=a.multiply(m),b=new n(a.m41,a.m42);delete m;delete a;return b}};H.Point=n;j.prototype={_id:"",__i__:!1,__input_property__did__change__:!1,__config__:null,__df__:null,init:function(a){if(this.__i__)return this;this._id||(this._id=p());if(j._obs[this._id]){console.warn("Impossible to create an object with an already used id.");var m=this._id;this._id=k();console.warn('The id "'+m+'" is replaced by "'+this._id+'".')}j._obs[this._id]=this;a||this.initComponent();
this.__i__=!0;!a&&this.vsdInit&&this.vsdInit();this.__config__&&(this.configure(this.__config__),this.__config__=null);this.componentDidInitialize&&this.componentDidInitialize();this.initSkin&&(console.warn("Your application shouldn't use initSkin anymore.\n        You should rename by componentDidInitialize."),j.prototype.initSkin=function(){},this.initSkin(),j.prototype.initSkin=g);return this},initComponent:function(){},componentDidInitialize:function(){},createId:function(){console.warn("this.createId is deprecated, Use the static method vs.core.createId instead");
return p()},configure:function(a){if("object"===typeof a){var m,b,e,d=!1;this.__df__&&this.__df__.forEach(function(a){a.pausePropagation()});if(a instanceof V)if((m=this.getPropertyDescriptor("model"))&&m.set)this.model=a,d=!0;else{m=a.getModelProperties();for(e=0;e<m.length;e++)b=m[e],"id"!==b&&(this[b]=a[b],d=!0)}else if(a)for(b in a)"id"===b||"node"===b||"node_ref"===b||"view"===b||(this[b]=a[b],d=!0);this.__df__&&this.__df__.length?this.__df__.forEach(function(a){a.restartPropagation();d&&a.propagate(this)}):
d&&this.propertiesDidChange&&this.propertiesDidChange()}},propertiesDidChange:function(){return!1},toJSON:function(){return this._toJSON()},parseJSON:function(a){try{this.parseData(a&&z.parseJSON(a)||{})}catch(m){m.stack&&console.log(m.stack),console.error("vs.core.Object.parseJSON failed. "+m.toString())}},parseData:function(a){var m,b;for(m in a)b=a[m],this["_"+z.underscore(m)]=b},_toJSON:function(){var a,m,b={},e=this.getModelProperties();if(!e)return b;for(var d=0;d<e.length;d++)a=e[d],m=this["_"+
z.underscore(a)],"undefined"!=typeof m&&(m=m instanceof Date?'"/Date('+m.getTime()+')/"':m&&m.toJSON?m.toJSON():m,b[a]=m);return b},destructor:function(){delete j._obs[this._id];this.__i__=!1},isDeleted:function(){return!this.__i__},propertyChange:function(){this.__input_property__did__change__=!0;self=this;this.__df__&&this.__df__.forEach(function(a){a.propagate(self)})},outPropertyChange:function(){this.__input_property__did__change__=!0;self=this;this.__df__&&this.__df__.forEach(function(a){a.propagate(self,
!1,!0)})},propagateChange:function(a){this.propertyChange(a)},connect:function(a){return new N(this,a)},link:function(a){if(a instanceof H.core.Model)this.__model&&this.__model.unlinkTo(this),this.__model=a,this.__model.linkTo(this),this.configure(this.__model);else throw"vs.core.Object.link; parameter is not a vs.core.Model";},unlink:function(){if(this.__model){if(this.__model){this.__model.unlinkTo(this);var a=this.__model.getModelProperties();for(l=a.length,config={};l--;)config[a[l]]=null;this.configure(config)}this.__model=
g}},clone:function(a,m){function b(a,u,m){var e=u.__lookupGetter__(a),d=u.__lookupSetter__(a),c=m.__lookupGetter__(a),f=m.__lookupSetter__(a);e&&!c&&m.__defineGetter__(a,e);d&&!f&&m.__defineSetter__(a,d);!d&&!e?(e=u[a],m[a]=z.isArray(e)?e.slice():u[a]):(m.__properties__||(m.__properties__=[]),m.__properties__.push(a))}function e(a,u,m){var b=u.getOwnPropertyDescriptor(a),d=m.getOwnPropertyDescriptor(a);b&&(b.get||b.set)?d||(z.defineProperty(m,a,b),m.__properties__||(m.__properties__=[]),m.__properties__.push(a)):
(b=u[a],m[a]=z.isArray(b)?b.slice():u[a])}var d,c;m||(m={});if(m[this._id])return m[this._id];a||(a={});a.id||(a.id=p());if(z.isFunction(this.constructor))d=new this.constructor(a);else return console.warn("impossible to clone this object."),null;m[this._id]=d;var f=Object.defineProperty?e:b;for(c in this)"parent"===c||"_id"===c||"constructor"===c||0===c.indexOf("__")||this.getPropertyDescriptor(c)&&(z.isFunction(this[c])&&!z.isFunction(d[c])?d[c]=this[c]:!d.isProperty(c)&&this.isProperty(c)&&f(c,
this,d));d.__i__=!1;d.init();this._clone(d,m);this._clone_properties_value(d,m);this.__model&&(m&&m[this.__model._id]?d.link(m[this.__model._id]):d.link(this.__model));return d},_clone_properties_value:function(a){for(var m in this)"id"!=m&&this.isProperty(m)&&P(m,this,a)},_clone:function(){},getModelProperties:function(){var a=[];this.__properties__&&(a=a.concat(this.__properties__));this.constructor.__properties__&&(a=a.concat(this.constructor.__properties__));return a},isProperty:function(a){return this.__properties__&&
-1!==this.__properties__.indexOf(a)||-1!==this.constructor.__properties__.indexOf(a)?!0:!1},defineProperty:function(a,m){z.defineProperty(this,a,m);this.__properties__||(this.__properties__=[]);-1===this.__properties__.indexOf(a)&&this.__properties__.push(a)},getOwnPropertyDescriptor:function(a){return Object.getOwnPropertyDescriptor(this,a)},getPropertyDescriptor:function(a){function m(a,u){if(!a)return null;var b=Object.getPrototypeOf(a);if(!b)return null;var e=Object.getOwnPropertyDescriptor(b,
u);return e?e:m(b,u)}var b=Object.getOwnPropertyDescriptor(this,a);return b?b:m(this,a)},_super:function(){var a=this._super.caller._super_func_;a&&a.apply(this,arguments)}};z.defineClassProperty(j,"id",{get:function(){return this._id}});var P=Object.defineProperty?D:A;j._obs={};j.__propertyCloneValue=P;h.Object=j;var $=Object.prototype.constructor;H.core.Object.PROPERTY_IN=1;H.core.Object.PROPERTY_OUT=2;H.core.Object.PROPERTY_IN_OUT=3;var U=/(\w+[.\w+]*)#(\w+)/;h.createClass=function(a){var m=null,
b={},e=H.core.Object,d={},m=function(){this.parent=m.__spec.parent;m.__spec&&m.__spec._constructor?m.__spec._constructor.apply(this,arguments):m.__spec&&m.__spec.parent&&this.parent.apply(this,arguments);this.constructor=m};a&&a.parent&&(e=a.parent,delete a.parent);a&&a.properties&&(d=a.properties,delete a.properties);b.parent=e;a&&a.constructor&&a.constructor!==$&&(b._constructor=a.constructor,b._constructor._super_func_=e);m.__spec=b;a&&(m.prototype=a,a.constructor=m);e.prototype&&z.extendClass(m,
e);if(a)for(key in a)if(a.hasOwnProperty(key)){var b=a[key],c=e.prototype[key];z.isFunction(b)&&z.isFunction(c)&&(b._super_func_=c)}G(m,d);return m};r.prototype.destructor=function(){delete this.obj;delete this.func_ptr;delete this.func_name};w.prototype.run=function(){this.func_ptr.apply(g)};w.prototype.destructor=function(){delete this.args;delete this.func_ptr};var ca=[],Y=null,I=[],Q=!1,C=!1,a=!1,t=!1,s=o.postMessage?F():function(){setTimeout(K,0)};H.setImmediate=(o.setImmediate||function(u){I.push(new w(u));
a||s()}).bind(o);z.extend(H,{scheduleAction:function(a,m){z.isFunction(a)&&(m&&z.isNumber(m)?setTimeout(a,m):"__on_next_frame__"===m?H.requestAnimationFrame(a):H.setImmediate(a))},ON_NEXT_FRAME:"__on_next_frame__"});h.FORCE_EVENT_PROPAGATION_DELAY=!1;h.POINTER_START=H.POINTER_START;h.POINTER_MOVE=H.POINTER_MOVE;h.POINTER_END=H.POINTER_END;h.POINTER_CANCEL=H.POINTER_CANCEL;h.GESTURE_START=H.GESTURE_START;h.GESTURE_CHANGE=H.GESTURE_CHANGE;h.GESTURE_END=H.GESTURE_END;var b=function(a,m,b){this.srcTarget=
this.src=a;this.type=m;this.data=b};b.prototype={src:null,srcTarget:null,type:"",data:null,destructor:function(){delete this.src;delete this.srcTarget;delete this.type;delete this.data}};h.Event=b;h.EVENT_SUPPORT_GESTURE=!1;L.prototype={__bindings__:null,__node_binds__:null,destructor:function(){var a,m,b;for(a in this.__bindings__){if(m=this.__bindings__[a]){b=void 0;for(var e=m.length;e--;)b=m[e],z.free(b)}delete this.__bindings__[a]}delete this.__bindings__;for(a in this.__node_binds__)if(b=this.__node_binds__[a],
"undefined"===typeof b)console.warn("vs.core.Object.destructor, no bind <"+a+" exists.");else for(m=0;m<b.length;m++)data=b[m],data.n.removeEventListener(event,data.h);delete this.__node_binds__;j.prototype.destructor.call(this)},_clone:function(a,m){j.prototype._clone.call(this,a,m);a.__bindings__={};a.__node_binds__={}},bind:function(a,m,b){if(a&&m)return m=new r(m,b),b=this.__bindings__[a],b||(b=[],this.__bindings__[a]=b),b.push(m),m},unbind:function(a,m,b){if(a=this.__bindings__[a])for(var e,
d=0;d<a.length;)e=a[d],e.obj===m?z.isString(b)||z.isFunction(b)?e.func_name===b||e.func_ptr===b?(a.remove(d),z.free(e)):d++:(a.remove(d),z.free(e)):d++},propagate:function(a,m,e){var d=this.__bindings__[a];!d||0===d.length?this.__parent&&(e||(e=this),this.__parent.propagate(a,m,e)):(a=new b(this,a,m),e&&(a.srcTarget=e),a&&d&&(ca.push({handler_list:d,event:a}),B()))},notify:function(a){this.propagate(a.type,a.data)},nodeBind:function(a,b,e,c){if(a&&z.isString(b)){var f=this,g=null,h=null,s,t;if("undefined"===
typeof e)e="notify";else if(z.isString(e)){if(!z.isFunction(this[e])){console.warn("vs.core.Object.nodeBind, unknown function named: "+e);return}}else if(z.isFunction(e))g=e,e=g.name;else{console.error("vs.core.Object.nodeBind, invalid func parameter");return}h=!c||c===d.ANY_MASK?function(a){try{a.src=a.currentTarget,a.data=a,g||(g=f[e]),g.call(f,a)}catch(u){u.stack&&console.log(u.stack),console.error(u)}}:function(a){try{if(c||!a.altKey&&!a.ctrlKey&&!a.shiftKey&&!a.metaKey)c===d.ALT&&!a.altKey||
c===d.CTRL&&!a.ctrlKey||c===d.SHIFT&&!a.shiftKey||c===d.META&&!a.metaKey||(a.src=a.currentTarget,a.data=a,g||(g=f[e]),g.call(f,a))}catch(u){u.stack&&console.log(u.stack),console.error(u)}};t=b+e;this.__node_binds__?(s=this.__node_binds__[t],"undefined"===typeof s&&(s=[],this.__node_binds__[t]=s),s.push({n:a,h:h}),H.addPointerListener(a,b,h,!1)):console.error("nodeBind impossible")}},nodeUnbind:function(a,b,e){if(a&&z.isString(b)){var d,c;if("undefined"===typeof e)e="notify";else if(z.isString(e)){if(!z.isFunction(this[e])){console.warn("vs.core.Object.nodeUnbind, unknown function named: "+
e);return}}else if(z.isFunction(e))e=e.name;else{console.error("vs.core.Object.nodeBind, invalid func parameter");return}d=this.__node_binds__[b+e];if("undefined"===typeof d)console.warn("vs.core.Object.nodeUnbind, no bind <"+b+","+e+"> exists.");else{for(e=0;e<d.length;)c=d[e],c.n===a?(H.removePointerListener(a,b,c.h,!1),d.remove(e)):e++;a._object_=g}}}};z.extendClass(L,j);h.EventSource=L;V.prototype={__links__:null,__should_propagate_changes__:!0,_sync_service_:null,bindChange:function(a,b,e){b&&
this.bind(a?"change:"+a:"change",b,e)},unbindChange:function(a,b,e){this.unbind(a?"change:"+a:"change",b,e)},stopPropagation:function(){this.__should_propagate_changes__=!1},hasToPropagateChange:function(){return this.__should_propagate_changes__},change:function(a,m,e){this.__should_propagate_changes__=!0;a=a?"change:"+a:"change";m=new b(this,a,m);try{if(!e)for(var d=this.__links__.length;d--;)this.__links__[d].configure(this);"change"!==a&&c(m,this.__bindings__[a]);c(m,this.__bindings__.change)}catch(f){f.stack&&
console.error(f.stack),console.error(f)}},clear:function(a){var b,e=this;this.getModelProperties().forEach(function(d){b="_"+z.underscore(d);a&&H.util.free(e[b]);e[b]=g})},propagate:function(a,b,e){this.__should_propagate_changes__=!0;L.prototype.propagate.call(this,a,b,e)},linkTo:function(a){a instanceof H.core.Object&&-1===this.__links__.indexOf(a)&&this.__links__.push(a)},unlinkTo:function(a){a instanceof H.core.Object&&this.__links__.remove(a)},propertyChange:function(a){H._default_df_&&H._default_df_.propagate(this,
a);if(this.__should_propagate_changes__){var b=this.__links__.length;if(a)for(;b--;)this.__links__[b][a]=this[a];else for(;b--;)this.__links__[b].configure(this);this.change(null,null,!0)}},parseData:function(a){for(var b in a)this._parse_property(b,a[b])},_parse_property:function(a,b){var e=this.getModelProperties(),d="_"+z.underscore(a),c;b&&b.data||z.isArray(b)?(c=(new ia({id:b.id})).init(),c.parseData(b)):c=b;-1===e.indexOf(a)&&(e={},d="_"+z.underscore(a),e.set=function(a,u){return function(b){this[u]=
b;this.propertyChange(a)}}(a,d),e.get=function(a){return function(){return this[a]}}(d),this.defineProperty(a,e));this[d]=c}};z.extendClass(V,L);h.Model=V;var d=new L("__KEYBOARD__");d._handler_set_down=!1;d._handler_set_up=!1;d.managePrevent=function(a,b){var e=this.__bindings__[a],d,c;if(e)for(d=0;d<e.length;d++)if(c=e[d],c.prevent){b.preventDefault();break}};d.KEY_UP=1E3;d.ESC=27;d.ENTER=13;d.SPACE=32;d.BACKSPACE=8;d.SHIFT=16;d.CTRL=17;d.ALT=18;d.NUMLOCK=144;d.LEFT_ARROW=37;d.UP_ARROW=38;d.RIGHT_ARROW=
39;d.DOWN_ARROW=40;d.L=76;d.S=83;d.Z=90;d.META=2E3;d.ANY_MASK=3E3;d.UNDO=256;d.REDO=257;d.SAVE=258;h.KEYBOARD=d;h.KEYBOARD.bind=function(a,b,e,c){var b=L.prototype.bind.call(this,a,b,e),f=this;c&&(b.prevent=!0);a>d.KEY_UP?this._handler_set_up||(ba.documentElement.addEventListener("keyup",function(a){f.managePrevent(a.keyCode,a);f.propagate(a.keyCode+d.KEY_UP,a)},!1),this._handler_set_up=!0):this._handler_set_down||(ba.documentElement.addEventListener("keydown",function(a){(a.ctrlKey||a.metaKey)&&
!a.shiftKey&&a.keyCode===d.Z?(f.propagate(d.UNDO),a.preventDefault()):(a.ctrlKey||a.metaKey)&&a.shiftKey&&a.keyCode===d.Z?(f.propagate(d.REDO),a.preventDefault()):(a.ctrlKey||a.metaKey)&&!a.shiftKey&&a.keyCode===d.S?(f.propagate(d.SAVE),a.preventDefault()):(a.ctrlKey||a.metaKey)&&!a.shiftKey&&a.keyCode?(f.managePrevent(d.META+a.keyCode,a),f.propagate(d.META+a.keyCode)):(f.managePrevent(a.keyCode,a),f.propagate(a.keyCode,a))},!1),this._handler_set_down=!0);return b};var e=function(a){this.parent=h.EventSource;
this.parent(p());this.constructor=e;this.owner=a;this._list_of_state={};this._list_input=[];this._list_output=[];this._current_state=this._initial_state="";this._inputs={};this._output_action={}};e.prototype={destructor:function(){delete this._list_of_state;this.owner=g;delete this._list_of_state;delete this._list_input;delete this._list_output;delete this._inputs;delete this._output_action;h.EventSource.prototype.destructor.call(this)},_clone:function(a,b){L.prototype._clone.call(this,a,b);a.owner=
a.__config__.owner;a._current_state="";a._inputs={};a._output_action={}},initWithData:function(a,b,e,d){if(a&&b&&e&&d){for(var c=0;c<a.length;c++)this.addState(a[c]);for(c=0;c<b.length;c++)this.addInput(b[c]);for(c=0;c<e.length;c++)this.addOutput(e[c]);for(c=0;c<d.length;c++)this.addTransition(d[c].from,d[c].to,d[c].on,d[c].output)}},initWithMatrix:function(a){for(var b=1;b<a[0].length;b++)this.addState(a[0][b]);for(b=1;b<a.length;b++)for(var e=a[b][0],d=1;d<a[0].length;d++){var c=a[0][d],f=a[b][d];
f&&(f=f.split("/"),f[0]&&this.addInput(f[0]),f[1]&&this.addOutput(f[1]),this.addTransition(e,c,f[0],f[1]))}},addInput:function(a){a&&!this.existInput(a)&&this._list_input.push(a)},getInputs:function(){return this._list_input.slice()},existInput:function(a){return!a?void 0:-1<this._list_input.findItem(a)},addOutput:function(a){a&&!this.existOutput(a)&&this._list_output.push(a)},getOutputs:function(){return this._list_output.slice()},existOutput:function(a){return!a?void 0:-1<this._list_output.findItem(a)},
addState:function(a){if(!a||this.existState(a))return!1;this._list_of_state[a]={transitionEvents:{}};return!0},removeState:function(a){if(!a||!this.existState(a))return!1;delete this._list_of_state[a];return!0},renameState:function(a,b){if(!a||!this.existState(a)||!b||this.existState(b))return!1;this._list_of_state[b]=this._list_of_state[a];delete this._list_of_state[a];this._initial_state===a&&(this._initial_state=b);for(var e in this._list_of_state){var d=this._list_of_state[e];if(null!==d)for(var c in d.transitionEvents){var f=
d.transitionEvents[c];f.to===a&&(f.to=b)}}return!0},getListState:function(){var a=[],b;for(b in this._list_of_state)a.push(b);return a},existState:function(a){return!a?!1:this._list_of_state[a]?!0:!1},addTransition:function(a,b,e,d){a&&this.existState(a)&&b&&this.existState(b)&&e&&this.existInput(e)&&(this._list_of_state[a].transitionEvents[e]={on:e,to:b,output:d})},removeTransitionFrom:function(a,b){if(a&&this.existState(a)&&b&&this.existInput(b)){var e=this._list_of_state[a];e.transitionEvents[b]&&
delete e.transitionEvents[b]}},removeTransitionTo:function(a,b){if(a&&this.existState(a)&&b&&this.existInput(b))for(var e in this._list_of_state){var d=this._list_of_state[e],c=d.transitionEvents[b];c&&c.to===a&&delete d.transitionEvents[b]}},getTransionsToState:function(a){if(this.existState(a)){var b=[],e;for(e in this._list_of_state){var d=this._list_of_state[e];if(null!==d)for(var c in d.transitionEvents){var f=d.transitionEvents[c];f.to===a&&(f=z.clone(f),f.from=e,b.push(f))}}return b}},getTransionsFromState:function(a){if(this.existState(a)){var b=
[],e=this._list_of_state[a];if(null===e)return null;for(var d in e.transitionEvents){var c=z.clone(e.transitionEvents[d]);c.from=a;b.push(c)}return b}},switchStates:function(a,b){if(!(a===b||!this.existState(a)||!this.existState(b))){for(var e=this.getTransionsToState(a),d=this.getTransionsFromState(a),c=this.getTransionsToState(b),f=this.getTransionsFromState(b),g=0;g<e.length;){var h=e[g];h.from===b?e.remove(h):g++}for(g=0;g<d.length;)h=d[g],h.to===b?d.remove(h):g++;for(g=0;g<e.length;g++)h=e[g],
this.removeTransitionFrom(h.from,h.on);for(g=0;g<d.length;g++)h=d[g],this.removeTransitionFrom(h.from,h.on);for(g=0;g<c.length;g++)h=c[g],this.removeTransitionFrom(h.from,h.on);for(g=0;g<f.length;g++)h=f[g],this.removeTransitionFrom(h.from,h.on);for(g=0;g<e.length;g++){var h=e[g],s=h.from===b?a:h.from;this.addTransition(s,b,h.on,h.output)}for(g=0;g<d.length;g++)h=d[g],e=h.from===b?a:h.to,this.addTransition(b,e,h.on,h.output);for(g=0;g<c.length;g++)h=c[g],s=h.from===a?b:h.from,this.addTransition(s,
a,h.on,h.output);for(g=0;g<f.length;g++)h=f[g],e=h.to===a?b:h.to,this.addTransition(a,e,h.on,h.output);this._initial_state===a?this._initial_state=b:this._initial_state===b&&(this._initial_state=a)}},setInput:function(a,b,e){if(a&&b&&e){if(b.bind)b.bind(e,this);else if(b.addEventListener)this.nodeBind(b,e);else return;var d=this._inputs[b];d||(d=[],this._inputs[b]=d);d.push([e,a,b])}},setOutput:function(a,b){a&&b&&(this._output_action[a]=b)},activate:function(){if(!this._initial_state||!this._list_of_state[this._initial_state])return!1;
this.goTo(this._initial_state);return!0},goTo:function(a,b,e){if(!this.existState(a))return!1;this._current_state=a;if(b&&this._output_action[b])if(a=this._output_action[b],z.isFunction(a))a.call(this.owner,e);else if(z.isString(a))this.owner[this._output_action[b]](e);return!0},clear:function(){this._list_of_state={};delete this._list_input;delete this._list_output;this._list_input=[];this._list_output=[];this._initial_state="";for(var a in this._inputs)for(var b=this._inputs[a],e=0;e<b.length;e++){var d=
b[e][2],c=b[e][0];d.bind?d.unbind(c,this):d.addEventListener&&this.nodeUnbind(d,c)}this._current_state=""},notify:function(a){var b=this._inputs[a.src];if(b)for(var e=0;e<b.length;e++)a.type===b[e][0]&&this._list_of_state[this._current_state]&&this.fsmNotify(b[e][1],a.data)},getAccessibleStateOn:function(a){if(this._list_of_state[this._current_state])return a=this._list_of_state[this._current_state].transitionEvents[a],!a?void 0:this._list_of_state[a.to]},fsmNotify:function(a,b,e){if(this._list_of_state[this._current_state]){var d=
this._list_of_state[this._current_state].transitionEvents[a];if(!d)return!1;this.goTo(d.to,d.output,{on:a,data:b},e);return!0}}};z.extendClass(e,L);z.defineClassProperty(e,"initialState",{set:function(a){a?this.existState(a)&&(this._initial_state=a):this._initial_state=g},get:function(){return this._initial_state}});h.Fsm=e;var v=1;S.prototype={propagate_values:function(a){var b=this.dataflow_edges[a._id],e,d=0,c=0,f=0,g,h,s,t=0,j=0,B=null,x;if(b){t=b.length;for(d=0;d<t;d++)if(e=b[d])if(s=e[0])if((e=
e[2])&&e.length)for(c=0;c<e.length;c++){g=e[c];B=g[3];x=[];h=g[1];j=h.length;for(f=0;f<j;f++)x.push(h[f].call(a));B&&(x=B.apply(o,x),z.isArray(x)||(x=[x]));h=g[2];j=h.length;if(x.length!==j){console.error("Dataflow, invalid parameters");return}for(f=0;f<j;f++)g=h[f],g.call(s,x[f]);s.__input_property__did__change__=!0}}},propagate:function(a,b,e){if(!this.is_propagating&&!this.__shouldnt_propagate__){this.is_propagating=!0;var b=0,d=this.dataflow_node,c=d.length;if(a){for(;b<c&&d[b]!==a;)b++;if(b<
c-1){if(!e&&a.propertiesDidChange&&a.propertiesDidChange()){this.is_propagating=!1;return}this.propagate_values(a);b++}else b=0}for(;b<c;b++)if((a=d[b])&&a.__input_property__did__change__)a.__input_property__did__change__=!1,(!a.propertiesDidChange||!a.propertiesDidChange())&&this.propagate_values(a);this.is_propagating=!1}},connect:function(a,b,e,d,c){var f,g,h,s,t=v++;f=z.isString(a)?a:a._id;if(a=j._obs[f]){-1===a.__df__.indexOf(this)&&a.__df__.push(this);a=z.isString(e)?e:e._id;if(z.isString(b))b=
[b];else if(!z.isArray(b)){console.warn("DataFlow.connect, error");return}if(z.isString(d))d=[d];else if(!z.isArray(d)){console.warn("DataFlow.connect, error");return}if(!c&&d.length!==b.length)console.warn("DataFlow.connect, error");else{-1===this._list_node.indexOf(f)&&this._list_node.push(f);-1===this._list_node.indexOf(a)&&this._list_node.push(a);e=this._edges_from[f];e||(e=[],this._edges_from[f]=e);g=e.length;for(f=0;f<g;f++)if(h=e[f],h[0]===a){s=h[2];break}s||(s=[],e.push([a,1,s]));c=[t,b.slice(),
d.slice(),c];s.push(c);return t}}},unconnect:function(){1===arguments.length?this._unconnect_by_id(arguments[0]):this._unconnect_by_params.apply(this,arguments)},_unconnect_by_params:function(a,b,e,d){function c(a,b){b.forEach(function(b){b=a.indexOf(b);-1!==b&&a.remove(b)})}var f,g;v++;var h,a=z.isString(a)?a:a._id;if(f=this._edges_from[a])if((a=j._obs[a])&&-1!==a.__df__.indexOf(this)){e=z.isString(e)?e:e._id;if(z.isString(b))b=[b];else if(!z.isArray(b)){console.warn("DataFlow.unconnect, error");
return}if(z.isString(d))d=[d];else if(!z.isArray(d)){console.warn("DataFlow.unconnect, error");return}for(a=0;a<f.length;a++)if(g=f[a],g[0]===e){g=g[2];for(var s=0;s<g.length;)h=g[s],properties_out_s=h[1],properties_in_s=h[2],c(properties_out_s,b),c(properties_in_s,d),0===properties_out_s.length||0===d.length?g.remove(s):s++;0===g.length?f.remove(a):a++}else a++}},_unconnect_by_id:function(a){for(var b in this._edges_from){var e=this._edges_from[b];if(e)for(var d=e.length,c=0;c<d;c++)for(var f=e[c][2],
g=0,h=f.length,s;g<h;g++)if((s=f[g])&&s[0]===a){f.remove(g);return}}},_sort:function(){var a=this._list_node.length,b=[],e,d,c,f;for(e=0;e<a;e++)b[e]=0;for(c in this._edges_from){f=this._edges_from[c];for(d=0;d<f.length;d++)a=this._list_node.findItem(f[d][0]),b[a]++}a=this._list_node.slice();e=[];for(c=0;0!==a.length;){d=this._array_min(b);f=b[d];b.remove(d);var g=a[d];a.remove(d);0<f&&c++;e.push(g);if(f=this._edges_from[g])for(d=0;d<f.length;d++)g=a.findItem(f[d][0]),-1!==g&&b[g]--}this._list_node=
e;this.is_sorted=!0;this.is_cyclic=0<c;0<c&&(b=Object.keys(this._edges_from).length,console.warn("WARNING: Cycles detected during topological sort.%d dependencies out of %d have been violated.\n",c,b));return!this.is_cyclic},_array_min:function(a){var b=a.length;if(0===b)return-1;if(1===b)return 0;for(var b=0,e=a[b],d=1;d<a.length;d++)a[d]<e&&(e=a[d],b=d);return b},build:function(){this._sort();this._data_optimize(this._edges_from,this._list_node)},pausePropagation:function(){this.__shouldnt_propagate__++},
restartPropagation:function(){this.__shouldnt_propagate__--;0>this.__shouldnt_propagate__&&(this.__shouldnt_propagate__=0)},_data_optimize:function(a,b){if(b&&a){var e=[],d,c,f,g,h,s,t,x,B,v,k,n,o,r,p,y;for(d=0;d<b.length;d++)v=b[d],(n=j._obs[v])&&e.push(n);this.dataflow_node=e;e={};for(v in a)if(n=j._obs[v])if(g=a[v],h=[],e[v]=h,g)for(d=0;d<g.length;d++)if(s=g[d],c=[3],h.push(c),k=s[0],k=j._obs[k]){c[0]=k;c[1]=s[1];s=s[2];t=[];c[2]=t;for(c=0;c<s.length;c++){x=s[c];B=[4];t.push(B);B[0]=x[0];z.isFunction(x[3])&&
(B[3]=x[3]);p=x[1];y=[];for(f=0;f<p.length;f++)o=p[f],(r=n.getPropertyDescriptor(o))&&(r.get?y.push(r.get):y.push(function(y){return function(){return this[y]}}("_"+z.underscore(o))));B[1]=y;p=x[2];y=[];for(f=0;f<p.length;f++)o=p[f],(r=k.getPropertyDescriptor(o))&&(r.set?y.push(r.set):y.push(function(y){return function(a){this[y]=a}}("_"+z.underscore(o))));B[2]=y}}this.dataflow_edges=e}}};h.DataFlow=S;H._default_df_=new S;var N=function(a,b){this._base_object=a;this._previous_object=g;this.property_out=
b};N.prototype.to=function(a,b){H._default_df_.connect(this._base_object,this.property_out,a,b);this._previous_object=a;return this};N.prototype.connect=function(a){return new N(this._previous_object||this._base_object,a)};J.STARTED=1;J.STOPPED=0;J.PAUSED=2;J.prototype={delegate:null,_state:J.STOPPED,destructor:function(){this.stop();h.Object.prototype.destructor.call(this)},_clone:function(a,b){h.Object.prototype.destructor._clone.call(this,a,b);a._state=this._state},start:function(){},stop:function(){},
pause:function(){}};z.extendClass(J,h.Object);z.defineClassProperty(J,"state",{get:function(){return this._state}});H.par=function(){if(0!==arguments.length){var a=new aa;a.setTasks(arguments);return a}};aa.prototype={_tasksAndParams:null,_tasksWillEnded:null,setTasks:function(a){if(this._state!==J.STOPPED)return!1;var b,e,d,c;this._tasksAndParams=[];for(b=0;b<a.length;b++)if(e=a[b])d=c=null,z.isArray(e)?1===e.length?d=e[0]:2===e.length&&(d=e[0],c=e[1]):(d=e,c=null),d?!d.start||!d.stop||!d.pause?
console.warn("Invalid task: "+d.toString()):this._tasksAndParams.push([d,c]):console.warn("Undefined task")},start:function(a){if(this._state===J.STARTED)return!1;this._tasksWillEnded=this._tasksAndParams.length;this._state=J.STARTED;var b,e;for(e=0;e<this._tasksAndParams.length;e++)b=this._tasksAndParams[e],b[0].delegate=this,b[0].start(b[1]?b[1]:a);return!0},stop:function(){if(this._state===J.STOPPED)return!1;this._state=J.STOPPED;var a,b;for(b=0;b<this._tasksAndParams.length;b++)a=this._tasksAndParams[b],
a[0].stop();return!0},pause:function(){if(this._state===J.PAUSED)return!1;this._state=J.PAUSED;var a,b;for(b=0;b<this._tasksAndParams.length;b++)a=this._tasksAndParams[b],a[0].pause();return!0},taskDidStop:function(){this._state=J.STOPPED;this._tasksWillEnded--;0===this._tasksWillEnded&&this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this)},taskDidPause:function(){this._state=J.STOPPED;this._tasksWillEnded--;0===this._tasksWillEnded&&this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this)},
taskDidEnd:function(){this._state=J.STOPPED;this._tasksWillEnded--;0===this._tasksWillEnded&&this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this)}};z.extendClass(aa,J);H.seq=function(){if(0!==arguments.length){var a=new W;a.setTasks(arguments);return a}};W.prototype={_tasksAndParams:null,_nextTaskToStart:0,_startParam:null,setTasks:function(a){if(this._state!==J.STOPPED)return!1;var b,e,d,c;this._tasksAndParams=[];for(b=0;b<a.length;b++)if(e=a[b])d=c=null,z.isArray(e)?1===e.length?
d=e[0]:2===e.length&&(d=e[0],c=e[1]):(d=e,c=null),d?!d.start||!d.stop||!d.pause?console.warn("Invalid task: "+d.toString()):this._tasksAndParams.push([d,c]):console.warn("Undefined task")},start:function(a){if(this._state===J.STARTED)return!1;var b;this._state===J.PAUSED?b=this._tasksAndParams[this._nextTaskToStart-1]:(b=this._tasksAndParams[this._nextTaskToStart],this._nextTaskToStart++);if(!b)return this._nextTaskToStart=0,this._state=J.STOPED,!1;this._state=J.STARTED;this._startParam=a;b[0].delegate=
this;b[0].start(b[1]?b[1]:a);return!0},stop:function(){if(this._state===J.STOPPED)return!1;this._state=J.STOPPED;var a=this._tasksAndParams[this._nextTaskToStart-1];this._nextTaskToStart=0;if(!a)return!1;a[0].stop();return!0},pause:function(){if(this._state===J.PAUSED)return!1;this._state=J.PAUSED;var a=this._tasksAndParams[this._nextTaskToStart-1];if(!a)return!1;a[0].pause();return!0},taskDidStop:function(){this._state=J.STOPPED;0===this._nextTaskToStart&&(this._nextTaskToStart-=1);this.delegate&&
this.delegate.taskDidStop&&this.delegate.taskDidStop(this)},taskDidPause:function(){this._state=J.PAUSED;this._nextTaskToStart-=1;this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this)},taskDidEnd:function(){this._state=J.STOPPED;this._nextTaskToStart<this._tasksAndParams.length?this.start(this._startParam):(this._nextTaskToStart=0,this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this))}};z.extendClass(W,J);ea.prototype={_time:0,_left_time:0,_timer:null,_start_time:0,
start:function(){var a=this,b=this._time;if(this._state===J.STARTED)return!1;this._state===J.PAUSED?b=this._left_time:this._left_time=b;this._state=J.STARTED;this._start_time=(new Date).getTime();a=this;this._timer=setTimeout(function(){a._state=J.STOPPED;a.delegate&&a.delegate.taskDidEnd&&a.delegate.taskDidEnd(a)},b);return!0},stop:function(){if(this._state===J.STOPPED)return!1;this._state=J.STOPPED;clearTimeout(this._timer);this._timer=null;this._left_time=this._time;this.delegate&&this.delegate.taskDidStop&&
this.delegate.taskDidStop(this);return!0},pause:function(){if(this._state===J.PAUSED)return!1;this._state=J.PAUSED;this._left_time=this._left_time-(new Date).getTime()+this._start_time;this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this);return!0}};z.extendClass(ea,J);z.defineClassProperty(ea,"state",{set:function(a){z.isNumber(a)&&(this._time=a)}});z.extend(h,{Task:J,Task_PAR:aa,Task_SEQ:W,TaskWait:ea});x.OS_UNKNOWN=0;x.OS_WINDOWS=1;x.OS_MACOS=2;x.OS_LINUX=4;x.OS_IOS=5;x.OS_WP7=
6;x.OS_BLACK_BERRY=7;x.OS_SYMBIAN=8;x.OS_ANDROID=9;x.OS_MEEGO=10;x.SR_UNKNOWN=0;x.SR_QVGA=1;x.SR_WQVGA=2;x.SR_HVGA=4;x.SR_VGA=5;x.SR_WVGA=6;x.SR_FWVGA=7;x.SR_SVGA=8;x.SR_DVGA=9;x.SR_WDVGA=10;x.SR_XGA=11;x.SR_N_HD=12;x.SR_Q_HD=13;x.SR_WXGA=14;x.SR_QXGA=15;x.BROWSER_UNKNOWN=0;x.BROWSER_CHROME=1;x.BROWSER_SAFARI=2;x.BROWSER_OPERA=3;x.BROWSER_FIREFOX=4;x.BROWSER_MSIE=5;x.SS_UNKNOWN=0;x.SS_4_INCH=1;x.SS_7_INCH=2;x.SS_10_INCH=3;x.prototype={os:x.OS_UNKNOWN,browser:x.BROWSER_UNKNOWN,screenResolution:x.SR_UNKNOWN,
screenRatio:0,screenSize:x.SS_UNKNOWN,virtualScreenSize:null,browserDetect:function(){function a(b){for(var e=b.length;e--;){var d=b[e].string,c=b[e].prop;if(d){if(d.match(b[e].subString))return b[e].identity}else if(c)return b[e].identity}}this.browser=a(x._data_browser)||x.BROWSER_UNKNOWN;this.os=a(x._data_OS)||x.OS_UNKNOWN},orientationDetect:function(){this.orientation=o.orientation?o.orientation:o.outerWidth>o.outerHeight?90:0},_getScreenSize:function(){return o.device&&o.device.width?[o.device.width,
o.device.height]:this.os>=x.OS_IOS&&this.os<=x.OS_MEEGO?[o.screen.width,o.screen.height]:[o.outerWidth,o.outerHeight]},screenDetect:function(){var a=o.devicePixelRatio,b;a||(a=1);b=this._getScreenSize();if(b[0]>b[1]){var e=b[0];b[0]=b[1];b[1]=e}this.screenResolution=x._getScreenResolutionCode(b[0],b[1]);this.screenRatio=b[1]/b[0];a*=160;o.device&&o.device.dpi&&(a=device.dpi);b=Math.sqrt(b[0]*b[0]+b[1]*b[1])/a;6>b?this.screenSize=x.SS_4_INCH:9>b?this.screenSize=x.SS_7_INCH:11>b&&(this.screenSize=x.SS_10_INCH)},
getOrientation:function(){return this.orientation},setDeviceId:function(a){z.isString(a)&&(this.screenResolution=x.SR_UNKNOWN,this.deviceId=a,-1!=a.indexOf("wp7")?(this.os=x.OS_WP7,this.screenResolution=x.SR_WVGA,this.screenRatio=1.6,this.screenSize=x.SS_4_INCH):-1!=a.indexOf("iphone")?(this.os=x.OS_IOS,this.screenResolution=x.SR_HVGA,-1!=a.indexOf("_3_2")?this.screenRatio=1.5:-1!=a.indexOf("_16_9")&&(this.screenRatio=16/9),this.screenSize=x.SS_4_INCH):-1!=a.indexOf("ipad")?(this.os=x.OS_IOS,this.screenResolution=
x.SR_XGA,this.screenRatio=4/3,this.screenSize=x.SS_10_INCH):-1!=a.indexOf("android")&&(this.os=x.OS_ANDROID,-1!=a.indexOf("_3_2")?this.screenRatio=1.5:-1!=a.indexOf("_16_10")?this.screenRatio=1.6:-1!=a.indexOf("_16_9")&&(this.screenRatio=16/9),-1!=a.indexOf("android_4")?this.screenSize=x.SS_4_INCH:-1!=a.indexOf("android_7")?this.screenSize=x.SS_7_INCH:-1!=a.indexOf("android_10")&&(this.screenSize=x.SS_10_INCH)))},generateDeviceId:function(a){if(a&&this.deviceId)return this.deviceId;this.orientationDetect();
this.screenDetect();a="";switch(this.os){case x.OS_IOS:screenSize=this._getScreenSize();if(320===screenSize[0]||480===screenSize[0])a+="iphone";if(640===screenSize[0]||960===screenSize[0])a+="iphone";if(768===screenSize[0]||1024===screenSize[0])a+="ipad";if(1536===screenSize[0]||2048===screenSize[0])a+="ipad";break;case x.OS_ANDROID:a+="android";break;case x.OS_WP7:a+="wp7";break;case x.OS_BLACK_BERRY:a+="blackberry"}switch(this.screenSize){case x.SS_4_INCH:a+="_3";break;case x.SS_7_INCH:a+="_7";
break;case x.SS_10_INCH:a+="_10"}0.1>Math.abs(o.deviceConfiguration.screenRatio-1.5)?a+="_3_2":0.1>Math.abs(o.deviceConfiguration.screenRatio-4/3)?a+="_4_3":0.1>Math.abs(o.deviceConfiguration.screenRatio-1.6)?a+="_16_10":0.1>Math.abs(o.deviceConfiguration.screenRatio-16/9)&&(a+="_16_9");switch(this.orientation){case 90:case -90:a+="_l";break;case 0:case 180:a+="_p"}return a},setOrientation:function(a,b){var e,d;d=o.innerWidth;var c=o.innerHeight,f;d>c&&(f=c,c=d,d=f);for(e in h.Object._obs)if(d=h.Object._obs[e])d._orientationWillChange&&
d._orientationWillChange(a),d.orientationWillChange&&d.orientationWillChange(a);this.targetId&&(e=this.targetId.replace("_p",""),e=e.replace("_l",""),this.targetId=0===a||180===a?e+"_p":e+"_l",this.setActiveStyleSheet(this.targetId));this.orientation=a;this.virtualScreenSize&&cordova&&cordova.exec&&cordova.exec(null,null,"VSD_Application","setAppSize",[{width:this.virtualScreenSize[0],height:this.virtualScreenSize[1]}]);e=function(){var b,e;for(b in h.Object._obs)(e=h.Object._obs[b])&&e.orientationDidChange&&
e.orientationDidChange(a)};b?e.call(this):setTimeout(e,100)},setActiveStyleSheet:function(a){z.setActiveStyleSheet(a)},registerTargetId:function(){}};x._getScreenResolutionCode=function(a,b){a*=o.devicePixelRatio;b*=o.devicePixelRatio;if(240===a&&320===b)return x.SR_QVGA;if(240===a&&400===b)return x.SR_WQVGA;if(320===a&&480===b)return x.SR_HVGA;if(480===a&&640===b)return x.SR_VGA;if(480===a&&800===b)return x.SR_WVGA;if(320===a&&854===b)return x.SR_WFVGA;if(600===a&&800===b)return x.SR_SVGA;if(640===
a&&960===b)return x.SR_DVGA;if(640===a&&1136===b)return x.SR_WDVGA;if(768===a&&1024===b)return x.SR_XGA;if(360===a&&640===b)return x.SR_N_HD;if(540===a&&960===b)return x.SR_Q_HD;if(720===a&&1280===b||768===a&&1280===b||800===a&&1280===b)return x.SR_WXGA;if(1536===a&&2048===b)return x.SR_QXGA};x._estimateScreenSize=function(a){var b=a.width/a.xdpi,a=a.height/a.ydpi,b=Math.sqrt(b*b+a*a);return 5>b?3:8>b?7:10};x._data_browser="undefined"!=typeof navigator?[{string:navigator.userAgent,subString:"Chrome",
identity:x.BROWSER_CHROME},{string:navigator.vendor,subString:"Apple",identity:x.BROWSER_SAFARI,versionSearch:"Version"},{prop:o.opera,identity:x.BROWSER_OPERA,versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:x.BROWSER_FIREFOX},{string:navigator.userAgent,subString:"MSIE",identity:x.BROWSER_MSIE,versionSearch:"MSIE"}]:[];x._data_OS="undefined"!=typeof navigator?[{string:navigator.platform,subString:"Win",identity:x.OS_WINDOWS},{string:navigator.platform,subString:"Mac",
identity:x.OS_MACOS},{string:navigator.platform,subString:"Linux",identity:x.OS_LINUX},{string:navigator.userAgent,subString:"iPad|iPhone|iPod",identity:x.OS_IOS},{string:navigator.userAgent,subString:"Android",identity:x.OS_ANDROID}]:[];"undefined"!=typeof o&&!o.deviceConfiguration&&(o.deviceConfiguration=new x);h.DeviceConfiguration=x;HTTPRequest=function(a){this.parent=h.EventSource;this.parent(a);this.constructor=HTTPRequest;this._headers={};this.__xhrs=[]};HTTPRequest.prototype={_url:"",_method:"GET",
_login:"",_password:"",_content_type:"",_headers:null,__xhrs:null,destructor:function(){this.__xhrs.forEach(function(a){if(a&&a.onload)a.onabort()});this._headers=this.__xhrs=null;L.prototype.destructor.call(this)},setHeaders:function(a){if(a)for(var b in a)this._headers[b]=a[b]},send:function(a){var b=new XMLHttpRequest;try{this._response_xml=this._response_text=null;b.open(this._method,this._url,!0,this._login||null,this._password||null);b.setRequestHeader("Cache-Control","no-cache");b.setRequestHeader("Pragma",
"no-cache");for(var e in this._headers)b.setRequestHeader(e,this._headers[e]);this._headers={};this._content_type&&b.setRequestHeader("Content-Type",this._content_type);var d=this;b.onabort=function(){b.onload=b.onerror=b.onabort=null;delete b;d.propagate("loaderror",{status:"aborted"})};b.onerror=function(a){b.onload=b.onerror=b.onabort=null;delete b;d.propagate("loaderror",{status:"failed",response:a})};b.onload=function(){function a(e){d.propagate("loaderror",e);delete b;return!1}b.onload=b.onerror=
b.onabort=null;if(4!==b.readyState)return a(xkr.statusText);return 200===b.status?(d._response_text=b.responseText,d._response_xml=b.responseXML,d.propagateChange(),d.propagate("textload",d._response_text),d._response_xml&&d.propagate("xmlload",d._response_xml),delete b,!0):a({status:b.statusText,response:b.response})};b.send(a);this.__xhrs.push(b)}catch(c){b.onload=b.onerror=b.onabort=null,delete b,this.propagate("loaderror",c)}}};z.extendClass(HTTPRequest,h.EventSource);z.defineClassProperties(HTTPRequest,
{url:{set:function(a){z.isString(a)&&(this._url=a)}},method:{set:function(a){"GET"!=a&&"POST"!=a||(this._method=a)}},login:{set:function(a){z.isString(a)&&(this._login=a)}},password:{set:function(a){z.isString(a)&&(this._password=a)}},contentType:{set:function(a){z.isString(a)&&(this._content_type=a)}},responseText:{get:function(){return this._response_text}},responseXML:{get:function(){return this._response_xml}}});h.HTTPRequest=HTTPRequest;var da=h.createClass({parent:h.EventSource,_url:"",_clb_param_name:"callback",
__index:0,properties:{url:{set:function(a){z.isString(a)&&(this._url=a)}},clbParamName:{set:function(a){z.isString(a)&&(this._clb_param_name=a)}},responseJson:{get:function(){return this._response_json}}},send:function(){var a=this,b="jsonp"+a._id+a.__index++,e=this._clb_param_name+"="+b,d=a._url,c=d.length-1,d="?"===d[c]?d+e:"-1"!==d.indexOf("?")?d+("&"+e):"/"===d[c]?d.substr(0,c)+"?"+e:d+("?"+e),f=z.importFile(d,null,null,"js"),h=function(){f&&(f.parentElement.removeChild(f),f=g)},s=setTimeout(function(){h();
b in o&&delete o[b];a.propagate("loaderror","Impossible to load data")},3E3);o[b]=function(e){clearTimeout(s);h();delete o[b];e&&(e.error?a.propagate("loaderror",e.error):(a._response_json=e,a.outPropertyChange(),a.propagate("jsonload",e)))}}});h.AjaxJSONP=da;ia.prototype={_data:null,_model_class:null,_index:null,_value:null,initComponent:function(){this._data=[];this.forEach=Array.prototype.forEach.bind(this._data)},forEach:function(){},item:function(a){if(z.isNumber(a)&&!(0>a||a>this._data.length))return this._data[a]},
_instanciateModel:function(a){if(a instanceof H.core.Model)return a;if(a instanceof Object&&this._model_class)try{var b=new this._model_class(a);b.init();return b}catch(e){e.stack&&console.log(e.stack),console.error(e.toString())}return a},add:function(){for(var a=[],b=0;b<arguments.length;b++)a.push(this._instanciateModel(arguments[b]));this._data.push.apply(this._data,a);this.hasToPropagateChange()&&this.change("add");return this.length},addAtIndex:function(){if(!(2>arguments.length)){for(var a=
[],b=1;b<arguments.length;b++)a.push(this._instanciateModel(arguments[b]));this._data.splice.apply(this._data,a);this.hasToPropagateChange()&&this.change("add",{from:a[0],to:a.length-2})}},remove:function(a,b){this._data.remove(a,b);this.hasToPropagateChange()&&this.change("remove",{from:a,to:b})},removeAll:function(){this._data=[];this._index=-1;this._value=g;this.forEach=Array.prototype.forEach.bind(this._data);this.hasToPropagateChange()&&this.change("removeall")},clear:function(a){var b=0,e=this._data.length;
if(a)for(;b<e;b++)H.util.free(this._data[b]);this.removeAll()},indexOf:function(){throw"method not yet implemented";},toJSON:function(){var a=this._toJSON(),b=0,e=this._data.length,d;for(a.data=[];b<e;b++)d=this._data[b],"undefined"!=typeof d&&(d instanceof Date?d='"/Date('+d.getTime()+')/"':d&&d.toJSON&&(d=d.toJSON()),a.data.push(d));return a},parseData:function(a){function b(a){g._data=[];g.forEach=Array.prototype.forEach.bind(g._data);for(e=0;e<a.length;e++)f=a[e],(c=g._model_class?(new g._model_class).init():
z.isArray(f)?(new ia).init():z.isUndefined(f)||z.isString(f)||z.isNumber(f)||"boolean"==typeof f||null==f||f instanceof Date?null:(new V).init())?(c.parseData(f),g.add(c)):g.add(f)}var e,d,c,f,g=this;if(z.isArray(a))b(a);else for(d in a)"data"==d?b(a.data):this._parse_property(d,a[d])}};z.extendClass(ia,h.Model);z.defineClassProperties(ia,{data:{set:function(a){if(!this.__i__)throw"Component not initialized";if(z.isArray(a))this._data=a.slice(),this.forEach=Array.prototype.forEach.bind(this._data);
else if(a instanceof ia)this._data=a._data.slice(),this.forEach=Array.prototype.forEach.bind(this._data);else return;this.hasToPropagateChange()&&this.change("add")},get:function(){if(!this.__i__)throw"Component not initialized";return this._data.slice()}},length:{get:function(){if(!this.__i__)throw"Component not initialized";return this._data.length}},modelClass:{set:function(a){z.isFunction(a)&&(this._model_class=a)}},index:{set:function(a){z.isString(a)&&(a=parseInt(a,10));if(z.isNumber(a)&&!(0>
a||a>this._data.length))this._index=a=Math.floor(a),this._value=this._data[a],this.propertyChange("value")},get:function(){return this._index}},value:{get:function(){return this._value}}});h.Array=ia;R.prototype={__models__:null,registerModel:function(a,b){a&&b&&(this.__models__[a]&&error.log("Model with the name already registered."),this.__models__[a]=b,b._sync_service_=this)},removeModel:function(a){a&&this.__models__[a]&&delete this.__models__[a]},save:function(){},load:function(){}};z.extendClass(R,
h.EventSource);h.DataStorage=R;T.prototype={save:function(a){function b(a){var d,c=e.__models__[a];if(c){try{d=JSON.stringify(c)}catch(f){f.stack&&console.log(f.stack),error.log(f),e.propagate("error",f)}localStorage.setItem(a,d)}}var e=this;if(a)b(a);else for(a in this.__models__)b(a);e.propagate("save")},load:function(a){function b(a){try{var d=e.__models__[a];if(d){var c=localStorage.getItem(a);d.parseJSON(c)}}catch(f){f.stack&&console.log(f.stack),console.error("LocalStorate.load failed. "+f.toString())}}
var e=this;if(a)b(a);else for(a in this.__models__)b(a);e.propagate("load")}};z.extendClass(T,R);h.LocalStorage=T;M.XHR=0;M.JSONP=1;M.prototype={_xhrs:null,_mode:0,_headers:null,_url:"",initComponent:function(){R.prototype.initComponent.call(this)},destructor:function(){R.prototype.destructor.call(this)},setHeaders:function(a){if(a){this._headers={};for(var b in a)this._headers[b]=a[b]}},save:function(a){function b(a){var d,c=e.__models__[a];if(c){try{d=JSON.stringify(c)}catch(f){f.stack&&console.log(f.stack),
error.log(f),e.propagate("error",f)}M.setItem(a,d)}}var e=this;if(a)b(a);else for(a in this.__models__)b(a);e.propagate("save")},load:function(a){this._mode===M.XHR&&this._load_xhr(a);this._mode===M.JSONP&&this._load_jsonp(a)},_load_xhr:function(a){function b(a){try{var d=e.__models__[a];if(d){var c=e._url+a,f=d.getModelProperties(),g=0;if(f&&f.length)for(var c=c+"?",h=0;h<f.length;h++){var s=f[h],t=d["_"+z.underscore(s)];if(!("id"===s||"modelClass"===s))if(z.isString(t)||z.isNumber(t))g++&&(c+="&"),
c+=s+"="+escape(t)}var m=(new HTTPRequest).init();e._xhrs[m.id]=a;m.bind("textload",e,e._process_xhr_result);m.setHeaders(e._headers);m.url=c;m.method="GET";m.contentType="application/json";m.send()}}catch(j){j.stack&&console.log(j.stack),console.error("LocalStorate.load failed. "+j.toString())}}var e=this;if(a)b(a);else for(a in this.__models__)b(a)},_load_jsonp:function(a){function b(a){try{var d=e.__models__[a];if(d){var c=e._url+a+".json",f=d.getModelProperties(),g=0;if(f&&f.length)for(var c=
c+"?",h=0;h<f.length;h++){var s=f[h],t=d["_"+z.underscore(s)];if(!("id"===s||"modelClass"===s))if(z.isString(t)||z.isNumber(t))g++&&(c+="&"),c+=s+"="+escape(t)}var m=(new da).init();e._xhrs[m.id]=a;m.bind("jsonload",e,e._process_json_result);m.url=c;m.send()}}catch(j){j.stack&&console.log(j.stack),console.error("LocalStorate.load failed. "+j.toString())}}var e=this;if(a)b(a);else for(a in this.__models__)b(a)},_sync:function(){},_process_xhr_result:function(a){var b=a.data,a=a.src,e=this._xhrs[a.id];
a.unbind("textload",this,this._process_xhr_result);H.util.free(a);delete this._xhrs[a.id];if(!b)return console.error("Failed to parse rss document that is null."),!1;if(a=this.__models__[e])a.parseJSON(b),a.change(),this.propagate("load",a)},_process_json_result:function(a){var b=a.data,a=a.src,e=this._xhrs[a.id];a.unbind("textload",this,this._process_json_result);H.util.free(a);delete this._xhrs[a.id];if(a=this.__models__[e])a.parseData(b),a.change(),this.propagate("load",a)}};H.util.extendClass(M,
R);H.util.defineClassProperties(M,{url:{set:function(a){H.util.isString(a)&&(this._url=a)},get:function(){return this._url}},mode:{set:function(a){if(0===a||1===a)this._mode=a}}});H.core.RestStorage=M})(window);
(function(o,g){function p(c){this.parent=w.Object;this.parent(c);this.constructor=p}function k(c){c?(this.url=c.getAttribute("url"),this.length=c.getAttribute("length"),this.type=c.getAttribute("type")):this.type=this.length=this.url=null}function n(c){c?(this.isPermaLink=c.getAttribute("isPermaLink"),this.value=c.textContent):this.value=this.isPermaLink=null}function j(c){c?(this.url=c.getAttribute("url"),this.value=c.textContent):this.value=this.url=null}function q(c){for(var f="title,link,description,author,comments,pubDate".split(","),
g="_title,_link,_description,_author,_comments,_pub_date".split(","),o=null,r=0;r<f.length;r++)if(o=c.getElementsByTagName(f[r])[0])this[g[r]]=o.textContent;this._category=new A(c.getElementsByTagName("category")[0]);this._enclosure=new k(c.getElementsByTagName("enclosure")[0]);this._guid=new n(c.getElementsByTagName("guid")[0]);this._source=new j(c.getElementsByTagName("source")[0]);if(this._image=new D(c.getElementsByTagName("content")[0]))this._image_url=this.image.url}function A(c){c?(this.domain=
c.getAttribute("domain"),this.value=c.textContent):this.value=this.domain=null}function D(c){if(c){imgAttribs="url,title,link,width,height,description".split(",");for(var f=0;f<imgAttribs.length;f++)c.getAttribute(imgAttribs[f])&&(this[imgAttribs[f]]=c.getAttribute(imgAttribs[f]))}else this.description=this.height=this.width=this.link=this.url=null}var G=o.vs,r=G.util,w=G.core,c=G.data;p.prototype={_src:"",_anchor:"",_query:"",_file:"",_directory:"",_path:"",_relative:"",_port:0,_host:"",_password:"",
_user:"",_authority:"",_protocol:"",_query_key:null,__options:{strictMode:!1,key:"_source,_protocol,_authority,_userInfo,_user,_password,_host,_port,_relative,_path,_directory,_file,_query,_anchor".split(","),q:{name:"_query_key",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},
parse:function(c){if(r.isString(c)){this._src=c;for(var f=this.__options,c=f.parser[f.strictMode?"strict":"loose"].exec(c),g=14,j=this;g--;)this[f.key[g]]=c[g]||"";this[f.q.name]={};this[f.key[12]].replace(f.q.parser,function(c,g,k){g&&(j[f.q.name][g]=k)});this.outPropertyChange("src")}}};r.extendClass(p,w.Object);r.defineClassProperties(p,{src:{set:function(c){r.isString(c)&&this.parse(c)},get:function(){return this._src}},anchor:{get:function(){return this._anchor}},query:{get:function(){return this._query}},
queryKey:{get:function(){return this._query_key}},file:{get:function(){return this._file}},directory:{get:function(){return this._directory}},path:{get:function(){return this._path}},port:{get:function(){return this._port}},relative:{get:function(){return this._relative}},host:{get:function(){return this._host}},password:{get:function(){return this._password}},user:{get:function(){return this._user}},authority:{get:function(){return this._authority}},protocol:{get:function(){return this._protocol}}});
c.URL=p;q.prototype={_title:"",_link:"",_description:"",_author:"",_comments:"",_pub_date:"",_category:null,_enclosure:null,_guid:null,_source:null,_image:null,_image_url:"",_category:null,toString:function(){return this.title}};r.defineClassProperties(q,{title:{get:function(){return this._title}},link:{get:function(){return this._link}},description:{get:function(){return this._description}},author:{get:function(){return this._author}},comments:{get:function(){return this._comments}},pubDate:{get:function(){return this._pub_date}},
category:{get:function(){return this._category}},enclosure:{get:function(){return this._enclosure}},guid:{get:function(){return this._guid}},source:{get:function(){return this._source}},image:{get:function(){return this._image}},imageUrl:{get:function(){return this._image_url}}});var f=function(c){this.parent=G.core.EventSource;this.parent(c);this.constructor=f};f.prototype={_items:null,_title:null,_link:null,_description:null,_language:null,_copyright:null,_managing_editor:null,_web_master:null,
_pub_date:null,_last_build_date:null,_generator:null,_docs:null,_ttl:null,_rating:null};r.extendClass(f,w.EventSource);r.defineClassProperties(f,{items:{get:function(){return this._items}},title:{get:function(){return this._title}},link:{get:function(){return this._link}},description:{get:function(){return this._description}},language:{get:function(){return this._language}},copyright:{get:function(){return this._copyright}},managingEditor:{get:function(){return this._managing_editor}},webMaster:{get:function(){return this._web_master}},
pubDate:{get:function(){return this._pub_date}},lastBuildDate:{get:function(){return this._last_build_date}},generator:{get:function(){return this._generator}},docs:{get:function(){return this._docs}},rating:{get:function(){return this._rating}},image:{get:function(){return this._image}},imageUrl:{get:function(){return this._image_url}},category:{get:function(){return this._category}}});var K=function(c){this.parent=f;this.parent(c);this.constructor=K;this._rss=this};K.prototype={_url:"",_rss:null,
initComponent:function(){f.prototype.initComponent.call(this);this._xhr=new w.HTTPRequest;this._xhr.init();this._xhr.bind("xmlload",this,this.processRSS);this._xhr.bind("loaderror",this,this.processError)},destructor:function(){this._xhr.unbind("xmlload",this,this.processRSS);this._xhr.unbind("loaderror",this,this.processError);free(this._xhr);f.prototype.destructor.call(this)},loadRSS:function(){this._xhr.send()},processRSS:function(c){c=c.data;if(!c&&(c=(new DOMParser).parseFromString(this._xhr.responseText,
"application/xml"),!c))return console.error("Failed to parse rss document that is null."),this.propagate("rssloaderror","document null."),!1;var f=c;this._items=[];if(f){for(var c=f.getElementsByTagName("channel")[0],g=f.getElementsByTagName("item"),f=0;f<g.length;f++)Item=new q(g[f]),this._items.push(Item);for(var g="_title,_link,_description,_language,_copyright,_managing_editor,_web_master,_pub_date,_last_build_date,_generator,_docs,_ttl,_rating".split(","),j="title,link,description,language,copyright,managingEditor,webMaster,pubDate,lastBuildDate,generator,docs,ttl,rating".split(","),
k=null,f=0;f<j.length;f++)if(k=c.getElementsByTagName(j[f])[0])this[g[f]]=k.textContent;this._category=new A(c.getElementsByTagName("category")[0]);this._image=new D(c.getElementsByTagName("image")[0])}else console.error("Failed to parse rss document that is null.");this.propagate("rssload",this);this.outPropertyChange()},processError:function(c){c&&c.data&&"failed"===c.data.status?this.performAlternateRequest?this.performAlternateRequest():this.propagate("rssloaderror"):this.propagate("rssloaderror")},
propertiesDidChange:function(){this.loadRSS();return!0},performAlternateRequest:function(){var c=(new w.AjaxJSONP).init();c.url="http://pipes.yahoo.com/pipes/pipe.run?_id=9oyONQzA2xGOkM4FqGIyXQ&_render=json&feed="+escape(this._url);c.clbParamName="_callback";c.bind("jsonload",this,function(c){c=c.data;if(!c||!c.value||!c.value.items)this.propagate("rssloaderror","document null.");else{c=c.value;this._pub_date=c.pubDate;this._items=[];itemElements=c.items;for(c=0;c<itemElements.length;c++)this._items.push(itemElements[c]);
this.propagate("rssload",this);this.outPropertyChange()}});c.bind("loaderror",this,function(){this.propagate("rssloaderror")});c.send()}};r.extendClass(K,f);r.defineClassProperties(K,{url:{set:function(c){r.isString(c)&&(this._url=c,this._xhr.url=c)}},rss:{get:function(){return this._rss}}});c.RSSFeed=f;c.RSSRequester=K;var F=function(c){this.parent=w.EventSource;this.parent(c);this.constructor=F;F.loadService(this);this.ERROR_CODE=0;this._addresses=[];this._position=[]};F.loadService=function(c){F.__google_loaded__||
(F.__google_wait_loaded__||(F.__google_wait_loaded__=!0,r.importFile("http://www.google.com/jsapi?key="+F.key+"&callback=vs.data.GoogleSearch.__on_loaded",null,null,"js")),c&&F._to_finish_init.push(c))};F.key=" ABQIAAAAE4BGaIh0t-7l9PDR7PA0rRR6KW34AlT62yZeC298tyhOjAL-9hQQpk22pW6ZfaCFEr3zjz2Q8rjqAw";F.__google_wait_loaded__=!1;F.__google_loaded__=!1;F._to_finish_init=[];F.LOCAL_SEARCH_ENGINE=1;F.VIDEO_SEARCH_ENGINE=2;F.__on_loaded=function(){google.load("search","1",{nocss:!0,callback:G.data.GoogleSearch.__on_search_loaded})};
F.__on_search_loaded=function(){var c,f;F.__google_loaded__=!0;F.__google_wait_loaded__=!1;for(c=0,f=F._to_finish_init.length;c<f;c++)F._to_finish_init[c].finishInit();F._to_finish_init=null};F.ERROR_CODE_STR="No error,Unknown error,Unvalid parameters data,Error with google server,Connexion error,Unvalid google response".split(",");F.prototype={__local_search:g,__video_search:g,__init_ok:!1,__engine_to_init:0,__end_init_clb:null,_engine_loaded:!1,_str_address:"",_addresses:null,_position:null,finishInit:function(){this.__init_ok=
!0;this.__engine_to_init&&(this.setSearchEngine(this.__engine_to_init),this.__engine_to_init=0)},setSearchEngine:function(c){this.__init_ok?(c|F.LOCAL_SEARCH_ENGINE&&!this.__local_search&&(this.__local_search=new google.search.LocalSearch,this.__local_search.setResultSetSize(google.search.Search.SMALL_RESULTSET),this.__local_search.setNoHtmlGeneration()),c|F.VIDEO_SEARCH_ENGINE&&!this.__video_search&&(this.__video_search=new google.search.VideoSearch,this.__video_search.setResultSetSize(google.search.Search.SMALL_RESULTSET),
this.__video_search.setNoHtmlGeneration()),this._engine_loaded=!0,this.propagate("engineload"),this.outPropertyChange("engineLoaded")):this.__engine_to_init=c},_newGoogleLocalSearch:function(c,f){var g=this;this.__local_search.setSearchCompleteCallback(this,function(){f.call(g,g.__local_search.results)});!c||"string"!==typeof c?(this.ERROR_CODE=2,f.call(g,null)):this.__local_search.execute(c)},_googleLocalSearch:function(c,f){if(this.__local_search)this._newGoogleLocalSearch(c,f);else if(!c||"string"!==
typeof c)this.ERROR_CODE=2,f.call(this,null);else{var g=new XMLHttpRequest;g.open("GET","http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q="+c,!1);g.send(null);4===g.readyState?(g=eval("("+g.responseText+")"),200!==g.responseStatus?(this.ERROR_CODE=3,f.call(this,null)):g.responseData?f.call(this,g.responseData):(this.ERROR_CODE=5,f.call(this,null))):(this.ERROR_CODE=4,f.call(this,null))}},GPSCoordinateToAddress:function(c,f,g){if(this.__local_search)if(g||(g=this),!c||!c.length)this.ERROR_CODE=
2,f.call(g,null);else{var j=this;this._googleLocalSearch(c[0]+","+c[1],function(c){if(c)if(0===c.length||!c[0])this.ERROR_CODE=5,f.call(g,null);else{j._addresses=[];var k={title:"",addressLine:"",streetAddress:"",city:"",region:"",country_code:"",postalCode:0};k.title=c[0].titleNoFormatting;k.addressLine=c[0].addressLines.join(", ");k.streetAddress=c[0].streetAddress;k.city=c[0].city;k.region=c[0].region;k.country_code=c[0].country;k.postalCode=c[0].postalCode;k.locale=j.countryToLocal(k.country_code);
j._addresses.push(k);f.call(g,k);j.outPropertyChange("addresses")}else this.ERROR_CODE=5,f.call(g,null)})}else console.error("The local search engine is not initialized")},countryToLocal:function(c){switch(c){case "US":return"en_US";case "GB":return"en_GB";case "FR":return"fr_FR";case "CA":return"fr_CA";case g:return"en_US";default:return c.toLowerCase()}},addressToGPSCoordinate:function(c,f,g){if(this.__local_search){var j=[0,0];g||(g=this);if(!c||"string"!==typeof c)this.ERROR_CODE=2,f.call(g,null);
else{var k=this;this._googleLocalSearch('"'+c+'"',function(c){c&&(c[0]?(j[0]=parseFloat(c[0].lat),j[1]=parseFloat(c[0].lng),k._position=j,f.call(g,j.slice()),k.outPropertyChange("position")):(this.ERROR_CODE=5,f.call(g,null)))})}}else console.error("The local search engine is not initialized")},searchAddress:function(c,f,g){if(this.__local_search)if(g||(g=this),!c||"string"!==typeof c)this.ERROR_CODE=2,f.call(g,null);else{var j=this;this._googleLocalSearch('"'+c+'"',function(c){j._addresses=[];if(c){for(var k=
0;k<c.length;k++){var n={};n.title=c[k].titleNoFormatting;n.addressLine=c[k].addressLines.join(", ");n.streetAddress=c[k].streetAddress;n.city=c[k].city;n.region=c[k].region;n.country_code=c[k].country;n.postalCode=c[k].postalCode;j._addresses.push(n)}f.call(g,j._addresses.slice())}else f.call(g,[]);j.outPropertyChange("addresses")})}else console.error("The local search engine is not initialized")}};r.extendClass(F,w.EventSource);r.defineClassProperties(F,{strAddress:{set:function(c){if(r.isString(c)){this._str_address=
c;var f=this;this.searchAddress(c,function(){f.addressToGPSCoordinate(c,function(){},this)},this)}}},addresses:{get:function(){return this._addresses}},position:{set:function(c){r.isArray(c)&&2===c.length&&r.isNumber(c[0])&&r.isNumber(c[1])&&this.GPSCoordinateToAddress(c,function(){},this)},get:function(){return this._position}},engineLoaded:{get:function(){return this._engine_loaded}}});c.GoogleSearch=F})(window);
(function(o,g){function p(a){this._str=a}function k(a){if(!a)return null;for(var a=a.split("."),b=o;b&&a.length;)b=b[a.shift()];return b}function n(a,b,d){var c=function(a,y,b){var E={},d="_"+e.underscore(y);E.set=function(a,y,b){return function(E){var e=0,d,c=a.length,fa;for(this[b]=E;e<c;e++)d=a[e],3===d.nodeType?d.data=E:2===d.nodeType&&(fa=eval(d.__attr_eval_str),"value"==d.name&&"INPUT"==d.ownerElement.tagName?d.ownerElement.value=fa:d.value=fa);"_$_"==y?this.propertyChange():this.propertyChange(y)}}(b,
y,d);E.get=function(a){return function(){return this[a]}}(d);a.defineProperty(y,E)},f=function(a,y,b,E){var d={},c="_"+e.underscore(y);d.set=function(a,y,b,E){return function(d){if(e.isArray(d)){var c=0,fa=d.length,f;this[y]=d;for(e.removeAllElementChild(E);c<fa;c++)f=j(b,d[c]),E.appendChild(f.view);this.propertyChange(a)}}}(y,c,b,E);d.get=function(a){return function(){return this[a]}}(c);a.defineProperty(y,d)};(function(a,y,b){for(var E=[],e=y.__all_properties.length;e--;){var d=y.__all_properties[e],
fa=y.__prop_nodes[e],g,h;if(fa){h=y.__node;g=fa;for(var s=[],t=0,j=g.length,m=void 0;t<j;t++)m=g[t],s.push([qa(h,m),m.__attr_eval_str]);g=s;h=b;for(var s=[],t=0,j=g.length,k=m=void 0;t<j;t++)m=g[t],k=la(h,m[0]),k.__attr_eval_str=m[1],s.push(k);h=s;E.push([d,fa]);"@"===d?c(a,"_$_",h):c(a,d,h)}}for(e=y.__all_properties.length;e--;)if(d=y.__all_properties[e],fa=y.__list_iterate_prop[d])path=qa(y.__node,fa.__parent_node),node_cloned=la(b,path),f(a,d,fa,node_cloned);a.__node__ref__=E})(a,b,d)}function j(a,
b){var e=a.__node.cloneNode(!0),d=new a.__class({node:e});n(d,a,e);d.init();b&&d.configure(b);d.isProperty("_$_")&&(d._$_=b);return d}function q(a,E){function d(E,c){var f=E.getAttribute("data-iterate");if(f){var g=E.parentElement;g.removeChild(E);-1===c.__all_properties.indexOf(f)&&c.__all_properties.push(f);var h={};c.__list_iterate_prop[f]=h;h.__prop_nodes=[];h.__list_iterate_prop={};h.__parent_node=g;h.__node=E;h.__all_properties=c.__all_properties;h.__class=N.View;c=h}f=E.attributes;g=c;if(f)for(h=
f.length;h--;){var ha=f.item(h),s,t=ha.value,j=[];a._regexp_index.lastIndex=0;if(s=a._regexp_index.exec(t)){for(;s;)s=parseInt(s[1],10),j.push(s),g.__prop_nodes[s]?g.__prop_nodes[s].push(ha):g.__prop_nodes[s]=[ha],s=a._regexp_index.exec(t);ha.value="";for(var ja=0;ja<j.length;ja++)s=j[ja],t=t.replace("${*"+s+"*}",'"+this._'+e.underscore(g.__all_properties[s])+'+"');ha.__attr_eval_str='"'+t+'"'}}f=E.childNodes;g=c;if(f)for(h=f.length;h--;)if(ha=f.item(h),3===ha.nodeType){t=ha.data;s=0;a._regexp_index.lastIndex=
0;ha.data=" ";for(j=a._regexp_index.exec(t);j;)if(j.index&&(ja=b.createTextNode(t.substring(s,j.index)),E.insertBefore(ja,ha)),s=parseInt(j[1],10),g.__prop_nodes[s]?g.__prop_nodes[s].push(ha):g.__prop_nodes[s]=[ha],s=j.index+j[0].length,j=a._regexp_index.exec(t))ja=b.createTextNode(" "),ha.nextSibling?E.insertBefore(ja,ha.nextSibling):E.appendChild(ja),ha=ja;if(t=t.substring(s))ja=b.createTextNode(t),ha.nextSibling?E.insertBefore(ja,ha.nextSibling):E.appendChild(ja)}else 1===ha.nodeType&&d(ha,g)}
var c={__prop_nodes:[],__list_iterate_prop:{},__all_properties:[]};c.__class=k(E);e.isFunction(c.__class)||(c.__class=N.View);a._regexp_templ.lastIndex=0;var f=a._str.replace(a._regexp_templ,function(a,y){var b=c.__all_properties.indexOf(y);-1===b&&(b=c.__all_properties.length,c.__all_properties.push(y));return"${*"+b+"*}"});c.__node=p.parseHTML(f);d(c.__node,c);return c}function A(a){this.constructor=A;this.delegate=a}function D(a){this.parent=A;this.parent(a);this.constructor=D}function G(a){this.parent=
A;this.parent(a);this.constructor=G}function r(a){this.parent=A;this.parent(a);this.constructor=r}function w(a){this.parent=A;this.parent(a);this.constructor=w}function c(a,b){if(!a.getAttribute)return!1;if(a.getAttribute("x-hag-ref")===b||a.getAttribute("x-hag-comp")===b)return a;for(var e=a.firstElementChild,d;e;){if(d=c(e,b))return d;e=e.nextElementSibling}return!1}function f(a){this.parent=v.EventSource;this.parent(a);this.constructor=f;this.__pointer_recognizers=[]}function K(a){switch(a){case u.SS_7_INCH:return a=
1.2>=devicePixelRatio?[600,960]:1.4>=devicePixelRatio?[800,1280]:1.7>=devicePixelRatio?[900,1440]:[1200,1920],a;case u.SS_4_INCH:return a=1.2>=devicePixelRatio?[320,540]:1.4>=devicePixelRatio?[427,720]:1.7>=devicePixelRatio?[480,800]:[720,1080],a}}function F(a){if(!("touchstart"==a.type&&("INPUT"==a.target.tagName||"input"==a.target.tagName||"TEXTAREA"==a.target.tagName||"textarea"==a.target.tagName)))return a.preventDefault(),!1}function B(a){this.parent=f;this.parent(a);this.constructor=B;this.__ab_view_t_o=
[50,50]}function L(a){this.parent=B;this.parent(a);this.constructor=L}function V(a){this.parent=f;this.parent(a);this.constructor=V}function S(a){this.parent=f;this.parent(a);this.constructor=S}function J(a){this.parent=B;this.parent(a);this.constructor=J}function aa(){this.parent=na;this.parent();this.constructor=na}function W(a){this.parent=f;this.parent(a);this.constructor=W}function ea(a,E,c,f){for(var g=b.createElement("li"),h=b.createElement("div"),s=b.createElement("ul"),t,j=a._model,m;c<j.length;){t=
j.item(c);if(e.isString(t))break;t=j.item(c);m=a.__template_obj?a.__template_obj.clone():(new aa).init();t instanceof v.Model?m.link(t):m.configure(t);m.index=c;f&&d.addPointerListener(m.view,v.POINTER_START,a);s.appendChild(m.view);a.__item_obs.push(m);m.__parent=a;c++}E&&(a=o.deviceConfiguration.os,a==u.OS_MEEGO||a==u.OS_SYMBIAN?(h.appendChild(b.createElement("div")),a=b.createElement("div"),a.appendChild(b.createTextNode(E)),h.appendChild(a)):e.setElementInnerText(h,E),g.appendChild(h));0<s.childElementCount&&
g.appendChild(s);return[g,c]}function x(a){if(this._model){var b=this._list_items,d,c,f;if(b){this._freeListItems();e.removeAllElementChild(b);m?da(b,"translate3d(0,0,0)"):da(b,"translate(0,0)");var g=b.parentElement;g.removeChild(b);d=0;for(e.setElementVisibility(b,!1);d<this._model.length;)c=this._model.item(d),f=null,e.isString(c)&&(f=c,d++),d=ea(this,f,d,a),b.appendChild(d[0]),d=d[1];g.appendChild(b);b.style.width="auto";e.setElementVisibility(b,!0)}}}function ia(a){if(this._model){var E=this._list_items,
d=this._direct_access,c,f,g;if(E){this._freeListItems();this.__direct_access_letters=[];e.removeAllElementChild(E);d&&e.removeAllElementChild(d);m?e.setElementTransform(E,"translate3d(0,0,0)"):e.setElementTransform(E,"translate(0,0)");var h=E.parentElement;h.removeChild(E);d&&this.view.removeChild(d);c=0;e.setElementVisibility(E,!1);for(var s=0;c<this._model.length;){f=this._model.item(c);g=null;if(e.isString(f)){g=f;c++;f=b.createElement("div");var t=g[0];e.setElementInnerText(f,t);this.__direct_access_letters.push(t);
f._index_=s++;d&&d.appendChild(f)}c=ea(this,g,c,a);E.appendChild(c[0]);c=c[1]}h.appendChild(E);d&&this.view.appendChild(d);E.style.width="auto";e.setElementVisibility(E,!0)}}}function R(a){if(this._model){var b=this._list_items,c,f,g;if(b){this._freeListItems();e.removeAllElementChild(b);m?da(b,"translate3d(0,0,0)"):da(b,"translate(0,0)");var h=b.parentElement;h.removeChild(b);c=0;for(e.setElementVisibility(b,!1);c<this._model.length;)f=this._model.item(c),g=this.__template_obj?this.__template_obj.clone():
(new aa).init(),f instanceof v.Model?g.link(f):g.configure(f),g.index=c,a&&d.addPointerListener(g.view,v.POINTER_START,this),b.appendChild(g.view),this.__item_obs.push(g),g.__parent=this,c++;h.appendChild(b);b.style.width="auto";e.setElementVisibility(b,!0)}}}function T(a){this.parent=J;this.parent(a);this.constructor=T;this.__item_obs=[]}function M(a){this._data=[];this._items={};this.parent=f;this.parent(a);this.constructor=M}function ba(a){this.__inputs=[];this.__labels=[];this.parent=J;this.parent(a);
this.constructor=ba}function H(a){this.__inputs=[];this.__labels=[];this.parent=J;this.parent(a);this.constructor=H;this._selected_indexes=[]}function z(a){this.parent=f;this.parent(a);this.constructor=z;this._states={}}function h(a){this.parent=f;this.parent(a);this.constructor=h;this._items={}}function Z(a){this.parent=f;this.parent(a);this.constructor=Z}function P(a){this.parent=f;this.parent(a);this.constructor=P}function $(a){this.parent=f;this.parent(a);this.constructor=$;this._range=[0,100]}
function U(a){this.parent=f;this.parent(a);this.constructor=U;this._range=[0,100]}function ca(a){this.parent=f;this.parent(a);this.constructor=ca}function Y(a){this.parent=f;this.parent(a);this.constructor=Y}function I(a){this.parent=f;this.parent(a);this.constructor=I}function Q(a){this.parent=f;this.parent(a);this.constructor=Q}function C(a){this.parent=f;this.parent(a);this.constructor=C}function a(y){this.parent=f;this.parent(y);this.constructor=a}function t(a,e,d){if(a&&d){var c=sa[a];if(c)c.push({elem_id:e,
svg_obj:d});else{c=[];c.push({elem_id:e,svg_obj:d});sa[a]=c;var f=b.createElement("object");f.data=a;f.type="image/svg+xml";f.width="0";f.height="0";f.style.visibility="hidden";f.onload=function(){var e=f.getSVGDocument();if(e){e=e.querySelector("svg");if(!ta){var E=b.createElementNS("http://www.w3.org/2000/svg","svg");E.setAttribute("width","0");E.setAttribute("height","0");b.body.appendChild(E);ta=b.createElementNS("http://www.w3.org/2000/svg","defs");E.appendChild(ta)}ta.appendChild(e);b.body.removeChild(f);
wa[a]=e;if(E=sa[a]){delete sa[a];for(var d=0;d<E.length;d++){var c=E[d];c.svg_obj.__set_svg_doc(e,c.elem_id)}}}};b.body.appendChild(f)}}}function s(a){this.parent=f;this.parent(a);this.constructor=s}var b=o.document,d=o.vs,e=d.util,v=d.core,N=d.ui,da=e.setElementTransform,u=v.DeviceConfiguration,m=d.SUPPORT_3D_TRANSFORM;p.prototype={_str:null,_regexp_templ:/\$\{((([\w\-]+)(\.([\w\.]*)+)?)|@)\}/g,_regexp_index:/\$\{\*([\d]+)\*\}/g,_shadow_view:null,toString:function(){return this._str},compileView:function(a,
b){this._shadow_view||(this._shadow_view=q(this,a));var e=j(this._shadow_view,b);e.__shadow_view=this._shadow_view;e.clone=ga.bind(e);e._clone=oa.bind(e);return e},__extend_component:function(a){this._shadow_view||(this._shadow_view=q(this));var b=this._shadow_view.__node.cloneNode(!0);a.view=b;n(a,this._shadow_view,b);a.__shadow_view=this._shadow_view;a.clone=ga.bind(a);a._clone=oa.bind(a);return b},apply:function(a){function b(e,E,d,c,f){e=a[E];if(f){d=d.split(".");f=1;E=d.length;for(e=a[d[0]];e&&
f<E;)e=e[d[f++]]}return e}return!a?this._str:this._str.replace(this._regexp_templ,b)}};var ga=function(a,b){a||(a={});a.node=this.__shadow_view?this.__shadow_view.__node.cloneNode(!0):a.node?a.node:this.view.cloneNode(!0);return v.EventSource.prototype.clone.call(this,a,b)},oa=function(a,b){N.View.prototype._clone.call(this,a,b);n(a,this.__shadow_view,a.view);a.__shadow_view=this.__shadow_view;a.clone=ga.bind(a);a._clone=oa.bind(a)},qa=function(a,b,e){var d=1,e=e||[];if(2===b.nodeType)return b.ownerElement&&
(e=qa(a,b.ownerElement,e)),e.push([2,b.nodeName.toLowerCase()]),e;if(a===b)return e;b.parentNode&&(e=qa(a,b.parentNode,e));for(a=b.previousSibling;a;)(1===a.nodeType||3===a.nodeType)&&a.nodeName==b.nodeName&&d++,a=a.previousSibling;e.push([1,b.nodeName.toLowerCase(),d]);return e},la=function(a,b){if(!b||!b.length||!a)return a;var e=b.shift(),d,c;d=e[0];var f=e[1];if(2===d){d=a.attributes;for(e=d.length;e--;)if(c=d.item(e),c.nodeName.toLowerCase()==f)return c}else if(1===d){d=a.firstChild;for(e=e[2],
c=1;d;){if(d.nodeName.toLowerCase()===f){if(e===c)return la(d,b);c++}d=d.nextSibling}}return null};p.parseHTML=function(a){var d=b.createElement("div");try{e.safeInnerHTML(d,a),(d=d.firstElementChild)&&d.parentElement.removeChild(d)}catch(c){return console.error("vs.ui.Template.parseHTML failed:"),c.stack&&console.log(c.stack),console.error(c),g}return d};d.ui.Template=p;var ma=[];A.prototype={addPointerListener:function(a,b,e,c){if(!a||!b||!e)return!1;for(var f=0,g=ma.length,h;f<g;f++)if(h=ma[f],
h.target===a&&h.type===b&&h.listener===e)return h.nb++,!0;h={};h.target=a;h.type=b;h.listener=e;h.nb=1;ma.push(h);d.addPointerListener(a,b,e,c);return!0},removePointerListener:function(a,b,e,c){if(!a||!b||!e)return!1;for(var f=0,g=ma.length,h;f<g;f++)if(h=ma[f],h.target===a&&h.type===b&&h.listener===e)return h.nb--,0===h.nb&&(d.removePointerListener(a,b,e,c),ma.remove(f)),!0;return!1},init:function(a){this.obj=a},uninit:function(){},reset:function(){},pointerStart:function(){},pointerMove:function(){},
pointerEnd:function(){},pointerCancel:function(){},gestureStart:function(){},gestureChange:function(){},gestureEnd:function(){}};N.PointerRecognizer=A;var ua={handleEvent:function(a){if(this.__pointer_recognizers.length){if(this._enable)switch(a.type){case v.POINTER_START:this.__pointer_recognizers.forEach(function(b){b.pointerStart(a)});break;case v.POINTER_MOVE:this.__pointer_recognizers.forEach(function(b){b.pointerMove(a)});break;case v.POINTER_END:this.__pointer_recognizers.forEach(function(b){b.pointerEnd(a)});
break;case v.POINTER_CANCEL:this.__pointer_recognizers.forEach(function(b){b.pointerCancel(a)});break;case v.GESTURE_START:this.__pointer_recognizers.forEach(function(b){b.gestureStart(a)});break;case v.GESTURE_CHANGE:this.__pointer_recognizers.forEach(function(b){b.gestureChange(a)});break;case v.GESTURE_END:this.__pointer_recognizers.forEach(function(b){b.gestureEnd(a)})}}else this._propagateToParent&&this._propagateToParent(a)},__pointer_recognizers:null,addPointerRecognizer:function(a){!a instanceof
A||-1!==this.__pointer_recognizers.indexOf(a)||(this.__pointer_recognizers.push(a),a.init(this))},removePointerRecognizer:function(a){!a instanceof A||(this.__pointer_recognizers.remove(a),a.uninit())}};N.RecognizerManager=ua;D.prototype={__is_touched:!1,__unselect_time_out:0,__did_tap_time_out:0,__tap_mode:0,init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,v.POINTER_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,v.POINTER_START,
this.obj)},pointerStart:function(a){if(!this.__is_touched&&!(0===a.targetPointerList.length||1<a.nbPointers)){0===this.__tap_mode&&(this.__tap_mode=1);this.__tap_elem=a.targetPointerList[0].currentTarget;this.__unselect_time_out&&(clearTimeout(this.__unselect_time_out),this.__unselect_time_out=0);try{this.delegate&&this.delegate.didTouch&&this.delegate.didTouch(this.__tap_elem._comp_,this.__tap_elem,a)}catch(e){e.stack&&console.log(e.stack),console.log(e)}this.__did_tap_time_out&&(this.__tap_mode++,
clearTimeout(this.__did_tap_time_out),this.__did_tap_time_out=0);this.addPointerListener(b,v.POINTER_END,this.obj);this.addPointerListener(b,v.POINTER_MOVE,this.obj);this.__start_x=a.targetPointerList[0].pageX;this.__start_y=a.targetPointerList[0].pageY;this.__is_touched=!0;return!1}},pointerMove:function(a){if(this.__is_touched&&0!==a.pointerList.length){var e=a.pointerList[0].pageY-this.__start_y;if(Math.abs(a.pointerList[0].pageX-this.__start_x)+Math.abs(e)<f.MOVE_THRESHOLD)return!1;this.removePointerListener(b,
v.POINTER_END,this.obj);this.removePointerListener(b,v.POINTER_MOVE,this.obj);this.__is_touched=!1;try{this.delegate&&this.delegate.didUntouch&&this.delegate.didUntouch(this.__tap_elem._comp_,this.__tap_elem,a)}catch(d){d.stack&&console.log(d.stack),console.log(d)}}},pointerEnd:function(a){if(this.__is_touched){this.__is_touched=!1;var e=this,d=e.__tap_elem,c=d?d._comp_:null;e.__tap_elem=g;this.removePointerListener(b,v.POINTER_END,this.obj);this.removePointerListener(b,v.POINTER_MOVE,this.obj);this.delegate&&
this.delegate.didUntouch&&(this.__unselect_time_out=setTimeout(function(){try{e.delegate.didUntouch(c,d,a)}catch(b){b.stack&&console.log(b.stack),console.log(b)}e.__unselect_time_out=0},f.UNSELECT_DELAY));this.delegate&&this.delegate.didTap?this.__did_tap_time_out=setTimeout(function(){try{e.delegate.didTap(e.__tap_mode,c,d,a)}catch(b){b.stack&&console.log(b.stack),console.log(b)}e.__tap_mode=0;e.__did_tap_time_out=0},100):e.__tap_mode=0}},pointerCancel:function(a){return this.pointerEnd(a)}};e.extendClass(D,
A);N.TapRecognizer=D;G.prototype={__is_dragged:!1,init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,v.POINTER_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,v.POINTER_START,this.obj)},pointerStart:function(a){if(!this.__is_dragged&&a.targetPointerList&&!(1<a.targetPointerList.length)){var e=a.targetPointerList[0];this.__start_x=e.pageX;this.__start_y=e.pageY;this.__pointer_id=e.identifier;this.__is_dragged=!0;this.addPointerListener(b,
v.POINTER_END,this.obj);this.addPointerListener(b,v.POINTER_MOVE,this.obj);try{this.delegate&&this.delegate.didDragStart&&this.delegate.didDragStart(a,a.targetPointerList[0].currentTarget._comp_)}catch(d){d.stack&&console.log(d.stack),console.log(d)}return!1}},pointerMove:function(a){if(this.__is_dragged){for(var b=0,e=a.targetPointerList.length,d;b<e;b++){d=a.targetPointerList[b];if(d.identifier===this.__pointer_id)break;d=null}if(d){b=d.pageX-this.__start_x;d=d.pageY-this.__start_y;try{this.delegate&&
this.delegate.didDrag&&this.delegate.didDrag({dx:b,dy:d},a,a.targetPointerList[0].currentTarget._comp_)}catch(c){c.stack&&console.log(c.stack),console.log(c)}}}},pointerEnd:function(a){if(this.__is_dragged){for(var e=0,d=a.changedPointerList.length,c;e<d;e++){c=a.changedPointerList[e];if(c.identifier===this.__pointer_id)break;c=null}if(c){this.__is_dragged=!1;this.__pointer_id=this.__start_y=this.__start_x=g;this.removePointerListener(b,v.POINTER_END,this.obj);this.removePointerListener(b,v.POINTER_MOVE,
this.obj);try{this.delegate&&this.delegate.didDragEnd&&this.delegate.didDragEnd(a,a.changedPointerList[0].target._comp_)}catch(f){f.stack&&console.log(f.stack),console.log(f)}}}},pointerCancel:function(a){return this.pointerEnd(a)}};e.extendClass(G,A);N.DragRecognizer=G;r.prototype={init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,v.GESTURE_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,v.GESTURE_START,this.obj)},gestureStart:function(){this.addPointerListener(b,
v.GESTURE_CHANGE,this.obj);this.addPointerListener(b,v.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchStart&&this.delegate.didPinchStart(event,event.targetPointerList[0].target._comp_)}catch(a){a.stack&&console.log(a.stack),console.log(a)}return!1},gestureChange:function(a){try{this.delegate&&this.delegate.didPinchChange&&this.delegate.didPinchChange(a.scale,a,a.targetPointerList[0].target._comp_)}catch(b){b.stack&&console.log(b.stack),console.log(b)}},gestureEnd:function(){this.removePointerListener(b,
v.GESTURE_CHANGE,this.obj);this.removePointerListener(b,v.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchEnd&&this.delegate.didPinchEnd(event,event.targetPointerList[0].target._comp_)}catch(a){a.stack&&console.log(a.stack),console.log(a)}},pointerCancel:function(a){return this.pointerEnd(a)}};e.extendClass(r,A);N.PinchRecognizer=r;w.prototype={init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,v.GESTURE_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,
v.GESTURE_START,this.obj)},gestureStart:function(){this.addPointerListener(b,v.GESTURE_CHANGE,this.obj);this.addPointerListener(b,v.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationStart&&this.delegate.didRotationStart(event)}catch(a){a.stack&&console.log(a.stack),console.log(a)}return!1},gestureChange:function(a){try{this.delegate&&this.delegate.didRotationChange&&this.delegate.didRotationChange(a.rotation,a)}catch(b){b.stack&&console.log(b.stack),console.log(b)}},gestureEnd:function(){this.removePointerListener(b,
v.GESTURE_CHANGE,this.obj);this.removePointerListener(b,v.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationEnd&&this.delegate.didRotationEnd(event)}catch(a){a.stack&&console.log(a.stack),console.log(a)}},pointerCancel:function(a){return this.pointerEnd(a)}};e.extendClass(w,A);N.RotationRecognizer=w;f.DEFAULT_LAYOUT=null;f.HORIZONTAL_LAYOUT="horizontal";f.LEGACY_HORIZONTAL_LAYOUT="horizontal_layout";f.VERTICAL_LAYOUT="vertical";f.LEGACY_VERTICAL_LAYOUT="vertical_layout";f.ABSOLUTE_LAYOUT=
"absolute";f.LEGACY_ABSOLUTE_LAYOUT="absolute_layout";f.FLOW_LAYOUT="flow";f.LEGACY_FLOW_LAYOUT="flow_layout";f.SELECT_DELAY=150;f.UNSELECT_DELAY=300;f.MOVE_THRESHOLD=20;f.MAGNET_NONE=0;f.MAGNET_LEFT=3;f.MAGNET_BOTTOM=2;f.MAGNET_TOP=1;f.MAGNET_RIGHT=4;f.MAGNET_CENTER=5;f.NON_G_OBJECT="_non_g_object";f.ANY_PLACE="children";f._positionStyle=g;f.__comp_templates={};f._propagate_pointer_event=function(a,b,e){var d="";e.type===v.POINTER_START&&(d="POINTER_START");e.type===v.POINTER_END&&(d="POINTER_END");
e.type===v.POINTER_MOVE&&(d="POINTER_MOVE");e.type=d;b.call(a,e)};var pa=null;f.prototype={_visible:!0,_magnet:f.MAGNET_NONE,_autosizing:null,_pointerevent_handlers:null,_enable:!0,_pos:null,__view_t_x:0,__view_t_y:0,_size:null,_opacity:1,_scaling:1,_rotation:0,_min_scale:0.5,_max_scale:3,_layout:null,_transform_origin:null,_transforms_stack:null,_show_animation:null,__show_clb:null,_hide_animation:null,__hide_clb:null,destructor:function(){var a,b,d,c;this.__parent&&this.__parent.remove(this);for(a in this.__children)if(b=
this.__children[a]){if(b instanceof Array)for(d=0;d<b.length;d++)c=b[d],e.free(c);else e.free(b);delete this.__children[a]}this.__children={};delete this.view;this.clearTransformStack();v.EventSource.prototype.destructor.call(this)},refresh:function(){var a,b,e,d;if((b=this.view)&&b.parentElement)this._size[0]=b.offsetWidth,this._size[1]=b.offsetHeight,this._pos[0]=b.offsetLeft,this._pos[1]=b.offsetTop;for(a in this.__children)if(b=this.__children[a])if(b instanceof Array)for(e=0;e<b.length;e++)(d=
b[e])&&d.refresh&&d.refresh();else b.refresh&&b.refresh()},clone:function(a,b){function d(a,y){for(var b=[],e=0,c=y.length,E;e<c;e++)E=y[e],b.push([E,qa(a,E)]);return b}function c(a,y,b){for(var e=0,d=y.length,E;e<d;e++)E=y[e],E.id||(E.id=v.createId()),b[E[0].id]=la(a,E[1])}function f(a,y){function b(a){a.__gui_object__hack_view__?h.push(a.__gui_object__hack_view__):a.view&&h.push(a.view);E(a)}function E(a){var y,d,c,f;for(y in a.__children)if(d=a.__children[y])if(e.isArray(d)){f=d.length;for(c=0;c<
f;c++)b(d[c])}else b(d)}var g=a.view.cloneNode(!0),h=[],s;E(a);s=d(a.view,h);c(g,s,y);return g}b||(b={});b.__views__||(b.__views__={});a||(a={});if(!a.node){var g=b.__views__[this.view.id];g||(g=f(this,b.__views__));a.node=g}return v.EventSource.prototype.clone.call(this,a,b)},_clone_properties_value:function(a){for(var b in this)if("id"!=b){if("size"==b||"position"==b)if(value=this.size,!value||3!==value.length||0===value[0]&&0===value[1])continue;this.isProperty(b)&&v.Object.__propertyCloneValue(b,
this,a)}},_clone:function(a,b){function e(a,y){if(!a||!y)return null;if(y[a._id])return y[a._id];var b=y.__views__[a._id];return b?b._comp_:null}var d,c,f,h,s;v.EventSource.prototype._clone.call(this,a,b);this._show_animation&&(d=b[this._show_animation._id],a._show_animation=d?d:this._show_animation.clone(),a.__show_clb=this.__show_clb);this._hide_animation&&(d=b[this._hide_animation._id],a._hide_animation=d?d:this._hide_animation.clone(),a.__hide_clb=this.__hide_clb);a.__parent=g;for(c in this.__children)if(d=
this.__children[c],f=a._holes[c],d&&f)if(d instanceof Array)for(h=d.length;h--;)f=d[h],(s=e(f,b))?b[f._id]=s:(s=f.clone(null,b),a.add(s,c));else(s=e(d,b))?b[d._id]=s:(s=d.clone(null,b),a.add(s,c))},_getGUInode:function(a){var d=this.__getGUInode(a);if(d)return d;if(d=a.template?a.template:this.template)return a=new p(d),d=a.__extend_component(this),e.free(a),d;if(this.html_template&&(d=p.parseHTML(this.html_template)))return d;d=e.isFunction(this.constructor)?this.constructor.name:e.isString(this.constructor)?
this.constructor:f;console.warn("Impossible to instance view of component '"+d+", id ["+a.id+"]. A default one is created");return d=b.createElement("div")},__getGUInode:function(a){if(a.node)return a.node;var e=null,d,h,s;if(a.node_id&&(e=b.getElementById(a.node_id)))return e;if(d=a.node_ref)if((s=f._ref_template_reg.exec(d))&&3==s.length?(h=s[1],d=s[2]):h=a.root_ref,d&&h&&((h=(h=v.Object._obs[h])&&h.view?h.view:b.getElementById(this.id))&&(e=c(h,d)),e))return e;if(a.template_ref&&(e=this._getTemplateNode(a.template_ref))||
a.id&&(e=b.getElementById(a.id)))return e;return g},_getTemplateNode:function(a){var e=null;pa||(pa=b.querySelector(".application_templates"))&&pa.parentElement.removeChild(pa);pa&&(e=pa.querySelector("."+a));if(e)return b.importNode(e,!0)},initComponent:function(){v.EventSource.prototype.initComponent.call(this);this._pos=[-1,-1];this._size=[-1,-1];this._transform_origin=[0,0];this._autosizing=[4,4];this._holes={};this.__children={};this._pointerevent_handlers=[];this.__config__||(this.__config__=
{});this.__config__.id=this.id;(this.view=this._getGUInode(this.__config__))?(this.view.id=this._id,this.view._comp_=this,this.view.setAttribute("x-hag-comp",this.id),this._parse_view(this.view)):console.error("vs.ui.View constructor failed. No view!")},componentDidInitialize:function(){v.EventSource.prototype.componentDidInitialize.call(this);this._magnet&&this.view.style.setProperty("position","absolute",null);this._magnet===f.MAGNET_CENTER&&(this._updateSizeAndPos(),this._applyTransformation())},
viewDidAdd:function(){var a=this.view,b=this;a&&a.parentElement&&d.scheduleAction(function(){b._size[0]=a.offsetWidth;b._size[1]=a.offsetHeight;b._pos[0]=a.offsetLeft;b._pos[1]=a.offsetTop})},notify:function(){},_parse_view:function(a){if(a&&3!==a.nodeType){var b;if(null!==a.attributes&&(b=a.attributes.getNamedItem("x-hag-hole"))){this._holes[b.nodeValue]=a;return}for(a=a.firstElementChild;a;)this._parse_view(a),a=a.nextElementSibling}},createAndAddComponent:function(a,e,d){var c=o[a];if(c){e||(e=
{});e.id||(e.id=v.createId());var g=this.__getGUInode(e),h;g||(g=this._getTemplateNode(a));g||c.prototype&&c.prototype.template&&(g=p.parseHTML(c.prototype.template));g||c.prototype&&c.prototype.node_template&&(g=b.importNode(c.prototype.node_template,!0));if(!g){g=a+".xhtml";h=f.__comp_templates[g];if(!h)if(h=new XMLHttpRequest,h.open("GET",g,!1),h.send(null),4===h.readyState)if(200===h.status||0===h.status)h=h.responseText,f.__comp_templates[g]=h;else{console.error("Template file for component '"+
a+"' unfound.");return}else{console.error("Pb when load the component '"+a+"' template.");return}g=p.parseHTML(h)}e.node=g;g=null;try{g=new c(e)}catch(s){a="Impossible to instanciate comp: "+a+(" => "+s.message);console.error(a);s.stack&&console.error(s.stack);return}try{g.init(),g.configure(e)}catch(t){t.line&&t.sourceURL?(a="Error when initiate comp: "+a+(" => "+t.message),a+="\n"+t.sourceURL+":"+t.line):a=t,console.error(a),t.stack&&console.error(t.stack)}this.add(g,d);g.refresh();return g}console.error("Impossible to fund component '"+
a+"'.")},isChild:function(a){if(!a)return!1;var b,e;for(b in this.__children)if((e=this.__children[b])&&(e===a||e instanceof Array&&-1!==e.indexOf(a)))return!0;return!1},add:function(a,b,d){if(a&&(d?a.__gui_object__hack_view__=d:d=a.view,!this.isChild(a))){var c,g,b=d?b?b:f.ANY_PLACE:f.NON_G_OBJECT;(c=this.__children[b])&&e.isArray(c)?c.push(a):c?(g=[],g.push(c),g.push(a),this.__children[b]=g):this.__children[b]=a;b=this._holes[b];if(d&&b){if(d.parentElement){if(d.parentElement===b){a.__parent=this;
a.viewDidAdd&&a.viewDidAdd();return}d.parentElement.removeChild(d)}b.appendChild(d);a.__parent=this;a.viewDidAdd&&a.viewDidAdd()}}},remove:function(a){if(a){var b,e,d;if(d=a.__gui_object__hack_view__?a.__gui_object__hack_view__:a.view)for(b in this.__children)if((e=this.__children[b])&&(e===a||e instanceof Array&&-1!==e.indexOf(a))){e instanceof Array?e.remove(a):delete this.__children[b];d.parentElement&&d.parentElement.removeChild(d);a.__parent=null;break}}},removeAllChildren:function(a,b){function d(b){var c,
E;if(c=f.__children[b]){if(c instanceof Array)for(;c.length;)E=c[0],f.remove(E),a?e.free(E):h.push(E);else f.remove(c),a?e.free(c):h.push(c);delete f.__children[b]}}var c,f=this,h=[];if(b)d(b);else{for(c in f.__children)d(c);this.__children={}}return a?g:h},findNodeRef:function(a){return!this.view?void 0:c(this.view,a)},bind:function(a,b,c,g){if("POINTER_START"===a||"POINTER_END"===a||"POINTER_MOVE"===a||a===v.POINTER_START||a===v.POINTER_END||a===v.POINTER_MOVE){if(!this.view)return;var h,s=this,
t;c||(c="notify");if(e.isFunction(c))h=c;else if(e.isString(c)&&e.isFunction(b[c]))h=b[c];else{console.error("Invalid bind arguments.");return}if(!h){console.warn("Invalid bind arguments. Unknown func: "+c);return}s=this;t=function(a){if(!v.EVENT_SUPPORT_TOUCH||!(a.changedTouches&&1<a.changedTouches.length)){a.src=s;if(v.EVENT_SUPPORT_TOUCH&&a.changedTouches){a.pageX=a.changedTouches[0].pageX;a.pageY=a.changedTouches[0].pageY;var y=e.getElementAbsolutePosition(s.view);a.offsetX=a.changedTouches[0].pageX-
y.x;a.offsetY=a.changedTouches[0].pageY-y.y}f._propagate_pointer_event(b,h,a)}};"POINTER_START"===a&&(a=v.POINTER_START);"POINTER_MOVE"===a&&(a=v.POINTER_MOVE);"POINTER_END"===a&&(a=v.POINTER_END);this._pointerevent_handlers[b.id+a]=t;d.addPointerListener(this.view,a,t)}return v.EventSource.prototype.bind.call(this,a,b,c,g)},unbind:function(a,b){if(a&&b){if(a===v.POINTER_START||a===v.POINTER_END||a===v.POINTER_MOVE){var e=this._pointerevent_handlers[b.id+a];if(!e||!this.view)return;d.removePointerListener(this.view,
v.POINTER_END,e)}v.EventSource.prototype.unbind.call(this,a,b)}},_setMagnet:function(a){(this._magnet=a)?this.view.style.setProperty("position","absolute",null):this.view.style.removeProperty("position");this._updateSizeAndPos();this._applyTransformation()},_updateSizeAndPos:function(){var a=this._pos[0],b=this._pos[1],e=this._size[0],d=this._size[1],c=0,g=0,h="auto",s="auto",t="auto",j="auto",m=this._autosizing[0],k=this._autosizing[1],x=this.view,v;if(x){if(v=x.parentElement)c=v.offsetWidth,g=v.offsetHeight;
this._magnet===f.MAGNET_LEFT&&(a=0);this._magnet===f.MAGNET_TOP&&(b=0);if(4===m||5===m||6===m||7===m||2===m&&!c)h=a+"px";else if((2===m||0===m)&&c)h=100*(a/c)+"%";if(0<=e&&(1===m||3===m||5===m||7===m))t=c-(a+e),0>t&&(t=0),t+="px";if(4===k||5===k||6===k||7===k||2===k&&!g)s=b+"px";else if((2===k||0===k)&&g)s=100*(b/g)+"%";if(0<=d&&(1===k||3===k||5===k||7===k))j=g-(b+d),0>j&&(j=0),j+="px";this._magnet===f.MAGNET_BOTTOM&&(s="auto",j="0px");this._magnet===f.MAGNET_RIGHT&&(h="auto",t="0px");this._magnet===
f.MAGNET_CENTER&&(s="50%",j="auto",h="50%",t="auto");a=x.style;a.left=h;a.right=t;a.top=s;a.bottom=j;a.width=0>e?"":5===m||7===m?"auto":4===m||1===m?e+"px":2===m||3===m||6===m||0===m?c?100*(e/c)+"%":e+"px":"100%";a.height=0>d?"":5===k||7===k?"auto":4===k||1===k?d+"px":2===k||3===k||6===k||0===k?g?100*(d/g)+"%":d+"px":"100%"}},getStyle:function(a){if(!this.view)return g;var b=this.view.style,e;b&&(e=b[a]);return"opacity"===a?e?parseFloat(e):1:"auto"===e?null:e},getComputedStyle:function(a){var b=this._getComputedStyle(this.view);
return value=b?b[a]:null},_getComputedStyle:function(a){a||(a=this.view);if(!a)return g;var e=a.ownerDocument;if(!e||!e.defaultView)e=b;return!e||!e.defaultView?g:e.defaultView.getComputedStyle(a,null)},setStyle:function(a,b){a&&this.view&&this.view.style&&this.view.style.removeProperty&&this.view.style.setProperty&&("undefined"===typeof b?this.view.style.removeProperty(a):(e.isNumber(b)&&(b=""+b),this.view.style.setProperty(a,b,null)))},setStyles:function(a){a&&this.view&&this.view.style&&e.setElementStyle(this.view,
a)},addCssRules:function(a,b){e.addCssRules("#"+this._id+" "+a,b)},addCssRule:function(a,b){e.addCssRule("#"+this._id+" "+a,b)},redraw:function(a){if(this.view){var b=this.view,c=b.style.display,f=this;b.style.display="none";d.scheduleAction(function(){c?b.style.display=c:b.style.removeProperty("display");d.scheduleAction(function(){f.refresh();a&&e.isFunction(a)&&a.call(f)})})}},show:function(a){this.view&&!this._visible&&(e.isFunction(a)||(a=g),this.__view_display?this.view.style.display=this.__view_display:
this.view.style.removeProperty("display"),this.__view_display=g,this.__is_hidding=!1,this.__is_showing=!0,this._show_animation?this._show_animation.process(this,function(){this._show_object(a)},this):this._show_object(a))},_show_object:function(a){if(this.view&&(this.__visibility_anim=g,this.__is_showing)){this.__is_showing=!1;this._visible=!0;var b=this;this.propertyChange();if(this.__show_clb||a)this._show_animation?(this.__show_clb&&this.__show_clb.call(this),a&&a.call(this)):(this.__show_clb&&
d.scheduleAction(function(){b.__show_clb.call(b)}),a&&d.scheduleAction(function(){a.call(b)}))}},setShowAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._show_animation=null;else{if(a instanceof d.fx.Animation)this._show_animation=a.clone();else if(e.isArray(a))this._show_animation=new d.fx.Animation,this._show_animation.setAnimations(a);else{console.warn("vs.ui.View.setShowAnimation invalid parameters!");return}b&&(b.duration&&(this._show_animation.duration=b.duration),b.timing&&
(this._show_animation.timing=b.timing),b.origin&&(this._show_animation.origin=b.origin),b.iterationCount&&(this._show_animation.iterationCount=b.iterationCount),b.delay&&(this._show_animation.delay=b.delay))}e.isFunction(c);this.__show_clb=c},hide:function(a){if(this.view&&(this._visible||this.__is_showing))e.isFunction(a)||(a=g),this.__is_showing=this._visible=!1,this.__is_hidding=!0,this._hide_animation?this._hide_animation.process(this,function(){this._hide_object(a)},this):this._hide_object(a)},
_hide_object:function(a){if(this.view&&!this._visible&&(this.__visibility_anim=g,this.__is_hidding)){this.__is_hidding=!1;this.view.style.display?(this.__view_display=this.view.style.display,"none"===this.__view_display&&(this.__view_display=g)):this.__view_display=g;this.view.style.display="none";if(this.__hide_clb||a)this._show_animation?(this.__hide_clb&&this.__hide_clb.call(this),a&&a.call(this)):(this.__hide_clb&&d.scheduleAction(function(){self.__hide_clb.call(self)}),a&&d.scheduleAction(function(){a.call(self)}));
this.propertyChange()}},setHideAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._hide_animation=null;else{if(a instanceof d.fx.Animation)this._hide_animation=a.clone();else if(e.isArray(a))this._hide_animation=new d.fx.Animation,this._hide_animation.setAnimations(a);else{console.warn("vs.ui.View.setHideAnimation invalid parameters!");return}b&&(b.duration&&(this._hide_animation.duration=b.duration),b.timing&&(this._hide_animation.timing=b.timing),b.origin&&(this._hide_animation.origin=
b.origin),b.iterationCount&&(this._hide_animation.iterationCount=b.iterationCount),b.delay&&(this._hide_animation.delay=b.delay))}e.isFunction(c);this.__hide_clb=c},setVisible:function(a){this.view&&e.setElementVisibility(this.view,a)},hasClassName:function(a){return!this.view?!1:e.hasClassName(this.view,a)},addClassName:function(){if(this.view){var a=Array.prototype.slice.call(arguments);a.unshift(this.view);e.addClassName.apply(this.view,a)}},removeClassName:function(a){if(this.view){var b=Array.prototype.slice.call(arguments);
b.unshift(this.view);e.removeClassName.apply(this.view,b)}},toggleClassName:function(a){this.view&&e.isString(a)&&e.toggleClassName(this.view,a)},_propagateToParent:function(a){this._bubbling&&this.__parent&&this.__parent.handleEvent&&this.__parent.handleEvent(a)},notifyToParent:function(a){this.__parent&&(this.__parent.handleEvent?this.__parent.handleEvent(a):this.__parent.notify&&this.__parent.notify(a))},_didEnable:function(){},animate:function(a,b,c){var f;if(a instanceof d.fx.Animation)f=a;else if(e.isArray(a))f=
new d.fx.Animation,f.setAnimations(a);else{console.warn("vs.ui.View.animate invalid parameters!");return}b&&(b.duration&&(f.duration=b.duration),b.timing&&(f.timing=b.timing),b.origin&&(f.origin=b.origin),b.iterationCount&&(f.iterationCount=b.iterationCount),b.delay&&(f.delay=b.delay));return f.process(this,c,this)},translate:function(a,b){e.isNumber(a)&&e.isNumber(b)&&!(this.__view_t_x===a&&this.__view_t_y===b)&&(this.__view_t_x=a,this.__view_t_y=b,this._applyTransformation())},rotate:function(a){e.isNumber(a)&&
this._rotation!==a&&(this._rotation=a,this._applyTransformation())},scale:function(a){e.isNumber(a)&&(a>this._max_scale&&(a=this._max_scale),a<this._min_scale&&(a=this._min_scale),this._scaling!==a&&(this._scaling=a,this._applyTransformation()))},setNewTransformOrigin:function(a){a&&e.isNumber(a.x)&&e.isNumber(a.y)&&(this.flushTransformStack(),this._transform_origin=[a.x,a.y])},flushTransformStack:function(){var a=new d.CSSMatrix,a=a.translate(this._transform_origin[0],this._transform_origin[1],0),
a=a.translate(this.__view_t_x,this.__view_t_y,0),a=a.rotate(0,0,this._rotation),a=a.scale(this._scaling,this._scaling,1),a=a.translate(-this._transform_origin[0],-this._transform_origin[1],0);this._transforms_stack||(this._transforms_stack=a);this._transforms_stack=a.multiply(this._transforms_stack);delete a;this.__view_t_y=this.__view_t_x=0;this._scaling=1;this._rotation=0},pushNewTransform:function(a){a&&(this._transforms_stack=this._transforms_stack?a.multiply(this._transforms_stack):a)},clearTransformStack:function(){this._transforms_stack&&
delete this._transforms_stack;this._transforms_stack=g},getCTM:function(){var a,b=new d.CSSMatrix;a=b.translate(this._transform_origin[0]+this.__view_t_x,this._transform_origin[1]+this.__view_t_y,0);a=a.multiply(b.rotate(0,0,this._rotation));a=a.scale(this._scaling,this._scaling,1);a=a.translate(-this._transform_origin[0],-this._transform_origin[1],0);return this._transforms_stack?a.multiply(this._transforms_stack):a},getParentCTM:function(){function a(b){return!b?new d.CSSMatrix:a(b.__parent).multiply(b.getCTM())}
return a(this.__parent)},_applyTransformation:function(){var a=this.getCTM(),b=a.getMatrix3dStr();this._magnet===f.MAGNET_CENTER&&(b+=" translate(-50%,-50%)");da(this.view,b);delete a}};e.extend(f.prototype,ua);e.extendClass(f,v.EventSource);e.defineClassProperties(f,{size:{set:function(a){e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&this._updateSizeAndPos())},get:function(){return this._size.slice()}},position:{set:function(a){a&&
e.isArray(a)&&2==a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._pos[0]=a[0],this._pos[1]=a[1],this.view&&this._updateSizeAndPos())},get:function(){return this._pos.slice()}},autosizing:{set:function(a){a&&e.isArray(a)&&2==a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&!(this._autosizing[0]===a[0]&&this._autosizing[1]===a[1])&&(this._autosizing[0]=a[0],this._autosizing[1]=a[1],this.view&&this._updateSizeAndPos())}},magnet:{set:function(a){this._magnet===a||!e.isNumber(a)||0>a||5<a||this._setMagnet(a)}},
visible:{set:function(a){a?this.show():this.hide()},get:function(){return this._visible}},bubbling:{set:function(a){this._bubbling=a?!0:!1}},enable:{set:function(a){a&&!this._enable?(this._enable=!0,this.removeClassName("disabled"),this._didEnable()):!a&&this._enable&&(this._enable=!1,this.addClassName("disabled"),this._didEnable())},get:function(){return this._enable}},opacity:{set:function(a){if(e.isNumber(a)&&!(0>a||1<a))this.view&&(this.view.style.opacity=a),this._opacity=a}},translation:{set:function(a){e.isArray(a)&&
2===a.length&&this.translate(a[0],a[1])},get:function(){return[this.__view_t_x,this.__view_t_y]}},rotation:{set:function(a){this.rotate(a)},get:function(){return this._rotation}},scaling:{set:function(a){this.scale(a)},get:function(){return this._scaling}},minScale:{set:function(a){e.isNumber(a)&&(this._min_scale=a,this._scaling<this._min_scale&&this.scale(this._min_scale))},get:function(){return this._min_scale}},maxScale:{set:function(a){e.isNumber(a)&&(this._max_scale=a,this._scaling>this._max_scale&&
this.scale(this._max_scale))},get:function(){return this._max_scale}},transformOrigin:{set:function(a){e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._transform_origin[0]=a[0],this._transform_origin[1]=a[1])},get:function(){return this._transform_origin.slice()}},showAnimmation:{set:function(a){this.setShowAnimation(a)}},hideAnimation:{set:function(a){this.setHideAnimation(a)}},layout:{set:function(a){a!==f.HORIZONTAL_LAYOUT&&a!==f.DEFAULT_LAYOUT&&a!==f.ABSOLUTE_LAYOUT&&a!==
f.VERTICAL_LAYOUT&&a!==f.FLOW_LAYOUT&&a!==f.LEGACY_HORIZONTAL_LAYOUT&&a!==f.LEGACY_ABSOLUTE_LAYOUT&&a!==f.LEGACY_VERTICAL_LAYOUT&&a!==f.LEGACY_FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):(this._layout&&this.removeClassName(this._layout),(this._layout=!a||-1!==a.indexOf("_layout")?a:a+"_layout")&&this.addClassName(this._layout))}},innerHTML:{set:function(a){this.view&&e.safeInnerHTML(this.view,a)}}});f._ref_template_reg=/(\w+)#(\w+)/;N.View=f;f.getDeviceCSSCode=function(){var a=b.createElement("div"),
e;a.className="device_test";b.body.appendChild(a);e=b.defaultView.getComputedStyle(a,null).getPropertyValue("margin-top");b.body.removeChild(a);return parseInt(e||0,10)};var O=function(a){this._layout=g;this.parent=f;this.parent(a);this.constructor=O};O.CSS_DEFAULT=0;O.CSS_IOS=5;O.CSS_ANDROID=9;O.CSS_MEEGO=10;O.CSS_WP7=6;O.CSS_SYMBIAN=8;O.CSS_BLACKBERRY=7;O.CSS_PURE=100;O.CSS_FLAT=101;O.CSS_HOLO=102;O.CSS_IOS7=103;var ka={},va="onorientationchange"in o?"orientationchange":"resize";d.Application_applications=
ka;O.prototype={_prevent_scroll:!0,initComponent:function(){ka[this.id]=this;f.prototype.initComponent.call(this);this.preventScroll=!0;if(this.view instanceof HTMLHtmlElement){var a=this.view;a._comp_=g;this.view=a.querySelector("body");if(!this.view){console.error("Invalid Application view");return}this.view._comp_=this;a.removeAttribute("id");a.removeAttribute("x-hag-ref");a.removeAttribute("x-hag-comp")}this.view.setAttribute("id",this.id);this.view.setAttribute("x-hag-ref",this.id);this.view.setAttribute("x-hag-comp",
this.id);var b=this;o.addEventListener(va,function(){var a=o.deviceConfiguration.setOrientation(o.orientation);a&&b.propagate("deviceChanged",a,null,!0)})},exit:function(){O.exit()},applicationStarted:function(){},_updateSizeAndPos:function(){this.view.style.width=this._size[0]+"px";this.view.style.height=this._size[1]+"px";this.view.style.right="auto";this.view.style.bottom="auto";this.view.style.left=this._pos[0]+"px";this.view.style.top=this._pos[1]+"px";this.view.style.right="auto";this.view.style.bottom=
"auto"},setActiveStyleSheet:function(a){O.setActiveStyleSheet(a);this.propagate("deviceChanged",a,null,!0)},orientationWillChange:function(){},buildDataflow:function(){d._default_df_.build()},loadScript:function(a){var d=this;e.importFile(a,b,function(a){a&&d.propagate("scriptloaded",a)},"js")},loadCSS:function(a){var d=this;e.importFile(a,b,function(a){a&&d.propagate("cssloaded",a)},"css")}};e.extendClass(O,f);e.defineClassProperties(O,{size:{set:function(a){a&&e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&
e.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSizeAndPos(),o.resizeTo(this._size[0],this._size[1])))},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}},preventScroll:{set:function(a){this._prevent_scroll=a?!0:!1;b.preventScroll=a},get:function(){this._prevent_scroll=b.preventScroll;return this.__prevent_scroll}}});O.exit=function(){o.close&&o.close()};O.configureDevice=
function(){function a(){function y(a,e){var d=b.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",a);d.setAttribute("media","screen");e?b.head.insertBefore(d,e):b.head.appendChild(d)}var e=o.target_css?o.target_css[o.deviceConfiguration.targetId]:"";e||(e="default");for(var d=b.head.querySelectorAll("link"),c,f=0;f<d.length;f++)if(c=d.item(f),-1!==c.getAttribute("href").indexOf("vs_ui.css")){c=c.nextElementSibling;break}else c=null;if("default"==
e)switch(o.deviceConfiguration.os){case u.OS_IOS:y("lib/css/vs_ui_ios.css",c);break;case u.OS_ANDROID:y("lib/css/vs_ui_android.css",c)}else y("lib/css/vs_ui_"+e+".css",c)}var e=o.deviceConfiguration.generateDeviceId(!0),d;o.deviceConfiguration.deviceId=e;o.deviceConfiguration.virtualScreenSize=null;if(o.target_device_ids)for(d in o.target_device_ids)if(-1!==o.target_device_ids[d].indexOf(e)){o.deviceConfiguration.targetId=d;o.deviceConfiguration.setOrientation(o.orientation||0,!0);a();return}deviceConfiguration.screenSize===
u.SS_4_INCH&&(d="phone3_4");deviceConfiguration.screenSize===u.SS_7_INCH&&(d="tablet7");deviceConfiguration.screenSize===u.SS_10_INCH&&(d="phone10");if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)d+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)d+="_l";if(o.target_device_ids&&o.target_device_ids[d])o.deviceConfiguration.targetId=d,o.deviceConfiguration.setOrientation(o.orientation||0,!0),a();else{e=K(u.SS_7_INCH);deviceConfiguration.screenSize===
u.SS_10_INCH&&(d="tablet7");if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)d+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)d+="_l";if(o.target_device_ids&&o.target_device_ids[d])o.deviceConfiguration.targetId=d,o.deviceConfiguration.virtualScreenSize=e,o.deviceConfiguration.setOrientation(o.orientation||0,!0),a();else{d="phone3_4";e=K(u.SS_4_INCH);if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)d+=
"_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)d+="_l";o.target_device_ids&&o.target_device_ids[d]&&(o.deviceConfiguration.targetId=d,o.deviceConfiguration.virtualScreenSize=e,o.deviceConfiguration.setOrientation(o.orientation||0,!0),a())}}};O.getOrientation=function(){return o.deviceConfiguration.getOrientation()};O.start=function(){var a,b;for(a in ka)b=ka[a],b.propertyChange(),b.applicationStarted(),d.scheduleAction(function(){b.refresh()});d.scheduleAction(function(){d._default_df_.build()})};
O.stop=function(){var a,b;for(a in ka)b=ka[a],e.free(b);ka={};for(a in d.core.Object._obs)b=d.core.Object._obs[a],d.util.free(b)};O.sendStart=function(){console.log("Application.sendStart is deprecated. Please use Application.start");O.start()};O.propagate=function(a,b){var e,d;for(e in ka)(d=ka[e])&&d.propagate(a,b)};O.preloadTemplates=function(a){for(var b=0;b<a.length;b++)e.preloadTemplate(a[b])};var ra=function(a){for(var b=0;b<a.length;b++)this.preload(a[b])};o.ImagePreloader=ra;ra.__image_path=
{};ra.prototype.preload=function(a){ra.__image_path[a]||((new Image).src=a,ra.__image_path[a]=!0)};O.prototype.mainViewVisibility=function(){};O.prototype.setImageBackground=function(){};O.prototype.loadingStart=function(){};O.prototype.loadingStop=function(){};N.Application=O;var X=d.core.createClass({parent:d.ui.View,properties:{delegate:{set:function(a){this._delegate=a}},mode:{set:function(a){a!==X.TABLET_MODE&&a!==X.MOBILE_MODE||(this.removeClassName(this._mode),this._mode=a,this.addClassName(this._mode),
this._orientation===X.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(){return this._mode}},hideMainPanelButton:{set:function(a){this._hide_main_panel_button=a;this._mode==X.TABLET_MODE&&this._hide_main_panel_button.hide();this._hide_main_panel_button.bind("select",this)}},showPopOverButton:{set:function(a){this._show_pop_over_button=a;this._mode==X.MOBILE_MODE&&this._show_pop_over_button.hide();this._show_pop_over_button.bind("select",this)}},secondPanelPosition:{set:function(a){a!==
X.LEFT&&a!==X.RIGHT&&a!==X.TOP&&a!==X.BOTTOM||(this.removeClassName(this._second_panel_position),this._second_panel_position=a,this.addClassName(this._second_panel_position))}},orientation:{set:function(a){a!==X.VERTICAL&&a!==X.HORIZONTAL||(this.removeClassName(this._orientation),this._orientation=a,this.addClassName(this._orientation),a===X.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(){return this._orientation}}},_delegate:null,_mode:"",_second_panel_position:"",_orientation:"",
_split_views:null,_fisrt_view_width:320,_pop_over_border_width:8,_pop_over:null,constructor:function(a){this._super(a);this._left_views=[];this._pop_over=new I},initComponent:function(){this._super();this._pop_over.init();this._pop_over.hide();b.body.appendChild(this._pop_over.view);this.mode=this._mode?this._mode:X.TABLET_MODE;if(this._orientation)this.orientation=this._orientation;else{var a=o.deviceConfiguration.getOrientation();this.orientation=0===a||180===a?X.VERTICAL:X.HORIZONTAL}this.secondPanelPosition=
this._second_panel_position?this._second_panel_position:X.LEFT},add:function(a,b){"second_panel"===b?(this._left_views.push(a),this._mode===X.MOBILE||this._orientation===X.HORIZONTAL?this._super(a,"second_panel"):this._pop_over.add(a)):this._super(a,"main_panel")},removeAllChildren:function(a){var b,d,c,f=[];for(b in this.__children)if(d=this.__children[b]){if(d instanceof Array)for(;d.length;)c=d[0],this.remove(c),a?e.free(c):f.push(c);else this.remove(d),a?e.free(d):f.push(d);delete this.__children[b]}this.__children=
{};return a?g:f},refresh:function(){this._super();this._pop_over.visible&&this._pop_over.refresh()},orientationWillChange:function(a){this.orientation=90===a||-90===a?X.HORIZONTAL:X.VERTICAL},_set_orientation:function(a){var b;if(b=this._left_views[0])this._mode===X.MOBILE_MODE||90===a||-90===a?(this._pop_over.hide(),this._pop_over.isChild(b)&&this._pop_over.remove(b),this.isChild(b)||f.prototype.add.call(this,b,"second_panel"),b.show(b.refresh),this._delegate&&this._delegate.willShowView&&this._delegate.willShowView(b,
this._pop_over),this._show_pop_over_button&&this._show_pop_over_button.hide()):(this.isChild(b)&&f.prototype.remove.call(this,b),this._pop_over.isChild(b)||this._pop_over.add(b),b.show(),this._pop_over.size=[this._fisrt_view_width+2*this._pop_over_border_width,500],this._show_pop_over_button&&this._show_pop_over_button.show(),this._delegate&&this._delegate.willShowView&&this._delegate.willHideView(b,this._pop_over))},orientationDidChange:function(){this.refresh()},showPopOver:function(a,b){this._mode!==
X.TABLET_MODE||this._orientation!==X.VERTICAL||(this._pop_over.show(a,b),this._pop_over.refresh())},hidePopOver:function(){this._pop_over.hide()},showMainView:function(a){var b=this;this._mode===X.MOBILE_MODE&&(this._hide_main_panel_button&&this._hide_main_panel_button.show(),a?b.addClassName("main_view_visible"):setTimeout(function(){b.addClassName("main_view_visible")},f.UNSELECT_DELAY))},hideMainView:function(){this._mode===X.MOBILE_MODE&&(this._hide_main_panel_button&&this._hide_main_panel_button.hide(),
this.removeClassName("main_view_visible"))},notify:function(a){"select"==a.type&&a.src==this._hide_main_panel_button&&this.hideMainView();"select"==a.type&&a.src==this._show_pop_over_button&&this.showPopOver([20,20])}});X.TABLET_MODE="tablet";X.MOBILE_MODE="mobile";X.VERTICAL="vertical";X.HORIZONTAL="horizontal";X.RIGHT="right";X.LEFT="left";X.BOTTOM="bottom";X.TOP="top";N.SplitView=X;"WebKitCSSMatrix"in o&&new WebKitCSSMatrix;(function(a,b,e){function d(a){if(""===f)return a;a=a.charAt(0).toUpperCase()+
a.substr(1);return f+a}var c=Math,f=e.CSS_VENDOR,h=e.CSS_VENDOR?"-"+e.CSS_VENDOR+"-":"",s=d("transform"),t=d("transitionProperty"),j=e.TRANSITION_DURATION,m=e.TRANSFORM_ORIGIN,k=e.TRANSITION_TIMING_FUNC,x=e.TRANSITION_DELAY,v=/android/gi.test(navigator.appVersion),n=/iphone|ipad/gi.test(navigator.appVersion);/hp-tablet/gi.test(navigator.appVersion);var o=e.SUPPORT_3D_TRANSFORM,u="ontouchstart"in a,r=e.SUPPORT_CSS_TRANSFORM,p="onorientationchange"in a?"orientationchange":"resize",z=e.POINTER_START,
q=e.POINTER_MOVE,D=e.POINTER_END,N=e.POINTER_CANCEL,w=e.TRANSITION_END,F=e.requestAnimationFrame,A=e.cancelRequestAnimationFrame,K=o?" translateZ(0)":"",B=function(e,d,c){var f=this,g;f.wrapper="object"==typeof e?e:b.getElementById(e);f.wrapper.style.overflow="hidden";f.scroller=d;f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:v,hideScrollbar:n,
fadeScrollbar:n&&o,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(g in c)f.options[g]=c[g];f.x=f.options.x;f.y=f.options.y;f.options.useTransform=r&&f.options.useTransform;f.options.hScrollbar=
f.options.hScroll&&f.options.hScrollbar;f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar;f.options.zoom=f.options.useTransform&&f.options.zoom;f.options.useTransition=r&&f.options.useTransition;f.options.zoom&&v&&(K="");f.scroller.style[t]=f.options.useTransform?h+"transform":"top left";f.scroller.style[j]="0";f.scroller.style[m]="0 0";f.options.useTransition&&(f.scroller.style[k]="cubic-bezier(0.33,0.66,0.66,1)");f.options.useTransform?f.scroller.style[s]="translate("+f.x+"px,"+f.y+"px)"+
K:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px";f.options.useTransition&&(f.options.fixedScrollbar=!0);f.refresh();f._bind(p,a);f._bind(z);!u&&"none"!=f.options.wheelAction&&(f._bind("DOMMouseScroll"),f._bind("mousewheel"));f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500))};B.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case z:if(!u&&
0!==a.button)break;this._start(a);break;case q:this._move(a);break;case D:case N:this._end(a);break;case p:this._resize();break;case "DOMMouseScroll":case "mousewheel":this._wheel(a);break;case w:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(a){var e;this[a+"Scrollbar"]?(this[a+"ScrollbarWrapper"]||(e=
b.createElement("div"),this.options.scrollbarClass?e.className=this.options.scrollbarClass+a.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;"+h+"transition-property:opacity;"+h+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?
"0":"1"),this.wrapper.appendChild(e),this[a+"ScrollbarWrapper"]=e,e=b.createElement("div"),this.options.scrollbarClass||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+h+"background-clip:padding-box;"+h+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+h+"border-radius:3px;border-radius:3px"),e.style.cssText+=";pointer-events:none;"+h+"transition-property:"+h+"transform;"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+
h+"transition-duration:0;"+h+"transform: translate(0,0)"+K,this.options.useTransition&&(e.style.cssText+=";"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[a+"ScrollbarWrapper"].appendChild(e),this[a+"ScrollbarIndicator"]=e),"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=c.max(c.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=
this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=c.max(c.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(a,!0)):
this[a+"ScrollbarWrapper"]&&(r&&(this[a+"ScrollbarIndicator"].style[s]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},v?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[s]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+K:(a=c.round(a),b=c.round(b),this.scroller.style.left=
a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var e="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(e*=this[a+"ScrollbarProp"],0>e?(this.options.fixedScrollbar||(e=this[a+"ScrollbarIndicatorSize"]+c.round(3*e),8>e&&(e=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=e+"px"),e=0):e>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?e=this[a+"ScrollbarMaxScroll"]:(e=this[a+"ScrollbarIndicatorSize"]-
c.round(3*(e-this[a+"ScrollbarMaxScroll"])),8>e&&(e=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=e+"px",e=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-e))),this[a+"ScrollbarWrapper"].style[x]="0",this[a+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style[s]="translate("+("h"==a?e+"px,0)":"0,"+e+"px)")+K)},_start:function(b){var e=b.pointerList[0],d,f;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,
b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&1<b.nbPointers&&(f=c.abs(b.pointerList[0].pageX-b.pointerList[1].pageX),d=c.abs(b.pointerList[0].pageY-b.pointerList[1].pageY),this.touchesDistStart=c.sqrt(f*f+d*d),this.originX=c.abs(b.pointerList[0].pageX+b.pointerList[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=c.abs(b.pointerList[0].pageY+
b.pointerList[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b));if(this.options.momentum&&(this.options.useTransform?(d=getComputedStyle(this.scroller,null)[s].replace(/[^0-9\-.,]/g,"").split(","),f=+(d[12]||d[4]),d=+(d[13]||d[5])):(f=+getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),d=+getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),f!=this.x||d!=this.y))this.options.useTransition?this._unbind(w):A(this.aniTime),
this.steps=[],this._pos(f,d),this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=e.pageX;this.pointY=e.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(q,a);this._bind(D,a);this._bind(N,a)}},_move:function(a){var b=a.pointerList[0],e=b.pageX-this.pointX,d=b.pageY-this.pointY,y=this.x+e,f=this.y+d,g=a.timeStamp||Date.now();
this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&1<a.nbPointers)y=c.abs(a.pointerList[0].pageX-a.pointerList[1].pageX),f=c.abs(a.pointerList[0].pageY-a.pointerList[1].pageY),this.touchesDist=c.sqrt(y*y+f*f),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=
b/this.scale,y=this.originX-this.originX*this.lastScale+this.x,f=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[s]="translate("+y+"px,"+f+"px) scale("+b+")"+K,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<y||y<this.maxScrollX)y=this.options.bounce?this.x+e/2:0<=y||0<=this.maxScrollX?0:this.maxScrollX;if(f>this.minScrollY||f<this.maxScrollY)f=this.options.bounce?this.y+d/2:f>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:
this.maxScrollY;this.distX+=e;this.distY+=d;this.absDistX=c.abs(this.distX);this.absDistY=c.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(f=this.y,d=0):this.absDistY>this.absDistX+5&&(y=this.x,e=0)),this.moved=!0,this._pos(y,f),this.dirX=0<e?-1:0>e?1:0,this.dirY=0<d?-1:0>d?1:0,300<g-this.startTime&&(this.startTime=g,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,a))}},_end:function(e){if(0===
e.nbPointers){var d=this,f=e.changedPointerList[0],g,h,t={dist:0,time:0},m={dist:0,time:0},fa=(e.timeStamp||Date.now())-d.startTime,k=d.x,x=d.y;d._unbind(q,a);d._unbind(D,a);d._unbind(N,a);d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,e);if(d.zoomed)k=d.scale*d.lastScale,k=Math.max(d.options.zoomMin,k),k=Math.min(d.options.zoomMax,k),d.lastScale=k/d.scale,d.scale=k,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[j]="200ms",d.scroller.style[s]=
"translate("+d.x+"px,"+d.y+"px) scale("+d.scale+")"+K,d.zoomed=!1,d.refresh(),d.options.onZoomEnd&&d.options.onZoomEnd.call(d,e);else{if(d.moved){if(300>fa&&d.options.momentum){t=k?d._momentum(k-d.startX,fa,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):t;m=x?d._momentum(x-d.startY,fa,-d.y,0>d.maxScrollY?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):m;k=d.x+t.dist;x=d.y+m.dist;if(0<d.x&&0<k||d.x<d.maxScrollX&&k<d.maxScrollX)t={dist:0,time:0};if(d.y>d.minScrollY&&
x>d.minScrollY||d.y<d.maxScrollY&&x<d.maxScrollY)m={dist:0,time:0}}t.dist||m.dist?(t=c.max(c.max(t.time,m.time),10),d.options.snap&&(m=k-d.absStartX,fa=x-d.absStartY,c.abs(m)<d.options.snapThreshold&&c.abs(fa)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(m=d._snap(k,x),k=m.x,x=m.y,t=c.max(m.time,t))),d.scrollTo(c.round(k),c.round(x),t)):d.options.snap?(m=k-d.absStartX,fa=x-d.absStartY,c.abs(m)<d.options.snapThreshold&&c.abs(fa)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,
200):(m=d._snap(d.x,d.y),(m.x!=d.x||m.y!=d.y)&&d.scrollTo(m.x,m.y,m.time))):d._resetPos(200)}else u&&(d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,e),d.zoom(d.pointX,d.pointY,1==d.scale?d.options.doubleTapZoom:1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,e)},200)):this.options.handleClick&&(d.doubleTapTimer=setTimeout(function(){d.doubleTapTimer=null;for(g=f.target;1!=g.nodeType;)g=
g.parentNode;"SELECT"!=g.tagName&&"INPUT"!=g.tagName&&"TEXTAREA"!=g.tagName&&(h=b.createEvent("MouseEvents"),h.initMouseEvent("click",!0,!0,e.view,1,f.screenX,f.screenY,f.clientX,f.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),h._fake=!0,g.dispatchEvent(h))},d.options.zoom?250:0))),d._resetPos(400);d.options.onTouchEnd&&d.options.onTouchEnd.call(d,e)}}},_resetPos:function(a){var b=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,d=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:
this.y<this.maxScrollY?this.maxScrollY:this.y;b==this.x&&d==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==f&&(this.hScrollbarWrapper.style[x]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&("webkit"==f&&(this.vScrollbarWrapper.style[x]="300ms"),this.vScrollbarWrapper.style.opacity="0")):this.scrollTo(b,d,a||0)},_wheel:function(a){var b=this,d,
e;if("wheelDeltaX"in a)d=a.wheelDeltaX/12,e=a.wheelDeltaY/12;else if("wheelDelta"in a)d=e=a.wheelDelta/12;else if("detail"in a)d=e=3*-a.detail;else return;"zoom"==b.options.wheelAction?(e=b.scale*Math.pow(2,1/3*(e?e/Math.abs(e):0)),e<b.options.zoomMin&&(e=b.options.zoomMin),e>b.options.zoomMax&&(e=b.options.zoomMax),e!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,e,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&
b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400))):(d=b.x+d,e=b.y+e,0<d?d=0:d<b.maxScrollX&&(d=b.maxScrollX),e>b.minScrollY?e=b.minScrollY:e<b.maxScrollY&&(e=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(d,e,0))},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind(w),this._startAni())},_startAni:function(){var a=this,b=a.x,d=a.y,e=Date.now(),y,f,g;a.animating||(a.steps.length?(y=a.steps.shift(),y.x==b&&y.y==d&&(y.time=0),a.animating=!0,a.moved=!0,a.options.useTransition?(a._transitionTime(y.time),
a._pos(y.x,y.y),a.animating=!1,y.time?a._bind(w):a._resetPos(0)):(g=function(){var E=Date.now();E>=e+y.time?(a._pos(y.x,y.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni()):(E=(E-e)/y.time-1,f=c.sqrt(1-E*E),E=(y.x-b)*f+b,a._pos(E,(y.y-d)*f+d),a.animating&&(a.aniTime=F(g)))},g())):a._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[j]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[j]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[j]=
a)},_momentum:function(a,b,d,e,y){var b=c.abs(a)/b,f=b*b/0.0012;0<a&&f>d?(d+=y/(6/(6.0E-4*(f/b))),b=b*d/f,f=d):0>a&&f>e&&(e+=y/(6/(6.0E-4*(f/b))),b=b*e/f,f=e);return{dist:f*(0>a?-1:1),time:c.round(b/6.0E-4)}},_offset:function(a){for(var b=-a.offsetLeft,d=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,d-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,d*=this.scale);return{left:b,top:d}},_snap:function(a,b){var d,e,y;y=this.pagesX.length-1;for(d=0,e=this.pagesX.length;d<e;d++)if(a>=this.pagesX[d]){y=d;
break}y==this.currPageX&&0<y&&0>this.dirX&&y--;a=this.pagesX[y];e=(e=c.abs(a-this.pagesX[this.currPageX]))?500*(c.abs(this.x-a)/e):0;this.currPageX=y;y=this.pagesY.length-1;for(d=0;d<y;d++)if(b>=this.pagesY[d]){y=d;break}y==this.currPageY&&0<y&&0>this.dirY&&y--;b=this.pagesY[y];d=(d=c.abs(b-this.pagesY[this.currPageY]))?500*(c.abs(this.y-b)/d):0;this.currPageY=y;y=c.round(c.max(e,d))||200;return{x:a,y:b,time:y}},_bind:function(a,b,d){e.addPointerListener(b||this.scroller,a,this,!!d)},_unbind:function(a,
b,d){e.removePointerListener(b||this.scroller,a,this,!!d)},destroy:function(){this.scroller.style[s]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(p,a);this._unbind(z);this._unbind(q,a);this._unbind(D,a);this._unbind(N,a);this.options.hasTouch||(this._unbind("DOMMouseScroll"),this._unbind("mousewheel"));this.options.useTransition&&this._unbind(w);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},
refresh:function(){var a,b,d,e=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=c.round(this.scroller.offsetWidth*this.scale);this.scrollerH=c.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;
this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=
[];d=this.scroller.querySelectorAll(this.options.snap);for(a=0,b=d.length;a<b;a++)e=this._offset(d[a]),e.left+=this.wrapperOffsetLeft,e.top+=this.wrapperOffsetTop,this.pagesX[a]=e.left<this.maxScrollX?this.maxScrollX:e.left*this.scale,this.pagesY[a]=e.top<this.maxScrollY?this.maxScrollY:e.top*this.scale}else if(this.options.snap){for(this.pagesX=[];e>=this.maxScrollX;)this.pagesX[b]=e,e-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-
1]+this.pagesX[this.pagesX.length-1]);b=e=0;for(this.pagesY=[];e>=this.maxScrollY;)this.pagesY[b]=e,e-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[j]="0",this._resetPos(400))},scrollTo:function(a,b,d,e){var y=a;this.stop();y.length||(y=[{x:a,y:b,time:d,relative:e}]);for(a=0,b=y.length;a<b;a++)y[a].relative&&
(y[a].x=this.x-y[a].x,y[a].y=this.y-y[a].y),this.steps.push({x:y[a].x,y:y[a].y,time:y[a].time||0});this._startAni()},scrollToElement:function(a,b){var d;if(a=a.nodeType?a:this.scroller.querySelector(a))d=this._offset(a),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=0<d.left?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=d.top>this.minScrollY?this.minScrollY:d.top<this.maxScrollY?this.maxScrollY:d.top,b=b===g?c.max(2*c.abs(d.left),2*c.abs(d.top)):b,this.scrollTo(d.left,
d.top,b)},scrollToPage:function(a,b,d){d=d===g?400:d;this.options.onScrollStart&&this.options.onScrollStart.call(this);this.options.snap?(a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b]):(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),
b<this.maxScrollY&&(b=this.maxScrollY));this.scrollTo(a,b,d)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(q,a);this._unbind(D,a);this._unbind(N,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(w):A(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,d,e){var y=d/this.scale;this.options.useTransform&&(this.zoomed=!0,e=e===g?200:e,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,
this.x=a-a*y+this.x,this.y=b-b*y+this.y,this.scale=d,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[j]=e+"ms",this.scroller.style[s]="translate("+this.x+"px,"+this.y+"px) scale("+d+")"+K,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};"undefined"!==typeof exports?exports.iScroll=B:a.iScroll=B})(o,b,d);B.NO_SCROLL=0;B.VERTICAL_SCROLL=
1;B.HORIZONTAL_SCROLL=2;B.SCROLL=3;B.NO_PINCH=0;B.ROTATION=1;B.SCALE=2;B.ROTATION_AND_SCALE=3;B.prototype={_delegate:null,_scroll:!1,__scroll_activated:!1,_pinch:B.NO_PINCH,_ab_view_t_x:0,_ab_view_t_y:0,_ab_view_s:1,_ab_view_r:0,_animation_duration:0,refresh:function(){var a,b=this.size,e=b[0],c=b[1],g,h=this._getComputedStyle(this.view),s=0,t=0;this._sub_view&&(this._sub_view.style.height="",this._sub_view.style.width="",d.scheduleAction(function(){if(this.__i__){f.prototype.refresh.call(this);h&&
(g=h["border-right-width"],s+=g?parseInt(g,10):0,g=h["border-left-width"],s+=g?parseInt(g,10):0,g=h["border-top-width"],t+=g?parseInt(g,10):0,g=h["borde-bottom-width"],t+=g?parseInt(g,10):0);e-=s;c-=t;for(a=this._sub_view.firstElementChild;a;)g=a.offsetHeight+a.offsetTop,g>c&&(c=g),g=a.offsetWidth+a.offsetLeft,g>e&&(e=g),a=a.nextElementSibling;this._scroll===B.SCROLL&&(this._sub_view.style.width=e+"px",this._sub_view.style.height=c+"px");this._scroll===B.HORIZONTAL_SCROLL&&(this._sub_view.style.width=
e+"px",this._sub_view.style.height=this.size[1]-s+"px");this._scroll===B.VERTICAL_SCROLL&&(this._sub_view.style.width=this.size[0]-t+"px",this._sub_view.style.height=c+"px");this._scroll===B.NO_SCROLL&&(b=this.size,this._sub_view.style.width=b[0]+"px",this._sub_view.style.height=b[1]+"px");this.__iscroll__&&this.__iscroll__.refresh()}}.bind(this)))},destructor:function(){this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=g);this._scroll=!1;this._sub_view&&this._sub_view.parentElement&&
this._sub_view.parentElement.removeChild(this._sub_view);f.prototype.destructor.call(this);delete this._sub_view},add:function(a,b){a&&(a instanceof z&&(b="top_bar"),a instanceof h&&(b="bottom_bar"),f.prototype.add.call(this,a,b))},initComponent:function(){f.prototype.initComponent.call(this);this._sub_view=this.view.querySelector(".content");this.pinch=this._pinch;this.scroll=this._scroll;this.layout=this._layout;this.animationDuration=this._animation_duration;this.refresh()},_updateSize:function(){f.prototype._updateSize.call(this);
this.refresh()},_setup_iscroll:function(){this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=g);if(this.view&&this._sub_view){var a={bubbling:!1,hScroll:!1,vScroll:!1};1===this._scroll?a.vScroll=!0:2===this._scroll?a.hScroll=!0:3===this._scroll&&(a.hScroll=!0,a.vScroll=!0);a.hScrollbar=!1;a.vScrollbar=!1;this.__iscroll__=new iScroll(this.view,this._sub_view,a);this.refresh()}}};e.extendClass(B,f);e.defineClassProperties(B,{delegate:{set:function(a){this._delegate=a}},scroll:{set:function(a){if(a!==
this._scroll)if(a){if(!0===a||1===a||2===a||3===a)this._scroll=a,this._setup_iscroll()}else this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=g),this._scroll=!1},get:function(){return this._scroll}},pinch:{set:function(a){!(a!==B.NO_PINCH&&a!==B.ROTATION&&a!==B.SCALE&&a!==B.ROTATION_AND_SCALE)&&this.view&&(this._pinch=a)}},animationDuration:{set:function(a){a||(a=0);e.isNumber(a)&&(this._animation_duration=a,this._sub_view&&(this._sub_view.style.webkitTransitionDuration=a+"ms",(this.hScrollbar||
this.vScrollbar)&&this._scroll_transition_time(a)))}},layout:{set:function(a){a!==f.HORIZONTAL_LAYOUT&&a!==f.DEFAULT_LAYOUT&&a!==f.ABSOLUTE_LAYOUT&&a!==f.VERTICAL_LAYOUT&&a!==f.FLOW_LAYOUT&&a!==f.LEGACY_HORIZONTAL_LAYOUT&&a!==f.LEGACY_ABSOLUTE_LAYOUT&&a!==f.LEGACY_VERTICAL_LAYOUT&&a!==f.LEGACY_FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):(a&&-1===a.indexOf("_layout")&&(a+="_layout"),this._sub_view?(this._layout&&e.removeClassName(this._sub_view,this._layout),(this._layout=a)&&e.addClassName(this._sub_view,
this._layout)):this._layout=a)}},innerHTML:{set:function(a){this._sub_view&&e.safeInnerHTML(this._sub_view,a)}}});N.ScrollView=B;L.STRETCH_NONE=0;L.STRETCH_FILL=1;L.STRETCH_UNIFORM=2;L.STRETCH_UNIFORM_FILL=3;L.prototype={_image_data:null,_image_width:0,_image_height:0,_image_loaded:!1,_src:null,_stretch:L.STRETCH_FILL,destructor:function(){this._sub_view&&(this._image_data.onload=null,delete this._image_data,this._image_loaded=!1,this._sub_view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");
B.prototype.destructor.call(this)},show:function(){B.prototype.show.call(this);this.stretch=this._stretch},refresh:function(){if(this._sub_view&&this._image_loaded)if(this._stretch===L.STRETCH_FILL)this._sub_view.setAttribute("width","100%"),this._sub_view.setAttribute("height","100%");else if(this._stretch===L.STRETCH_NONE)this._sub_view.removeAttribute("width"),this._sub_view.removeAttribute("height");else if(this._stretch===L.STRETCH_UNIFORM){var a=this._size[0]/this._size[1],b=this._image_width/
this._image_height,d=0,d=1;a<b?(d=this._image_width/this._size[0],d=(this._size[1]-this._image_height/d)/2,this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height"),this._sub_view.style.left="0px",this._sub_view.style.top=d+"px"):(d=this._image_height/this._size[1],d=(this._size[0]-this._image_width/d)/2,this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%"),this._sub_view.style.top="0px",this._sub_view.style.left=d+"px")}else this._stretch===
L.STRETCH_UNIFORM_FILL&&(a=this._size[0]/this._size[1],b=this._image_width/this._image_height,a>b?(this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height")):(this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%")));this.__scroll_activated&&this._scroll_refresh(this._pinch);f.prototype.refresh.call(this)},_image_onload:function(){this._image_loaded=!0;this._image_width=this._image_data.width;this._image_height=this._image_data.height;this._sub_view&&
(this._sub_view.src=this._src);this.stretch=this._stretch;this.propagate("load");var a=this;d.scheduleAction(function(){a.refresh()})},initComponent:function(){B.prototype.initComponent.call(this);var a=this;this._image_data=new Image;this._image_data.onload=function(b){a._image_onload(b)};this.pinch=this._pinch;this.pan=this._pan;this._sub_view&&this._sub_view.src&&(this._src=this._sub_view.getAttribute("src"),this._image_data.src=this._src,this._image_onload());this._sub_view&&(this._sub_view.ondragstart=
function(a){a.preventDefault();return!1},this.stretch=this._stretch);this.refresh()}};e.extendClass(L,B);e.defineClassProperties(L,{src:{set:function(a){e.isString(a)&&(this._image_loaded=!1,this._src=a,this._image_data.src=this._src)},get:function(){return this._src}},stretch:{set:function(a){e.isNumber(a)&&!(a!==L.STRETCH_FILL&&a!==L.STRETCH_NONE&&a!==L.STRETCH_UNIFORM&&a!==L.STRETCH_UNIFORM_FILL)&&(this._stretch=a,this.refresh())},get:function(){return this._stretch}},size:{set:function(a){if(e.isArray(a)||
2===a.length||e.isNumber(a[0])&&e.isNumber(a[1]))this.stretch=this._stretch,this._size[0]=a[0],this._size[1]=a[1],this._updateSizeAndPos()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});N.ScrollImageView=L;V.prototype={_ab_view_t_x:0,_ab_view_t_y:0,_value:"",destructor:function(){this.view.removeEventListener("change",this);this.view.removeEventListener("focus",this);this.view.removeEventListener("blur",
this);this.view.removeEventListener("textInput",this);f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);e.isString(this._value)&&(this.view.value=this._value,this.view.addEventListener("textInput",this),this.view.addEventListener("change",this),this.view.addEventListener("focus",this),this.view.addEventListener("blur",this))},setFocus:function(){this.view.focus()},setBlur:function(){this.view.blur()},setPointerEvents:function(a){this._text_field.style.pointerEvents=
a?"none":"auto"},handleEvent:function(a){function e(a){a.src!==c.view&&(d.removePointerListener(b,v.POINTER_START,e,!0),c.setBlur())}var c=this;switch(a.type){case "focus":d.addPointerListener(b,v.POINTER_START,e,!0);break;case "change":this._value=this.view.value;this.outPropertyChange();this.propagate("change",this._value);break;case "textInput":this._value=this.view.value,this.outPropertyChange(),this.propagate("continuous_change",this._value)}}};e.extendClass(V,f);e.defineClassProperty(V,"value",
{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._value=a;this.view.value=a},get:function(){return this._value}});N.TextArea=V;S.DEFAULT_TYPE="default";S.DEFAULT_STYLE="default_style";S.GREEN_STYLE="green";S.RED_STYLE="red";S.GREY_STYLE="grey";S.NAVIGATION_TYPE="nav";S.NAVIGATION_BACK_TYPE="nav_back";S.NAVIGATION_FORWARD_TYPE="nav_forward";S.BLUE_STYLE="blue_style";S.BLACK_STYLE="black_style";S.SILVER_STYLE=
"silver_style";S.prototype={__tap_recognizer:null,_style:S.DEFAULT_STYLE,_type:S.DEFAULT_TYPE,_selected:!1,_text:"",_released_image:"",_selected_image:"",_disabled_image:"",didTouch:function(){this.addClassName("pressed");this._selected=!0},didUntouch:function(){this.removeClassName("pressed");this._selected=!1},didTap:function(){this.propagate("select")},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);f.prototype.destructor.call(this)},
initComponent:function(){f.prototype.initComponent.call(this);this.text_view=this.view.firstElementChild;this.__tap_recognizer||(this.__tap_recognizer=new D(this),this.addPointerRecognizer(this.__tap_recognizer));this.text=this._text?this._text:"";this.view.name=this.id;this._style&&this.addClassName(this._style);this._type&&this.addClassName(this._type)}};e.extendClass(S,f);e.defineClassProperties(S,{text:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;
a=a.toString()}this._text=a;this.text_view&&e.setElementInnerText(this.text_view,this._text)},get:function(){return this._text}},style:{set:function(a){e.isString(a)&&(a=a.replace("_ios",""),this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},type:{set:function(a){e.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}}});N.Button=S;J.prototype=
{__tap_recognizer:null,__list_time_out:0,_items_selectable:!0,_scroll:0,_model:null,__elem:null,__scroll_start:0,add:function(){},remove:function(){},destructor:function(){B.prototype.destructor.call(this);this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);this._model.unbindChange(null,this,this._modelChanged);this._model_allocated&&e.free(this._model);this._model_allocated=!1},initComponent:function(){B.prototype.initComponent.call(this);this._model=
new d.core.Array;this._model.init();this._model_allocated=!0;this._model.bindChange(null,this,this._modelChanged);this._holes.item_children||(this._holes.item_children=this.view.querySelector("ul"));this._list_items=this._sub_view=this._holes.item_children;this.__tap_recognizer||(this.__tap_recognizer=new D(this),this.addPointerRecognizer(this.__tap_recognizer));this.refresh()},refresh:function(){this.__iscroll__&&this.__iscroll__.refresh();B.prototype.refresh.call(this)},_modelChanged:function(){this._renderData(this._items_selectable);
this.refresh()},propertiesDidChange:function(){this._modelChanged();return!0},_renderData:function(){},_touchItemFeedback:function(){},_untouchItemFeedback:function(){},_updateSelectItem:function(){},didTouch:function(a,b){if(!this._items_selectable)return!1;b===this._sub_view||b===this.view?this.__elem=null:(this.__elem=b,this.__list_time_out&&(clearTimeout(this.__list_time_out),this.__list_time_out=0),this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),this.__elem_to_unselect=
null),(this.__elem_to_unselect=b)&&this._touchItemFeedback(b))},didUntouch:function(){!this.__list_time_out&&this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),this.__elem_to_unselect=null);this.__elem=null},didTap:function(){var a=this;if(this.__elem_to_unselect=this.__elem)this._updateSelectItem(this.__elem),this.__list_time_out=setTimeout(function(){a.__elem_to_unselect&&a._untouchItemFeedback(a.__elem_to_unselect);a.__elem_to_unselect=null;a.__list_time_out=0},f.UNSELECT_DELAY)},
scrollToElementAt:function(a,b){if(this.__iscroll__){e.isNumber(b);var d=this.__item_obs[a];d&&(d=this.__iscroll__._offset(d.view),d.top+=this.__iscroll__.wrapperOffsetTop,d.top=d.top>this.__iscroll__.minScrollY?this.__iscroll__.minScrollY:d.top<this.__iscroll__.maxScrollY?this.__iscroll__.maxScrollY:d.top,this.__iscroll__.scrollTo(0,d.top,200))}}};e.extendClass(J,B);e.defineClassProperties(J,{scroll:{set:function(a){a?(this._scroll=B.VERTICAL_SCROLL,this._setup_iscroll()):(this.__iscroll__&&(this.__iscroll__.destroy(),
this.__iscroll__=g),this._scroll=!1)},get:function(){return this._scroll?!0:!1}},model:{set:function(a){a&&(e.isArray(a)?(this._model.removeAll(),this._model.add.apply(this._model,a)):a.toJSON&&a.propertyChange&&(this._model_allocated&&(this._model.unbindChange(null,this,this._modelChanged),e.free(this._model)),this._model_allocated=!1,this._model=a,this._model.bindChange(null,this,this._modelChanged)))},get:function(){return this._model}},data:{set:function(a){e.isArray(a)&&(this._model_allocated?
this._model.removeAll():(this._model=new d.core.Array,this._model.init(),this._model_allocated=!0,this._model.bindChange(null,this,this._modelChanged)),this._model.add.apply(this._model,a),this._modelChanged())},get:function(){return this._model._data.slice()}}});N.AbstractList=J;var na=function(a){this.parent=f;this.parent(a);this.constructor=na};na.prototype={_index:0,_pressed:!1,_visible:!0,didSelect:function(){}};e.extendClass(na,f);e.defineClassProperties(na,{pressed:{set:function(a){this.view&&
(a?(this.addClassName("pressed"),this._pressed=!0):(this.removeClassName("pressed"),this._pressed=!1))},get:function(){return this._pressed}},index:{set:function(a){this._index=a},get:function(){return this._index}}});aa.prototype={_title:"",_label:"",set title(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&(e.setElementInnerText(this.view,this._title),this.view.appendChild(this._label_view))},
set label(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._label=a;this.view&&e.setElementInnerText(this._label_view,this._label);this._label&&!this._label_view.parentNode&&this.view.appendChild(this._label_view);!this._label&&this._label_view.parentNode&&this.view.removeChild(this._label_view)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=
b.createElement("li"));na.prototype.initComponent.call(this);this._label_view=b.createElement("span")}};e.extendClass(aa,na);W.prototype={_title:"",set title(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&e.setElementInnerText(this.title_view,this._title)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;if(!this.__config__.node){this.__config__.node=
b.createElement("div");this.__config__.node.className="simplelist_item";var a=b.createElement("div");a.className="title";this.__config__.node.appendChild(a)}na.prototype.initComponent.call(this);this._label_view=b.createElement("span");this.title_view=this.view.querySelector(".title")}};e.extendClass(W,f);T.FILTER_EXACTS=0;T.FILTER_CONTAINS=1;T.FILTER_STARTS_WITH=2;T.BLOCK_LIST="BlockList";T.TAB_LIST="TabList";T.DEFAULT_LIST="DefaultList";T.prototype={_type:T.DEFAULT_LIST,_selected_index:0,_selected_item:0,
_filters:null,_has_arrow:!0,__item_obs:null,__elem:null,__template_obj:null,add:function(a){this.setItemTemplate(a)},setItemTemplate:function(a){a&&(e.isFunction(a)?this.__template_obj=(new a).init():a.constructor&&(this.__template_obj=a))},setItemTemplateName:function(a){return this.createAndAddComponent(a,{},"item_children")},remove:function(){},destructor:function(){this._freeListItems();J.prototype.destructor.call(this)},initComponent:function(){J.prototype.initComponent.call(this);this.addClassName(this._type);
this.refresh()},getItems:function(){return this.__item_obs?this.__item_obs.slice():[]},applyFilters:function(){if(this._filters&&this.__item_obs){var a,b,d;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],d=this._model.item(b.index),this.appyFiltersOnObj(b,d)}},appyFiltersOnObj:function(a,b){if(this._filters&&a&&b){var d,e,c,f,h,s=this._filters.length;if(0===s)a.show();else for(d=0;d<s;d++)if(e=this._filters[d],!e.property||!e.value)a.show();else{c=!1;f=b[e.property];h=e.value;!1===e.strict&&
(f=f.toLowerCase(),h=h.toLowerCase());switch(e.matching){case g:case null:case T.FILTER_EXACTS:f!==h&&(c=!0);break;case T.FILTER_STARTS_WITH:0!==f.indexOf(h)&&(c=!0);break;case T.FILTER_CONTAINS:-1===f.indexOf(h)&&(c=!0)}c?a.hide():a.show()}}},_freeListItems:function(){var a,b;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],b.__parent=g,e.free(b);this.__item_obs=[]},_renderData:R,_modelChanged:function(){this._renderData(this._items_selectable);this.refresh()},_touchItemFeedback:function(a){a._comp_.pressed=
!0},_untouchItemFeedback:function(a){a._comp_.pressed=!1},_updateSelectItem:function(a){this._selected_index=a._comp_.index;this._selected_item=this._model.item(this._selected_index);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();this.outPropertyChange();this.propagate("itemselect",{index:this._selected_index,item:this._selected_item})},init_directAccessBar:function(){function a(y){if(0!==y.targetPointerList.length){y.stopPropagation();y.preventDefault();e.setElementTransform(c._list_items,"");
c.__max_scroll=c.size[1]-c._list_items.offsetHeight;d.addPointerListener(b,v.POINTER_MOVE,h,!1);d.addPointerListener(b,v.POINTER_END,s,!1);var t=y.targetPointerList[0].currentTarget._index_;e.isNumber(t)&&(y=c.__direct_access_letters[t],c._acces_index!==t&&(c._acces_index=t,t=-c.getTitlePosition(t),t<c.__max_scroll&&(t=c.__max_scroll),c.__scroll_start=t,m?e.setElementTransform(c._list_items,"translate3d(0,"+t+"px,0)"):e.setElementTransform(c._list_items,"translate(0,"+t+"px)"),c._scrollbar&&c._scrollbar.setPosition(t),
f=e.getElementDimensions(c._direct_access),f.height-=10,g=e.getElementAbsolutePosition(c._direct_access),g.y+=5,c._direct_access_value.style.opacity=1,c._direct_access_value.innerHTML=y,c._startScrolling&&c._startScrolling()))}}this._direct_access=b.createElement("div");this._direct_access.className="direct_access";this.view.appendChild(this._direct_access);this._direct_access_value=b.createElement("div");this._direct_access_value.className="direct_access_value";this.view.appendChild(this._direct_access_value);
this._acces_index=0;var c=this,f,g;this.__access_bar_start=a;var h=function(a){a.stopPropagation();a.preventDefault();var b;!f||!g?b=0:(a=a.pageY-g.y,0>a?a=0:a>f.height&&(a=f.height-1),b=Math.floor(a*c._direct_access.childElementCount/f.height));e.isNumber(b)&&c._acces_index!==b&&(c._acces_index=b,a=-c.getTitlePosition(b),b=c.__direct_access_letters[b],a<c.__max_scroll&&(a=c.__max_scroll),c.__scroll_start=a,m?e.setElementTransform(c._list_items,"translate3d(0,"+a+"px,0)"):e.setElementTransform(c._list_items,
"translate(0,"+a+"px)"),c._direct_access_value.innerHTML=b,c._scrollbar&&c._scrollbar.setPosition(a),c._isScrolling&&c._isScrolling())},s=function(){d.removePointerListener(b,v.POINTER_MOVE,h);d.removePointerListener(b,v.POINTER_END,s);c._direct_access_value.style.opacity=0;c._endScrolling&&c._endScrolling()};d.addPointerListener(this._direct_access,v.POINTER_START,a,!1)},remove_directAccessBar:function(){d.removePointerListener(this._direct_access,v.POINTER_START,this.__access_bar_start,!1);this.view.removeChild(this._direct_access);
this._direct_access=g;this.view.removeChild(this._direct_access_value);this._direct_access_value=g},getTitlePosition:function(a){a=this.view.querySelectorAll("ul > li > div").item(a);return!a?void 0:a.parentElement.offsetTop}};e.extendClass(T,J);e.defineClassProperties(T,{itemsSelectable:{set:function(a){if(!(a&&this._items_selectable||!a&&!this._items_selectable))if(a){this._items_selectable=!0;for(i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],d.addPointerListener(obj.view,v.POINTER_START,
this,!0)}else{this._items_selectable=!1;for(i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],d.removePointerListener(obj.view,v.POINTER_START,this,!0)}}},selectedIndex:{get:function(){return this._selected_index}},selectedItem:{get:function(){return this._selected_item}},type:{set:function(a){e.isString(a)&&!(a!==T.BLOCK_LIST&&a!==T.TAB_LIST&&a!==T.DEFAULT_LIST)&&(this.removeClassName(this._type),this._type=a,this.addClassName(this._type),this._type===T.BLOCK_LIST&&(this._renderData=x,this._direct_access&&
this.remove_directAccessBar()),this._type===T.TAB_LIST&&(this._renderData=ia,this._direct_access||this.init_directAccessBar()),this._type===T.DEFAULT_LIST&&(this._renderData=R,this._direct_access&&this.remove_directAccessBar()),this._renderData(this._items_selectable))}},hasArrow:{set:function(a){a?(this._has_arrow=!0,this.addClassName("arrow")):(this._has_arrow=!1,this.removeClassName("arrow"))}},filters:{set:function(a){e.isArray(a)&&(this._filters=a,this.applyFilters(),this.refresh())},get:function(){return this._filters}}});
N.List=T;N.AbstractListItem=na;N.DefaultListItem=aa;N.SimpleListItem=W;M.NORMAL_MODE=1;M.NATIVE_MODE=2;M.prototype={_mode:M.NORMAL_MODE,_data:null,_selected_item:null,_items:null,destructor:function(){this._mode===M.NATIVE_MODE?(d.removePointerListener(this.view,v.POINTER_START,this),d.removePointerListener(this.view,v.POINTER_END,this)):(this.nodeUnbind(this._select,"change"),this.nodeUnbind(this._select,"blur"));f.prototype.destructor.call(this)},update_gui_combo_box:function(){if(e.isArray(this._data))if(this._mode===
M.NORMAL_MODE){e.removeAllElementChild(this._select);this._items={};var a,d;for(a=0;a<this._data.length;a++)d=b.createElement("option"),d.appendChild(b.createTextNode(this._data[a])),this._items[this._data[a]]=d,this._select.appendChild(d);this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0}else e.setElementInnerText(this._select,this._selected_item)},initComponent:function(){f.prototype.initComponent.call(this);o.cordova&&(o.deviceConfiguration.os===u.OS_IOS||
o.deviceConfiguration.os===u.OS_ANDROID)&&o.plugins.combo_picker?(this._mode=M.NATIVE_MODE,this._select=b.createElement("div"),this.view.appendChild(this._select),d.addPointerListener(this.view,v.POINTER_START,this),d.addPointerListener(this.view,v.POINTER_END,this)):(this._mode=M.NORMAL_MODE,this._select=b.createElement("select"),this.view.appendChild(this._select),this.nodeBind(this._select,"change"),this.nodeBind(this._select,"blur"));this.update_gui_combo_box()},handleEvent:function(a){a.preventDefault();
a.stopPropagation();a.type===v.POINTER_START&&(this.setFocus(),o.plugins.combo_picker.show(this,this._data,this._selected_item))},setFocus:function(){this._mode===M.NATIVE_MODE?this.addClassName("focus"):this._select.focus()},setBlur:function(){this._mode===M.NATIVE_MODE?this.removeClassName("focus"):this._select.blur()},notify:function(a){"change"===a.type?(this._selected_item=this._select.value,this.outPropertyChange(),this.propagate("change",this._selected_item)):"blur"===a.type&&o.scrollTo(0,
0)}};e.extendClass(M,f);e.defineClassProperties(M,{selectedItem:{set:function(a){e.isString(a)&&(this._selected_item=a,this._mode===M.NORMAL_MODE?this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0:e.setElementInnerText(this._select,this._selected_item))},get:function(){return this._selected_item}},data:{set:function(a){e.isArray(a)&&(this._data=a.slice(),this.update_gui_combo_box())}}});N.ComboBox=M;ba.prototype={_selected_index:-1,__inputs:null,__labels:null,
clean_gui:function(){var a;this.__scroll_start=0;for(e.removeAllElementChild(this._list_items);this.__inputs.length;)a=this.__inputs[0],d.removePointerListener(a,v.POINTER_START,this),a.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var a,c,f,g;if(this._list_items){this.clean_gui();this._selected_index=-1;for(a=0,g=this._model.length;a<g;a++)f=this._model.item(a),c=b.createElement("input"),c.type="radio",c.name=this._id,c.value=
a,c.id=this._id+"_l"+a,this._list_items.appendChild(c),this.__inputs[a]=c,d.addPointerListener(c,v.POINTER_START,this),c.addEventListener("click",this),c=b.createElement("label"),c.value=a,c.setAttribute("for",this._id+"_l"+a),d.addPointerListener(c,v.POINTER_START,this),c.addEventListener("click",this),e.setElementInnerText(c,f),this._list_items.appendChild(c),this.__labels[a]=c;this.refresh()}else console.error("vs.ui.RadioButton uncorrectly initialized.")}},_touchItemFeedback:function(a){var a=
a.value,b=this.__labels[a];e.addClassName(this.__inputs[a],"pressed");e.addClassName(b,"pressed")},_untouchItemFeedback:function(a){var a=a.value,b=this.__labels[a];e.removeClassName(this.__inputs[a],"pressed");e.removeClassName(b,"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this.__inputs.length)this.selectedIndex=b,this.outPropertyChange(),this.propagate("change",{index:this._selected_index,item:this._model.item(this._selected_index)})}};
e.extendClass(ba,J);e.defineClassProperty(ba,"selectedIndex",{set:function(a){e.isNumber(a)||(a=parseInt(a));if(!isNaN(a)&&!(0>a||a>this.__inputs.length-1)&&this.__inputs[a]){var b=this.__inputs[a];b&&(b.checked=!0);this._selected_index=a}},get:function(){return this._selected_index}});N.RadioButton=ba;H.prototype={_selected_indexes:null,__inputs:null,__labels:null,selectItem:function(a){if(e.isNumber(a)&&!(0>a||a>=this.__inputs.length)){var b=this.__inputs[a];if(b){for(var d=0;d<this._selected_indexes.length;d++)if(this._selected_indexes[d]===
a){this._selected_indexes.remove(d);b.checked=!1;return}this._selected_indexes.push(a);b.checked=!0}}},clean_gui:function(){var a;this.__scroll_start=0;for(e.removeAllElementChild(this._list_items);this.__inputs.length;)a=this.__inputs[0],d.removePointerListener(a,v.POINTER_START,this),a.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var a,c,f,g;if(this._list_items){this._selected_indexes=[];this.clean_gui();for(a=0,c=this._model.length;a<
c;a++)f=this._model.item(a),g=b.createElement("input"),g.type="checkbox",g.name=this._id,g.id=this._id+"_l"+a,g.value=a,this._list_items.appendChild(g),this.__inputs[a]=g,d.addPointerListener(g,v.POINTER_START,this),g.addEventListener("click",this),g=b.createElement("label"),g.value=a,g.setAttribute("for",this._id+"_l"+a),d.addPointerListener(g,v.POINTER_START,this),g.addEventListener("click",this),e.setElementInnerText(g,f),this._list_items.appendChild(g),this.__labels[a]=g;this.selectedItem=this._selected_indexes}else console.error("vs.ui.CheckBox uncorrectly initialized.")}},
_touchItemFeedback:function(a){var a=a.value,b=this.__labels[a];e.addClassName(this.__inputs[a],"pressed");e.addClassName(b,"pressed")},_untouchItemFeedback:function(a){var a=a.value,b=this.__labels[a];e.removeClassName(this.__inputs[a],"pressed");e.removeClassName(b,"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this.__inputs.length){this.selectItem(b);this.outPropertyChange();items=[];for(i=0,l=this._selected_indexes.length;i<
l;i++)items.push(this._model.item(this._selected_indexes[i]));this.propagate("change",{indexes:this._selected_indexes.slice(),items:items})}}};e.extendClass(H,J);e.defineClassProperty(H,"selectedIndexes",{set:function(a){if(e.isArray(a)){var b,d;this._selected_indexes=[];for(d=0;d<a.length;d++)b=a[d],e.isNumber(b)&&this._selected_indexes.push(b);for(d=0;d<this.__inputs.length;d++)if(b=this.__inputs[d])b.checked=!1;a=this._selected_indexes.length;for(d=0;d<a;d++)if(b=this.__inputs[this._selected_indexes[d]])b.checked=
!0}},get:function(){return this._selected_indexes.slice()}});N.CheckBox=H;z.DEFAULT_STYLE="blue_style";z.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";z.BLACK_STYLE="black_style";z.prototype={_hide_animation:null,_show_animation:null,_style:z.DEFAULT_STYLE,_states:null,_current_state:null,destructor:function(){f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);var a=o.deviceConfiguration.os;this._hide_animation=a==u.OS_SYMBIAN?new d.fx.Animation(["translateY",
"-50px"]):new d.fx.Animation(["translateY","-44px"]);this._show_animation=new d.fx.Animation(["translateY","0px"]);a=o.deviceConfiguration.os;a==u.OS_SYMBIAN?e.setElementStyle(this.view,{left:"0px",top:"0px",bottom:"auto",width:"100%",height:"50px"}):e.setElementStyle(this.view,{left:"0px",top:"0px",bottom:"auto",width:"100%",height:"44px"});this.style=this._style},setStateItems:function(a,b){var d;if(a&&e.isString(a)&&b&&e.isArray(b))if(this._states[a]=b.slice(),this._current_state===a){for(key in this.__children)if(children=
this.__children[key],e.isArray(children))for(d=0;d<children.length;d++)obj=children[d],0<=b.findItem(obj)||obj&&obj.hide&&obj.hide();else children.hide&&children.hide();for(d=0;d<b.length;d++)obj=b[d],this.isChild(obj)||this.add(obj,"children"),obj.show()}else for(d=0;d<b.length;d++)obj=b[d],this.isChild(obj)||this.add(obj,"children")},getStateItems:function(a){return!a||!e.isString(a)?g:this._states[a]?this._states[a].slice():g},changeState:function(a,b){if(a){var d=0,c,f,g,h,s;this._current_state=
a;(g=this._states[this._current_state])||(g=[]);c=g.length;for(s in this.__children)if(f=this.__children[s],e.isArray(f))for(d=0;d<f.length;d++)h=f[d],0<=g.findItem(h)||h&&h.hide&&h.hide();else f.hide&&f.hide();for(d=0;d<c;d++){h=g[d];if(b&&b[h.id])for(s in f=b[h.id],f)s&&(h[s]=f[s]);h&&h.show()}}},handleEvent:function(a){var b=a.currentTarget;switch(a.type){case v.POINTER_START:e.addClassName(b,"active");d.addPointerListener(a.currentTarget,v.POINTER_END,this,!0);d.addPointerListener(a.currentTarget,
v.POINTER_MOVE,this,!0);break;case v.POINTER_END:d.removePointerListener(a.currentTarget,v.POINTER_END,this);d.removePointerListener(a.currentTarget,v.POINTER_MOVE,this);setTimeout(function(){e.removeClassName(b,"active")},200);this.propagate("buttonselect",a.currentTarget.spec);break;case v.POINTER_MOVE:a.preventDefault(),setTimeout(function(){e.removeClassName(b,"active")},200),d.removePointerListener(a.currentTarget,v.POINTER_END,this),d.removePointerListener(a.currentTarget,v.POINTER_MOVE,this)}},
remove:function(a){var b,d;f.prototype.remove.call(this,a);for(b in this._states)d=this._states[b],-1!==d.indexOf(a)&&d.remove(a)}};e.extendClass(z,f);e.defineClassProperties(z,{style:{set:function(a){e.isString(a)&&(this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},position:{set:function(){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(){},get:function(){return[this.view.offsetWidth,
this.view.offsetHeight]}}});N.NavigationBar=z;h.DEFAULT_STYLE="black_style";h.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";h.BLUE_STYLE="blue_style";h.LEFT_POSITION="left";h.RIGHT_POSITION="right";h.prototype={_hide_animation:null,_show_animation:null,_style:h.DEFAULT_STYLE,_configuration:[],_items:null,destructor:function(){f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);this._hide_animation=new d.fx.Animation(["translateY","44px"]);this._show_animation=
new d.fx.Animation(["translateY","0px"]);e.setElementStyle(this.view,{left:"0px",top:"auto",bottom:"0px",width:"100%",height:"44px"});this.style=this._style},notify:function(a){this.propagate("itemselect",a.data)},addButton:function(a,b,d){if(!this._items[a]){var e=new h.Button({id:a});e.init();d&&(e.position=d);e.name=b;this.add(e,"children");e.bind("select",this);return this._items[a]=e}},addItem:function(a){a&&!this._items[a.id]&&(this.add(a,"children"),a.bind("select",this),this._items[a.id]=
a)},removeItem:function(a){var b=this._items[a];if(b){try{this.remove(b)}catch(d){d.stack&&console.log(d.stack)}b.unbind("select",this);delete this._items[a]}}};e.extendClass(h,f);e.defineClassProperties(h,{style:{set:function(a){e.isString(a)&&(this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},configuration:{set:function(a){if(e.isArray(a)){var b,d;this._configuration=a;for(b in this._items)this.removeItem(b);for(b=0;b<
a.length;b++)d=a[b],this.addButton(d[0],d[1],d[2])}}},position:{set:function(){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(){},get:function(){return[this.view.offsetWidth,this.view.offsetHeight]}}});h.Item=function(a){this.parent=f;this.parent(a);this.constructor=h.Item};h.Item.prototype={_position:h.LEFT_POSITION,initComponent:function(){f.prototype.initComponent.call(this);this.view.appendChild(b.createElement("div"));this.addClassName(this._position);
this.view.addEventListener(v.POINTER_START,this,!0)},handleEvent:function(a){var b=a.currentTarget;switch(a.type){case v.POINTER_START:e.addClassName(b,"active");d.addPointerListener(a.currentTarget,v.POINTER_END,this,!0);d.addPointerListener(a.currentTarget,v.POINTER_MOVE,this,!0);break;case v.POINTER_END:d.removePointerListener(a.currentTarget,v.POINTER_END,this);d.removePointerListener(a.currentTarget,v.POINTER_MOVE,this);o.setTimeout(function(){e.removeClassName(b,"active")},200);this.propagate("select",
this.id);break;case v.POINTER_MOVE:a.preventDefault(),o.setTimeout(function(){e.removeClassName(b,"active")},200),d.removePointerListener(a.currentTarget,v.POINTER_END,this),d.removePointerListener(a.currentTarget,v.POINTER_MOVE,this)}}};e.extendClass(h.Item,f);e.defineClassProperty(h.Item,"position",{set:function(a){a!==h.LEFT_POSITION&&a!==h.RIGHT_POSITION||(this._position&&this.removeClassName(this._position),this._position=a,this.addClassName(this._position))},get:function(){return this._position}});
h.Text=function(a){this.parent=h.Item;this.parent(a);this.constructor=h.Text};h.Text.prototype={_text:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=b.createElement("div"),this.__config__.node.className="vs_ui_toolbar_text");h.Item.prototype.initComponent.call(this);var a,d;this._text_view=b.createElement("div");this._text_view.className="text_view";this.view.appendChild(this._text_view);a=b.createElement("div");
a.className="glow_view";this.view.appendChild(a);d=b.createElement("div");a.appendChild(d)}};e.extendClass(h.Text,h.Item);e.defineClassProperty(h.Text,"text",{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this._text_view&&e.setElementInnerText(this._text_view,this._text)},get:function(){return this._text}});h.Button=function(a){this.parent=h.Item;this.parent(a);this.constructor=h.Button};
h.Button.prototype={_name:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=b.createElement("div"),this.__config__.node.className="vs_ui_toolbar_button");h.Item.prototype.initComponent.call(this);this.size=[30,30]},setImage:function(a){this.view.style.backgroundImage="url("+a+")"}};e.extendClass(h.Button,h.Item);e.defineClassProperty(h.Button,"name",{set:function(a){e.isString(a)&&(this._name=a,this.addClassName(this._name))},
get:function(){return this._name}});h.BUTTON_ADD="add";h.BUTTON_ARROW_DOWN="arrow_down";h.BUTTON_ARROW_LEFT="arrow_left";h.BUTTON_ARROW_RIGHT="arrow_right";h.BUTTON_ARROW_UP="arrow_up";h.BUTTON_ATTACH="attach";h.BUTTON_AUCTION="auction";h.BUTTON_BELL_OFF="bell_off";h.BUTTON_BELL="bell";h.BUTTON_BLOG="blog";h.BUTTON_BOOK_MARKED="book_marked";h.BUTTON_BOOK="book";h.BUTTON_BOOKMARK_ADD="bookmark_add";h.BUTTON_BOORMARK="bookmark";h.BUTTON_BOX_FULL="box_full";h.BUTTON_BOX_MAIL="box_mail";h.BUTTON_BOX=
"box";h.BUTTON_BRIGHTNESS="brightness";h.BUTTON_BRUSH="brush";h.BUTTON_BULB_OFF="bulb_off";h.BUTTON_BULB_ON="bulb_on";h.BUTTON_BUZZER="buzzer";h.BUTTON_CALCULATOR="calculator";h.BUTTON_CALENDAR="calendar";h.BUTTON_CALL="call";h.BUTTON_CANCEL="cancel";h.BUTTON_CASE="case";h.BUTTON_CHECKMARK="checkmark";h.BUTTON_CIRCLE_ARROW_LEFT="circle_arrow_left";h.BUTTON_CIRCLE_ARROW_RIGHT="circle_arrow_right";h.BUTTON_COMMAND_LINE="command_line";h.BUTTON_COMMENT_ADD="command_add";h.BUTTON_COMMENT_DELETE="command_delete";
h.BUTTON_COMMENT_OK="command_ok";h.BUTTON_COMPUTER_OFF="computer_off";h.BUTTON_COMPUTER_ON="computer_on";h.BUTTON_CONSTRAST="contrast";h.BUTTON_CONTROL_1="controls_1";h.BUTTON_CONTROL_2="controls_2";h.BUTTON_CONTROL_3="controls_3";h.BUTTON_CONTROL_4="controls_4";h.BUTTON_CONTROL_5="controls_5";h.BUTTON_CONTROL_6="controls_6";h.BUTTON_CONTROL_7="controls_7";h.BUTTON_CONTROL_8="controls_8";h.BUTTON_COPY="copy";h.BUTTON_COURT="court";h.BUTTON_CREDIT_CARD="credit_card";h.BUTTON_CUT="cut";h.BUTTON_DANGER=
"danger";h.BUTTON_DELETE="delete";h.BUTTON_DISK="disk";h.BUTTON_DOCUMENT_BLANK="document_blank";h.BUTTON_DOCUMENT="document";h.BUTTON_DOLLAR="dollar";h.BUTTON_DOWNLAOD="download";h.BUTTON_ERROR="error";h.BUTTON_FAVORITIES_ADD="favorities_add";h.BUTTON_FAVORITIES_REMOVE="favorities_remove";h.BUTTON_FAVORITIES="favorities";h.BUTTON_FILM="film";h.BUTTON_FILMING="filming";h.BUTTON_FIRST_AID="first_aid";h.BUTTON_FLAG_BIS="flag_1";h.BUTTON_FLAG="flag";h.BUTTON_FLASH_ARROW="flash_arrow";h.BUTTON_FLASH="flash";
h.BUTTON_FOLDER_BOOKMARCK="folder_bookmark";h.BUTTON_FOLDER_GOTO="folder_goto";h.BUTTON_FOLDER="folder";h.BUTTON_FONT_CAPITAL="font_capital";h.BUTTON_FONT_ITALIC="font_italic";h.BUTTON_FONT_REGULAR="font_regular";h.BUTTON_FONT_UNDERLINE="font_undeline";h.BUTTON_FONT="font";h.BUTTON_FONTS="fonts";h.BUTTON_FORUM="forum";h.BUTTON_FRAME="frame";h.BUTTON_GRAPH_AREAS="graph_areas";h.BUTTON_GRAPH_BARS_DOWN="graph_bars_down";h.BUTTON_GRAPH_BARS_UP="graph_bars_up";h.BUTTON_GRAPH_BARS="graph_bars";h.BUTTON_GRAPH_DOWN=
"graph_down";h.BUTTON_GRAPH_LINES="graph_lines";h.BUTTON_GRAPH_UP="graph_up";h.BUTTON_HAT="hat";h.BUTTON_HELP="help";h.BUTTON_HOME="home";h.BUTTON_INFORMATION="information";h.BUTTON_KEY="key";h.BUTTON_KEYBOARD="keyboard";h.BUTTON_LAPTOP="laptop";h.BUTTON_LINK="links";h.BUTTON_LIST_BULLETS="bullets";h.BUTTON_LIST_NUMBERS="list_numbers";h.BUTTON_LOCK="lock";h.BUTTON_MAGNIFY_GLASS="magnify_glass";h.BUTTON_MAIL="mail";h.BUTTON_MANAGE="manage";h.BUTTON_MEASURE="measure";h.BUTTON_MEASURES="measures";h.BUTTON_MIC_BIS=
"mic_bis";h.BUTTON_MIC="mic";h.BUTTON_MINUS="minus";h.BUTTON_MUTE="mute";h.BUTTON_PAINT="pain";h.BUTTON_PAPER_PLANE="paper_plane";h.BUTTON_PAPER_TRASH="paper_trash";h.BUTTON_PAPERCLIO="paperclio";h.BUTTON_PARAGRAPH="paragraph";h.BUTTON_PENCIL="pencil";h.BUTTON_PHOTO="photo";h.BUTTON_PIECHART="113";h.BUTTON_POST="post";h.BUTTON_PROFILE="profile";h.BUTTON_REFRESH="refresh";h.BUTTON_RESIZE="resize";h.BUTTON_RSS="rss";h.BUTTON_SAD_FACE="sade_face";h.BUTTON_SAFE="safe";h.BUTTON_SAVE="save";h.BUTTON_SETTINGS=
"settings";h.SHOPPING_BAG="shopping_bag";h.SHOPPING_CART="shopping_cart";h.SHOPPING_HEAVY="shopping_heavy";h.SIM="sim";h.SMILE_FACE="smile_face";h.SORT_AZ="sort_az";h.SORT_ZA="sort_za";h.STAR="star";h.STORAGE="storage";h.SWITCH="switch";h.TAG_ADD="tag_add";h.TAG_CANCEL="tag_cancel";h.TAG_DELETE="tag_delete";h.TAG="tag";h.TEXT_ALIGN_CENTER="text_align_center";h.TEXT_ALIGN_JUSTIFY="text_align_justify";h.TEXT_ALIGN_LEFT="text_align_left";h.TEXT_ALIGN_RIGHT="text_align_right";h.TIME="time";h.TIMER="timer";
h.TRASH="trash";h.TWG="twg";h.UNLOCK="unlock";h.UPLOAD="upload";h.USER="user";h.USERS="users";h.VOLUME_DOWN="volume_down";h.VOLUME_UP="volume_up";h.VOLUME="volume";h.WALLET="wallet";h.WARNING="warning";h.WIFI="wifi";h.WINDOW_ERROR="window_error";h.WINDOW_GLOBE="window_globe";h.WINDOW_LOCK="window_lock";h.WINDOW="window";h.ZOOM_IN="zoom_in";h.ZOMM_OUT="zoom_out";N.ToolBar=h;Z.prototype={_text:"",destructor:function(){f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);
this._text&&e.setElementInnerText(this.view,this._text)}};e.extendClass(Z,f);e.defineClassProperty(Z,"text",{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this.view&&e.setElementInnerText(this.view,this._text)},get:function(){return this._text}});N.TextLabel=Z;P.prototype={canvas_ctx:null,canvas_node:null,destructor:function(){f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);
if(this.canvas_node=this.view.firstChild)this.canvas_ctx=this.canvas_node.getContext("2d"),this.canvas_node.width=this._size[0],this.canvas_node.height=this._size[1],this.draw(0,0,this._size[0],this._size[1])},getContext:function(){return this.canvas_ctx},drawRect:function(a,b,d,e,c,f){if(4===arguments.length)this.rect(a,b,d,e).stroke();else if(f){Math.sin(f);Math.cos(f);var g=[a,b],h=this.rotatePoint(d,0,f);g.push(a+h[0],b+h[1]);h=this.rotatePoint(d,e,f);g.push(a+h[0],b+h[1]);h=this.rotatePoint(0,
e,f);g.push(a+h[0],b+h[1]);c&&g.push(c);this.polygon.apply(this,g)}else this.polygon(a,b,a+d,b,a+d,b+e,a,b+e,c);return this},rotatePoint:function(a,b,d){return[a*Math.cos(d)-b*Math.sin(d),b*Math.cos(d)+a*Math.sin(d)]},polygon:function(){if(6>arguments.length)throw Error("not enough arguments");var a,b,d,e;this.beginPath();if(0===arguments.length%2){this.moveTo(arguments[0],arguments[1]);for(a=2;a<arguments.length;a+=2)this.lineTo(arguments[a],arguments[a+1])}else{b=arguments[arguments.length-1];d=
(arguments.length-1)/2;a=(arguments[2*d-2]+arguments[0])/2;e=(arguments[2*d-1]+arguments[1])/2;this.moveTo(a,e);for(a=0;a<d-1;a++)this.arcTo(arguments[2*a],arguments[2*a+1],arguments[2*a+2],arguments[2*a+3],b);this.arcTo(arguments[2*d-2],arguments[2*d-1],arguments[0],arguments[1],b)}this.closePath();this.moveTo(arguments[0],arguments[1]);this.stroke();return this},ellipse:function(a,b,d,e,c,f,h,s){c===g&&(c=0);f===g&&(f=0);h===g&&(h=2*Math.PI);s===g&&(s=!1);var t=this.rotatePoint(d*Math.cos(f),e*
Math.sin(f),c),m=a+t[0],t=b+t[1];this.rotatePoint(d*Math.cos(h),e*Math.sin(h),c);this.moveTo(m,t);this.translate(a,b);this.rotate(c);this.scale(d/e,1);this.arc(0,0,e,f,h,s);this.scale(e/d,1);this.rotate(-c);this.translate(-a,-b);this.stroke();return this},load:function(a){var d=o.innerWidth-25;this.__iframe=b.createElement("iframe");this.__iframe.id="canvas_load_iframe";this.__iframe.height="10px";this.__iframe.width=d+"px";this.__iframe.style.visibility="hidden";this.__iframe.src=a;this.nodeBind(this.__iframe,
"load","remotePageLoaded");b.body.appendChild(this.__iframe)},remotePageLoaded:function(){var a=this.__iframe.contentWindow,b=o.innerWidth-25,d=o.innerHeight;this.clearRect(0,0,this._size[0],this._size[1]);this.save();this.scale(this._size[0]/b,this._size[1]/d);this.canvas_ctx.drawWindow(a,0,0,b,d,"rgb(255,255,255)");this.restore()},draw:function(a,b,d,e){a||(a=0);b||(b=0);d||(d=this._size[0]);e||(e=this._size[1]);this.clearRect(a,b,d,e);this.lineWidth=3;this.shadowColor="white";this.shadowBlur=1;
for(var c,f,g,a=0;10>a;a++)this.strokeStyle="rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",b=Math.floor(Math.random()*d),c=Math.floor(Math.random()*e),f=Math.floor(Math.random()*d),g=Math.floor(Math.random()*e),this.beginPath(),this.moveTo(b,c),this.lineTo(f,g),this.closePath(),this.stroke()}};e.extendClass(P,f);P.methods="arc,arcTo,beginPath,bezierCurveTo,clearRect,clip,closePath,createImageData,createLinearGradient,createRadialGradient,createPattern,drawFocusRing,drawImage,fill,fillRect,fillText,getImageData,isPointInPath,lineTo,measureText,moveTo,putImageData,quadraticCurveTo,rect,restore,rotate,save,scale,setTransform,stroke,strokeRect,strokeText,transform,translate".split(",");
P.props="canvas,fillStyle,font,globalAlpha,globalCompositeOperation,lineCap,lineJoin,lineWidth,miterLimit,shadowOffsetX,shadowOffsetY,shadowBlur,shadowColor,strokeStyle,textAlign,textBaseline".split(",");P.setup=function(){var a,b;for(a=0;a<P.methods.length;a++)b=P.methods[a],P.prototype[b]=function(a){return function(b,d,e,c,f,g,h,y,s){this.canvas_ctx[a](b,d,e,c,f,g,h,y,s);return this}}(b);for(a=0;a<P.props.length;a++){b=P.props[a];var d={enumerable:!0};d.set=function(a){return function(b){this.canvas_ctx[a]=
b}}(b);d.get=function(a){return function(){return this.canvas_ctx[a]}}(b);e.defineProperty(P.prototype,b,d)}};P.setup();e.defineClassProperty(P,"size",{set:function(a){if(a&&e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view)){this._updateSizeAndPos();if(!this.canvas_node){this.canvas_node=this.view.firstChild;if(!this.canvas_node){console.error("Uncompatible canvas view");return}this.canvas_ctx=this.canvas_node.getContext("2d")}this.canvas_node.width=
this._size[0];this.canvas_node.height=this._size[1];this.draw(0,0,this._size[0],this._size[1])}},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}});N.Canvas=P;$.BORDER_WIDTH_IOS=5;$.BORDER_WIDTH_ANDROID=5;$.BORDER_WIDTH_WP7=0;$.BORDER_WIDTH_SYMBIAN=0;$.BORDER_WIDTH_BB=1;$.prototype={__inner_view:null,_index:0,_indeterminate:!1,_range:null,__border_width:0,destructor:function(){f.prototype.destructor.call(this)},
_updateSize:function(){e.setElementSize(this.view,this._size[0],this._size[1]);this.index=this._index},initComponent:function(){f.prototype.initComponent.call(this);this.__inner_view=this.view.firstElementChild;this.indeterminate=this._indeterminate;var a=o.deviceConfiguration.os;a==u.OS_ANDROID?this.__border_width=2*$.BORDER_WIDTH_ANDROID:a==u.OS_IOS?this.__border_width=2*$.BORDER_WIDTH_IOS:a==u.OS_WP7?this.__border_width=2*$.BORDER_WIDTH_WP7:a==u.OS_SYMBIAN?this.__border_width=2*$.BORDER_WIDTH_SYMBIAN:
a==u.OS_BLACK_BERRY&&(this.__border_width=2*$.BORDER_WIDTH_BB);this.index=this._index},refresh:function(){this.index=this._index;f.prototype.refresh.call(this)}};e.extendClass($,f);e.defineClassProperties($,{index:{set:function(a){if(e.isNumber(a)&&(this._index=a,this.__inner_view)){var b=this.size[0],b=b-this.__border_width,a=b*(this._index-this._range[0])/(this._range[1]-this._range[0]);a>b&&(a=b);0>a&&(a=0);b=o.deviceConfiguration.os;this.__inner_view.style.width=b===u.OS_ANDROID||b===u.OS_IOS?
a+this.__border_width+"px":a+"px"}},get:function(){return this._index}},range:{set:function(a){if(e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.index=this._index},get:function(){return this._range.slice()}},indeterminate:{set:function(a){a?(this._indeterminate=!0,this.view&&e.addClassName(this.view,"indeterminate")):(this._indeterminate=!1,this.view&&e.removeClassName(this.view,"indeterminate"))},get:function(){return this._indeterminate}}});
N.ProgressBar=$;U.HORIZONTAL=0;U.VERTICAL=1;U.prototype={_orientation:U.HORIZONTAL,_value:0,_range:null,__v:0,__drag_x:0,__drag_y:0,__handle:null,__handle_width:0,__handle_delta:10,destructor:function(){this.__drag_recognizer&&(this.removePointerRecognizer(this.__drag_recognizer),this.__drag_recognizer=null);f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);var a=d.ui.View.getDeviceCSSCode();a==O.CSS_IOS?this.__handle_width=28:a==O.CSS_WP7?this.__handle_width=
30:a==O.CSS_ANDROID?this.__handle_width=34:a==O.CSS_BLACKBERRY?(this.__handle_width=35,this.__handle_height=12,this.__handle_delta=3):this.__handle_width=23;this.__handle=this.view.querySelector(".handle");d.addPointerListener(this.__handle,v.POINTER_START,this,!0);this.__drag_recognizer||(this.__drag_recognizer=new G(this),this.addPointerRecognizer(this.__drag_recognizer));this.orientation=this._orientation;this.value=this._value},didDragStart:function(a){if(0!==a.targetPointerList.length){this.__handle_width=
this.__handle.offsetWidth;this.__handle_x=this.__handle.offsetLeft;this.__handle_y=this.__handle.offsetTop;this.__abs_pos=d.util.getElementAbsolutePosition(this.view);var b=a.targetPointerList[0].pageX-this.__abs_pos.x,a=a.targetPointerList[0].pageY-this.__abs_pos.y;this.value=0===this._orientation?this._range[0]+(this._range[1]-this._range[0])*b/this.view.offsetWidth:this._range[0]+(this._range[1]-this._range[0])*a/this.view.offsetHeight;this.__v=this._value;this.outPropertyChange();this.propagate("continuous_change",
this._value);this.propagate("change",this._value)}},didDrag:function(a,b){if(0!==b.targetPointerList.length){var d=b.targetPointerList[0].pageX-this.__abs_pos.x,e=b.targetPointerList[0].pageY-this.__abs_pos.y;this.value=0===this._orientation?this._range[0]+(this._range[1]-this._range[0])*d/this.view.offsetWidth:this._range[0]+(this._range[1]-this._range[0])*e/this.view.offsetHeight;this.outPropertyChange();this.propagate("continuous_change",this._value)}},didDragEnd:function(){this.propagate("change",
this._value)},refresh:function(){this.__handle_width=this.__handle.offsetWidth;this.__handle_delta=0===this._orientation?this.view.offsetHeight:this.view.offsetWidth;this.value=this._value;f.prototype.refresh.call(this)}};e.extendClass(U,f);e.defineClassProperties(U,{value:{set:function(a){var b,d;if(!isNaN(a)){a<this._range[0]&&(a=this._range[0]);a>this._range[1]&&(a=this._range[1]);this._value=a;var e=this.__handle_width/2,c=0,c=o.deviceConfiguration.os===u.OS_BLACK_BERRY?(this.__handle_height-
this.__handle_delta)/2:(this.__handle_width-this.__handle_delta)/2;0===this._orientation?(d=this.view.offsetWidth,b=Math.floor((a-this._range[0])*d/(this._range[1]-this._range[0]))-e,m?da(this.__handle,"translate3d("+b+"px,-"+c+"px,0)"):da(this.__handle,"translate("+b+"px,-"+c+"px)"),this.view.style.backgroundSize=b+e+"px 10px"):(b=this.view.offsetHeight,d=Math.floor((a-this._range[0])*b/(this._range[1]-this._range[0]))-e,m?da(this.__handle,"translate3d(-"+c+"px,"+d+"px,0)"):da(this.__handle,"translate(-"+
c+"px,"+d+"px)"),this.view.style.backgroundSize="10px "+(d+e)+"px")}},get:function(){return this._value}},range:{set:function(a){if(e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.value=this._value},get:function(){return this._range.slice()}},orientation:{set:function(a){a!==U.HORIZONTAL&&a!==U.VERTICAL||(this._orientation=a,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):
(this.addClassName("vertical"),this.removeClassName("horizontal")),this.value=this._value)},get:function(){return this._orientation}},size:{set:function(a){a&&e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSizeAndPos(),this.value=this._value))},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});N.Slider=U;ca.prototype=
{_src:null,destructor:function(){this.view&&(this.view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);this.view.ondragstart=function(a){a.preventDefault();return!1};this.view.src?this._src=this.view.getAttribute("src"):this.view.src=this._src;this.view.setAttribute("width","100%");this.view.setAttribute("height","100%")}};e.extendClass(ca,f);e.defineClassProperties(ca,{src:{set:function(a){e.isString(a)&&
(this._src=a,this.view&&(this.view.src=this._src))},get:function(){return this._src}},size:{set:function(a){if(e.isArray(a)||2===a.length||e.isNumber(a[0])&&e.isNumber(a[1]))this.view&&(this.view.setAttribute("width",a[0]),this.view.setAttribute("height",a[1])),this._size[0]=a[0],this._size[1]=a[1],this._updateSizeAndPos()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});N.ImageView=ca;Y.TEXT=
"text";Y.PASSWORD="password";Y.SEARCH="search";Y.prototype={_text_field:null,_clear_button:null,_value:"",_placeholder:"type ...",_type:Y.TEXT,destructor:function(){this._text_field.removeEventListener("focus",this);this._text_field.removeEventListener("blur",this);this._text_field.removeEventListener("change",this);this._text_field.removeEventListener("input",this);this._clear_button&&this.nodeUnbind(this._clear_button,v.POINTER_START,"cleanData");delete this._text_field;f.prototype.destructor.call(this)},
initComponent:function(){f.prototype.initComponent.call(this);this._text_field=this.view.querySelector("input");this._text_field.name=this.id;(this._clear_button=this.view.querySelector(".clear_button"))&&this.nodeBind(this._clear_button,v.POINTER_START,"cleanData");this.type=this._type;this.value=this._value;this.placeholder=this._placeholder;this._text_field.addEventListener("focus",this);this._text_field.addEventListener("blur",this);this._text_field.addEventListener("change",this);this._text_field.addEventListener("input",
this)},cleanData:function(){this._value=this._text_field.value="";this._activateDelete(!1);this.outPropertyChange();this.propagate("continuous_change",this._value);this.propagate("change",this._value)},changeData:function(){(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1)},_activateDelete:function(a){this._clear_button&&(a?e.setElementVisibility(this._clear_button,!0):e.setElementVisibility(this._clear_button,!1))},onkeydown:function(a){var a=fixEvent(a),b=a.target;
if(a.keyCode===TAB||a.keyCode===ENTER)return b.blur(),!1},setFocus:function(){this._text_field.focus()},setBlur:function(){this._text_field.blur()},setPointerEvents:function(a){this._text_field.style.pointerEvents=a?"none":"auto"},_didEnable:function(){this._enable?this._text_field.removeAttribute("disabled"):this._text_field.setAttribute("disabled",!0)},handleEvent:function(a){function e(a){a.target===c.view||a.target===c._text_field||(a.target===c._clear_button?(c.cleanData(),a.stopPropagation(),
a.preventDefault()):(d.removePointerListener(b,v.POINTER_START,e,!0),c.setBlur()))}var c=this;"change"===a.type?(this.changeData(),this.outPropertyChange(),this.propagate("change",this._value)):"input"===a.type?(this.changeData(),this.outPropertyChange(),this.propagate("continuous_change",this._value)):"focus"===a.type?(this.addClassName("focus"),(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1),d.addPointerListener(b,v.POINTER_START,e,!0),this.propagate("focus")):
"blur"===a.type&&(this.removeClassName("focus"),this._activateDelete(!1),o.scrollTo(0,0),this.propagate("blur"))}};e.extendClass(Y,f);e.defineClassProperties(Y,{value:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._value=a;this._text_field&&(this._text_field.value=this._value,!this._value||""===this._value?this._activateDelete(!1):this._activateDelete(!0))},get:function(){return this._value=this._text_field.value}},
type:{set:function(a){!(a!==Y.TEXT&&a!==Y.PASSWORD&&a!==Y.SEARCH)&&this.view&&(this.removeClassName(this._type),this._type=a,this.addClassName(this._type),this._text_field&&(this._type===Y.PASSWORD?this._text_field.setAttribute("type","password"):this._type===Y.SEARCH?this._text_field.setAttribute("type","search"):this._text_field.setAttribute("type","text")))}},placeholder:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;
a=a.toString()}this._placeholder=a;this._text_field&&this._text_field.setAttribute("placeholder",this._placeholder)}}});N.InputField=Y;I.BELOW=0;I.ABOVE=1;I.LEFT=2;I.RIGHT=3;I.prototype={_point_position:null,_has_footer:!1,_has_header:!1,initComponent:function(){f.prototype.initComponent.call(this);this._arrow=this.view.querySelector(".vs_ui_popover >.arrow");this.__show_clb=this._endShowConfiguration},_endShowConfiguration:function(){var a,b,d,c,f;f=this.size;var g=o.innerHeight,h=o.innerWidth;if("undefined"!==
typeof this.__direction&&this._point_position){a=this._point_position[0]-f[0]/2;b=this._point_position[1]-f[1]/2;d=f[0];c=f[1];this.__direction!==I.BELOW&&this.__direction!==I.ABOVE&&this.__direction!==I.RIGHT&&this.__direction!==I.LEFT&&(this.__direction=this._point_position[0]>h/2?I.RIGHT:I.LEFT,this._point_position[1]+c+30<g?this.__direction=I.BELOW:0<this._point_position[1]-c-30&&(this.__direction=I.ABOVE));switch(this.__direction){case I.BELOW:b=b+f[1]/2+15;5>a&&(a=5);a+d>h&&(a=h-d-5);this._arrow.className=
"arrow top";f=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right="5px";this._arrow.style["-webkit-mask-position-x"]=f+"px";this._arrow.style["-webkit-mask-position-y"]="0px";break;case I.ABOVE:b=b-f[1]/2-15;5>a&&(a=5);a+d>h&&(a=h-d-5);this._arrow.className="arrow bottom";f=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right="5px";this._arrow.style["-webkit-mask-position-x"]=f+"px";this._arrow.style["-webkit-mask-position-y"]="0px";break;
case I.RIGHT:a=a-f[0]/2-15;5>b&&(b=5);b+c>g-20&&(b=g-c-20);this._arrow.className="arrow right";f=c-(this._point_position[1]-b+15)-2;this._arrow.style.left="auto";this._arrow.style.right="-13px";this._arrow.style["-webkit-mask-position-x"]="0px";this._arrow.style["-webkit-mask-position-y"]=f+"px";break;case I.LEFT:a=a+f[0]/2+15,5>b&&(b=5),b+c>g-20&&(b=g-c-20),this._arrow.className="arrow left",f=this._point_position[1]-b-15-2,this._arrow.style.left="-13px",this._arrow.style.right="auto",this._arrow.style["-webkit-mask-position-x"]=
"0px",this._arrow.style["-webkit-mask-position-y"]=f+"px"}this.position=(f=e.getElementAbsolutePosition(this.view.parentElement))?[a-f.x,b-f.y]:[a,b];this.size=[d,c]}this.redraw()},show:function(a,c,f){this.view&&!this._visible&&(this._point_position=a&&e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])?a.slice():null,this.__direction=c,this.view.style.setProperty("display","block",null),this.__view_display=g,this.__is_hidding=!1,this.__is_showing=!0,this._show_animation?this._show_animation.process(this,
function(){this._show_object(f)},this):this._show_object(f),d.addPointerListener(b,v.POINTER_START,this,!0))},handleEvent:function(a){this.childOf(a.target,this.view)||(a.preventDefault(),a.stopPropagation(),this.hide())},childOf:function(a,b){if(a===b)return!0;for(a=a.parentElement;a;){if(a===b)return!0;a=a.parentElement}return!1},hide:function(){this.view&&(f.prototype.hide.call(this),d.removePointerListener(b,v.POINTER_START,this,!0),this.view.style.display="none")}};e.extendClass(I,f);e.defineClassProperties(I,
{hasFooter:{set:function(a){this._has_footer=a?!0:!1;this.view&&this._has_footer&&this.addClassName("withFooter");this.view&&!this._has_footer&&this.removeClassName("withFooter")},get:function(){return this._has_footer}},hasHeader:{set:function(a){this._has_header=a?!0:!1;this.view&&this._has_header&&this.addClassName("withHeader");this.view&&!this._has_header&&this.removeClassName("withHeader")},get:function(){return this._has_header}}});N.PopOver=I;Q.prototype={__tap_recognizer:null,__switch_translate:0,
_selected:!1,_toggled:!0,_mode:O.CSS_DEFAULT,__toggle_on_view:null,__toggle_off_view:null,__switch_view:null,_text_on:"",_text_off:"",didTouch:function(){this.addClassName("pressed");this._selected=!0},didUntouch:function(){this.removeClassName("pressed");this._selected=!1},_setToggle:function(a){var b=this;b._toggled=a?!0:!1;d.scheduleAction(function(){b._initWidthSwitch();b._toggled?(b.addClassName("on"),b._mode===O.CSS_PURE?e.setElementTransform(b.__switch_view,"translate3d(-15px,0,0)"):b._mode!==
O.CSS_ANDROID&&e.setElementTransform(b.__switch_view,"translate3d("+b.__switch_translate+"px,0,0)")):(b.removeClassName("on"),b._mode!==O.CSS_ANDROID&&e.setElementTransform(b.__switch_view,"translate3d(0,0,0)"));b.outPropertyChange()})},viewDidAdd:function(){f.prototype.viewDidAdd.call(this);this._setToggle(this._toggled)},refresh:function(){f.prototype.refresh.call(this);this._mode=d.ui.View.getDeviceCSSCode();this._setToggle(this._toggled)},didTap:function(){this._setToggle(!this._toggled);this.propagate("change",
this._toggled)},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);this.__toggle_on_view=this.view.querySelector(".vs_ui_switch .toggle_on");this.__toggle_off_view=this.view.querySelector(".vs_ui_switch .toggle_off");this.__switch_view=this.view.querySelector(".vs_ui_switch .switch");this.__tap_recognizer||(this.__tap_recognizer=
new D(this),this.addPointerRecognizer(this.__tap_recognizer));this._mode=d.ui.View.getDeviceCSSCode();this._text_on&&(this.textOn=this._text_on);this._text_off&&(this.textOff=this._text_off);this.toggled=this._toggled},_initWidthSwitch:function(){this.__switch_translate=this.view.offsetWidth-(this.__switch_view.offsetWidth+2*this.__switch_view.offsetLeft)-(parseInt(d.util.getElementStyle(this.view,"border-left-width"),10)+parseInt(d.util.getElementStyle(this.view,"border-right-width"),10))},_updateSizeAndPos:function(){var a=
this._size[0],b=this._pos[0],d=this._pos[1],e,c=0,f=0,g="auto",h="auto",s="auto",t=this._autosizing[0],m=this._autosizing[1];this.view.parentNode&&(c=this.view.parentNode.offsetWidth,f=this.view.parentNode.offsetHeight);e=4===t||1===t?a+"px":5===t||7===t?"auto":2===t||3===t||6===t||0===t?c?Math.round(100*(a/c))+"%":a+"px":"100%";if(4===t||5===t||6===t||7===t||2===t&&!c)g=b+"px";else if((2===t||0===t)&&c)g=Math.round(100*(b/c))+"%";if(1===t||3===t||5===t||7===t)s=c-(b+a)+"px";if(4===m||5===m||6===
m||7===m||2===m&&!f)h=d+"px";else if((2===m||0===m)&&f)h=Math.round(100*(d/f))+"%";this.view.style.width=e;this.view.style.removeProperty("height");this.view.style.left=g;this.view.style.top=h;this.view.style.right=s;this.view.style.bottom="auto"}};e.extendClass(Q,f);e.defineClassProperties(Q,{textOn:{set:function(a){if(this.__toggle_on_view){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._text_on=a;e.setElementInnerText(this.__toggle_on_view,
this._text_on)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_on}},textOff:{set:function(a){if(this.__toggle_off_view){if(null===a||"undefined"===typeof a)a="";else if(e.isNumber(a))a=""+a;else if(!e.isString(a)){if(!a.toString)return;a=a.toString()}this._text_off=a;e.setElementInnerText(this.__toggle_off_view,this._text_off)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_off}},
toggled:{set:function(a){var b=this;d.scheduleAction(function(){b._setToggle(a)})},get:function(){return this._toggled}}});N.Switch=Q;C.NUMBERS={"0":0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};C.MODE_DEFAULT=0;C.MODE_IOS=1;C.MODE_ANDROID=2;C.MODE_WP7=3;C.MODE_SYMBIAN=4;C.MODE_BLACK_BERRY=5;C.prototype={_mode:C.MODE_DEFAULT,_cell_height:44,_friction:0.003,_data:null,_slots_elements:null,_current_values:null,_selected_keys:null,_selected_values:null,destructor:function(){d.removePointerListener(this.view,
v.POINTER_START,this,!1);d.removePointerListener(b,v.POINTER_START,this,!1);d.removePointerListener(b,v.POINTER_MOVE,this,!1);e.removeAllElementChild(this._slots_view);delete this._data;delete this._slots_elements;delete this._frame_view;delete this._slots_view;delete this._current_values;f.prototype.destructor.call(this)},initComponent:function(){f.prototype.initComponent.call(this);this._data=[];this._slots_elements=[];var a=o.deviceConfiguration.os;this._mode=a==u.OS_IOS?C.MODE_IOS:a==u.OS_ANDROID?
C.MODE_ANDROID:a==u.OS_WP7?C.MODE_WP7:a==u.OS_SYMBIAN?C.MODE_SYMBIAN:a==u.OS_BLACK_BERRY?C.MODE_BLACK_BERRY:C.MODE_DEFAULT;this._slots_view=this.view.querySelector(".slots");this._frame_view=this.view.querySelector(".frame");switch(this._mode){case C.MODE_BLACK_BERRY:this._cell_height=50;case C.MODE_DEFAULT:case C.MODE_IOS:case C.MODE_SYMBIAN:d.addPointerListener(this.view,v.POINTER_START,this);this._frame_border_width=0;break;case C.MODE_WP7:this._cell_height=83;case C.MODE_ANDROID:this._frame_view.parentElement.removeChild(this._frame_view)}},
removeAllSlots:function(){delete this._data;this._data=[];this._remove_all_slots()},_remove_all_slots:function(){e.removeAllElementChild(this._slots_view);delete this._slots_elements;this._slots_elements=[];this._active_slot=null},_render_slots:function(){for(var a=0;a<this._data.length;a++)this._render_a_slot(a)},_render_a_slot:function(a){var c,f,g,h=this._data[a];if(h){f=0;g=o.deviceConfiguration.os;h.length&&g==u.OS_WP7&&(f=Math.floor(100/h.length));g=b.createElement("ul");g.index=a;f&&e.setElementStyle(g,
{width:f+"%"});f="";for(c in h.values)f+="<li>"+h.values[c]+"</li>";e.safeInnerHTML(g,f);if(this._mode===C.MODE_ANDROID){c=b.createElement("div");f=this._generate_button(a);c.appendChild(f[0]);var s=b.createElement("div");s.className=h.style;s.appendChild(g);c.appendChild(s);c.appendChild(f[1])}else c=b.createElement("div"),c.className=h.style,c.appendChild(g);this._slots_view.appendChild(c);g.slotPosition=a;g.slotYPosition=0;switch(this._mode){case C.MODE_WP7:g.slotMaxScroll=this.view.clientHeight-
g.clientHeight,d.addPointerListener(g,v.POINTER_START,this,!0)}g.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";m?da(g,"translate3d(0,0,0)"):da(g,"translate(0,0)");this._slots_elements.push(g);h.defaultValue&&this.scrollToValue(a,h.defaultValue)}},_generate_button:function(a){var c=this._data[a].style.match("readonly"),f=b.createElement("div");c?f.className="button_incr readonly":(f.className="button_incr",e.setElementInnerText(f,"+"),f.slotPosition=a);c||(d.addPointerListener(f,
v.POINTER_START,this),d.addPointerListener(f,v.POINTER_END,this),d.addPointerListener(f,v.POINTER_CANCEL,this));var g=b.createElement("div");c?g.className="button_decr readonly":(g.className="button_decr",e.setElementInnerText(g,"-"),g.slotPosition=a);c||(d.addPointerListener(g,v.POINTER_START,this),d.addPointerListener(g,v.POINTER_END,this),d.addPointerListener(g,v.POINTER_CANCEL,this));return[f,g]},_buttonSelected:function(a){var b=a.target.slotPosition;switch(a.type){case v.POINTER_START:e.addClassName(a.target,
"active");break;case v.POINTER_END:var d=this._slots_elements[b],c=d.slotYPosition;e.hasClassName(a.target,"button_decr")?(c+=44,0<c&&(c=0)):(c-=44,d=this.getSlotMaxScroll(d),c<d&&(c=d));this._scrollTo(b,c);case v.POINTER_CANCEL:e.removeClassName(a.target,"active")}},addSlot:function(a,b,d){b||(b="");var e={};e.values=a;e.style=b;e.defaultValue=d;this._data.push(e);this._render_a_slot(this._data.length-1)},getSelectedValues:function(){if(this._current_values)return this._current_values;var a,b,e,
c;this._selected_keys=[];this._selected_values=[];for(e=0;e<this._slots_elements.length;e++)if(a=this._slots_elements[e])for(c in a.removeEventListener(d.TRANSITION_END,this,!1),a.style.setProperty(d.TRANSITION_DURATION,"0"),b=this.getSlotMaxScroll(a),0<a.slotYPosition?this._setPosition(e,0):a.slotYPosition<b&&this._setPosition(e,b),a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[e].values){if(b==a){this._selected_keys.push(c);this._selected_values.push(this._data[e].values[c]);break}b++}return this._current_values=
{keys:this._selected_keys,values:this._selected_values}},_getSelectedValues:function(){if(this._current_values)return this._current_values;var a,b,d,e;this._selected_keys=[];this._selected_values=[];for(d=0;d<this._slots_elements.length;d++)if(a=this._slots_elements[d])for(e in a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[d].values){if(b==a){this._selected_keys.push(e);this._selected_values.push(this._data[d].values[e]);break}b++}return this._current_values={keys:this._selected_keys,
values:this._selected_values}},scrollToValue:function(a,b){var e,c;c=this._slots_elements[a];var f=this._data[a];if(!c||!f)return!1;c.removeEventListener(d.TRANSITION_END,this,!1);c.style.setProperty(d.TRANSITION_DURATION,"0");c=0;for(e in f.values){if(e==b)return e=c*this._cell_height,this._setPosition(a,e),!0;c-=1}return!1},_setPosition:function(a,b){delete this._current_values;var d=this._slots_elements[a];d.slotYPosition=b;m?da(d,"translate3d(0,"+b+"px,0)"):da(d,"translate(0,"+b+"px)")},_scrollTo:function(a,
b,e){var c=this._slots_elements[a];c.style.setProperty(d.TRANSITION_DURATION,e?e+"ms":"100ms");this._setPosition(a,b?b:0);a=this.getSlotMaxScroll(c);0<c.slotYPosition||c.slotYPosition<a?c.addEventListener(d.TRANSITION_END,this,!1):(this._delegate&&this._delegate.pickerViewSelectRow&&this._delegate.pickerViewSelectRow(this),this.propagate("change",this._getSelectedValues()),this.outPropertyChange())},handleEvent:function(a){if(this._mode===C.MODE_ANDROID)this._buttonSelected(a);else switch(a.type){case v.POINTER_START:this._scrollStart(a);
break;case v.POINTER_MOVE:this._scrollMove(a);break;case v.POINTER_END:this._scrollEnd(a);break;case d.TRANSITION_END:this._backWithinBoundaries(a)}},__get_slot_index:function(a){var b=a.target;if("UL"===b.nodeName)return b.index;if("LI"===b.nodeName)return b.parentElement.index;if(b===this._frame_view){this._frame_border_width=(b=this._getComputedStyle(this._frame_view))?parseInt(b.getPropertyValue("border-left-width")):0;var b=0,d=e.getBoundingClientRect(this._slots_view);this._mode==C.MODE_BLACK_BERRY&&
(b=8);a=a.clientX-d.left-this._frame_border_width-b;for(d=b=0;d<this._slots_elements.length;d++)if(b+=this._slots_elements[d].offsetWidth,a<b)return d}return g},_scrollStart:function(a){if(1<a.nbPointers)return!1;a.preventDefault();a.stopPropagation();var c=a.targetPointerList[0];this._active_slot=g;switch(this._mode){case C.MODE_DEFAULT:case C.MODE_IOS:case C.MODE_SYMBIAN:case C.MODE_BLACK_BERRY:this._active_slot=this.__get_slot_index(c);break;case C.MODE_WP7:this._active_slot=a.currentTarget.index,
e.addClassName("dragging")}if("undefined"!==typeof this._active_slot){if(this._data[this._active_slot].style.match("readonly"))return d.removePointerListener(b,v.POINTER_MOVE,this,!0),d.removePointerListener(b,v.POINTER_END,this,!0),!1;var f=this._slots_elements[this._active_slot];f.slotMaxScroll=this.getSlotMaxScroll(f);f.removeEventListener(d.TRANSITION_END,this,!1);f.style.setProperty(d.TRANSITION_DURATION,"0");if(m){var h=d.util.getElementMatrixTransform(f).m42;h!=f.slotYPosition&&this._setPosition(this._active_slot,
h)}this.startY=c.pageY;this.scrollStartY=f.slotYPosition;this.scrollStartTime=a.timeStamp;d.addPointerListener(b,v.POINTER_MOVE,this,!0);d.addPointerListener(b,v.POINTER_END,this,!0);switch(this._mode){case C.MODE_WP7:case C.MODE_BLACK_BERRY:this.__timer&&(clearTimeout(this.__timer),this.__timer=0),this.__elem_to_hide&&this.__elem_to_hide!=f&&(e.removeClassName(this.__elem_to_hide.parentElement,"visible"),this.__elem_to_hide=null),e.addClassName(f.parentElement,"visible")}return!0}},_scrollMove:function(a){a.preventDefault();
a.stopPropagation();var b=a.targetPointerList[0],d=b.pageY-this.startY,e=this._slots_elements[this._active_slot];if(0<e.slotYPosition||e.slotYPosition<e.slotMaxScroll)d/=2;this._setPosition(this._active_slot,e.slotYPosition+d);this.startY=b.pageY;80<a.timeStamp-this.scrollStartTime&&(this.scrollStartY=e.slotYPosition,this.scrollStartTime=a.timeStamp)},_scrollEnd:function(a){d.removePointerListener(b,v.POINTER_MOVE,this,!0);d.removePointerListener(b,v.POINTER_END,this,!0);var c=this._slots_elements[this._active_slot],
f,g=this;if(c){switch(this._mode){case C.MODE_BLACK_BERRY:case C.MODE_WP7:c.parentElement&&(this.__elem_to_hide=c,this.__timer=setTimeout(function(){e.removeClassName(g.__elem_to_hide.parentElement,"visible");g.__elem_to_hide=null;g.removeClassName("dragging")},1E3))}if(0<c.slotYPosition||c.slotYPosition<c.slotMaxScroll)return this._scrollTo(this._active_slot,0<c.slotYPosition?0:c.slotMaxScroll),!1;f=c.slotYPosition-this.scrollStartY;if(f<this._cell_height/1.5&&f>-this._cell_height/1.5)return c.slotYPosition%
this._cell_height&&this._scrollTo(this._active_slot,Math.round(c.slotYPosition/this._cell_height)*this._cell_height,100),!1;a=2*f/(a.timeStamp-this.scrollStartTime)/this._friction;f=this._friction/2*a*a;0>a&&(a=-a,f=-f);f=c.slotYPosition+f;0<f?(f/=2,a/=3,f>this.view.clientHeight/4&&(f=this.view.clientHeight/4)):f<c.slotMaxScroll?(f=(f-c.slotMaxScroll)/2+c.slotMaxScroll,a/=3,f<c.slotMaxScroll-this.view.clientHeight/4&&(f=c.slotMaxScroll-this.view.clientHeight/4)):f=Math.round(f/this._cell_height)*
this._cell_height;this._scrollTo(this._active_slot,Math.round(f),Math.round(a));return!0}},getSlotMaxScroll:function(a){switch(this._mode){case C.MODE_DEFAULT:return this.view.clientHeight-a.clientHeight-66;case C.MODE_IOS:return this.view.clientHeight-a.clientHeight-86;case C.MODE_SYMBIAN:return this.view.clientHeight-a.clientHeight-80;case C.MODE_BLACK_BERRY:return this.view.clientHeight-a.clientHeight-93;case C.MODE_WP7:return this.view.clientHeight-a.clientHeight-103;case C.MODE_ANDROID:return this.view.clientHeight-
a.clientHeight-121}return 0},_backWithinBoundaries:function(a){a=a.target;a.removeEventListener(d.TRANSITION_END,this,!1);slotMaxScroll=this.getSlotMaxScroll(a);this._scrollTo(a.slotPosition,0<a.slotYPosition?0:slotMaxScroll,150);return!1}};e.extendClass(C,f);e.defineClassProperties(C,{delegate:{set:function(a){this._delegate=a}},data:{set:function(a){var b,d,c,f;if(e.isArray(a)){this.removeAllSlots();for(f=0;f<a.length;f++)b=a[f],d=b.values,c=b.style,b=b.defaultValue,d&&this.addSlot(d,c,b)}}},selectedKeys:{get:function(){this._current_values||
this.getSelectedValues();return this._selected_keys}},selectedValues:{get:function(){this._current_values||this.getSelectedValues();return this._selected_values}}});N.Picker=C;var wa={},sa={},ta=null;a.prototype={_href:null,_view_box:null,__set_svg_doc:function(a,c){function f(a){var d=b.createElementNS("http://www.w3.org/2000/svg","use");d.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+a);return d}if(a){var g=b.createElementNS("http://www.w3.org/2000/svg","svg");e.removeAllElementChild(this.view);
this.view.appendChild(g);this._view_box&&(this.viewBox=this._view_box);if(c)g.appendChild(f(c));else for(var h=a.childNodes,s=0;s<h.length;s++){var t=h[s];1===t.nodeType&&"defs"!==t.nodeName&&(c=t.getAttribute("id"),c||(c=d.core.createId(),t.setAttribute("id",c)),g.appendChild(f(c)))}}}};e.extendClass(a,f);e.defineClassProperties(a,{href:{set:function(a){if(e.isString(a)){this._href=a;var b,d;-1!==a.indexOf("#")?(b=a.substr(0,a.indexOf("#")),d=a.substring(a.indexOf("#")+1)):b=this._href;(a=wa[b])?
this.__set_svg_doc(a,d):t(b,d,this)}},get:function(){return this._href}},contentData:{set:function(a){e.isString(a)&&(e.removeAllElementChild(this.view),this.__object&&delete this.__object,e.safeInnerHTML(this.view,a),this._href=g)}},viewBox:{set:function(a){if(e.isArray(a)&&4==a.length){this._view_box=a;var b=this.view.querySelector("svg");b&&(b.setAttribute("width",a[2]),b.setAttribute("height",a[3]),b.setAttribute("viewBox",a.join(" ")))}}}});N.SVGView=a;s.DEFAULT_TYPE="default";s.BAR_TYPE="bar";
s.HORIZONTAL=0;s.VERTICAL=1;s.prototype={_type:s.DEFAULT_TYPE,_is_toggle_buttons:!0,_items:null,_selected_index:-1,_div_list:null,_orientation:s.HORIZONTAL,destructor:function(){this._cleanButtons();f.prototype.destructor.call(this)},_cleanButtons:function(){if(this.view)for(e.removeAllElementChild(this.view);this._div_list.length;)d.removePointerListener(this._div_list[0],v.POINTER_START,this),this._div_list.remove(0)},_renderButtons:function(){if(this.view){this._cleanButtons();var a="",c=o.deviceConfiguration.os;
this._items.length&&c==u.OS_WP7&&(a=Math.floor(100/this._items.length));c=b.createElement("div");this.view.appendChild(c);for(var f=0,g=this._items.length;f<g;f++){var h=b.createElement("div");h._index=f;e.setElementInnerText(h,this._items[f]);a&&e.setElementStyle(h,{width:a+"%"});d.addPointerListener(h,v.POINTER_START,this);this._div_list.push(h);c.appendChild(h)}this.orientation=this._orientation}},initComponent:function(){f.prototype.initComponent.call(this);this._items=[];this._div_list=[];this._renderButtons();
this.selectedIndex=this._selected_index;this.type=this._type},handleEvent:function(a){var b;if(a.type===v.POINTER_START&&!(1<a.nbPointers)){b=a.target;b.tagName||(b=b.parentElement);if(this._selected_index===b._index)return!1;a.stopPropagation();a.preventDefault();this.selectedIndex=b._index;this.propagate("select",{index:this._selected_index,item:this._items[this._selected_index]});this.outPropertyChange();return!1}}};e.extendClass(s,f);e.defineClassProperties(s,{items:{set:function(a){var b,d;if(e.isArray(a)&&
a.length){this._items.removeAll();b=0;for(d=a.length;b<d;b++)a[b]&&this._items.push(a[b].toString());this._renderButtons();this._is_toggle_buttons&&(this.selectedIndex=this._selected_index)}},get:function(){return this._text}},selectedIndex:{set:function(a){if(e.isNumber(a)&&!(0>a||a>=this._div_list.length)){var b=this._div_list[this._selected_index];b&&e.removeClassName(b,"selected");this._selected_index=a;(b=this._div_list[this._selected_index])&&e.addClassName(b,"selected");if(!this._is_toggle_buttons){var d=
this;this.__button_time_out=setTimeout(function(){e.removeClassName(b,"selected");d.__button_time_out=0;d._selected_index=-1},f.UNSELECT_DELAY)}}},get:function(){return this._selected_index}},type:{set:function(a){e.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}},isToggleButtons:{set:function(a){this._is_toggle_buttons=a?!0:!1},get:function(){return this._is_toggle_buttons}},orientation:{set:function(a){a!==
s.HORIZONTAL&&a!==s.VERTICAL||(this._orientation=a,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):(this.addClassName("vertical"),this.removeClassName("horizontal")))},get:function(){return this._orientation}}});N.SegmentedButton=s;f.prototype.html_template="<div class='vs_ui_view' x-hag-hole='children'></div>";X.prototype.html_template="<div class='vs_ui_splitview'>  <div x-hag-hole='second_panel'></div>  <div x-hag-hole='main_panel'></div></div>";B.prototype.html_template=
"<div class='vs_ui_scrollview'>  <div x-hag-hole='top_bar'></div>  <div class='content' x-hag-hole='children'></div>  <div x-hag-hole='bottom_bar'></div></div>";L.prototype.html_template="<div class='vs_ui_scrollimageview'><img class='content'/></div>";V.prototype.html_template="<textarea class='vs_ui_textarea'></textarea>";S.prototype.html_template="<div class='vs_ui_button'><div></div></div>";T.prototype.html_template="<div class='vs_ui_list'><ul x-hag-hole='item_children'/></div>";z.prototype.html_template=
"<div class='vs_ui_navigationbar' x-hag-hole='children'></div>";h.prototype.html_template="<div class='vs_ui_toolbar black_ios_style' x-hag-hole='children'></div>";P.prototype.html_template="<div class='vs_ui_canvas'><canvas class='canvas_inner'></canvas></div>";$.prototype.html_template="<div class='vs_ui_progressbar'><div></div></div>";Z.prototype.html_template="<div class='vs_ui_textlabel'></div>";ba.prototype.html_template="<div class='vs_ui_radiobutton'><fieldset x-hag-hole='item_children' /></div>";
M.prototype.html_template="<div class='vs_ui_combobox'></div>";H.prototype.html_template="<div class='vs_ui_checkbox'><fieldset x-hag-hole='item_children' /></div>";U.prototype.html_template="<div class='vs_ui_slider'><div class='handle'></div></div>";ca.prototype.html_template="<img class='vs_ui_imageview'></img>";Y.prototype.html_template="<div class='vs_ui_inputfield'><input type='text' value='' placeholder='type ...' incremental='incremental'/><div class='clear_button'/></div>";I.prototype.html_template=
"<div class='vs_ui_popover'>  <div class='header' x-hag-hole='header'></div>  <div class='center' x-hag-hole='children'></div>  <div class='footer' x-hag-hole='footer'></div>  <div class='arrow'></div></div>";Q.prototype.html_template="<div class='vs_ui_switch'>  <div>    <div class='toggle_on'></div>    <div class='toggle_off'></div>     <div class='switch'></div>   </div></div>";C.prototype.html_template="<div class='vs_ui_picker'>  <div class='slots'></div>  <div class='frame'></div></div>";s.prototype.html_template=
"<div class='vs_ui_segmentedbutton'></div>";a.prototype.html_template="<div class='vs_ui_svgview'></div>";e.defineProperty(b,"preventScroll",{get:function(){return b._preventScroll},set:function(a){(b._preventScroll=a)?(b.addEventListener("touchstart",F,!1),b.addEventListener("touchmove",F,!1),b.addEventListener("scroll",F,!1),o.scrollTo(0,0)):(b.removeEventListener("touchstart",F,!1),b.removeEventListener("touchmove",F,!1),b.removeEventListener("scroll",F,!1))}})})(window);
(function(o,g){function p(a){return!r.CSS_VENDOR?a:"-"+r.CSS_VENDOR.toLowerCase()+"-"+a}function k(a){this.parent=c.Task;this.parent();this.constructor=k;arguments.length&&(this.setAnimations(arguments),this.keyFrames["100%"]=this)}function n(a){this.parent=c.EventSource;this.parent();this.constructor=n;a&&(this._fsm=new c.Fsm(this),this._fsm.goTo=this.goTo,this._owner=a)}function j(a){this.parent=n;this.parent(a);this.constructor=j;arguments.length&&(this._fsm.addInput(j.NEXT),this._fsm.addInput(j.PRED),
this._fsm.addInput(j.FIRST),this._states_array=[])}function q(a,c,f){this.parent=n;this.parent(a);this.constructor=q;arguments.length&&(this._animation_type=f==q.NO_ANIMATION||f==q.CARD_ANIMATION||f==q.SLIDE_ANIMATION?f:q.DEFAULT_ANIMATION,this.setNavigationBar(c),this.__nav_bar_states={})}function A(a,c){this.parent=j;this.parent(a,c);this.constructor=A;a&&a.setStyle("-webkit-transform-style","preserve-3d")}function D(a,c){this.parent=j;this.parent(a,c);this.constructor=D;this.animationDuration=
D.ANIMATION_DURATION}var G=o.document,r=o.vs,w=r.util,c=r.core,f=r.ui,K=r.fx,F=w.setElementTransform,B=r.SUPPORT_3D_TRANSFORM;r.CSS_VENDOR;var L=p("animation-duration"),V=p("animation-delay"),S=p("animation-name"),J=p("animation-timing-function"),aa=p("animation-fill-mode"),W=p("transition-duration"),ea=p("transition-delay"),x=p("transition-timing-function"),ia=p("transition-property"),R=p("transform-origin"),T=p("animation-iteration-count"),M=p("transform"),ba=p("keyframes"),H="animationend",z="transitionend";
"webkit"===r.CSS_VENDOR?(H="webkitAnimationEnd",z="webkitTransitionEnd"):"ms"===r.CSS_VENDOR?(H="msAnimationEnd",z="msTransitionEnd"):"moz"===r.CSS_VENDOR&&(H="Mozanimationend",z="Moztransitionend");w.extend(r,{ANIMATION_DURATION:L,ANIMATION_DELAY:V,ANIMATION_NAME:S,ANIMATION_TIMING_FUNC:J,ANIMATION_FILL_MODE:aa,TRANSITION_DURATION:W,TRANSITION_PROPERTY:ia,TRANSITION_DELAY:ea,TRANSITION_TIMING_FUNC:x,TRANSFORM_ORIGIN:R,ITERATION_COUNT:T,TRANSFORM:M,KEY_FRAMES:ba,ANIMATION_END:H,TRANSITION_END:z});
var h=RegExp(/\$width/g),Z=RegExp(/\$height/g),P=RegExp(/\$x/g),$=RegExp(/\$y/g),U=RegExp(/\$\{([\w]+)\}/g),ca=function(a,c,f,b,d){function e(b,d){var e,f=[],g;if(w.isNumber(b))return b;if(w.isString(b)){b=b.replace(h,a.size[0]+"px");b=b.replace(Z,a.size[1]+"px");b=b.replace(P,a.position[0]+"px");b=b.replace($,a.position[1]+"px");for(e=U.exec(b);e&&2===e.length;)f.push(e[1]),e=U.exec(b);for(e=0;e<f.length;e++)g=f[e],"undefined"!==typeof d[g]?b=b.replace("${"+g+"}",d[g]):"undefined"!==typeof c[g]&&
(b=b.replace("${"+g+"}",c[g]));return b}console.warn("vs.fx.Animation._parseValue. Unknown value's type: "+b);return 0}if(!c||!a||!a.view)console.error("procesAnimation: invalid component parameter!");else{var g=function(a){var b={},d,c;b.properties=a.properties?a.properties.slice():[];b.values=a.values?a.values.slice():[];a.durations&&(b.durations=a.durations);b.timings=a.timings?a.timings.slice():[];a.origin&&(b.origin=a.origin.slice());b.iterationCount=a.iterationCount;b.delay=a.delay;b.additive=
a.additive;b.keyFrames={};a.keyFrames["100%"]||(a.keyFrames["100%"]=a);var f;for(d in a.keyFrames)if(c=a.keyFrames[d],w.isArray(c)){f=[];for(var g=0;g<c.length;g++)value=c[g],null==value||"undefined"==typeof value||(f[g]=e(value,a));b.keyFrames[d]=f}else{for(g=0;g<a.properties.length;g++)b.values[g]=e(a.values[g],c);b.keyFrames[d]={}}return b}(c);return Y(a,c,g,f,b,d)}},Y=function(a,f,g,b,d,e){function h(){var b;b=q?L:W;w.isArray(g.origin)&&2===g.origin.length&&a.setStyle(R,g.origin[0]+"% "+g.origin[1]+
"%");e?a.setStyle(b,0):w.isString(g.durations)?a.setStyle(b,g.durations):w.isArray(g.durations)?a.setStyle(b,g.durations.join(", ")):a.setStyle(b,k.DEFAULT_DURATION);b=q?V:ea;!e&&w.isNumber(g.delay)?a.setStyle(b,g.delay+"ms"):a.setStyle(b,"0");b=q?J:x;w.isString(g.timings)?a.setStyle(b,g.timings):w.isArray(g.timings)?a.setStyle(b,g.timings.join(", ")):a.setStyle(b,k.EASE);q&&("infinite"===g.iterationCount?a.setStyle(T,"infinite"):!g.iterationCount||!w.isNumber(g.iterationCount)?a.setStyle(T,"1"):
a.setStyle(T,g.iterationCount),a.setStyle(aa,"forwards"))}function j(){h();var c,m;c=function(e){e.currentTarget===a.view&&(D||a.view.removeEventListener(z,c,!1),a.view.style.removeProperty(W),a.view.style.removeProperty(ea),f.delegate&&f.delegate.taskDidEnd&&f.delegate.taskDidEnd(g),b&&b.call(d?d:K))};m=parseFloat(a.view.style.getPropertyValue(W));if(e||0===m)D=!0;D?r.scheduleAction(function(){c({currentTarget:a.view})}):a.view.addEventListener(z,c,!1);n()}function n(){var b="",d,e=[],c;for(i=0;i<
g.properties.length;i++)d=g.properties[i],c=g.values[i],"rotate"===d?(b+="rotate("+c+") ",d=M):"skew"===d?(b+="skew("+c+") ",d=M):B&&"translate"===d?(b+="translate3d("+c+") ",d=M):"translate"===d?(b+="translate("+c+") ",d=M):"translateX"===d?(b+="translateX("+c+") ",d=M):"translateY"===d?(b+="translateY("+c+") ",d=M):"rotateX"===d?(b+="rotateX("+c+") ",d=M):"rotateY"===d?(b+="rotateY("+c+") ",d=M):"scale"===d?(b+="scale("+c+") ",d=M):a.setStyle(d,c),-1==e.indexOf(d)&&e.push(d);b&&(g.additive&&(b=
a.getCTM().toString()+" "+b),F(a.view,b));a.setStyle(ia,e.join(","))}function o(){h();var c,g,s;c=function(e){if(e.currentTarget===a.view){D||a.view.removeEventListener(H,c,!1);q&&n();a.view.style.removeProperty(L);a.view.style.removeProperty(V);if(g=a.getStyle(S))g=g.replace(p,""),a.setStyle(S,g);try{if((data=k.__css_animations[p])&&2===data.length)G.getElementsByTagName("head")[0].removeChild(data[0]),delete k.__css_animations[p]}catch(h){return h.stack&&console.log(h.stack),console.error(h),!1}f.delegate&&
f.delegate.taskDidStop&&f.delegate.taskDidEnd(f);b&&b.call(d?d:K)}};s=parseFloat(a.view.style.getPropertyValue(L));if(e||0===s)D=!0;D?r.scheduleAction(function(){c({currentTarget:a.view})}):a.view.addEventListener(H,c,!1);g=(g=a.getStyle(S))?g+(", "+p):p;a.setStyle(S,g)}function m(){var b,d,e,c,f,h,t,m=G.createElement("style");m.type="text/css";var j="";for(d in g.keyFrames){h="";b=g.keyFrames[d];e="";if(w.isArray(b))for(c=0;c<b.length;c++)t=b[c],null==t||"undefined"==typeof t||(f=g.properties[c])&&
("rotate"===f?h+="rotate("+t+") ":"skew"===f?h+="skew("+t+") ":B&&"translate"===f?h+="translate3d("+t+") ":"translate"===f?h+="translate("+t+") ":"translateX"===f?h+="translateX("+t+") ":"translateY"===f?h+="translateY("+t+") ":"rotateX"===f?h+="rotateX("+t+") ":"rotateY"===f?h+="rotateY("+t+") ":"scale"===f?h+="scale("+t+") ":"perspective"===f?h+="perspective("+t+") ":e+=f+":"+t+";");else for(c=0;c<g.properties.length;c++)t=g.values[c],(f=g.properties[c])&&("rotate"===f?h+="rotate("+t+") ":"skew"===
f?h+="skew("+t+") ":B&&"translate"===f?h+="translate3d("+t+") ":"translate"===f?h+="translate("+t+") ":"translateX"===f?h+="translateX("+t+") ":"translateY"===f?h+="translateY("+t+") ":"rotateX"===f?h+="rotateX("+t+") ":"rotateY"===f?h+="rotateY("+t+") ":"scale"===f?h+="scale("+t+") ":"perspective"===f?h+="perspective("+t+") ":e+=f+":"+t+";");h&&(g.additive&&(h=a.getCTM().toString()+" "+h),e+=M+": "+h+";");j+=d+" { "+e+" } "}b=G.createTextNode("@"+ba+" "+p+" { "+j+" }");m.appendChild(b);G.getElementsByTagName("head")[0].appendChild(m);
k.__css_animations[p]=[m,a];o()}if(!g||!a||!a.view)console.error("procesAnimation: invalid component parameter!");else{var p=c.createId(),q=g.keyFrames["0%"]?!0:!1,D=!1,K=this;q?r.scheduleAction(m):r.scheduleAction(j);return p}};k.__css_animations={};k.DEFAULT_DURATION="0.3s";k.DEFAULT_TIMING=k.EASE;k.prototype={properties:null,values:null,durations:null,timings:null,origin:null,iterationCount:1,delay:0,keyFrames:null,additive:!0,setAnimations:function(a){var c,f,b;this.properties=[];this.values=
[];this.timings=[];this.keyFrames={};this.timings=this.durations=this.origin=null;for(c=0;c<a.length;c++)b=a[c],!w.isArray(b)||2!==b.length?console.warn("vs.fx.Animation, invalid animations"):(f=b[0],b=b[1],!w.isString(f)||!w.isString(b)?console.warn("vs.fx.Animation, invalid constructor argument option: ["+f+", "+b+"]"):(this.properties.push(f),this.values.push(b)))},addKeyFrame:function(a,c){if(c)if("from"===a)this.keyFrames["0%"]=c;else if("to"===a)this.keyFrames["100%"]=c;else if(w.isNumber(a)&&
!(0>a||100<a))this.keyFrames[a+"%"]=c},process:function(a,c,f,b){return ca(a,this,c,f,b)},_clone:function(a,f){c.Object.prototype._clone.call(this,a,f);var g,b;a.keyFrames={};a.keyFrames["100%"]=a;a.properties=this.properties?this.properties.slice():[];a.values=this.values?this.values.slice():[];this.durations&&(a.durations=this.durations);a.timings=this.timings?this.timings.slice():[];this.origin&&(a.origin=this.origin.slice());if(this.keyFrames)for(g in this.keyFrames)"100%"!==g&&(b=this.keyFrames[g],
a.keyFrames[g]=w.isArray(b)?b.slice():r.util.clone(b));a.iterationCount=this.iterationCount;a.delay=this.delay},start:function(a){return this.process(a)}};w.extendClass(k,c.Task);w.defineClassProperties(k,{duration:{set:function(a){a&&(this.durations=[a])},get:function(){return this.durations&&this.durations.length?this.durations[0]:k.DEFAULT_DURATION}},timing:{set:function(a){a&&(this.timings=[a])},get:function(){return this.timings&&this.timings.length?this.timings[0]:k.EASE}}});k.EASE="ease";k.LINEAR=
"linear";k.EASE_IN="ease-in";k.EASE_OUT="ease-out";k.EASE_IN_OUT="ease-in-out";TranslateAnimation=function(a,c,f){this.parent=k;arguments.length?(B?this.parent(["translate","${x}px,${y}px,${z}px"]):this.parent(["translate","${x}px,${y}px"]),w.isNumber(a)&&(this.x=a),w.isNumber(c)&&(this.y=c),w.isNumber(f)&&(this.z=f)):this.parent();this.constructor=TranslateAnimation};TranslateAnimation.prototype={x:0,y:0,z:0,_clone:function(a,c){k.prototype._clone.call(this,a,c);a.x=this.x;a.y=this.y;a.z=this.z}};
w.extendClass(TranslateAnimation,k);RotateAnimation=function(a){this.parent=k;arguments.length?(this.parent(["rotate","${deg}deg"]),w.isNumber(a)&&(this.deg=a)):this.parent();this.constructor=RotateAnimation};RotateAnimation.prototype={deg:0,_clone:function(a,c){k.prototype._clone.call(this,a,c);a.deg=this.deg}};w.extendClass(RotateAnimation,k);RotateXYZAnimation=function(a,c,f){this.parent=k;arguments.length?(this.parent(["rotateX","${degX}deg"],["rotateY","${degY}deg"],["rotate","${degZ}deg"]),
w.isNumber(a)&&(this.degX=a),w.isNumber(c)&&(this.degY=c),w.isNumber(f)&&(this.degZ=f)):this.parent();this.constructor=RotateXYZAnimation};RotateXYZAnimation.prototype={degX:0,degY:0,degZ:0,_clone:function(a,c){k.prototype._clone.call(this,a,c);a.degX=this.degX;a.degY=this.degY;a.degZ=this.degZ}};w.extendClass(RotateXYZAnimation,k);ScaleAnimation=function(a,c,f){this.parent=k;arguments.length?!w.isNumber(c)&&!w.isNumber(c)?(this.parent(["scale","${sx}"]),this.sy=this.sx=a):(this.parent(["scaleX",
"${sx}"],["scaleY","${sy}"],["scaleZ","${sz}"]),w.isNumber(a)&&(this.sx=a),w.isNumber(c)&&(this.sy=c),w.isNumber(f)&&(this.sz=f)):this.parent();this.constructor=ScaleAnimation};ScaleAnimation.prototype={sx:1,sy:1,sz:1,_clone:function(a,c){k.prototype._clone.call(this,a,c);a.sx=this.sx;a.sy=this.sy;a.sz=this.sz}};w.extendClass(ScaleAnimation,k);SkewAnimation=function(a,c){this.parent=k;arguments.length?(this.parent(["skew","${ax}deg,${ay}deg"]),w.isNumber(a)&&(this.ax=a),w.isNumber(c)&&(this.ay=c)):
this.parent();this.constructor=SkewAnimation};SkewAnimation.prototype={ax:0,ay:0,_clone:function(a,c){k.prototype._clone.call(this,a,c);a.ax=this.ax;a.ay=this.ay}};w.extendClass(SkewAnimation,k);OpacityAnimation=function(a){this.parent=k;arguments.length?(this.parent(["opacity","${value}"]),w.isNumber(a)&&(this.value=a)):this.parent();this.constructor=OpacityAnimation};OpacityAnimation.prototype={value:1,_clone:function(a,c){k.prototype._clone.call(this,a,c);a.value=this.value}};w.extendClass(OpacityAnimation,
k);k.SlideOutRight=new k(["translateX","$width"]);k.SlideOutRight.addKeyFrame(0,["0px"]);k.SlideOutLeft=new k(["translateX","-$width"]);k.SlideOutLeft.addKeyFrame(0,["0px"]);k.SlideOutTop=new k(["translateY","-$height"]);k.SlideOutTop.addKeyFrame(0,["0px"]);k.SlideOutBottom=new k(["translateY","$height"]);k.SlideOutBottom.addKeyFrame(0,["0px"]);k.SlideInRight=new k(["translateX","0px"]);k.SlideInRight.addKeyFrame(0,["$width"]);k.SlideInLeft=new k(["translateX","0px"]);k.SlideInLeft.addKeyFrame(0,
["-$width"]);k.SlideInTop=new k(["translateY","0px"]);k.SlideInTop.addKeyFrame(0,["-$height"]);k.SlideInBottom=new k(["translateY","0px"]);k.SlideInBottom.addKeyFrame(0,["$height"]);k.FadeIn=new k(["opacity","1"]);k.FadeIn.addKeyFrame(0,["0"]);k.FadeOut=new k(["opacity","0"]);k.FadeOut.addKeyFrame(0,["1"]);K.Animation=k;K.cancelAnimation=function(a){if(!a)return!1;var c,f;if((f=k.__css_animations[a])&&2===f.length){if(!f[1]||!f[1].getStyle||!f[0])return!1;c=f[1].getStyle(S);if(!c)return!1;c=c.replace(a,
"");f[1].setStyle(S,c);try{G.getElementsByTagName("head")[0].removeChild(f[0])}catch(b){return b.stack&&console.log(b.stack),console.error(b),!1}delete k.__css_animations[a]}else return!1;return!0};K.TranslateAnimation=TranslateAnimation;K.RotateAnimation=RotateAnimation;K.RotateXYZAnimation=RotateXYZAnimation;K.ScaleAnimation=ScaleAnimation;K.SkewAnimation=SkewAnimation;K.OpacityAnimation=OpacityAnimation;n.prototype={_delegate:null,_owner:null,_fsm:null,_initial_component:null,destructor:function(){this._owner&&
(this._owner.__controller__=g,this._owner.remove=this._owner._ab_controller_remove,this._owner._ab_controller_remove=g);this._delegate=g;w.free(this._fsm);c.EventSource.prototype.destructor.call(this)},initComponent:function(){c.EventSource.prototype.initComponent.call(this);this._fsm&&this._fsm.init();this._owner?this._owner.__controller__?console.error("The owner already use a controller"):(this._owner.__controller__=this,this._owner._ab_controller_remove=this._owner.remove,this._owner.remove=this.ab_controller_remove):
console.error("Invalid vs.fx.Controller, owner is null vs.fx.Controller.id = '"+this._id+"'")},ab_controller_remove:function(a){a&&((state=this.__controller__._fsm._list_of_state[a.id])?this.__controller__.remove(a):this._ab_controller_remove(a))},isStateExit:function(a){return!this._fsm?!1:this._fsm._list_of_state[a]?!0:!1},add:function(a,c,f,b){console.warn("vs.fx.Controller.add is deprecated. Use vs.fx.Controller.push");return this.push(a,c,f,b)},push:function(a,f,g,b){if(a&&this._fsm){f||(f={});
var d=null,e,h,d=w.isString(a)&&f.id?f.id:!w.isString(a)&&a.id?a.id:c.createId();if(!this.isStateExit(d)){this._fsm.addState(d);this._fsm._list_of_state[d].bindings={};if(b&&b.length)for(h=0;h<b.length;h++)e=b[h],!e||3!==e.length?console.warn("vs.fx.Controller.push: invalid binding information"):this.componentBind(d,e[0],e[1],e[2]);this.setStateComponentInformation(d,a,g,f);return d}}},remove:function(a){if(a&&this._owner&&this._fsm){var c=null;w.isString(a)?c=a:w.isString(a)||(c=a.id);(a=this._fsm._list_of_state[c])&&
a.comp&&this._owner._ab_controller_remove(a.comp);this._fsm.removeState(c)}},setStateComponentInformation:function(a,c,f,b){a&&this._fsm&&this._fsm.existState(a)&&c&&this._owner&&(b=b?w.clone(b):{},a=this._fsm._list_of_state[a],a.init_data=b,w.isString(c)?(a.comp_name=c,a.comp=g):(a.comp_name="",a.comp=c,this._owner.isChild(c)||this._owner.add(c,f)))},addTransition:function(a,c,f,b,d){var e;if(a&&this._fsm&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&f)for(e in this._fsm.existInput(f)||this._fsm.addInput(f),
this._fsm.addTransition(a,c,f),this._fsm._list_of_state[a].transitionEvents)f=this._fsm._list_of_state[a].transitionEvents[e],f.to===c&&(f.animation_out=b,f.animation_in=d)},_animateComponents:function(a,c,f,b,d,e){var g=this,h=function(){try{d&&d.call(g._owner),g._delegate&&g._delegate.animationDidEnd&&(console.warn("animationDidEnd is deprecated. Please use 'controllerAnimationDidEnd'."),g._delegate.animationDidEnd(g)),g._delegate&&g._delegate.controllerAnimationDidEnd&&g._delegate.controllerAnimationDidEnd(a,
c,g)}catch(b){b.stack&&console.log(b.stack),console.error(b)}};r.scheduleAction(function(){try{if(c.show(),!b&&!f)h.call(g);else{if(e){if(b){var d=b.durations;b.durations="0s"}if(f){var j=f.durations;f.durations="0s"}}b&&!f?b.process(c,h,g):!b&&f?f.process(a,h,g):(b&&b.process(c,h,g),f&&f.process(a));e&&(b&&(b.durations=d),f&&(f.durations=j))}}catch(m){m.stack&&console.log(m.stack),console.error(m)}})},componentBind:function(a,c,f,b){if(this._fsm){var d=this._fsm._list_of_state[a],e;d&&(e=d.bindings[c],
e||(e=[],d.bindings[c]=e),e.push([f,b]),a===this._current_state&&d.comp.bind(c,f,b))}},refresh:function(){},getCurrentState:function(){return!this._fsm?void 0:this._fsm._current_state},configureNewComponent:function(){},_beforeStateEnter:function(a,c){if(a&&(a.comp_name||a.comp)){var f,b,d,e;a.comp||(a.comp=this._owner.createAndAddComponent(a.comp_name,a.init_data,a.extension),a.comp.configure(a.init_data),a.comp&&a.comp.propertiesDidChange&&a.comp.propertiesDidChange(),a.comp.propertyChange(),this.configureNewComponent(a.comp));
d=c;a.data_adaptation_func&&(d=a.data_adaptation_func(c));if(d){for(b in d)if(a.comp.__lookupSetter__(b)||a.comp.hasOwnProperty(b))a.comp[b]=d[b];a.comp.propertyChange()}for(f in a.bindings)if(b=a.bindings[f])for(d=0;d<b.length;d++)(e=b[d])&&(e[1]?a.comp.bind(f,e[0],e[1]):a.comp.bind(f,e[0]))}},_beforeStateExit:function(a){if(a&&a.comp){var c,f,b,d;for(c in a.bindings)if(f=a.bindings[c])for(b=0;b<f.length;b++)(d=f[b])&&(d[1]?a.comp.unbind(c,d[0],d[1]):a.comp.bind(c,d[0]))}},goTo:function(a,c,f,b){var d,
e=null;if(!a||!this._list_of_state[a])return console.warn("vs.fx.Controller.goTo unknown State id:"+a),!1;this._current_state&&(f&&(e=this._list_of_state[this._current_state].transitionEvents[f.on]),d=this._list_of_state[this._current_state],this.owner._beforeStateExit(d));this._current_state=a;a=this._list_of_state[this._current_state];this.owner._beforeStateEnter(a,f?f.data:null);d&&d.comp&&d.comp.viewWillDisappear&&d.comp.viewWillDisappear();a.comp.viewWillAppear&&a.comp.viewWillAppear();this.owner._delegate&&
this.owner._delegate.controllerViewWillChange&&(d?this.owner._delegate.controllerViewWillChange(d.comp,a.comp,this.owner):this.owner._delegate.controllerViewWillChange(null,a.comp,this.owner));e?this.owner._animateComponents(d.comp,a.comp,e.animation_out,e.animation_in,null,b):a.comp.show();if(c&&this._output_action[c])if(b=this._output_action[c],w.isFunction(b))b.call(this._owner,f);else if(w.isString(b))this._owner[this._output_action[c]](f);return!0},notify:function(a,c){this._fsm&&a&&a.type&&
this._fsm.fsmNotify(a.type,a.data,c)},clear:function(){this._fsm&&this._fsm.clear()}};w.extendClass(n,c.EventSource);w.defineClassProperties(n,{initialComponent:{set:function(a){!this._fsm||!a?this._initial_component=g:this._fsm.existState(a)&&(this._initial_component=a,this._fsm.initialState=a,this._fsm.goTo(a))},get:function(){return this._initial_component}},delegate:{set:function(a){this._delegate=a}}});K.Controller=n;j.ANIMATION_DURATION=350;j.NEXT="next";j.PRED="pred";j.FIRST="first";j.LAST=
"last";j.prototype={_is_tactile:!1,_owner_handler_event_extended:!1,_owner_handler_event:null,_animation_duration:j.ANIMATION_DURATION,_last_comp_id:null,_states_array:null,__nb_panels:0,_view_size:null,destructor:function(){delete this._states_array;n.prototype.destructor.call(this)},initComponent:function(){n.prototype.initComponent.call(this);this.isTactile=this._is_tactile;this._updateViewSize()},push:function(a,c,f,b){if(a&&(c||(c={}),a=n.prototype.push.call(this,a,c,f,b))){this._states_array.push(a);
this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,j.NEXT);this.addTransition(a,this._last_comp_id,j.PRED);this.addTransition(a,this._initial_component,j.FIRST);this._last_state=a;if(this._last_comp_id===this._initial_state){state=this._fsm._list_of_state[a];if(!state){console.error("Unknown error in vs.fx.StackController.push");return}state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,
f),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange());state.comp.show()}return this._last_comp_id=a}},_updateViewSize:function(){},remove:function(a){if(a){var c=null;w.isString(a)?c=a:w.isString(a)||(c=a.id);var f=this._states_array.findItem(c);if(-1!==f){this._fsm.removeTransitionTo(c,j.NEXT);this._fsm.removeTransitionFrom(c,j.PRED);this._fsm.removeTransitionFrom(c,
j.FIRST);this._states_array.remove(f);this.__nb_panels--;if(0===f&&0<this.__nb_panels){this._initial_component=this._states_array[0];for(var b in this._states_array)b!==c&&b!==this._initial_component&&(this._fsm.removeTransitionFrom(b,j.FIRST),this.addTransition(b,this._initial_component,j.FIRST))}0===this.__nb_panels&&(this._initial_component=g,this._fsm._current_state=g);this._initial_component&&(this._fsm._current_state===c?0===f?this._fsm.goTo(this._initial_component):(f===this._states_array.length&&
f--,this._fsm.goTo(this._states_array[f])):this._fsm.goTo(this._fsm._current_state));n.prototype.remove.call(this,a)}}},orientationDidChange:function(){this._updateViewSize()},goToViewId:function(a,c,f){a=this._states_array.findItem(a);if(-1===a)return!1;this.goToViewAt(a,c,f)},goToViewAt:function(a,c,f){if(0>a||a>this._states_array.length)return!1;var b=this._states_array.findItem(this._fsm._current_state);if(b===a)return!0;var d=this._fsm._list_of_state[this._fsm._current_state];if(a>b){for(;b<
a-1;)this._fsm.fsmNotify(j.NEXT,null,!0),b++;this._fsm.fsmNotify(j.NEXT,null,!0);a=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(1,d.comp,a.comp,c,f)}else{for(;a+1<b;)this._fsm.fsmNotify(j.PRED,null,!0),b--;this._fsm.fsmNotify(j.PRED,null,!0);a=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(-1,d.comp,a.comp,c,f)}},_stackAnimateComponents:function(){},_animateComponents:function(){},goToNextView:function(a,c){var f=this._fsm._list_of_state[this._fsm._current_state],
b=this._fsm.fsmNotify(j.NEXT,null,!0),d=this._fsm._list_of_state[this._fsm._current_state];b&&this._stackAnimateComponents(1,f.comp,d.comp,a,c);return b},goToPreviousView:function(a,c){var f=this._fsm._list_of_state[this._fsm._current_state],b=this._fsm.fsmNotify(j.PRED,null,!0),d=this._fsm._list_of_state[this._fsm._current_state];b&&this._stackAnimateComponents(-1,f.comp,d.comp,a,c);return b},goToFirstView:function(a,c,f){var b=this._fsm._list_of_state[this._fsm._current_state],d=this._fsm.fsmNotify(j.FIRST,
null,!0),e=this._fsm._list_of_state[this._fsm._current_state];d&&this._stackAnimateComponents(f?f:-1,b.comp,e.comp,a,c);return d},goToLastView:function(a,c,f){var b=this._fsm._list_of_state[this._fsm._current_state],d=this._fsm.goTo(this._last_state,null,{on:j.LAST,data:null},c),e=this._fsm._list_of_state[this._fsm._current_state];d&&this._stackAnimateComponents(f?f:1,b.comp,e.comp,a,c);return d},handleEvent:function(){}};w.extendClass(j,n);w.defineClassProperties(j,{viewSize:{set:function(a){a&&
w.isArray(a)&&2===a.length&&w.isNumber(a[0])&&w.isNumber(a[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=a[0],this._view_size[1]=a[1],this._updateViewSize())},get:function(){return!this._view_size?this._owner.size:this._view_size.slice()}},isTactile:{set:function(a){a?(this._is_tactile=!0,this._owner&&this._owner.view&&(this._owner_handler_event_extended||(this._owner_handler_event=this._owner.handleEvent,this._owner.handleEvent=this.handleEvent,r.addPointerListener(this._owner.view,
c.POINTER_START,this._owner,!1)),this._owner_handler_event_extended=!0)):(this._is_tactile=!1,this._owner&&this._owner.view&&this._owner_handler_event_extended&&(r.removePointerListener(this._owner.view,c.POINTER_START,this._owner,!1),this._owner.handleEvent=this._owner_handler_event,this._owner_handler_event_extended=!1))},get:function(){return this._is_tactile}},animationDuration:{set:function(a){a||(a=0);w.isNumber(a)&&(this._animation_duration=a)}}});K.StackController=j;var I=r.core.createClass({parent:r.fx.StackController,
_delta:0,_orientation:0,_transition_out_left:null,_transition_out_right:null,_transition_in:null,_animation_mode:0,properties:{orientation:{set:function(a){a!==I.HORIZONTAL&&a!==I.VERTICAL||(this._orientation=a,this._updateViewSize())},get:function(){return this._orientation}},animationDuration:{set:function(a){a||(a=0);w.isNumber(a)&&(this._animation_duration=a,this._transition_out_left.duration=this._animation_duration+"ms",this._transition_out_right.duration=this._animation_duration+"ms",this._transition_in.duration=
this._animation_duration+"ms")}},animationMode:{set:function(a){a||(a=0);a!==I.POURCENTAGE&&a!==I.PIXEL||this._animation_mode===a||(this._animation_mode=a,w.free(this._transition_out_right),w.free(this._transition_out_left),this._setUpAnimations(),this._updateViewSize())}}},constructor:function(a){this._super(a);this._orientation=I.HORIZONTAL;arguments.length&&(this._setUpAnimations(),this._transition_in=new k(["translate","0,0,0"]),this.animationDuration=I.ANIMATION_DURATION)},_setUpAnimations:function(){switch(this._animation_mode){case I.POURCENTAGE:this._transition_out_left=
new k(["translate","${x}%,${y}%,0"]);this._transition_out_right=new k(["translate","${x}%,${y}%,0"]);break;case I.PIXEL:this._transition_out_left=new k(["translate","${x}px,${y}px,0"]),this._transition_out_right=new k(["translate","${x}px,${y}px,0"])}this._transition_out_left.x=0;this._transition_out_left.y=0;this._transition_out_left.duration=this._animation_duration+"ms";this._transition_out_right.duration=this._animation_duration+"ms"},_updateViewSize:function(){var a,c,f,b;switch(this._animation_mode){case I.POURCENTAGE:a=
100;delta_str=a+"%";break;case I.PIXEL:c=this._owner.size,this._orientation===I.HORIZONTAL?a=c[0]:this._orientation===I.VERTICAL&&(a=c[1]),delta_str=a+"px"}this._orientation===I.HORIZONTAL?(this._transition_out_left.x=-a,this._transition_out_left.y=0,this._transition_out_right.x=a,this._transition_out_right.y=0):this._orientation===I.VERTICAL&&(this._transition_out_left.x=0,this._transition_out_left.y=-a,this._transition_out_right.x=0,this._transition_out_right.y=a);this._orientation===I.HORIZONTAL?
b="translate3D(-"+delta_str+",0,0)":this._orientation===I.VERTICAL&&(b="translate3D(0,-"+delta_str+",0)");for(a=0;a<this._states_array.length;a++)if(c=this._states_array[a],(f=this._fsm._list_of_state[c])&&f.comp)this._fsm._current_state===c?(this._orientation===I.HORIZONTAL?b="translate3D("+delta_str+",0,0)":this._orientation===I.VERTICAL&&(b="translate3D(0,"+delta_str+",0)"),f.comp.view.style.webkitTransitionDuration="0",F(f.comp.view,"translate3D(0,0,0)")):(f.comp.view.style.webkitTransitionDuration=
"0",F(f.comp.view,b))},push:function(a,c,f,b){if(a&&(c||(c={}),a=n.prototype.push.call(this,a,c,f,b))){this._states_array.push(a);this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,j.NEXT);this.addTransition(a,this._last_comp_id,j.PRED);if(state=this._fsm._list_of_state[a])return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,f),
state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=a;console.error("Unknown error in vs.fx.StackController.push")}},configureNewComponent:function(a){var c,
f,b;switch(this._animation_mode){case I.POURCENTAGE:f="100%";break;case I.PIXEL:b=this._owner.size,this._orientation===I.HORIZONTAL?f=b[0]+"px":this._orientation===I.VERTICAL&&(f=b[1]+"px")}this._orientation===I.HORIZONTAL?c="translate3D("+f+",0,0)":this._orientation===I.VERTICAL&&(c="translate3D(0,"+f+",0)");a.view.style.webkitTransitionDuration="0";F(a.view,c);a.hide()},handleEvent:function(a){var f=!1,g=this.size,b=this.__controller__._animation_duration;a.type===c.POINTER_START?(this.__pos=this.__controller__._orientation===
I.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,r.addPointerListener(G,c.POINTER_END,this,!0),r.addPointerListener(G,c.POINTER_MOVE,this,!0),this.__delta=this.animationDuration=0):a.type===c.POINTER_MOVE?(a.preventDefault(),this.__delta=this.__controller__._orientation===I.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos:a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-
this.__pos):a.type===c.POINTER_END&&(50<this.__delta?f=this.__controller__.goToPreviousView():-50>this.__delta&&(f=this.__controller__.goToNextView()),f||(this.animationDuration=b=this.__controller__._orientation===I.HORIZONTAL?Math.floor(b*this.__delta/g[0]):Math.floor(b*this.__delta/g[1])),r.removePointerListener(G,c.POINTER_END,this,!0),r.removePointerListener(G,c.POINTER_MOVE,this,!0))},refresh:function(){j.prototype.refresh.call(this);this._updateViewSize()},_stackAnimateComponents:function(a,
c,f,b,d){var e=this._transition_in,g,h,j;0<a?(h=this._transition_out_right,g=this._transition_out_left):(h=this._transition_out_left,g=this._transition_out_right);j=h.durations;h.durations="0s";var k=this,m=function(){c.hide();try{k._delegate&&k._delegate.controllerAnimationDidEnd&&k._delegate.controllerAnimationDidEnd(c,f,k),b&&b.call(k._owner)}catch(a){a.stack&&console.log(a.stack),console.error(a)}},x=function(){h.durations=j;try{f.show(),f.refresh(),r.scheduleAction(function(){if(d){var a=e.durations;
e.durations="0s";var b=g.durations;g.durations="0s"}e.process(f,m,k);g.process(c);d&&(e.durations=a,g.durations=b)})}catch(a){a.stack&&console.log(a.stack),console.error(a)}};h.process(f,function(){r.scheduleAction(function(){x()})})}});I.ANIMATION_DURATION=300;I.HORIZONTAL=0;I.VERTICAL=1;I.POURCENTAGE=0;I.PIXEL=1;K.SlideController=I;var Q=r.core.createClass({parent:r.fx.StackController,_is_circular:!1,_is_continuous_swipe:!1,__delta:0,__current_pos:0,_orientation:0,properties:{orientation:{set:function(a){a!==
Q.HORIZONTAL&&a!==Q.VERTICAL||(this._orientation=a,this._updateViewSize())},get:function(){return this._orientation}},isTactile:{set:function(a){a?(this._is_tactile=!0,this._owner&&this._owner.view&&(!this._owner_handler_event_extended&&!this.__drag_recognizer&&(this.__drag_recognizer=new f.DragRecognizer(this),this._owner.addPointerRecognizer(this.__drag_recognizer)),this._owner_handler_event_extended=!0)):(this._is_tactile=!1,this._owner&&this._owner.view&&this._owner_handler_event_extended&&(this.__drag_recognizer&&
(this._owner.removePointerRecognizer(this.__drag_recognizer),this.__drag_recognizer=null),this._owner_handler_event_extended=!1))},get:function(){return this._is_tactile}},isCircular:{set:function(a){this._is_circular=a?!0:!1},get:function(){return this._is_circular}},isContinuousSwipe:{set:function(a){this._is_continuous_swipe=a?!0:!1},get:function(){return this._is_continuous_swipe}}},constructor:function(a){this._super(a);this._orientation=Q.HORIZONTAL;arguments.length&&(this.animationDuration=
Q.ANIMATION_DURATION)},_updateViewSize:function(){var a,c,f;a=this._owner.size;this._orientation===Q.HORIZONTAL?f=a[0]:this._orientation===Q.VERTICAL&&(f=a[1]);for(a=0;a<this._states_array.length;a++)c=this._states_array[a],(c=this._fsm._list_of_state[c])&&c.comp&&(this._orientation===Q.HORIZONTAL?c.comp.translate(f*a,0,0):this._orientation===Q.VERTICAL&&c.comp.translate(0,f*a,0))},push:function(a,c,f,b){if(a&&(c||(c={}),a=n.prototype.push.call(this,a,c,f,b))){this._states_array.push(a);this.__nb_panels++;
if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,j.NEXT);this.addTransition(a,this._last_comp_id,j.PRED);this.addTransition(a,this._initial_component,j.FIRST);this._last_state=a;if(state=this._fsm._list_of_state[a])return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,f),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),
state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=a;console.error("Unknown error in vs.fx.StackController.push")}},configureNewComponent:function(){var a=this._owner.size;this._orientation===Q.HORIZONTAL?state.comp.translate(a[0]*
(this.__nb_panels-1),0,0):this._orientation===Q.VERTICAL&&state.comp.translate(0,a[1]*(this.__nb_panels-1),0)},didDrag:function(a){this.__delta=this._orientation===Q.HORIZONTAL?a.dx:a.dy;this._is_continuous_swipe&&(a=this._owner._holes.children,a.style.webkitTransitionDuration="0ms",F(a,"translate3D("+(this.__delta+this.__current_pos)+"px,0,0)"))},didDragEnd:function(){function a(){var a=f._owner._holes.children;a.style.webkitTransitionDuration=f._animation_duration+"ms";f._orientation===Q.HORIZONTAL?
F(a,"translate3D("+f.__current_pos+"px,0,0)"):F(a,"translate3D(0,"+f.__current_pos+"px,0)")}var c,f=this;50<this.__delta?(c=this._fsm.getAccessibleStateOn(j.PRED),(c=!c&&this._is_circular?this.goToLastView(null,null,-1):this.goToPreviousView())||a()):-50>this.__delta?(c=this._fsm.getAccessibleStateOn(j.NEXT),(c=!c&&this._is_circular?this.goToFirstView(null,null,1):this.goToNextView())||a()):this._is_continuous_swipe&&a()},refresh:function(){j.prototype.refresh.call(this);this._updateViewSize()},_stackAnimateComponents:function(a,
c,f,b,d){var a=this._owner.size,e=this._owner._holes.children,c=this._states_array.indexOf(f.id);e.style.webkitTransitionDuration="0ms";this.__current_pos=this._orientation===Q.HORIZONTAL?c*-a[0]:c*-a[1];var g=this;(function(){try{f.show(),f.refresh(),r.scheduleAction(function(){e.style.webkitTransitionDuration=d?"0ms":g._animation_duration+"ms";g._orientation===Q.HORIZONTAL?F(e,"translate3D("+g.__current_pos+"px,0,0)"):F(e,"translate3D(0,"+g.__current_pos+"px,0)")})}catch(a){a.stack&&console.log(a.stack),
console.error(a)}})()}});w.extend(Q.prototype,f.RecognizerManager);Q.ANIMATION_DURATION=300;Q.HORIZONTAL=0;Q.VERTICAL=1;Q.PIXEL=1;K.SwipeController=Q;q.NO_ANIMATION=0;q.CARD_ANIMATION=1;q.SLIDE_ANIMATION=2;q.DEFAULT_ANIMATION=q.SLIDE_ANIMATION;q.BACK="back";q.prototype={_nav_bar:null,__nav_bar_states:null,_animation_type:q.DEFAULT_ANIMATION,destructor:function(){n.prototype.destructor.call(this)},initComponent:function(){n.prototype.initComponent.call(this);this.__translate_in_right=new TranslateAnimation(0);
this.__translate_out_right=new k(["translate","100%,0,0"]);this.__translate_out_left=new k(["translate","-100%,0,0"]);this.__translate_in_left=new TranslateAnimation(0)},setNavigationBar:function(a){a&&!(!a instanceof f.NavigationBar)&&(this._nav_bar=a)},_updateViewSize:function(){},push:function(a,c,f){if(a&&(c||(c={}),a=n.prototype.push.call(this,a,c,null,f)))return(c=this._fsm._list_of_state[a])&&c.comp&&this.configureNewComponent(c.comp),a},configureNavigationBarState:function(a,f){var g,b,d,
e,h=[],j={};if(this._fsm._list_of_state[a]&&f){for(b=0,d=f.length;b<d;b++)if(e=f[b])if(g=e.comp)w.isString(g)&&(g=c.Object._obs[g]),!g instanceof r.ui.View||(h.push(g),e.properties&&(j[g.id]=e.properties));this.__nav_bar_states[a]=j;this._nav_bar&&this._nav_bar.setStateItems(a,h)}},configureTransition:function(a,c,f){a&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&f&&(this._fsm.existInput(f)||this._fsm.addInput(f),this._animation_type===q.SLIDE_ANIMATION?(this.addTransition(a,c,f,this.__translate_out_left,
this.__translate_in_right),this.addTransition(c,a,q.BACK,this.__translate_out_right,this.__translate_in_left),this.__translate_in_left.duration="300ms",this.__translate_out_left.duration="300ms",this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):this._animation_type===q.CARD_ANIMATION?(this.addTransition(a,c,f,null,this.__translate_in_right),this.addTransition(c,a,q.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="300ms",this.__translate_out_right.duration=
"300ms"):(this.addTransition(a,c,f,null,this.__translate_in_right),this.addTransition(c,a,q.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="0",this.__translate_out_right.duration="0"))},configureNewComponent:function(a){this.__translate_out_right.process(a,null,null,!0)},goTo:function(a,c,f,b){n.prototype.goTo.call(this,a,c,f,b)&&this.owner._nav_bar&&this.owner._nav_bar.changeState(a,this.owner.__nav_bar_states[a])},_animateComponents:K.Controller.prototype._animateComponents};
w.extendClass(q,j);w.defineClassProperties(q,{viewSize:{set:function(a){a&&w.isArray(a)&&2===a.length&&w.isNumber(a[0])&&w.isNumber(a[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=a[0],this._view_size[1]=a[1],this._updateViewSize())},get:function(){return!this._view_size?this._owner.size:this._view_size.slice()}},initialComponent:{set:function(a){if(a){if(this._fsm.existState(a)){this._initial_component=a;this._fsm.initialState=a;this._fsm.goTo(a);var a=this._fsm._list_of_state[a],
c=this.__translate_in_right;a&&a.comp&&c.process(a.comp,null,null,!0)}}else this._initial_component=g},get:function(){return this._initial_component}}});K.NavigationController=q;var C=r.core.createClass({parent:r.fx.StackController,_direction:0,_transition_out:null,_transition_in:null,properties:{direction:{set:function(a){a!==C.LEFT_OUT&&a!==C.RIGHT_OUT&&a!==C.BOTTOM_OUT&&a!==C.TOP_OUT||(this._direction=a,this._updateViewSize())},get:function(){return this._direction}},animationDuration:{set:function(a){a||
(a=0);w.isNumber(a)&&(this._animation_duration=a,this._transition_out&&(this._transition_out.duration=this._animation_duration+"ms"),this._transition_in&&(this._transition_in.duration=this._animation_duration+"ms"))}}},constructor:function(a){this._super(a);a&&(this._transition_out=new k(["translate","${x}%,${y}%,0"]),this._transition_out.x=0,this._transition_out.y=0,this._transition_in=new k(["translate","${x}%,${y}%,0"]),this._transition_in.x=0,this._transition_in.y=0,this.animationDuration=C.ANIMATION_DURATION);
this._direction=C.RIGHT_OUT},_updateViewSize:function(){this._transition_out&&(this._direction===C.LEFT_OUT?(this._transition_out.x=-100,this._transition_out.y=0):this._direction===C.RIGHT_OUT?(this._transition_out.x=100,this._transition_out.y=0):this._direction===C.BOTTOM_OUT?(this._transition_out.x=0,this._transition_out.y=100):(this._transition_out.x=0,this._transition_out.y=-100))},push:function(a,c,f,b){if(a&&(c||(c={}),a=n.prototype.push.call(this,a,c,f,b))){this._states_array.push(a);this.__nb_panels++;
if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,j.NEXT);this.addTransition(a,this._last_comp_id,j.PRED);if(state=this._fsm._list_of_state[a])return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,f),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),
state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=a;console.error("Unknown error in vs.fx.CardController.push")}},configureNewComponent:function(a){var c;c=B?"translate3d":"translate";c=this._direction===C.LEFT_OUT?c+"(-100%,0":this._direction===C.RIGHT_OUT?c+"(100%,0":this._direction===C.BOTTOM_OUT?
c+"(0,100%":c+"(0,-100%";c=B?c+",0)":c+")";a.view.style.webkitTransitionDuration="0";F(a.view,c)},handleEvent:function(a){var f=!1,g,b;if(a.type===c.POINTER_START)this.__pos=this.__controller__._direction===C.LEFT_OUT||this.__controller__._direction===C.RIGHT_OUT?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,r.addPointerListener(G,c.POINTER_END,this,!0),r.addPointerListener(G,c.POINTER_MOVE,this,!0);else if(a.type===c.POINTER_MOVE)if(a.preventDefault(),
g=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],f=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),0<f&&(b=this.__controller__._states_array[f-1]),this.__controller__._direction===C.LEFT_OUT||this.__controller__._direction===C.RIGHT_OUT?(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=B?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?
a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,a=B?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__controller__._direction===C.LEFT_OUT||this.__controller__._direction===C.TOP_OUT)if(0>this.__delta)g.comp.view.style.webkitTransitionDuration=0,F(g.comp.view,a);else{if(b&&(g=this.__controller__._fsm._list_of_state[b])&&g.comp)a=this.__controller__._direction===C.LEFT_OUT||this.__controller__._direction===C.RIGHT_OUT?B?"translate3d("+(this.__delta-this._size[0])+
"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":B?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",g.comp.view.style.webkitTransitionDuration=0,F(g.comp.view,a)}else if(0<this.__delta)g.comp.view.style.webkitTransitionDuration=0,F(g.comp.view,a);else{if(b&&(g=this.__controller__._fsm._list_of_state[b])&&g.comp)a=this.__controller__._direction===C.LEFT_OUT||this.__controller__._direction===C.RIGHT_OUT?B?"translate3d("+(this._size[0]+
this.__delta)+"px,0px,0)":"translate("+(this._size[0]+this.__delta)+"px,0px)":B?"translate3d(0px,"+(this._size[1]+this.__delta)+"px,0)":"translate(0px,"+(this._size[1]+this.__delta)+"px)",g.comp.view.style.webkitTransitionDuration=0,F(g.comp.view,a)}else if(a.type===c.POINTER_END){g=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state];this.__controller__._direction===C.LEFT_OUT||this.__controller__._direction===C.TOP_OUT?50<this.__delta?f=this.__controller__.goToPreviousView():
-50>this.__delta&&(f=this.__controller__.goToNextView()):50<this.__delta?f=this.__controller__.goToNextView():-50>this.__delta&&(f=this.__controller__.goToPreviousView());if(!f)if(f=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),0<f&&(b=this.__controller__._states_array[f-1]),(this.__controller__._direction===C.LEFT_OUT||this.__controller__._direction===C.TOP_OUT)&&0>this.__delta)a=B?"translate3d(0,0,0)":"translate(0,0)",g.comp.view.style.webkitTransitionDuration=
this.__controller__._animation_duration+"ms",F(g.comp.view,a);else if((this.__controller__._direction===C.RIGHT_OUT||this.__controller__._direction===C.BOTTOM_OUT)&&0<this.__delta)a=B?"translate3d(0,0,0)":"translate(0,0)",g.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",F(g.comp.view,a);else if(b&&(g=this.__controller__._fsm._list_of_state[b])&&g.comp)a=this.__controller__._direction===C.LEFT_OUT?"(-100%,0px":this.__controller__._direction===C.RIGHT_OUT?"(100%,0px":
this.__controller__._direction===C.BOTTOM_OUT?"(0px,100%":"(0px,-100%",a=B?a+",0)":a+")",g.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",F(g.comp.view,a);r.removePointerListener(G,c.POINTER_END,this,!0);r.removePointerListener(G,c.POINTER_MOVE,this,!0)}},_stackAnimateComponents:function(a,c,f,b,d){var e,g,h,j;0<a?(e=this._transition_in,j=f):(e=this._transition_out,g=this._transition_in,j=c);g&&(h=g.durations,g.durations="0s");var k=this,m=function(){c.hide();
try{k._delegate&&k._delegate.controllerAnimationDidEnd&&k._delegate.controllerAnimationDidEnd(c,f,k),b&&b.call(this.owner)}catch(a){a.stack&&console.log(a.stack),console.error(a)}},x=function(){g&&(g.durations=h);try{f.show();if(d){var a=e.durations;e.durations="0s"}e.process(j,m,k);d&&(e.durations=a)}catch(b){b.stack&&console.log(b.stack),console.error(b)}};g?g.process(f,function(){r.scheduleAction(function(){x()})}):x()}});C.ANIMATION_DURATION=300;C.LEFT_OUT=0;C.RIGHT_OUT=1;C.TOP_OUT=2;C.BOTTOM_OUT=
3;K.CardController=C;A._translate_animation=new RotateXYZAnimation(-90,0,0);A._translate_animation.init();A._translate_animation.addKeyFrame("from",{degX:0});A._translate_animation.addKeyFrame(50,{degX:-92});A._translate_animation.addKeyFrame(70,{degX:-84});A._translate_animation.addKeyFrame(80,{degX:-90});A._translate_animation.addKeyFrame(95,{degX:-88});A._translate_animation.durations="2s";A.HORIZONTAL=0;A.VERTICAL=1;A.prototype={_orientation:A.HORIZONTAL,push:function(a,c,f){if(a){if(!w.isString(a)){var b=
this._states_array.length;a.position=[0,0];a.setStyle("z-index",1E3-b)}return j.prototype.push.call(this,a,c,f)}},handleEvent:function(a){var f=!1,g,b;if(a.type===c.POINTER_START)this.__pos=this.__layer._orientation===A.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,r.addPointerListener(G,c.POINTER_END,this,!0),r.addPointerListener(G,c.POINTER_MOVE,this,!0),this.animationDuration=0;else if(a.type===c.POINTER_MOVE)if(a.preventDefault(),
g=this.__layer._list_of_state[this.__layer._current_state],f=this.__layer._states_array.indexOf(this.__layer._current_state),0<f&&(b=this.__layer._states_array[f-1]),this.__layer._orientation===A.HORIZONTAL?(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=B?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,a=B?"translate3d(0px,"+this.__delta+
"px,0)":"translate(0px,"+this.__delta+"px)"),0>this.__delta)g.comp.view.style.webkitTransitionDuration=0,F(g.comp.view,a);else{if(b&&(g=this.__layer._list_of_state[b])&&g.comp)a=this.__layer._orientation===A.HORIZONTAL?B?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":B?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",g.comp.view.style.webkitTransitionDuration=0,F(g.comp.view,a)}else if(a.type===
c.POINTER_END){g=this.__layer._list_of_state[this.__layer._current_state];50<this.__delta?f=this.__layer.goToPreviousView():-50>this.__delta&&(f=this.__layer.goToNextView());if(!f)if(f=this.__layer._states_array.indexOf(this.__layer._current_state),0<f&&(b=this.__layer._states_array[f-1]),0>this.__delta)a=B?"translate3d(0,0,0)":"translate(0,0)",g.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",F(g.comp.view,a);else if(b&&(g=this.__layer._list_of_state[b])&&g.comp)a=
this.__layer._orientation===A.HORIZONTAL?B?"translate3d("+this._size[0]+"px,0px,0)":"translate("+this._size[0]+"px,0px)":B?"translate3d(0px,-"+this._size[1]+"px,0)":"translate(0px,-"+this._size[1]+"px)",g.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",F(g.comp.view,a);r.removePointerListener(G,c.POINTER_END,this,!0);r.removePointerListener(G,c.POINTER_MOVE,this,!0)}},goTo:function(a,c,f){function b(a){var b=this._list_of_state[this._states_array[a]];b&&(b.comp||(b.comp=
this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),b.comp.style("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange()),b.view?__setPos(b.view,0,0):b.comp.position=[0,0],b.comp.show(),b.comp.style("z-index",1E3-a))}var d=this._states_array.indexOf(a),e=this._list_of_state[this._current_state];j.prototype.goTo.call(this,a,c,f);if(a&&(this.owner.animationDuration=this._animation_duration,a=this._list_of_state[this._current_state],
a.comp.setStyle("position","absolute"),a.comp.position=[0,0],a.comp.setStyle("z-index",1E3-d),e&&a&&(e.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) translateZ(200px)"),a.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) rotateX(90deg) translateZ(200px)")),0<d&&b.call(this,d-1),d<this._states_array.length-1&&b.call(this,d+1),f&&f.on===j.NEXT&&e?A._translate_animation.process(this.owner):f&&f.on===j.PRED&&a&&(A._translate_animation.x=0,A._translate_animation.y=0,A._translate_animation.process(a.comp)),
c&&this._output_action[c]))if(d=this._output_action[c],w.isFunction(d))d.call(this.owner,f);else if(w.isString(d))this.owner[this._output_action[c]](f)}};w.extendClass(A,j);K.CubicController=A;D._opacity_animation=new OpacityAnimation(1);D._opacity_animation.init();D._opacity_animation.durations="0.2s";D.ANIMATION_DURATION=500;D.prototype={push:function(a,c,f){if(a){if(!w.isString(a)){var b=this._states_array.length;a.position=[0,0];a.setStyle("z-index",1E3-b)}j.prototype.push.call(this,a,c,f)}},
goTo:function(a,c,f){function b(a){var b=this._list_of_state[this._states_array[a]];b&&(b.comp||(b.comp=this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),b.comp.setStyle("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange()),b.view?__setPos(b.view,0,0):b.comp.position=[0,0],b.comp.show(),b.comp.setStyle("z-index",1E3-a))}var d=this._states_array.indexOf(a),e=this._list_of_state[this._current_state];
j.prototype.goTo.call(this,a,c,f);if(a&&(a=this._list_of_state[this._current_state],a.comp.setStyle("position","absolute"),a.comp.position=[0,0],a.comp.setStyle("z-index",1E3-d),0<d&&b.call(this,d-1),d<this._states_array.length-1&&b.call(this,d+1),f&&f.on===j.NEXT&&e?(D._opacity_animation.value=0,D._opacity_animation.process(e.comp)):f&&f.on===j.PRED&&a&&(D._opacity_animation.value=1,D._opacity_animation.process(a.comp)),c&&this._output_action[c]))if(d=this._output_action[c],w.isFunction(d))d.call(this.owner,
f);else if(w.isString(d))this.owner[this._output_action[c]](f)}};w.extendClass(D,j);w.defineClassProperty(D,"animationDuration",{set:function(a){a||(a=0);w.isNumber(a)&&(this._animation_duration=a,D._opacity_animation.durations=a/1E3+"s")}});K.OpacityController=D})(window);
(function(o){function g(j){j&&!j.size&&(j.size=[320,200]);this.parent=q.View;this.parent(j);this.constructor=g}function p(g){this.parent=j.EventSource;this.parent(g);this.constructor=p}var k=o.vs,n=k.util,j=k.core,q=k.ui,A=k.av;g.UNKNOWN_ERR=0;g.MEDIA_ERR_ABORTED=1;g.MEDIA_ERR_NETWORK=2;g.MEDIA_ERR_DECODE=3;g.MEDIA_ERR_SRC_NOT_SUPPORTED=4;g.prototype={delegate:null,_state:j.Task.STOPPED,__video_node:null,_src:"",_poster:"",_preload:"",_autoplay:!1,_loop:!1,_controls:!1,_volume:1,_muted:!1,_current_time:0,
play:function(){if(this._state===j.Task.STARTED)return!1;this.__video_node&&(this._state=j.Task.STARTED,this.__video_node.play())},start:function(){this.play()},pause:function(){if(this._state===j.Task.PAUSED)return!1;this.__video_node&&(this.__video_node.pause(),this._state=j.Task.PAUSED,this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this))},stop:function(){if(this._state===j.Task.STOPPED)return!1;this.__video_node&&(this.__video_node.stop?this.__video_node.stop():(this.__video_node.pause(),
this.__video_node.currentTime=0),this._state=j.Task.STOPPED,this.delegate&&this.delegate.taskDidStop&&this.delegate.taskDidStop(this))},destructor:function(){this.__i__&&(this.__video_node.removeEventListener("volumechange",this),this.__video_node.removeEventListener("ended",this),this.__video_node.removeEventListener("playing",this),this.__video_node.removeEventListener("play",this),this.__video_node.removeEventListener("pause",this),this.__video_node.removeEventListener("error",this),q.View.prototype.destructor.call(this))},
initComponent:function(){q.View.prototype.initComponent.call(this);if(this.__video_node=this.view.querySelector("video")){this.__video_node.addEventListener("volumechange",this);this.__video_node.addEventListener("ended",this);this.__video_node.addEventListener("playing",this);this.__video_node.addEventListener("play",this);this.__video_node.addEventListener("pause",this);this.__video_node.addEventListener("error",this);var g=this;this.__video_node.addEventListener("timeupdate",function(){g._current_time=
g.__video_node.currentTime;g.outPropertyChange("currentTime")},!1)}else console.error("Uncompatible video view")},handleEvent:function(k){switch(k.type){case "volumechange":this._volume=this.__video_node.getAttribute("volume");this.outPropertyChange("volume");this.propagate("volumechange",this._volume);break;case "ended":this._state=j.Task.STOPED;this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this);this.propagate(k.type);break;case "pause":this.delegate&&this.delegate.taskDidPause&&
this.delegate.taskDidPause(this);this._state=j.Task.PAUSED;this.propagate(k.type);break;case "playing":case "play":this._state=j.Task.STARTED;this.propagate(k.type);break;case "error":this.__video_node.error?this.propagate(k.type,this.__video_node.error.code):this.propagate(k.type,g.UNKNOWN_ERR)}}};n.extendClass(g,q.View);n.defineClassProperties(g,{controls:{set:function(g){this._controls=g?!0:!1;this.__video_node&&(this.__video_node.setAttribute("controls",this._controls),this.propertyChange("controls"))},
get:function(){return this._controls}},size:{set:function(g){if(g&&n.isArray(g)&&2===g.length&&n.isNumber(g[0])&&n.isNumber(g[1])&&(this._size[0]=g[0],this._size[1]=g[1],this.view)){this._updateSizeAndPos();if(!this.__video_node&&(this.__video_node=this.view.querySelector("video"),!this.__video_node)){console.error("Uncompatible video view");return}this.__video_node.setAttribute("width",this._size[0]);this.__video_node.setAttribute("height",this._size[1])}},get:function(){this.view&&this.view.parentNode&&
(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}},src:{set:function(g){n.isString(g)&&(this._src=g,this.__video_node&&(this.__video_node.setAttribute("src",this._src),this.propertyChange("src")))},get:function(){return this._src}},poster:{set:function(g){n.isString(g)&&(this._poster=g,this.__video_node&&(this.__video_node.setAttribute("poster",this._poster),this.propertyChange("poster")))},get:function(){return this._poster}},loop:{set:function(g){this._loop=
g?!0:!1;this.__video_node&&(this.__video_node.setAttribute("loop",this._loop),this.propertyChange("loop"))},get:function(){return this._loop}},autoplay:{set:function(g){this._autoplay=g?!0:!1;this.__video_node&&(this.__video_node.setAttribute("autoplay",this._autoplay),this.propertyChange("autoplay"))},get:function(){return this._autoplay}},volume:{set:function(g){if(n.isNumber(g)&&!(0>g||1<g))this._volume=g,this.__video_node&&(this.__video_node.setAttribute("volume",this._volume),this.propertyChange("volume"))},
get:function(){return this._volume}},muted:{set:function(g){this._muted=g?!0:!1;this.propertyChange("muted")},get:function(){return this._muted}},currentTime:{get:function(){return this._current_time}},state:{get:function(){return this._state}}});A.Video=g;p.UNKNOWN_ERR=0;p.MEDIA_ERR_ABORTED=1;p.MEDIA_ERR_NETWORK=2;p.MEDIA_ERR_DECODE=3;p.MEDIA_ERR_SRC_NOT_SUPPORTED=4;p.prototype={delegate:null,_state:j.Task.STOPPED,__audio:null,_src:"",_autoplay:!1,_loop:!1,_volume:1,_muted:!1,_current_time:0,play:function(){if(this._state===
j.Task.STARTED)return!1;this.__audio&&(this._state=j.Task.STARTED,this.__audio.play())},start:function(){this.play()},pause:function(){if(this._state===j.Task.PAUSED)return!1;this.__audio&&(this.__audio.pause(),this._state=j.Task.PAUSED,this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this))},stop:function(){if(this._state===j.Task.STOPPED)return!1;this.__audio&&(o.Media?this.__audio.stop():this.__audio.pause(),this._state=j.Task.STOPPED,this.delegate&&this.delegate.taskDidStop&&
this.delegate.taskDidStop(this))},destructor:function(){this.__i__&&(this.__audio.removeEventListener("volumechange",this),this.__audio.removeEventListener("ended",this),this.__audio.removeEventListener("playing",this),this.__audio.removeEventListener("play",this),this.__audio.removeEventListener("pause",this),this.__audio.removeEventListener("error",this),delete this.__audio,this.__audio=null,j.EventSource.prototype.destructor.call(this))},initComponent:function(){j.EventSource.prototype.initComponent.call(this);
this.__audio=new o.Audio;this.__audio.preload="auto";this.__audio.autoplay=this._autoplay;this.__audio.addEventListener("volumechange",this);this.__audio.addEventListener("ended",this);this.__audio.addEventListener("playing",this);this.__audio.addEventListener("play",this);this.__audio.addEventListener("pause",this);this.__audio.addEventListener("error",this);var g=this;this.__audio.addEventListener("timeupdate",function(){g._current_time=g.__audio.currentTime;g.outPropertyChange("currentTime")},
!1)},handleEvent:function(g){switch(g.type){case "volumechange":this._volume=this.__audio.volume;this.outPropertyChange("volume");this.propagate("volumechange",this._volume);break;case "ended":this._state=j.Task.STOPED;this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this);this.propagate(g.type);break;case "pause":this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this);this._state=j.Task.PAUSED;this.propagate(g.type);break;case "playing":case "play":this._state=
j.Task.STARTED;this.propagate(g.type);break;case "error":this.__audio.error?this.propagate(g.type,this.__audio.error.code):this.propagate(g.type,p.UNKNOWN_ERR)}}};n.extendClass(p,j.EventSource);n.defineClassProperties(p,{src:{set:function(g){if(k.util.isString(g)){this._src=g;self=this;if(o.Media)this.__audio=new o.Media(this._src,function(){self._state=j.Task.STOPED;self.delegate&&self.delegate.taskDidEnd&&self.delegate.taskDidEnd(self);self.propagate(event.type)}),this._autoplay&&this.play();else{if(!this.__audio)return;
this.__audio.src=this._src}this.propertyChange("src")}},get:function(){return this._src}},loop:{set:function(g){this._loop=g?!0:!1;this.__audio&&(this.__audio.loop=this._loop,this.propertyChange("loop"))},get:function(){return this._loop}},autoplay:{set:function(g){this._autoplay=g?!0:!1;this.__audio&&(this.__audio.autoplay=this._autoplay,this.propertyChange("autoplay"))},get:function(){return this._autoplay}},volume:{set:function(g){if(k.util.isNumber(g)&&!(0>g||1<g))this._volume=g,this.__audio&&
(this.__audio.volume=this._volume,this.propertyChange("volume"))},get:function(){return this._volume}},muted:{set:function(g){this._muted=g?!0:!1;this.propertyChange("muted")},get:function(){return this._muted}},currentTime:{get:function(){return this._current_time}},state:{get:function(){return this._state}}});A.Audio=p;g.prototype.html_template="<div class='vs_av_video'><video class='video_inner'></video></div>"})(window);
(function(o,g){function p(){r.InfoWindow=function(c,f,g,j,k){this.vs_map=c;this.id=f;this.type=g;c&&(this.setCoordinate(j,k),this.setValues({map:this.vs_map._gmap}))};r.InfoWindow.prototype=new google.maps.OverlayView;r.InfoWindow.prototype.destructor=function(){this.setMap(null);this.vs_map=this.marker=g};r.InfoWindow.prototype.hide=function(){this.view&&(this.view.style.display="none")};r.InfoWindow.prototype.show=function(){this.view&&(this.view.style.display="block")};r.InfoWindow.prototype.setMarker=
function(c){this.marker&&this.unbind("position");this.marker=c;this.id=this.marker.id;this.type=this.marker.type;this.info=this.marker.info;this.bindTo("position",this.marker._gmarker,"position");this.instanciateView(this.type,this.info)};r.InfoWindow.prototype.setCoordinate=function(c,f){this.position&&delete this.position;this.position=new google.maps.LatLng(c,f)};r.InfoWindow.prototype.setType=function(c){this.type=c;this.instanciateView(this.type,this.info)};r.InfoWindow.prototype.setInfo=function(c){this.info=
c;this.instanciateView(this.type,this.info)};r.InfoWindow.prototype.instanciateView=function(c,f){var g=n.createElement("div"),j=r._anotation_templates_[c];j||(j=r._anotation_templates_["default"]);j=j.infoWindow;if(f)for(key in f)var k=f[key],k=k?k:"",j=j.replace("{"+key+"}",k);q.safeInnerHTML(g,j);this.view||this.createView();q.safeInnerHTML(this.view,g.firstElementChild.innerHTML);this.view.className=g.firstElementChild.className};r.InfoWindow.prototype.createView=function(){this.view||(this.view=
n.createElement("div"),j.addPointerListener(this.view,A.POINTER_START,this))};r.InfoWindow.prototype.handleEvent=function(c){var f=this;switch(c.type){case A.POINTER_START:if(0===c.targetPointerList.length||1<c.nbPointers)break;j.addPointerListener(n,A.POINTER_END,this);j.addPointerListener(n,A.POINTER_MOVE,this);this.__start_x=c.targetPointerList[0].pageX;this.__start_y=c.targetPointerList[0].pageY;this.marker&&this.removeMapEvent();q.addClassName(this.view,"selected");return!1;case A.POINTER_MOVE:if(0===
c.targetPointerList.length)break;var g=c.targetPointerList[0].pageY-this.__start_y;if(10>Math.abs(c.targetPointerList[0].pageX-this.__start_x)+Math.abs(g))return c.preventDefault(),!1;j.removePointerListener(n,A.POINTER_END,this);j.removePointerListener(n,A.POINTER_MOVE,this);this.marker&&j.scheduleAction(function(){f.initMapEvent()});q.removeClassName(this.view,"selected");return!1;case A.POINTER_END:return c.stopPropagation(),c.preventDefault(),j.removePointerListener(n,A.POINTER_END,this),j.removePointerListener(n,
A.POINTER_MOVE,this),this.marker&&j.scheduleAction(function(){f.initMapEvent()}),q.removeClassName(this.view,"selected"),this.vs_map.annotationSelect(this.id),!1}};r.InfoWindow.prototype.onAdd=function(){this.view||this.createView();this.getPanes().floatPane.appendChild(this.view);var c=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){c.draw()})]};r.InfoWindow.prototype.onRemove=function(){this.view.parentNode.removeChild(this.view);for(var c=0,f=this.listeners_.length;c<
f;++c)google.maps.event.removeListener(this.listeners_[c])};r.InfoWindow.prototype.draw=function(){var c=this.getProjection().fromLatLngToDivPixel(this.get("position")),f=this.view;f.style.display="block";f.style.visibility="hidden";var g=0;if(this.marker){var g=10,k=this.marker._gmarker.getIcon();k&&(g+=k.size.height)}j.scheduleAction(function(){var j=f.offsetHeight;f.style.left=c.x-Math.ceil(f.offsetWidth/2)+"px";f.style.top=c.y-j-g+"px";f.style.visibility="visible"})};r.InfoWindow.prototype.initMapEvent=
function(){if(!this.map_listener){var c=this;this.map_listener=google.maps.event.addListener(this.vs_map._gmap,"click",function(){c.hide()})}};r.InfoWindow.prototype.removeMapEvent=function(){this.map_listener&&(google.maps.event.removeListener(this.map_listener),this.map_listener=g)};r.InfoWindowWithMarker=function(c){this.vs_map=c;this.setValues({map:this.vs_map._gmap});this.initMapEvent()};q.extendClass(r.InfoWindowWithMarker,r.InfoWindow)}function k(c){this.parent=j.ui.View;this.parent(c);this.constructor=
k;this.__indicators_list={}}var n=o.document,j=o.vs,q=j.util,A=j.core,D=j.ui,G=j.ext.ui,r=function(c){this.parent=j.ui.View;this.parent(c);this.constructor=r;this._center=[];this._center[0]=48.83763339660763;this._center[1]=2.3397827148437544;r.__google_loaded__||(r.__google_wait_loaded__||(r.__google_wait_loaded__=!0,j.util.importFile("http://maps.google.com/maps/api/js?sensor=true&callback=vs.ext.ui.GMap.__on_laoded",null,null,"js")),r._to_finish_init.push(this));this.__annotations={}};r.NO_MARKER=
0;r.DEVICE_IMAGE_MARKER=1;r.IMAGE_MARKER=2;r._anotation_templates_={};r._anotation_templates_["default"]={marker:{type:r.DEVICE_IMAGE_MARKER},infoWindow:'<div class="vs_ext_ui_gmap_info">    <div>{title}</div>    <div>{subtitle}</div>  </div>'};r.__google_wait_loaded__=!1;r.__google_loaded__=!1;r._to_finish_init=[];r.__on_laoded=function(){var c,f;r.__google_loaded__=!0;r.__google_wait_loaded__=!1;p();for(c=0,f=r._to_finish_init.length;c<f;c++)r._to_finish_init[c].finishInit();r._to_finish_init=null};
r.prototype={_zoom:10,_tilt:-1,_scroll:!0,_tap_to_zoom:!0,_max_zoom:20,_min_zoom:1,_zoom_control:!1,_street_view_control:!1,_center:null,_gmap:null,__init_finished:!1,__annotations:null,destructor:function(){delete this._gmap;j.ui.View.prototype.destructor.call(this)},initComponent:function(){j.ui.View.prototype.initComponent.call(this);r.__google_loaded__&&this.finishInit()},finishInit:function(){var c={zoom:this._zoom,center:new google.maps.LatLng(this._center[0],this._center[1]),disableDefaultUI:!0,
draggable:this._scroll,maxZoom:this._max_zoom,minZoom:this._min_zoom,disableDoubleClickZoom:!this._tap_to_zoom,streetViewControl:this._street_view_control,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},zoomControl:this._zoom_control,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,style:google.maps.ZoomControlStyle.SMALL},mapTypeControlOptions:{style:google.maps.ControlPosition.HORIZONTAL_BAR},mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};
this._gmap=new google.maps.Map(this.view,c);var f=this;j.scheduleAction(function(){f.__init_did_finish()})},__init_did_finish:function(){this.__init_finished=!0;this.streetViewControl=this._street_view_control;this.zoomControl=this._zoom_control;this.propagate("mapload")},isReady:function(){return this.__init_finished},getGoogleMapObject:function(){return this._gmap},showCenterMark:function(){this._center_mark||(this._center_mark=new google.maps.Marker({position:new google.maps.LatLng(this._center[0],
this._center[1]),icon:"css/kit/mapCenter.png"}));this._center_mark.setMap(this._gmap)},hideCenterMark:function(){this._center_mark&&this._center_mark.setMap(null)},refresh:function(){this._gmap&&(google.maps.event.trigger(this._gmap,"resize"),j.ui.View.prototype.refresh.call(this))},addAnnotation:function(c,f,g,j,k){if(this.__init_finished){if(!q.isString(c)||!c)c=A.createId();f=new r.Annotation(this,c,f,g,j,k);return this.__annotations[c]=f}},setAnnotationTemplate:function(c,f,g){if(q.isString(c)||
c){var j=r._anotation_templates_["default"];r._anotation_templates_[c]={marker:q.clone(f?f:j.marker),infoWindow:q.clone(g?g:j.infoWindow)}}},removeAnnotation:function(c){!q.isString(c)&&c.id&&(c=c.id);var f=this.__annotations[c];f&&(q.free(f),delete this.__annotations[c])},removeAnnotations:function(){for(var c in this.__annotations)this.removeAnnotation(c)},annotationSelect:function(c){this.propagate("annotationselect",c)}};q.extendClass(r,j.ui.View);q.defineClassProperties(r,{scroll:{set:function(c){this._scroll=
c?!0:!1;this.__init_finished&&this._gmap.setOptions({draggable:this._scroll})},get:function(){return this._scroll}},tapToZoom:{set:function(c){this._tap_to_zoom=c?!0:!1;this.__init_finished&&this._gmap.setOptions({disableDoubleClickZoom:!this._tap_to_zoom})},get:function(){return this._tap_to_zoom}},maxZoom:{set:function(c){j.util.isNumber(c)&&(this._max_zoom=c,this.__init_finished&&this._gmap.setOptions({maxZoom:this._max_zoom}))},get:function(){return this._max_zoom}},minZoom:{set:function(c){j.util.isNumber(c)&&
(this._min_zoom=c,this.__init_finished&&this._gmap.setOptions({maxZoom:this._min_zoom}))},get:function(){return this._min_zoom}},zoomControl:{set:function(c){this._zoom_control=c?!0:!1;this.__init_finished&&this._gmap.setOptions({zoomControl:this._zoom_control})},get:function(){return this._zoom_control}},zoom:{set:function(c){j.util.isNumber(c)&&this.__init_finished&&(c=Math.floor(c),c!==this._zoom&&(this._zoom=c,this._gmap.setZoom(this._zoom)))},get:function(){return!this._gmap?-1:this._zoom=this._gmap.getZoom()}},
tilt:{set:function(c){j.util.isNumber(c)&&this.__init_finished&&(this._tilt=c,this._gmap.setTilt(c))},get:function(){return!this._gmap?-1:this._tilt=this._gmap.getTilt()}},streetViewControl:{set:function(c){this._street_view_control=c?!0:!1;this.__init_finished&&this._gmap.setOptions({streetViewControl:this._street_view_control})},get:function(){return this._street_view_control}},center:{set:function(c){this.__init_finished&&c&&j.util.isArray(c)&&2===c.length&&j.util.isNumber(c[0])&&j.util.isNumber(c[1])&&
(this._center[0]=c[0],this._center[1]=c[1],c=new google.maps.LatLng(c[0],c[1]),this._gmap.setCenter(c),this._center_mark&&this._center_mark.setPosition(c))},get:function(){if(!this._gmap)return[0,0];var c=this._gmap.getCenter();this._center[0]=c.lat();this._center[1]=c.lng();return this._center.slice()}}});r.Annotation=function(c,f,g,k,n,p){this.map=c;this.id=f;this.info=n;this.type=p?p:"default";this._coordinate=new google.maps.LatLng(g,k);var q=r._anotation_templates_[this.type];q||(q=r._anotation_templates_["default"]);
this.image=null;q.marker.type==r.DEVICE_IMAGE_MARKER?(q=o.deviceConfiguration.os,this.image=q==j.core.DeviceConfiguration.OS_SYMBIAN?new google.maps.MarkerImage("css/kit/symbian_marker.png",new google.maps.Size(48,51),new google.maps.Point(0,0),new google.maps.Point(24,48)):q==j.core.DeviceConfiguration.OS_WP7?new google.maps.MarkerImage("css/kit/wp7_marker.png",new google.maps.Size(15,31),new google.maps.Point(0,0),new google.maps.Point(0,31)):new google.maps.MarkerImage("css/kit/ios_marker.png",
new google.maps.Size(32,41),new google.maps.Point(0,0),new google.maps.Point(8,36))):q.marker.type==r.IMAGE_MARKER&&(this.image=new google.maps.MarkerImage(q.marker.url));if(this.image){this._gmarker=new google.maps.Marker({position:this._coordinate,icon:this.image,map:c._gmap,animation:google.maps.Animation.DROP});var w=this;google.maps.event.addListener(this._gmarker,"click",function(){w.onselect()})}else this._infoWindow=new r.InfoWindow(this.map,f,g,k,p),this._infoWindow.setCoordinate(g,k),this._infoWindow.setInfo(n)};
r.Annotation.prototype={destructor:function(){this._gmarker&&(this._gmarker.setMap(null),delete this._gmarker);this._infoWindow&&free(this._infoWindow);this.image&&delete this.image;delete this._coordinate;this.map=g},onselect:function(){this.showInfoWindow()},showInfoWindow:function(){this.map._infoWindow||(this.map._infoWindow=new r.InfoWindowWithMarker(this.map));this.map._infoWindow.setMarker(this)}};q.defineClassProperties(r.Annotation,{coordinate:{set:function(c){if(q.isArray(c)||2==c.length)delete this._coordinate,
this._coordinate=new google.maps.LatLng(c[0],c[1]),this._gmarker&&this._gmarker.setPosition(this._coordinate)},get:function(){return[this._coordinate.lat(),this._coordinate.lng()]}},info:{set:function(c){this._info=c;this._infoWindow&&this._infoWindow.setInfo(c)},get:function(){return this._info}}});G.GMap=r;k.HORIZONTAL=j.fx.SwipeController.HORIZONTAL;k.VERTICAL=j.fx.SwipeController.VERTICAL;k.prototype={_indicators_visibility:!0,_delegate:null,_orientation:k.HORIZONTAL,_swipe_controller:null,__indicators:null,
__selected_indicator:null,__indicators_list:null,__indicators_timer:0,destructor:function(){q.free(this._swipe_controller);j.ui.View.prototype.destructor.call(this)},initComponent:function(){j.ui.View.prototype.initComponent.call(this);this.__indicators=this.view.querySelector(".vs_ext_ui_carousel >.indicators");j.util.addClassName(this.__indicators,"horizontal");this._swipe_controller=new j.fx.SwipeController(this);this._swipe_controller.delegate=this;this._swipe_controller.isTactile=!0;this._swipe_controller.animationMode=
j.fx.SwipeController.PIXEL;this._swipe_controller.init()},refresh:function(){this._swipe_controller&&this._swipe_controller.refresh&&this._swipe_controller.refresh();j.ui.View.prototype.refresh.call(this)},controllerViewWillChange:function(c,f){this.__indicators_timer&&(clearTimeout(this.__indicators_timer),__indicators_timer=0);var g=f.id,k=this;this.__indicators_timer=setTimeout(function(){k.__selected_indicator&&j.util.removeClassName(k.__selected_indicator,"selected");k.__selected_indicator=k.__indicators_list[g];
j.util.addClassName(k.__selected_indicator,"selected")},500);this._delegate&&this._delegate.carouselViewWillChange&&this._delegate.carouselViewWillChange(f)},add:function(c){j.ui.View.prototype.add.call(this,c,"children");this.push(c)},push:function(c,f){if(!this.isChild(c)||!this._swipe_controller.isStateExit(c.id)){var g,j=this._swipe_controller.push(c,f);g=n.createElement("span");this.__indicators.appendChild(g);this.__indicators_list[j]=g}},remove:function(c){c&&c.id&&(this.__indicators.removeChild(this.__indicators_list[c.id]),
delete this.__indicators_list[c.id],j.ui.View.prototype.remove.call(this,c))},removeAllChildren:function(c){var f=[],k;for(k in this.__indicators_list){var n=j.core.Object._obs[k];this.remove(n);c?q.free(n):f.push(n)}return c?g:f},goToNextView:function(){this._swipe_controller.goToNextView()},goToPreviousView:function(){this._swipe_controller.goToPreviousView()},goToView:function(c){this._swipe_controller.goToViewId(c)},goToViewAt:function(c){this._swipe_controller.goToViewAt(c)}};q.extendClass(k,
j.ui.View);q.defineClassProperties(k,{size:{set:function(c){c&&q.isArray(c)&&2===c.length&&q.isNumber(c[0])&&q.isNumber(c[1])&&(this._size[0]=c[0],this._size[1]=c[1],this.view&&(this._updateSizeAndPos(),this._swipe_controller&&this._swipe_controller.refresh&&this._swipe_controller.refresh()))},get:function(){var c=this.view;c&&c.parentNode&&(this._size[0]=c.offsetWidth,this._size[1]=c.offsetHeight);return this._size.slice()}},delegate:{set:function(c){this._delegate=c}},indicatorsVisibility:{set:function(c){c?
(this._indicators_visibility=!0,q.setElementVisibility(this.__indicators,!0)):(this._indicators_visibility=!1,q.setElementVisibility(this.__indicators,!1))}},isCircular:{set:function(c){this._swipe_controller.isCircular=c},get:function(){return this._swipe_controller.isCircular}},isContinuousSwipe:{set:function(c){this._swipe_controller.isContinuousSwipe=c},get:function(){return this._swipe_controller.isContinuousSwipe}},orientation:{set:function(c){c!==k.HORIZONTAL&&c!==k.VERTICAL||this._orientation===
c||(c===k.HORIZONTAL?(j.util.removeClassName(this.__indicators,"vertical"),j.util.addClassName(this.__indicators,"horizontal")):(j.util.removeClassName(this.__indicators,"horizontal"),j.util.addClassName(this.__indicators,"vertical")),this._orientation=c,this._swipe_controller.orientation=c)},get:function(){return this._orientation}}});G.Carousel=k;var w=function(c){this.parent=D.View;this.parent(c);this.constructor=w;this.__ab_a_items=[]};w.STRETCH_NONE=0;w.STRETCH_FILL=1;w.prototype={_stretch:w.STRETCH_NONE,
__ab_a_items:g,__ab_a_current_index:g,__ab_a_head_height:33,push:function(c,f){c&&(this.add(c),this.setPanelTitle(this._getIndexForChild(c),f))},add:function(c){if(c){var f;c.id||(c.id=j.core.createId());f=this.__ab_a_items.length;f=this._createView(c,"Section "+(f+1),f);this.view.appendChild(f.dt);D.View.prototype.add.call(this,c,"children",f.dd);this.__ab_a_items.push(f);this._updateSizePanel()}},remove:function(c){var f=this._getIndexForChild(c),g;-1!==f&&(D.View.prototype.remove.call(this,c),
g=this.__ab_a_items[f],g.dd.removeChild(c.view),this.view.removeChild(g.dt),j.removePointerListener(g.dt,A.POINTER_START,this),delete g.dt,delete g.dd,delete g,this.__ab_a_items.remove(f),f===this.__ab_a_current_index?(this.__ab_a_current_index=null,this.expandPanel(0)):this._updateSizePanel())},_getIndexForChild:function(c){if(!c)return-1;var f,g;for(f=0;f<this.__ab_a_items.length;f++)if((g=this.__ab_a_items[f])&&g.dd&&g.dd.__child===c)return f;return-1},_createView:function(c,f,g){var k={};k.dt=
n.createElement("dt");q.setElementInnerText(k.dt,f);k.title=f;k.dd=n.createElement("dd");this._stretch===w.STRETCH_FILL&&(c.position=[0,0]);k.dd.appendChild(c.view);f=g?"collapsed":"expanded";k.dd.setAttribute("class",f);k.dt.setAttribute("class",f);k.dd.__child=c;k.child=c;"collapsed"===f?(k.dd.style.width="100%",k.dd.style.height="0px"):(k.dd.style.width="100%",k.dd.style.height=c._size[1]+"px",this.__ab_a_current_index=g);this._stretch===w.STRETCH_FILL&&(c.size=[this._size[0]-2,this._size[1]]);
k.dt.__dd=k.dd;k.dt.__index=g;j.addPointerListener(k.dt,A.POINTER_START,this);return k},expandPanel:function(c){var f,g;if(q.isNumber(c)&&0<=c&&c<this.__ab_a_items.length){if(c!==this.__ab_a_current_index){if(f=this.__ab_a_items[this.__ab_a_current_index])q.removeClassName(f.dt,"expanded"),q.addClassName(f.dt,"collapsed"),q.removeClassName(f.dd,"expanded"),q.addClassName(f.dd,"collapsed"),f.dd.style.height="0px";f=this.__ab_a_items[c];q.removeClassName(f.dt,"collapsed");q.addClassName(f.dt,"expanded");
q.removeClassName(f.dd,"collapsed");q.addClassName(f.dd,"expanded");this.__ab_a_current_index=c;this._updateSizePanel();this.propagate("panel_select",c)}}else if(q.isString(c))for(g=0;g<this.__ab_a_items.length;g++)if(f=this.__ab_a_items[g],f.title===c){this.expandPanel(g);break}},setPanelTitle:function(c,f){var g,j;if(q.isNumber(c)&&0<=c&&c<this.__ab_a_items.length)g=this.__ab_a_items[c],g.title=f,q.setElementInnerText(g.dt,f);else if(q.isString(c))for(j=0;j<this.__ab_a_items.length;j++)if(g=this.__ab_a_items[j],
g.title===c){this.setPanelTitle(j,f);break}},show:function(){j.ui.View.prototype.show.call(this);this._updateSizePanel()},refresh:function(){j.ui.View.prototype.refresh.call(this);this._updateSizePanel()},_updateSize:function(){j.ui.View.prototype._updateSize.call(this);this._updateSizePanel()},_updateSizePanel:function(){var c,f;if(f=this.__ab_a_items[this.__ab_a_current_index])c=this._size[1],this.__ab_a_head_height=f.dt.offsetHeight,c-=this.__ab_a_items.length*this.__ab_a_head_height+2,f.dd.style.height=
c+"px",this._stretch===w.STRETCH_FILL&&(f.child.size=[this._size[0]-2,c])},handleEvent:function(c){var f=c.target,g=this;1!==f.nodeType&&(f=f.parentElement);if(c.type===A.POINTER_START){if(0===c.targetPointerList.length||1<c.nbPointers)return;c.stopPropagation();c.preventDefault();if(q.hasClassName(f,"expanded"))return!1;j.addPointerListener(n,A.POINTER_MOVE,this,!1);j.addPointerListener(n,A.POINTER_END,this,!1);this.__touch_start_x=c.targetPointerList[0].pageX;this.__touch_start_y=c.targetPointerList[0].pageY;
this.__elem=f;this.__elem_to_unselect&&(q.removeClassName(this.__elem_to_unselect,"selected"),this.__elem_to_unselect=null);this.__list_time_out=setTimeout(function(){q.addClassName(g.__elem,"selected");g.__list_time_out=0},0)}else if(c.type===A.POINTER_MOVE){if(0===c.targetPointerList.length)return;c.stopPropagation();c.preventDefault();f=c.targetPointerList[0].pageX;c=c.targetPointerList[0].pageY;c=Math.abs(c-this.__touch_start_y)+Math.abs(f-this.__touch_start_x);this.__elem&&c>2*D.View.MOVE_THRESHOLD&&
(this.__list_time_out?(clearTimeout(this.__list_time_out),this.__list_time_out=0):q.removeClassName(this.__elem,"selected"),this.__elem=null)}else c.type===A.POINTER_END&&(c.stopPropagation(),c.preventDefault(),j.removePointerListener(n,A.POINTER_MOVE,this),j.removePointerListener(n,A.POINTER_END,this),this.__elem&&(this.__list_time_out&&(clearTimeout(this.__list_time_out),q.addClassName(g.__elem,"selected")),this.__elem_to_unselect=this.__elem,this.__list_time_out=setTimeout(function(){q.removeClassName(g.__elem_to_unselect,
"selected");g.__elem_to_unselect=null;g.__list_time_out=0},D.View.UNSELECT_DELAY),q.isNumber(f.__index)&&this.expandPanel(f.__index)),this.__elem=null);return!1}};q.extendClass(w,j.ui.View);q.defineClassProperty(w,"stretch",{set:function(c){q.isNumber(c)&&!(c!==w.STRETCH_FILL&&c!==w.STRETCH_NONE)&&(this._stretch=c,this._stretch===w.STRETCH_FILL?q.addClassName(this.view,"fill"):q.removeClassName(this.view,"fill"),this._updateSizePanel())},get:function(){return this._stretch}});G.Accordion=w;r.prototype.html_template=
"<div class='vs_ext_ui_gmap'></div>";k.prototype.html_template="<div class='vs_ext_ui_carousel'>  <div class='views' x-hag-hole='children'></div>  <div class='indicators'></div></div>";w.prototype.html_template="<dl class='vs_ext_ui_accordion' x-hag-hole='children'></dl>"})(window);
(function(o){function g(c,f,g,j,k){var n=0,o=0,p=0,h=0,r=0,q=0,p=3*f,o=3*(j-f)-p,n=1-p-o,q=3*g,r=3*(k-g)-q,h=1-q-r;return function(c){return((h*c+r)*c+q)*c}(function(c){var f,g,h,j;for(h=c,g=0;8>g;g++){j=((n*h+o)*h+p)*h-c;if(0.005>(0<=j?j:0-j))return h;f=(3*n*h+2*o)*h+p;if(1.0E-6>(0<=f?f:0-f))break;h-=j/f}f=0;g=1;h=c;if(h<f)return f;if(h>g)return g;for(;f<g;){j=((n*h+o)*h+p)*h;if(0.005>(0<=j-c?j-c:0-(j-c)))break;c>j?f=h:g=h;h=0.5*(g-f)+f}return h}(c))}function p(c,f,j,k){return function(n){return g(n,
c,f,j,k)}}function k(c,f){var g=c.getPropertyDescriptor("__trans_anim_"+f);g&&(Object.defineProperty(c,f,g),delete c["__trans_anim_"+f])}var n=o.vs,j=n.util,q=n.fx,o=n.ext.fx,A={},D=new q.Animation(["translateY","0px"]);D.addKeyFrame(0,["0px"]);D.addKeyFrame(20,["0px"]);D.addKeyFrame(40,["-30px"]);D.addKeyFrame(50,["0px"]);D.addKeyFrame(60,["-15px"]);D.addKeyFrame(80,["0px"]);D.duration="1s";var G=new q.Animation(["translateX","0px"]);G.addKeyFrame(0,["0px"]);G.addKeyFrame(10,["-10px"]);G.addKeyFrame(20,
["10px"]);G.addKeyFrame(30,["-10px"]);G.addKeyFrame(40,["10px"]);G.addKeyFrame(50,["-10px"]);G.addKeyFrame(60,["10px"]);G.addKeyFrame(70,["-10px"]);G.addKeyFrame(80,["10px"]);G.addKeyFrame(90,["0px"]);G.duration="1s";var r=new q.Animation(["rotate","0deg"]);r.addKeyFrame(0,["0deg"]);r.addKeyFrame(20,["15deg"]);r.addKeyFrame(40,["-10deg"]);r.addKeyFrame(60,["5deg"]);r.addKeyFrame(80,["-5deg"]);r.duration="1s";r.origin=[50,0];var w=new q.Animation(["scale","1"]);w.addKeyFrame(0,["1"]);w.addKeyFrame(50,
["1.1"]);w.addKeyFrame(80,["0.97"]);w.duration="1s";var c=new q.Animation(["perspective","400px"],["rotateX","0deg"],["opacity","1"]);c.addKeyFrame(0,["400px","90deg","0"]);c.addKeyFrame(40,["400px","-10deg"]);c.addKeyFrame(70,["400px","10deg"]);c.duration="1s";var f=new q.Animation(["perspective","400px"],["rotateX","90deg"],["opacity","0"]);f.addKeyFrame(0,["400px","0deg","1"]);f.duration="1s";var K=new q.Animation(["perspective","400px"],["rotateY","0deg"],["opacity","1"]);K.addKeyFrame(0,["400px",
"90deg","0"]);K.addKeyFrame(40,["400px","-10deg"]);K.addKeyFrame(70,["400px","10deg"]);K.duration="1s";var F=new q.Animation(["perspective","400px"],["rotateY","90deg"],["opacity","0"]);F.addKeyFrame(0,["400px","0deg","1"]);F.duration="1s";var B=new q.Animation(["translateY","0px"],["opacity","1"]);B.addKeyFrame(0,["20px","0"]);B.duration="1s";var L=new q.Animation(["translateY","-20px"],["opacity","0"]);L.addKeyFrame(0,["0px","1"]);L.duration="1s";var V=new q.Animation(["translateY","0px"],["opacity",
"1"]);V.addKeyFrame(0,["-20px","0"]);V.duration="1s";var S=new q.Animation(["translateY","20px"],["opacity","0"]);S.addKeyFrame(0,["0px","1"]);S.duration="1s";var J=new q.Animation(["translateX","0px"],["opacity","1"]);J.addKeyFrame(0,["-20px","0"]);J.duration="1s";q=new q.Animation(["translateX","20px"],["opacity","0"]);q.addKeyFrame(0,["0px","1"]);q.duration="1s";j.extend(A,{Bounce:D,Shake:G,Swing:r,Pulse:w,FlipInX:c,FlipOutX:f,FlipInY:K,FlipOutY:F,FadeInUp:B,FadeOutUp:L,FadeInDown:V,FadeOutDown:S,
FadeInLeft:J,FadeOutLeft:q});var aa=n.core.createClass({parent:n.core.Task,_duration:300,_begin:0,_steps:0,_repeat:1,_pace:null,_tick:0,__time_decl:0,__pause_time:0,__end_time:0,properties:{duration:n.core.Object.PROPERTY_IN,begin:n.core.Object.PROPERTY_IN,steps:{set:function(c){c?n.util.isNumber(c)&&!(2>c)&&(this._steps=parseInt(c,10)):this._step=0}},repeat:n.core.Object.PROPERTY_IN,pace:n.core.Object.PROPERTY_IN,tick:n.core.Object.PROPERTY_OUT},initComponent:function(){this._state=n.core.Task.STOPPED;
this._super()},start:function(c){function f(){0===this._steps?this._start_clock():this._start_steps()}if(this._state!==n.core.Task.STARTED){if(this._state===n.core.Task.STOPPED){var g=this._begin||0;this.__pause_time=this.__time_decl=0;if(0<g){n.scheduleAction(f.bind(this),g);return}if(-g>this._repeat*this._duration){this.__setTick(1);this.propagateChange("tick");this.__clb&&this.__clb(this._tick);this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this);return}this.__time_decl=-g%this._duration;
this.__repeat_dur=this._repeat-Math.floor(-g/this._duration);this.__param=c}f.call(this);this.delegate&&this.delegate.taskDidStart&&this.delegate.taskDidStart(this)}},__setTick:function(c){this._tick=this._pace&&this._pace._timing?this._pace._timing(c):c},_clock:function(){if(this._state===n.core.Task.STARTED){var c=Date.now();c>=this.__end_time?(this.__setTick(1),this.propagateChange("tick"),this.__clb&&this.__clb(this._tick),1<this.__repeat_dur?(this.__repeat_dur--,n.scheduleAction(this._start_clock.bind(this),
n.ON_NEXT_FRAME)):(this._state=n.core.Task.STOPPED,this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this))):(n.scheduleAction(this._clock.bind(this),n.ON_NEXT_FRAME),this.__setTick((c-this.__start_time)/this._duration),this.propagateChange("tick"),this.__clb&&this.__clb(this._tick))}},_start_clock:function(){if(this._state===n.core.Task.PAUSED){var c=Date.now()-this.__pause_time;this.__start_time+=c;this.__end_time+=c;this._state=n.core.Task.STARTED}else this.__start_time=Date.now()-
this.__time_decl,this.__time_decl=0,this.__end_time=this.__start_time+this._duration,n.util.isFunction(this.__param)&&(this.__clb=this.__param),this._state=n.core.Task.STARTED,this.__setTick(0),this.propagateChange("tick"),this.__clb&&this.__clb(this._tick);n.scheduleAction(this._clock.bind(this))},_step:function(){if(this._state===n.core.Task.STARTED){var c=this._steps-this.__steps;this.__steps--;c===this._steps?(this.__setTick(1),this.propagateChange("tick"),this.__clb&&this.__clb(this._tick),1<
this.__repeat_dur?(this.__repeat_dur--,n.scheduleAction(this._start_steps.bind(this),n.ON_NEXT_FRAME)):(this._state=n.core.Task.STOPPED,this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this))):(this.__setTick(c/(this._steps-1)),this.propagateChange("tick"),this.__clb&&this.__clb(this._tick),c=this._duration/this._steps,n.scheduleAction(this._step.bind(this),c))}},_start_steps:function(){if(this._state===n.core.Task.PAUSED)this._state=n.core.Task.STARTED,n.scheduleAction(this._step.bind(this));
else{n.util.isFunction(this.__param)&&(this.__clb=this.__param);this._state=n.core.Task.STARTED;this.__setTick(0);this.propagateChange("tick");this.__clb&&this.__clb(this._tick);var c=this._duration/this._steps;this.__steps=this._steps-1-Math.floor(this.__time_decl/c);this.__time_decl=0;n.scheduleAction(this._step.bind(this),c)}},stop:function(){this._state=n.core.Task.STOPPED;this.__pause_time=0;this.delegate&&this.delegate.taskDidStop&&this.delegate.taskDidStop(this)},pause:function(){!this._state!==
n.core.Task.STARTED&&(this._state=n.core.Task.PAUSED,this.__pause_time=Date.now(),this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this))}}),W=n.core.createClass({_timing:function(c){return c},_tick_in:0,_tick_out:0,properties:{timing:n.core.Object.PROPERTY_IN,tickIn:n.core.Object.PROPERTY_IN,tickOut:n.core.Object.PROPERTY_OUT},initComponent:function(){this._super();this._tick_out=this._timing?this._timing(this._tick_in):this._tick_in},propertiesDidChange:function(){this._tick_out=
this._timing?this._timing(this._tick_in):this._tick_in;this.propagateChange("tickOut")}});W.getEaseInPace=function(){return(new W({timing:p(0.42,0,1,1)})).init()};W.getEaseOutPace=function(){return(new W({timing:p(0,0,0.58,1)})).init()};W.getEaseInOutPace=function(){return(new W({timing:p(0.42,0,0.58,1)})).init()};W.getEaseOutInPace=function(){return(new W({timing:p(0,0.42,1,0.58)})).init()};W.getLinearPace=function(){return(new W).init()};W.getInvertLinearPace=function(){return(new W({timing:function(c){return 1-
c}})).init()};var j=n.core.createClass({_calcule_mode:0,properties:{calculeMode:n.core.Object.PROPERTY_IN,tick:n.core.Object.PROPERTY_IN},initComponent:function(){this._super();this.propertiesDidChange()},compute:function(){return!1},propertiesDidChange:function(){this.compute()&&this.propagateChange("out")}}),D=n.core.createClass({parent:j,_values:null,_out:0,properties:{values:{set:function(c){n.util.isArray(c)&&!(1>c.length)&&(this._values=c.slice())}},out:n.core.Object.PROPERTY_OUT},constructor:function(c){this._super(c);
this._values=[]},compute:function(){if(!n.util.isNumber(this._tick))return!1;var c=this._values.length-1,f=this._tick*c,g=Math.floor(f);0===this._tick?this._out=this._values[0]:1===this._tick?this._out=this._values[c]:(c=this._values[g],this._out=c+(this._values[g+1]-c)*(f-g));return!0}}),G=n.core.createClass({parent:j,_values:null,_out:0,properties:{values:{set:function(c){n.util.isArray(c)&&!(1>c.length)&&(this._values=c.slice())}},out:n.core.Object.PROPERTY_OUT},constructor:function(c){this._super(c);
this._values=[]},compute:function(){if(!n.util.isNumber(this._tick))return!1;var c=this._values.length-1,f=this._tick*c,g=Math.floor(f),f=f-g;0===this._tick?this._out=this._values[0]:1===this._tick?this._out=this._values[c]:(c=this._values[g],g=this._values[g+1],this._out=[c[0]+(g[0]-c[0])*f,c[1]+(g[1]-c[1])*f]);return!0}}),r=n.core.createClass({parent:j,_center:null,_values:null,_out:0,properties:{center:{set:function(c){n.util.isArray(c)&&2===c.length&&(this._center=c.slice())}},values:{set:function(c){n.util.isArray(c)&&
!(1>c.length)&&(this._values=c.slice())}},out:n.core.Object.PROPERTY_OUT},constructor:function(c){this._super(c);this._values=[0,0];this._center=[0,0]},compute:function(){if(!n.util.isNumber(this._tick))return!1;var c;c=this._values;var f=c.length-1,g=this._tick*f,j=Math.floor(g),g=g-j;0===this._tick?c=c[0]:1===this._tick?c=c[f]:(f=c[j],c=f+(c[j+1]-f)*g);g=this._center[0];j=this._center[1];f=Math.sqrt(g*g+j*j);c=2*Math.PI*c/180;g=f*Math.cos(c)+g;g=Math.round(1E3*g)/1E3;c=f*Math.sin(c)+j;c=Math.round(1E3*
c)/1E3;this._out=[g,c];return!0}}),ea={duration:300,begin:0,pace:W.getLinearPace(),steps:0,repeat:1,startClb:null,endClb:null},w=function(c,f,g,j){if(!(!n.util.isArray(f)||!n.util.isArray(g)||f.length!==g.length)){var k=n.util.clone(ea);if(j)for(var o in j)k[o]=j[o];var j=(new aa(k)).init(),p=k.pace,q=k.trajectory;j.__clb=function(h){p.tickIn=h;p.propertiesDidChange();q.tick=p.tickOut;q.propertiesDidChange();for(h=0;h<f.length;h++)c[g[h]]=q[f[h]];c.propertyChange()};return j}};n.util.extend(o,{Animation:A,
Trajectory:j,Vector1D:D,Vector2D:G,Circular2D:r,Pace:W,Chronometer:aa,generateCubicBezierFunction:p,animateTransition:function(c,f,g){var j=n.util.clone(ea);if(g)for(var k in g)j[k]=g[k];var g=(new aa(j)).init(),o=j.pace,p=j.trajectory;g.__clb=function(g){o._tick_i=g;o._tick_out=o._timing?o._timing(g):o._tick_in;p._tick=o._tick_out;p.compute()&&(c[f]=p._out,c.propertyChange())};return g},animateTransitionBis:w,animateTransitionBis:w,attachTransitionAnimation:function(c,f,g){var j=n.util.clone(ea);
if(g)for(var o in g)j[o]=g[o];var p=(new aa(j)).init(),q=j.pace,r=j.trajectory,h="_"+n.util.underscore(f),w;if(!r)throw Error("Error StringTrajectory");p.__clb=function(f){q._tick_i=f;q._tick_out=q._timing?q._timing(f):q._tick_in;r._tick=q._tick_out;r.compute()&&(w.call(c,r._out),c.propertyChange())};var A=c.getPropertyDescriptor(f);if(!A||!A.set)throw Error("Error StringTrajectory");w=A.set;k(c,f);(function(){var g={};A.get&&(g.get=A.get);g.set=function(c){r.values=[this[h],c];p.start()};g.configurable=
A.configurable;g.enumerable=A.enumerable;Object.defineProperty(c,"__trans_anim_"+f,A);Object.defineProperty(c,f,g)})()},removeTransitionAnimation:k})})(window);
