window.vs={};window.vs.util={};window.vs.core={};window.vs.data={};window.vs.ui={};window.vs.fx={};window.vs.av={};window.vs.ext={};window.vs.ext.ui={};window.vs.ext.fx={};window.vs.SUPPORT_3D_TRANSFORM=!1;
(function(){var g=function(a){this.m11=this.m22=this.m33=this.m44=1;this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0;"string"==typeof a&&this.setMatrixValue(a)};g.displayName="FirminCSSMatrix";g.degreesToRadians=function(a){return a*Math.PI/180};g.determinant2x2=function(a,b,d,e){return a*e-b*d};g.determinant3x3=function(a,b,d,e,f,i,h,j,l){var o=g.determinant2x2;return a*o(f,i,j,l)-e*o(b,d,j,l)+h*o(b,d,f,i)};g.determinant4x4=function(a){var b=
g.determinant3x3,d=a.m21,e=a.m31,f=a.m41,i=a.m12,h=a.m22,j=a.m32,l=a.m42,o=a.m13,s=a.m23,w=a.m33,x=a.m43,y=a.m14,t=a.m24,u=a.m34,n=a.m44;return a.m11*b(h,s,t,j,w,u,l,x,n)-d*b(i,o,y,j,w,u,l,x,n)+e*b(i,o,y,h,s,t,l,x,n)-f*b(i,o,y,h,s,t,j,w,u)};[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(a){var b=a[0];Object.defineProperty(g.prototype,a[1],{set:function(a){this[b]=a},get:function(){return this[b]}})});g.prototype.isAffine=function(){return 0===this.m13&&
0===this.m14&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44};g.prototype.multiply=function(a){var b=new g;b.m11=a.m11*this.m11+a.m12*this.m21+a.m13*this.m31+a.m14*this.m41;b.m12=a.m11*this.m12+a.m12*this.m22+a.m13*this.m32+a.m14*this.m42;b.m13=a.m11*this.m13+a.m12*this.m23+a.m13*this.m33+a.m14*this.m43;b.m14=a.m11*this.m14+a.m12*this.m24+a.m13*this.m34+a.m14*this.m44;b.m21=a.m21*this.m11+a.m22*this.m21+a.m23*this.m31+a.m24*this.m41;
b.m22=a.m21*this.m12+a.m22*this.m22+a.m23*this.m32+a.m24*this.m42;b.m23=a.m21*this.m13+a.m22*this.m23+a.m23*this.m33+a.m24*this.m43;b.m24=a.m21*this.m14+a.m22*this.m24+a.m23*this.m34+a.m24*this.m44;b.m31=a.m31*this.m11+a.m32*this.m21+a.m33*this.m31+a.m34*this.m41;b.m32=a.m31*this.m12+a.m32*this.m22+a.m33*this.m32+a.m34*this.m42;b.m33=a.m31*this.m13+a.m32*this.m23+a.m33*this.m33+a.m34*this.m43;b.m34=a.m31*this.m14+a.m32*this.m24+a.m33*this.m34+a.m34*this.m44;b.m41=a.m41*this.m11+a.m42*this.m21+a.m43*
this.m31+a.m44*this.m41;b.m42=a.m41*this.m12+a.m42*this.m22+a.m43*this.m32+a.m44*this.m42;b.m43=a.m41*this.m13+a.m42*this.m23+a.m43*this.m33+a.m44*this.m43;b.m44=a.m41*this.m14+a.m42*this.m24+a.m43*this.m34+a.m44*this.m44;return b};g.prototype.isIdentityOrTranslation=function(){return 1===this.m11&&0===this.m12&&0===this.m13&&0===this.m14&&0===this.m21&&1===this.m22&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m31&&1===this.m33&&0===this.m34&&1===this.m44};g.prototype.adjoint=function(){var a=
new g,b=g.determinant3x3,d=this.m11,e=this.m12,f=this.m13,i=this.m14,h=this.m21,j=this.m22,l=this.m23,o=this.m24,s=this.m31,w=this.m32,x=this.m33,y=this.m34,t=this.m41,u=this.m42,n=this.m43,B=this.m44;a.m11=b(j,w,u,l,x,n,o,y,B);a.m21=-b(h,s,t,l,x,n,o,y,B);a.m31=b(h,s,t,j,w,u,o,y,B);a.m41=-b(h,s,t,j,w,u,l,x,n);a.m12=-b(e,w,u,f,x,n,i,y,B);a.m22=b(d,s,t,f,x,n,i,y,B);a.m32=-b(d,s,t,e,w,u,i,y,B);a.m42=b(d,s,t,e,w,u,f,x,n);a.m13=b(e,j,u,f,l,n,i,o,B);a.m23=-b(d,h,t,f,l,n,i,o,B);a.m33=b(d,h,t,e,j,u,i,o,B);
a.m43=-b(d,h,t,e,j,u,f,l,n);a.m14=-b(e,j,w,f,l,x,i,o,y);a.m24=b(d,h,s,f,l,x,i,o,y);a.m34=-b(d,h,s,e,j,w,i,o,y);a.m44=b(d,h,s,e,j,w,f,l,x);return a};g.prototype.inverse=function(){var a,b,d,e;if(this.isIdentityOrTranslation())return a=new g,0===this.m41&&0===this.m42&&0===this.m43||(a.m41=-this.m41,a.m42=-this.m42,a.m43=-this.m43),a;b=this.adjoint();a=g.determinant4x4(this);if(1.0E-8>Math.abs(a))return null;for(d=1;5>d;d++)for(e=1;5>e;e++)b["m"+d+e]/=a;return b};g.prototype.rotate=function(a,b,d){var e=
g.degreesToRadians;if("number"!=typeof a||isNaN(a))a=0;if(("number"!=typeof b||isNaN(b))&&("number"!=typeof d||isNaN(d)))d=a,b=a=0;if("number"!=typeof b||isNaN(b))b=0;if("number"!=typeof d||isNaN(d))d=0;var a=e(a),b=e(b),d=e(d),e=new g,f=new g,i=new g,h,d=d/2;h=Math.sin(d);d=Math.cos(d);i.m11=i.m22=1-2*h*h;i.m12=i.m21=2*h*d;i.m21*=-1;b/=2;h=Math.sin(b);d=Math.cos(b);f.m11=f.m33=1-2*h*h;f.m13=f.m31=2*h*d;f.m13*=-1;a/=2;h=Math.sin(a);d=Math.cos(a);e.m22=e.m33=1-2*h*h;e.m23=e.m32=2*h*d;e.m32*=-1;return i.multiply(f).multiply(e).multiply(this)};
g.prototype.rotateAxisAngle=function(a,b,d,e){if("number"!=typeof a||isNaN(a))a=0;if("number"!=typeof b||isNaN(b))b=0;if("number"!=typeof d||isNaN(d))d=0;if("number"!=typeof e||isNaN(e))e=0;0===a&&0===b&&0===d&&(d=1);var f=new g,i=Math.sqrt(a*a+b*b+d*d),h,j,l,e=(g.degreesToRadians(e)||0)/2;h=Math.cos(e);j=Math.sin(e);e=j*j;0===i?(b=a=0,d=1):1!==i&&(a/=i,b/=i,d/=i);1===a&&0===b&&0===d?(f.m22=f.m33=1-2*e,f.m23=f.m32=2*h*j,f.m32*=-1):0===a&&1===b&&0===d?(f.m11=f.m33=1-2*e,f.m13=f.m31=2*h*j,f.m13*=-1):
0===a&&0===b&&1===d?(f.m11=f.m22=1-2*e,f.m12=f.m21=2*h*j,f.m21*=-1):(i=j*h,h=a*a,j=b*b,l=d*d,f.m11=1-2*(j+l)*e,f.m12=2*(a*b*e+d*i),f.m13=2*(a*d*e-b*i),f.m21=2*(b*a*e-d*i),f.m22=1-2*(l+h)*e,f.m23=2*(b*d*e+a*i),f.m31=2*(d*a*e+b*i),f.m32=2*(d*b*e-a*i),f.m33=1-2*(h+j)*e);return this.multiply(f)};g.prototype.scale=function(a,b,d){var e=new g;if("number"!=typeof a||isNaN(a))a=1;if("number"!=typeof b||isNaN(b))b=a;if("number"!=typeof d||isNaN(d))d=1;e.m11=a;e.m22=b;e.m33=d;return this.multiply(e)};g.prototype.translate=
function(a,b,d){var e=new g;if("number"!=typeof a||isNaN(a))a=0;if("number"!=typeof b||isNaN(b))b=0;if("number"!=typeof d||isNaN(d))d=0;e.m41=a;e.m42=b;e.m43=d;return this.multiply(e)};g.prototype.setMatrixValue=function(a){var a=a.trim(),b=a.match(/^matrix(3d)?\(\s*(.+)\s*\)$/),d,e,f,g;if(b&&(a=!!b[1],b=b[2].split(/\s*,\s*/),d=b.length,e=Array(d),!(a&&16!==d)&&(a||6===d))){for(f=0;f<d;f++)if(g=b[f],g.match(/^-?\d+(\.\d+)?$/))e[f]=parseFloat(g);else return;for(f=0;f<d;f++)point=a?"m"+(Math.floor(f/
4)+1)+(f%4+1):String.fromCharCode(f+97),this[point]=e[f]}};g.prototype.toString=function(){var a=this,b,d;this.isAffine()?(d="matrix(",b="a,b,c,d,e,f".split(",")):(d="matrix3d(",b="m11,m12,m13,m14,m21,m22,m23,m24,m31,m32,m33,m34,m41,m42,m43,m44".split(","));return d+b.map(function(b){return a[b].toFixed(6)}).join(", ")+")"};this.FirminCSSMatrix=g}).call(this);
(function(){function g(c,m){v.isNumber(c)&&(this.x=c);v.isNumber(m)&&(this.y=m)}function a(c,m){for(var a in m)getter=m.__lookupGetter__(a),setter=m.__lookupSetter__(a),getter&&c.__defineGetter__(a,getter),setter&&c.__defineSetter__(a,setter),!getter&&!setter&&(c[a]=m[a]);return c}function b(c,m){for(var a in m){var b=Object.getOwnPropertyDescriptor(m,a);b&&(b.get||b.set)?v.defineProperty(c,a,b):c[a]=m[a]}return c}function d(c,m,a){if(Object.prototype.hasOwnProperty.call(a,"set")){var b=a.set;j(b)&&
c.__defineSetter__(m,b)}Object.prototype.hasOwnProperty.call(a,"get")&&(b=a.get,j(b)&&c.__defineGetter__(m,b))}function e(c,m,a){function b(c,a){return Object.prototype.hasOwnProperty.call(c,a)}if("object"!=typeof a||null===a)throw new TypeError("bad desc");if("string"!=typeof m||null===m)throw new TypeError("bad property name");var e={};e.enumerable=b(a,"enumerable")?!!a.enumerable:!0;e.configurable=b(a,"configurable")?!!a.configurable:!0;b(a,"value")&&(e.value=a.value);b(a,"writable")&&(e.writable=
!!a.writable);if(b(a,"get")){var d=a.get;j(d)&&(e.get=d)}b(a,"set")&&(a=a.set,j(a)&&(e.set=a));if(("get"in e||"set"in e)&&("value"in e||"writable"in e))throw new TypeError("identity-confused descriptor");Object.defineProperty(c,m,e)}function f(c,a,b){if(b){c.__properties__||(c.__properties__=[]);if(!c.prototype)throw"defineClassProperty on a Class without prototype";v.defineProperty(c.prototype,a,b);!1!=b.enumerable&&c.__properties__.push(a)}}function i(c){var a;switch(c){case null:return null;case void 0:return}switch(G.call(c)){case "[object Object]":case "Object":a=
{};for(var b in c)a[b]=i(c[b]);return a;case "[object Array]":a=[];for(b=0;b<c.length;b++)a[b]=i(c[b]);return a;default:return c}}function h(c){return!!(c&&1===c.nodeType)}function j(c){return"function"===typeof c}function l(c){return"[object String]"===G.call(c)}function o(c){return"undefined"===typeof c}function s(c,a){if(c){var b=c.className;return b&&0<b.length&&(b===a||RegExp("(^|\\s)"+a+"(\\s|$)").test(b))}}function w(){var c=arguments[0],a,b=1;if(c){for(;b<arguments.length;b++)a=arguments[b],
s(c,a)||(c.className=(c.className?c.className+" ":"")+a);return c}}function x(){var c=arguments[0],a,b=1;if(c&&c.className){for(;b<arguments.length;b++)a=arguments[b],c.className=y(c.className.replace(RegExp("(^|\\s+)"+a+"(\\s+|$)")," "));return c}}function y(c){return!l(c)?"":c.replace(/^\s+/,"").replace(/\s+$/,"")}function t(c){if(!l(c))return"";var a=c.split("-"),b=a.length;if(1===b)return a[0];for(var c="-"===c.charAt(0)?a[0].charAt(0).toUpperCase()+a[0].substring(1):a[0],e=1;e<b;e++)c+=a[e].charAt(0).toUpperCase()+
a[e].substring(1);return c}function u(c){if(!h(c))return{};var a=n(c,"display"),b=c.style,e=b.visibility,d=b.position,f=b.display,g=0,i=0;if("none"!==a&&null!==a)return{width:c.offsetWidth,height:c.offsetHeight};b.visibility="hidden";b.position="absolute";b.display="block";g=c.clientWidth;i=c.clientHeight;b.display=f;b.position=d;b.visibility=e;return{width:g,height:i}}function n(c,a){if(h(c)){var a="float"===a?"cssFloat":t(a),b=c.style[a];if(!b||"auto"===b)b=(b=z.defaultView.getComputedStyle(c,null))?
b[a]:null;return"opacity"===a?b?parseFloat(b):1:"auto"===b?null:b}}function B(c,a){if(h(c)){var b=c.style;o(a)&&b.removeProperty("opacity");b.opacity=1===a||""===a?"":1.0E-5>a?0:a}}function S(c,a){if(!c)return null;if(!a&&c.getBoundingClientRect){var b=c.getBoundingClientRect();if(b)return new k.Point(b.left,b.top)}for(var e=b=0,d=c;d;){var f=0,g=0;d!=c&&(f=parseInt(d.currentStyle?d.currentStyle.borderLeftWidth:0,0),g=parseInt(d.currentStyle?d.currentStyle.borderTopWidth:0,0),f=isNaN(f)?0:f,g=isNaN(g)?
0:g);b+=d.offsetLeft-d.scrollLeft+f;e+=d.offsetTop-d.scrollTop+g;d=d.offsetParent}return new k.Point(b,e)}function T(c){var a=S(c);return{width:c.offsetWidth,height:c.offsetWidth,left:a.x,top:a.y}}function Z(c){return c&&c.getBoundingClientRect?c.getBoundingClientRect():null}function W(c){if(c&&c.childNodes)for(var a=c.childNodes.length;a--;)c.removeChild(c.firstChild)}function $(c,a){c&&c.style?c.style.webkitTransform=a:console.warn("setElementTransform, elem null or without style")}function aa(c){if(c)return c.style.webkitTransform}
function p(c,a){c&&c.style?c.style.msTransform=a:console.warn("setElementTransform, elem null or without style")}function L(c){if(c)return c.style.msTransform}function q(c,a){c&&c.style?c.style.MozTransform=a:console.warn("setElementTransform, elem null or without style")}function H(c){if(c)return c.style.MozTransform}function D(c,a){c&&c.style?c.style.transform=a:console.warn("setElementTransform, elem null or without style")}function P(c){if(c)return c.style.transform}function M(c,a){if(!A){var b=
z.createElement("style");b.appendChild(z.createTextNode(""));head=z.getElementsByTagName("head")[0];head.appendChild(b);A=z.styleSheets[z.styleSheets.length-1]}b=0;A.cssRules?b=A.cssRules.length:A.rules&&(b=A.rules.length);A.insertRule?A.insertRule(c+" {"+a+"}",b):A.addRule&&A.addRule(c,a,b)}var k=this.vs=this.vs||{},v=k.util={};g.prototype={x:0,y:0,matrixTransform:function(c){var a=new CSSMatrix,a=a.translate(this.x,this.y,this.z||0),c=c.multiply(a),b=new g(c.m41,c.m42);delete a;delete c;return b}};
k.Point=g;var z="undefined"!=typeof window?window.document:null,E=z?z.createElement("vstestelem"):null,r=E?E.style:null,C=/\/Date\((-?\d+)\)\//;r&&(void 0!==r.webkitTransform?k.SUPPORT_3D_TRANSFORM="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix:void 0!==r.MozTransform?k.SUPPORT_3D_TRANSFORM="MozPerspective"in r:void 0!==r.msTransform&&(k.SUPPORT_3D_TRANSFORM="MSCSSMatrix"in window&&"m11"in new MSCSSMatrix),k.CSS_VENDOR=function(){for(var c=["MozT","msT","OT","webkitT","t"],a,b=c.length;--b;)if(a=
c[b]+"ransform",a in r)return c[b].substr(0,c[b].length-1);return null}());k.SUPPORT_CSS_TRANSFORM=null!==k.CSS_VENDOR?!0:!1;k.CSSMatrix="WebKitCSSMatrix"in window?window.WebKitCSSMatrix:"MSCSSMatrix"in window?window.MSCSSMatrix:FirminCSSMatrix;k.CSSMatrix.prototype.isAffine||(k.CSSMatrix.prototype.isAffine=function(){return!(this.m13||this.m14||this.m23||this.m24||this.m31||this.m32||1!==this.m33&&this.m34||this.m43||1!==this.m44)});k.CSSMatrix.prototype.getMatrixStr=function(){return"matrix("+[~~(1E3*
this.a)/1E3,~~(1E3*this.b)/1E3,~~(1E3*this.c)/1E3,~~(1E3*this.d)/1E3,~~(1E3*this.e)/1E3,~~(1E3*this.f)/1E3].join(", ")+")"};k.CSSMatrix.prototype.getMatrix3dStr=function(){return"matrix3d("+[~~(1E3*this.m11)/1E3,~~(1E3*this.m12)/1E3,~~(1E3*this.m13)/1E3,~~(1E3*this.m14)/1E3,~~(1E3*this.m21)/1E3,~~(1E3*this.m22)/1E3,~~(1E3*this.m23)/1E3,~~(1E3*this.m24)/1E3,~~(1E3*this.m31)/1E3,~~(1E3*this.m32)/1E3,~~(1E3*this.m33)/1E3,~~(1E3*this.m34)/1E3,~~(1E3*this.m41)/1E3,~~(1E3*this.m42)/1E3,~~(1E3*this.m43)/
1E3,~~(1E3*this.m44)/1E3].join(", ")+")"};k.requestAnimationFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(c,1E3/60)}).bind(window);k.cancelRequestAnimationFrame=(window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout).bind(window);
k.setImmediate=(window.setImmediate||function(c,a){return this.setTimeout(c,0,a)}).bind(window);k.clearImmediate=(window.clearImmediate||window.clearTimeout).bind(window);k.util.extend=Object.defineProperty?b:a;var G=Object.prototype.toString,N=Array.isArray||function(a){return"[object Array]"===G.call(a)},J,I;r&&void 0!==r.transform?(J=D,I=P):r&&void 0!==r.webkitTransform?(J=$,I=aa):r&&void 0!==r.msTransform?(J=p,I=L):r&&void 0!==r.MozTransform&&(J=q,I=H);Array.prototype._remove=function(a,b){var e=
this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,e)};var O=function(a,b){for(var e=this.length,b=b?b:0,b=0>b?0:b;b<e;){if(this[b]===a)return b;b++}return-1};Array.prototype.findItem=Array.prototype.indexOf?Array.prototype.indexOf:O;Array.prototype.remove=function(a,b){if("object"===typeof a||v.isString(a))for(var e=0;e<this.length;)this[e]===a?this._remove(e):e++;else this._remove(a,b);return this};Array.prototype.removeAll=function(){for(;0<this.length;)this._remove(0);
return this};Array.prototype.clone=function(){return i(this)};var A=null;v.extend(v,{vsTestElem:E,vsTestStyle:r,extendClass:function(a,b){if(a&&b&&a.prototype&&b.prototype)try{if(Object.__proto__)a.prototype.__proto__=b.prototype;else{var e=a.prototype;a.prototype=new b;v.extend(a.prototype,e)}a.__properties__||(a.__properties__=[]);b.__properties__&&(a.__properties__=a.__properties__.concat(b.__properties__));return a}catch(d){console.error(d.message())}},defineProperty:Object.defineProperty?e:d,
defineClassProperty:f,defineClassProperties:function(a,b){if(!a.prototype)throw"defineClassProperties on a Class without prototype";for(var e=Object.keys(b),d=0,g=e.length,h,i;d<g;d++)h=e[d],i=b[h],f(a,h,i)},clone:i,free:function(a){a&&(a._free&&a._free(),a.destructor&&a.destructor(),delete a)},toJSON:function(a){return JSON.stringify(a)},isElement:h,isArray:N,isFunction:j,isString:l,isNumber:function(a){return"number"===typeof a&&isFinite(a)||a instanceof Number},isObject:function(a){try{return Object.getPrototypeOf(a)===
Object.prototype}catch(b){return!1}},isUndefined:o,hasClassName:s,addClassName:w,removeClassName:x,toggleClassName:function(a,b){return!a?void 0:s(a,b)?x(a,b):w(a,b)},htmlEncode:function(a){return!l(a)?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},strip:y,camelize:t,capitalize:function(a){return!l(a)?"":a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},underscore:function(a){return!l(a)?"":a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,
"$1_$2").replace(/-/g,"_").toLowerCase()},parseJSON:function(a){function b(a){if(l(a)){var c=C.exec(a);c&&c[1]&&(a=new Date(parseInt(c[1])))}else if(N(a))for(c=0;c<a.length;c++)a[c]=b(a[c]);else if(!(a instanceof Date)&&a instanceof Object)for(c in a)a[c]=b(a[c]);return a}if(!a)return null;var e=JSON.parse(a);return!C.test(a)?e:b(e)},addCssRule:M,addCssRules:function(a,b){if(N(b))for(var e=b.length;e--;)M(a,b[e])},getElementHeight:function(a){return!h(a)?void 0:u(a).height},getElementWidth:function(a){return!h(a)?
void 0:u(a).width},getElementDimensions:u,getElementStyle:n,setElementStyle:function(a,b){if(h(a)){var e=a.style,d;for(d in b)"opacity"===d?B(a,b[d]):(b[d]||e.removeProperty(d),e["float"===d||"cssFloat"===d?o(e.styleFloat)?"cssFloat":"styleFloat":d]=b[d])}},setElementOpacity:B,getElementOpacity:function(a){return!h(a)?void 0:n(a,"opacity")},getElementAbsolutePosition:S,setElementPos:function(a,b,e){a&&(a=a.style,a.left=b+"px",a.top=e+"px")},setElementSize:function(a,b,e){a&&(a=a.style,a.width=b+"px",
a.height=e+"px")},setElementVisibility:function(a,b){if(a){var e=a.style;e||v.isString(a.innerHTML)?e.visibility=b?"visible":"hidden":b?a.setAttribute("visibility","visible"):a.setAttribute("visibility","hidden")}},isElementVisible:function(a){if(!a)return!1;var b=a.style;return b||v.isString(a.innerHTML)?"hidden"===b.visibility?!1:!0:a instanceof CharacterData?!0:"hidden"===a.getAttribute("visibility")?!1:!0},removeAllElementChild:W,safeInnerHTML:function(a,b){a&&l(b)&&(window.MSApp&&window.MSApp.execUnsafeLocalFunction?
window.MSApp.execUnsafeLocalFunction(function(){a.innerHTML=b}):a.innerHTML=b)},setElementInnerText:function(a,b){if(a){W(a);v.isString(b)||(b=void 0===b?"":null===b?"":v.isNumber(b)?""+b:b.toString?b.toString():"");var e=b.split("\n"),d=0;if(e.length){a.appendChild(z.createTextNode(e[d]));for(d++;d<e.length;d++)a.appendChild(z.createElement("br")),a.appendChild(z.createTextNode(e[d]))}}},setElementTransform:J,getElementTransform:I,getElementMatrixTransform:function(a){if(a){var a=z.defaultView.getComputedStyle(a,
null),b;a.transform?b=a.transform:a.webkitTransform?b=a.webkitTransform:a.msTransform?b=a.msTransform:a.MozTransform&&(b=a.MozTransform);if(b)return new k.CSSMatrix(b)}},setElementTransformOrigin:function(a,b){a&&a.style?a.style["-"+k.CSS_VENDOR.toLowerCase()+"-transform-origin"]=b:console.warn("setElementTransformOrigin, elem null or without style")},getBoundingClientRect:E&&E.getBoundingClientRect?Z:T,importFile:function(a,b,e,d,f){b||(b=z);var g;if("js"===d||0<=a.search("\\.js"))return d=b.createElement("script"),
d.setAttribute("type","text/javascript"),d.setAttribute("src",a),e&&(d.onload=function(){e.call(this,a)}),b.head||(b.head=b.querySelector("head")),f&&b.head.firstElementChild?b.head.insertBefore(d,b.head.firstElementChild):b.head.appendChild(d),d;if("css"===d||0<=a.search("\\.css")){g=b.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("href",a);g.setAttribute("media","screen");if(v.isFunction(e)){var h=0;(function(){!g.sheet||!g.sheet.cssRules?
100>h++?cssTimeout=setTimeout(arguments.callee,100):console.error("CSS load of "+a+" failed!"):g.sheet.cssRules&&0===g.sheet.cssRules.length?console.error("CSS load of "+a+" failed!"):e.call(z,a)})()}b.head||(b.head=b.querySelector("head"));f&&b.head.firstElementChild?b.head.insertBefore(g,b.head.firstElementChild):b.head.appendChild(g);return g}},setActiveStyleSheet:function(a){var b=0,e=z.getElementsByTagName("link"),d,f,g=k.Application_applications;if(g)for(f in g)b=g[f],b.view&&(b.view.style.display=
"none");for(b=0;b<e.length;b++)d=e[b],d.getAttribute("title")&&(d.getAttribute("title")!==a?d.setAttribute("disabled",!0):d.removeAttribute("disabled"));if(g)for(f in g)b=g[f],b.view&&(b.view.style.display="block")},preloadTemplate:function(a){var b=a+".xhtml",e;if(!k.ui||!k.ui.View||!k.ui.View.__comp_templates[b])e=new XMLHttpRequest,e.open("GET",b,!1),e.send(null),4===e.readyState?200===e.status||0===e.status?(data=e.responseText,k.ui&&k.ui.View&&(k.ui.View.__comp_templates[b]=data)):console.error("Template file for component '"+
a+"' unfound"):console.error("Pb when load the component '"+a+"' template")},__date_reg_exp:C,_findItem:O,_defineProperty_api1:d,_defineProperty_api2:e,_extend_api1:a,_extend_api2:b})}).call(this);
(function(){function g(a){var d=a.vsGetCTM();b.setElementTransform(a,d.toString());delete d}var a=this.vs,b=a.util,d=a&&a.CSSMatrix;b.extend((window&&window.HTMLElement).prototype,{_vs_node_tx:0,_vs_node_ty:0,_vs_node_s:1,_vs_node_r:0,vsTranslate:function(a,b){this._vs_node_tx===a&&this._vs_node_ty===b||(this._vs_node_tx=a,this._vs_node_ty=b,g(this))},vsRotate:function(a){this._vs_node_r!==a&&(this._vs_node_r=a,g(this))},vsScale:function(a){this._vs_node_s!==a&&(this._vs_node_s=a,g(this))},vsSetNewTransformOrigin:function(a){if(a){this._vs_node_origin||
(this._vs_node_origin=[0,0]);var b=new d,b=b.translate(this._vs_node_origin[0],this._vs_node_origin[1],0),b=b.translate(this._vs_node_tx,this._vs_node_ty,0),b=b.rotate(0,0,this._vs_node_r),b=b.scale(this._vs_node_s,this._vs_node_s,1),b=b.translate(-this._vs_node_origin[0],-this._vs_node_origin[1],0);this._vs_transform||(this._vs_transform=b);this._vs_transform=b.multiply(this._vs_transform);delete b;this._vs_node_ty=this._vs_node_tx=0;this._vs_node_s=1;this._vs_node_r=0;this._vs_node_origin=[a.x,
a.y]}},vsClearTransformStack:function(){this._vs_transform&&delete this._vs_transform;this._vs_transform=void 0},vsGetCTM:function(){var a=new d;this._vs_node_origin||(this._vs_node_origin=[0,0]);a=a.translate(this._vs_node_origin[0],this._vs_node_origin[1],0);a=a.translate(this._vs_node_tx,this._vs_node_ty,0);a=a.rotate(0,0,this._vs_node_r);a=a.scale(this._vs_node_s,this._vs_node_s,1);a=a.translate(-this._vs_node_origin[0],-this._vs_node_origin[1],0);return this._vs_transform?a.multiply(this._vs_transform):
a},vsGetParentCTM:function(){function a(b){return!b?new d:a(b.parentNode).multiply(b.vsGetCTM())}return a(this.parentNode)}})}).call(this);
(function(){function g(a,b,c,d,e){this.configureWithEvent(a,d,e);this.type=b;this.identifier=c}function a(a,b){var c=[];a.nbPointers=a.touches.length;for(var d=0;d<a.nbPointers;d++){var e=a.touches[d],e=new g(e,E.TOUCH,e.identifier,e.clientX,e.clientY);c.push(e)}a.pointerList=c;c=[];for(d=0;d<a.targetTouches.length;d++)e=a.targetTouches[d],b&&r[e.identifier]!=b||(e=new g(e,E.TOUCH,e.identifier,e.clientX,e.clientY),c.push(e));a.targetPointerList=c;c=[];for(d=0;d<a.changedTouches.length;d++)e=a.changedTouches[d],
e=new g(e,E.TOUCH,e.identifier,a.clientX,a.clientY),c.push(e);a.changedPointerList=c}function b(a,b){var c=[];c.push(new g(a,E.MOUSE,z,a.layerX,a.layerY));b?(a.nbPointers=0,a.pointerList=[],a.targetPointerList=c,a.changedPointerList=c):(a.nbPointers=1,a.pointerList=c,a.targetPointerList=c,a.changedPointerList=[])}function d(a,b){var c=[],e=[],d=a.pointerId,f=C[d];if(b){f?(G[d]=f,delete C[d]):(f=G[d],f||(f=new g(a,a.pointerType,d,a.layerX,a.layerY),G[d]=f));for(d in G)e.push(G[d]);G={}}else f?f.configureWithEvent(a):
(f=new g(a,a.pointerType,d,a.layerX,a.layerY),C[d]=f);for(d in C)c.push(C[d]);a.nbPointers=c.length;a.pointerList=c;c=[];for(d in C)f=C[d],c.push(f);a.targetPointerList=c;a.changedPointerList=e}function e(a,c){b(a);c(a)}function f(a,c){b(a);c(a)}function i(a,c){b(a,!0);c(a)}function h(b,c,d){for(var e,f=b.targetTouches.length,g=0;g<f;g++)e=b.targetTouches[g],r[e.identifier]=d;a(b);c(b)}function j(b,c,d){a(b,d);c(b)}function l(b,c){for(var d,e=b.targetTouches.length,f=0;f<e;f++)d=b.changedTouches[f],
r[d.identifier]=void 0;a(b);c(b)}function o(b,c){a(b);c(b,c)}function s(a,b,c){r[a.pointerId]=c;d(a,!1,c);b(a);0===N&&(document.addEventListener(H?"pointerup":"MSPointerUp",J),document.addEventListener(H?"pointercancel":"MSPointerCancel",J));N++}function w(a,b,c){d(a,!1,c);b(a)}function x(a,b){d(a,!0);b(a)}function y(a,b){d(a,!0);b(a)}function t(a,b,c){if(!b||!c||!c.__event_listeners)return-1;for(var d=0;d<c.__event_listeners.length;d++){var e=c.__event_listeners[d];if(e.target===a&&e.type===b&&e.listener===
c)return d}return-1}function u(a,b,d,e){var f=e.listener?e.listener.id:void 0;switch(b){case P:return e.handler=function(a){I(a,d,f)},!0;case M:return e.handler=function(a){O(a,d,f)},!0;case k:return e.handler=function(a){A(a,d)},!0;case v:return e.handler=function(a){c(a,d)},!0}return!1}function n(a,b,c){var d=document.createEvent("Event");d.initEvent(a,!0,!0);for(var e in c)d[e]=c[e];b.dispatchEvent(d)}function B(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)}function S(a){var b=
a.length,c=0,d=0,e=0;if(0===b)return{X:0,y:0};for(;c<b;c++)var f=a[c],d=d+f.pageX,e=e+f.pageY;return{x:d/b-ba.x,y:e/b-ba.y}}function T(a){a.centroid={x:a.pageX,y:a.pageY};a.translation=[a.centroid.x-Q.x,a.centroid.y-Q.y];a.pointerList=[new g(a,E.TOUCH,z)];a.targetPointerList=a.pointerList;a.nbPointers=1}function Z(a,b,c,d){var e=d.listener?d.listener.id:void 0;switch(b){case m:return d.gesture_handler=function(a){I(a,ga,e)},a.addEventListener(p.POINTER_START,d.gesture_handler),d.handler=c,!0;case F:case K:return d.handler=
c,!0}return!1}function W(a,b,c,d){switch(b){case m:return d.handler=function(a){Q={x:a.pageX,y:a.pageY};T(a);c(a)},!0;case F:return d.handler=function(a){T(a);c(a)},!0;case K:return d.handler=function(a){T(a);c(a)},!0}return!1}function $(a,b,c){var d=c.listener?c.listener.id:void 0;switch(b){case m:return a.removeEventListener(p.POINTER_START,c.gesture_handler,d),!0;case F:case K:return!0}return!1}function aa(a,b){switch(b){case m:case F:case K:return!0}return!1}var p=this.vs=this.vs||{},L=p.util=
p.util||{},q=!1,H=window.navigator.pointerEnabled,D=window.navigator.msPointerEnabled;if("undefined"!=typeof document&&"createTouch"in document)q=!0;else if(H||D)q=!0;else if("undefined"!=typeof document&&window.navigator&&window.navigator.userAgent&&(-1!==window.navigator.userAgent.indexOf("Android")||-1!==window.navigator.userAgent.indexOf("BlackBerry")))q=!0;var P,M,k,v;q?(P=H?"pointerdown":D?"MSPointerDown":"touchstart",M=H?"pointermove":D?"MSPointerMove":"touchmove",k=H?"pointerup":D?"MSPointerUp":
"touchend",v=H?"pointercancel":D?"MSPointerCancel":"touchcancel"):(P="mousedown",M="mousemove",k="mouseup",v=null);var z=31337;g.prototype.configureWithEvent=function(a,b,c){this.pageX=a.pageX;this.pageY=a.pageY;"undefiend"!==typeof b&&(this.clientX=b);"undefiend"!==typeof c&&(this.clientY=c);this.target=a.target;this.currentTarget=a.currentTarget};var E={TOUCH:2,PEN:3,MOUSE:4},r=[],C={},G={},N=0,J=function(a){if(a=C[a.pointerId])G[a.identifier]=a,delete C[a.identifier];N--;0===N&&(document.removeEventListener(H?
"pointerup":"MSPointerUp",J),document.removeEventListener(H?"pointercancel":"MSPointerCancel",J))},I,O,A,c;q?D?(I=s,O=w,A=x,c=y):(I=h,O=j,A=l,c=o):(I=e,O=f,c=A=i);p.createCustomEvent=n;p.removePointerListener=function(a,b,c,d){if(b)if(c){var e=t(a,b,c);if(-1===e)console.error("removePointerListener no binding");else{var f=c.__event_listeners[e];c.__event_listeners.remove(e);a:{switch(b){case P:case M:case k:case v:c=!0;break a}c=!1}c||ha(a,b,f);a.removeEventListener(b,f.handler,d);delete f}}else console.error("removePointerListener no listener")};
p.addPointerListener=function(a,b,c,d){if(b)if(c){var e=c;L.isFunction(c)||(e=c.handleEvent,L.isFunction(e)&&(e=e.bind(c)));if(-1!==t(a,b,c))console.error("addPointerListener binding already existing");else{c.__event_listeners||(c.__event_listeners=[]);var f={target:a,type:b,listener:c};c.__event_listeners.push(f);!u(a,b,e,f)&&!ia(a,b,e,f)&&(f.handler=e);a.addEventListener(b,f.handler,d)}}else console.error("addPointerListener no listener")};p.PointerTypes=E;p.POINTER_START=P;p.POINTER_MOVE=M;p.POINTER_END=
k;p.POINTER_CANCEL=v;var m,F,K,q={},D=["gesturestart","gesturechange","gestureend"];document.createElement("div");for(var V=0;V<D.length;V++){var R=D[V],R="on"+R,Y=R in L.vsTestElem;Y||(L.vsTestElem.setAttribute(R,"return;"),Y="function"==typeof L.vsTestElem[R]);q[D[V]]=Y}q.gestures=q.gesturestart&&q.gesturechange&&q.gestureend;"MSGestureEvent"in window&&(q.msGestures=!0);q.gestures=!1;q.msGestures=!1;var da=0,ea=0,Q,ba,U=function(a,b){var c=b?void 0:S(a.targetPointerList);return{scale:b?void 0:B(a.targetPointerList[0],
a.targetPointerList[1])/da,rotation:b?void 0:180*Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI-ea,translation:b?void 0:[c.x-Q.x,c.y-Q.y],nbPointers:a.nbPointers,pointerList:a.pointerList,targetPointerList:a.targetPointerList,centroid:c,changedPointerList:a.changedPointerList}},ca=!1,ga=function(a){2>a.targetPointerList.length||(ca?n(F,a.target,U(a)):(da=B(a.targetPointerList[0],a.targetPointerList[1]),ea=180*
Math.atan2(a.targetPointerList[1].pageY-a.targetPointerList[0].pageY,a.targetPointerList[1].pageX-a.targetPointerList[0].pageX)/Math.PI,ba=L.getElementAbsolutePosition(a.targetPointerList[0].target,!0),Q=S(a.targetPointerList),document.addEventListener(p.POINTER_MOVE,fa),document.addEventListener(p.POINTER_END,X),document.addEventListener(p.POINTER_CANCEL,X),n(m,a.target,U(a)),ca=!0))},fa=function(a){O(a,function(a){n(F,a.target,U(a))})},X=function(a){A(a,function(a){2>a.targetPointerList.length?
(document.removeEventListener(p.POINTER_MOVE,fa),document.removeEventListener(p.POINTER_END,X),document.removeEventListener(p.POINTER_CANCEL,X),ca=!1,n(K,a.target,U(a,!0))):n(F,a.target,U(a))})};q.msGestures?(m="MSGestureStart",F="MSGestureChange",K="MSGestureEnd"):q.gestures?(m="gesturestart",F="gesturechange",K="gestureend"):(m="_gesture_start",F="_gesture_change",K="_gesture_end");var ia=q.gestures||q.msGestures?W:Z,ha=q.gestures||q.msGestures?aa:$;p.GESTURE_START=m;p.GESTURE_CHANGE=F;p.GESTURE_END=
K}).call(this);
/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(o,u){function v(){return"vs_id_"+aa++}function M(a,b){f.isNumber(a)&&(this.x=a);f.isNumber(b)&&(this.y=b)}function q(a){this.constructor=j.Object;this._id=f.isString(a)?a:a&&a.id?a.id:v();this.__df__=[];a&&(this.__config__=a)}function F(a){return a&&f.isFunction(a.clone)?a.clone():f.clone(a)}function ba(a,b,c){var d=b.__lookupGetter__(a),e=b.__lookupSetter__(a),g=c.__lookupSetter__(a),i="_"+f.underscore(a);if(e||d)g?c[a]=F(b[i]):c[i]=F(b[i])}function ca(a,b,c){var d=b.getPropertyDescriptor(a),
e=c.getPropertyDescriptor(a),g="_"+f.underscore(a);if(d&&e&&(d.get||d.set))e.set?c[a]=F(b[g]):c[g]=F(b[g])}function da(a,b){var c={},d,e,g,i;for(i in b){d=b[i];if(f.isNumber(d))e={},g="_"+f.underscore(i),d&k.core.Object.PROPERTY_IN&&(e.set=function(a,b){return function(c){this[b]=c;this.propertyChange(a)}}(i,g)),d&k.core.Object.PROPERTY_OUT&&(e.get=function(a){return function(){return this[a]}}(g));else if(f.isString(d)){g=ea.exec(d);if(!g||3!=g.length)throw"Unvalid property path: "+d;e={};e.set=
function(a,b){return function(c){for(var d=this,g=a.split(".");d&&g.length;)d=d[g.shift()];d&&(d[b]=c);this.propertyChange(b)}}(g[1],g[2]);e.get=function(a,b){return function(){for(var c=this,d=a.split(".");c&&d.length;)c=c[d.shift()];if(c)return c[b]}}(g[1],g[2])}else"object"==typeof d&&(e=d);c[i]=e}f.defineClassProperties(a,c)}function S(a,b){this.obj=a;f.isFunction(b)?this.func_ptr=b:f.isString(b)&&(this.func_name=b)}function N(a,b){this.func_ptr=a;this.args=b}function T(a,b){a&&b&&(G={handler_list:b,
event:a},O())}function U(a,b){function c(){h--;0>=h&&(b?H=!1:I=!1)}function d(a){if(a)try{if(f.isFunction(a.func_ptr))a.func_ptr.call(a.obj,x);else if(f.isString(a.func_name)&&f.isFunction(a.obj[a.func_name]))a.obj[a.func_name](x);else f.isFunction(a.obj.notify)&&a.obj.notify(x)}catch(b){b.stack?console.error(b.stack):console.error(b)}c()}var e=a.handler_list,g=e.length,i,h=g,x=a.event;b?H=!0:I=!0;g||c();for(i=0;i<g;i++)b?d(e[i]):function(a){k.setImmediate(function(){d(a)})}(e[i])}function V(){if(z.length){var a=
z.shift();if(a)try{J=!0,a.run()}catch(b){b.stack?console.error(b.stack):console.error(b)}k.util.free(a);J=!1;z.length&&P()}}function fa(){function a(a){a.data===b&&V()}var b="vs.core.scheduler"+Math.random();o.addEventListener&&o.addEventListener("message",a,!1);return function(){o.postMessage(b,"*")}}function O(){function a(){W=!1;O()}G&&(U(G,!0),G=null);0===K.length&&0===z.length||W||(I||H?k.setImmediate(a):(!J&&z.length&&P(),K.length&&!I&&!H&&U(K.shift())))}function r(a){this.parent=q;this.parent(a);
this.constructor=j.EventSource;this.__bindings__={};this.__node_binds__={}}function A(a){this.parent=r;this.parent(a);this.constructor=k.core.Model;this.__links__=[]}function Q(a){this.dataflow_node=[];this.dataflow_edges={};this.is_propagating=!1;this.__shouldnt_propagate__=0;this._list_node=[];this._edges_from={};a&&a.__df__&&a.__df__.push(this)}function m(a){this.parent=j.Object;this.parent(a);this.constructor=m}function B(a){this.parent=j.Task;this.parent();this.constructor=B;this._tasksAndParams=
[];this._state=m.STOPPED;arguments.length&&this.setTasks(arguments)}function C(a){this.parent=j.Task;this.parent();this.constructor=C;this._tasksAndParams=[];this._state=m.STOPPED;arguments.length&&this.setTasks(arguments)}function D(a){this.parent=j.Task;this.parent();this.constructor=D;this._state=m.STOPPED;this.time=a}function h(){this.deviceId=this.orientation=null;this.browserDetect();this.orientationDetect();this.screenDetect()}function y(a){this.parent=k.core.Model;this.parent(a);this.constructor=
k.core.Array}function s(a){this.parent=j.EventSource;this.parent(a);this.constructor=k.core.DataStorage;this.__models__={}}function R(a){this.parent=s;this.parent(a);this.constructor=k.core.LocalStorage}function t(a){this.parent=s;this.parent(a);this.constructor=t;this._xhrs={};this._headers={}}var X=o.document,k=o.vs,f=k.util,j=k.core,aa=0;j.createId=v;j.createUniqueId=function(){return"vs_id_"+(new Date).getTime()+""+Math.floor(1E6*Math.random())};M.prototype={x:0,y:0,matrixTransform:function(a){var b=
new k.CSSMatrix,b=b.translate(this.x,this.y,this.z||0),a=a.multiply(b),c=new M(a.m41,a.m42);delete b;delete a;return c}};k.Point=M;q.prototype={_id:"",__i__:!1,__input_property__did__change__:!1,__config__:null,__df__:null,init:function(a){if(this.__i__)return this;this._id||(this._id=v());if(q._obs[this._id]){console.warn("Impossible to create an object with an already used id.");var b=this._id;this._id=v();console.warn('The id "%s" is replaced by "%s".',b,this._id)}q._obs[this._id]=this;a||this.initComponent();
this.__i__=!0;!a&&this.vsdInit&&this.vsdInit();this.__config__&&(this.configure(this.__config__),this.__config__=null);this.componentDidInitialize&&this.componentDidInitialize();this.initSkin&&(console.warn("Your application shouldn't use initSkin anymore.\n        You should rename by componentDidInitialize."),q.prototype.initSkin=function(){},this.initSkin(),q.prototype.initSkin=u);return this},initComponent:function(){},componentDidInitialize:function(){},createId:function(){console.warn("this.createId is deprecated, Use the static method vs.core.createId instead");
return v()},configure:function(a){if("object"===typeof a){var b,c,d,e=!1;this.__df__&&this.__df__.forEach(function(a){a.pausePropagation()});if(a instanceof A)if((b=this.getPropertyDescriptor("model"))&&b.set)this.model=a,e=!0;else{b=a.getModelProperties();for(d=0;d<b.length;d++)c=b[d],"id"!==c&&(this[c]=a[c],e=!0)}else if(a)for(c in a)"id"===c||"node"===c||"node_ref"===c||"view"===c||(this[c]=a[c],e=!0);this.__df__&&this.__df__.length?this.__df__.forEach(function(a){a.restartPropagation();e&&a.propagate(this)}):
e&&this.propertiesDidChange&&this.propertiesDidChange()}},propertiesDidChange:function(){return!1},toJSON:function(){return this._toJSON()},parseJSON:function(a){try{this.parseData(a&&f.parseJSON(a)||{})}catch(b){b.stack&&console.log(b.stack),console.error("vs.core.Object.parseJSON failed. "+b.toString())}},parseData:function(a){var b,c;for(b in a)c=a[b],this["_"+f.underscore(b)]=c},_toJSON:function(){var a,b,c={},d=this.getModelProperties();if(!d)return c;for(var e=0;e<d.length;e++)a=d[e],b=this["_"+
f.underscore(a)],"undefined"!=typeof b&&(b=b instanceof Date?'"/Date('+b.getTime()+')/"':b&&b.toJSON?b.toJSON():b,c[a]=b);return c},destructor:function(){this.__i__=!1},isDeleted:function(){return!this.__i__},propertyChange:function(){this.__input_property__did__change__=!0;self=this;this.__df__&&this.__df__.forEach(function(a){a.propagate(self)})},outPropertyChange:function(){this.__input_property__did__change__=!0;self=this;this.__df__&&this.__df__.forEach(function(a){a.propagate(self,!1,!0)})},
propagateChange:function(a){this.propertyChange(a)},link:function(a){if(a instanceof k.core.Model)this.__model&&this.__model.unlinkTo(this),this.__model=a,this.__model.linkTo(this),this.configure(this.__model);else throw"vs.core.Object.link; parameter is not a vs.core.Model";},unlink:function(){if(this.__model){if(this.__model){this.__model.unlinkTo(this);var a=this.__model.getModelProperties();for(l=a.length,config={};l--;)config[a[l]]=null;this.configure(config)}this.__model=u}},clone:function(a,
b){function c(a,b,c){var d=b.__lookupGetter__(a),g=b.__lookupSetter__(a),e=c.__lookupGetter__(a),i=c.__lookupSetter__(a);d&&!e&&c.__defineGetter__(a,d);g&&!i&&c.__defineSetter__(a,g);!g&&!d?(d=b[a],c[a]=f.isArray(d)?d.slice():b[a]):(c.__properties__||(c.__properties__=[]),c.__properties__.push(a))}function d(a,b,c){var d=b.getOwnPropertyDescriptor(a),g=c.getOwnPropertyDescriptor(a);d&&(d.get||d.set)?g||(f.defineProperty(c,a,d),c.__properties__||(c.__properties__=[]),c.__properties__.push(a)):(d=b[a],
c[a]=f.isArray(d)?d.slice():b[a])}var e,g;b||(b={});if(b[this._id])return b[this._id];a||(a={});a.id||(a.id=v());if(f.isFunction(this.constructor))e=new this.constructor(a);else return console.warn("impossible to clone this object."),null;b[this._id]=e;var i=Object.defineProperty?d:c;for(g in this)"parent"===g||"_id"===g||"constructor"===g||0===g.indexOf("__")||this.getPropertyDescriptor(g)&&(f.isFunction(this[g])&&!f.isFunction(e[g])?e[g]=this[g]:!e.isProperty(g)&&this.isProperty(g)&&i(g,this,e));
e.__i__=!1;e.init();this._clone(e,b);this._clone_properties_value(e,b);this.__model&&(b&&b[this.__model._id]?e.link(b[this.__model._id]):e.link(this.__model));return e},_clone_properties_value:function(a){for(var b in this)"id"!=b&&this.isProperty(b)&&Y(b,this,a)},_clone:function(){},getModelProperties:function(){var a=[];this.__properties__&&(a=a.concat(this.__properties__));this.constructor.__properties__&&(a=a.concat(this.constructor.__properties__));return a},isProperty:function(a){return this.__properties__&&
-1!==this.__properties__.indexOf(a)||-1!==this.constructor.__properties__.indexOf(a)?!0:!1},defineProperty:function(a,b){f.defineProperty(this,a,b);this.__properties__||(this.__properties__=[]);-1===this.__properties__.indexOf(a)&&this.__properties__.push(a)},getOwnPropertyDescriptor:function(a){return Object.getOwnPropertyDescriptor(this,a)},getPropertyDescriptor:function(a){function b(a,c){if(!a)return null;var g=Object.getPrototypeOf(a);if(!g)return null;var i=Object.getOwnPropertyDescriptor(g,
c);return i?i:b(g,c)}var c=Object.getOwnPropertyDescriptor(this,a);return c?c:b(this,a)},_super:function(){var a=this._super.caller._super_func_;a&&a.apply(this,arguments)}};f.defineClassProperty(q,"id",{get:function(){return this._id}});var Y=Object.defineProperty?ca:ba;q._obs={};q.__propertyCloneValue=Y;j.Object=q;var ga=Object.prototype.constructor;k.core.Object.PROPERTY_IN=1;k.core.Object.PROPERTY_OUT=2;k.core.Object.PROPERTY_IN_OUT=3;var ea=/(\w+[.\w+]*)#(\w+)/;j.createClass=function(a){var b=
null,c={},d=k.core.Object,e={},b=function(){this.parent=b.__spec.parent;b.__spec&&b.__spec._constructor?b.__spec._constructor.apply(this,arguments):b.__spec&&b.__spec.parent&&this.parent.apply(this,arguments);this.constructor=b};a&&a.parent&&(d=a.parent,delete a.parent);a&&a.properties&&(e=a.properties,delete a.properties);c.parent=d;a&&a.constructor&&a.constructor!==ga&&(c._constructor=a.constructor,c._constructor._super_func_=d);b.__spec=c;a&&(b.prototype=a,a.constructor=b);d.prototype&&f.extendClass(b,
d);if(a)for(key in a)if(a.hasOwnProperty(key)){var c=a[key],g=d.prototype[key];f.isFunction(c)&&f.isFunction(g)&&(c._super_func_=g)}da(b,e);return b};S.prototype.destructor=function(){delete this.obj;delete this.func_ptr;delete this.func_name};N.prototype.run=function(){this.func_ptr.apply(u)};N.prototype.destructor=function(){delete this.args;delete this.func_ptr};var K=[],G=null,z=[],I=!1,H=!1,J=!1,W=!1,P=o.postMessage?fa():function(){setTimeout(V,0)};k.setImmediate=(o.setImmediate||function(a){z.push(new N(a));
J||P()}).bind(o);f.extend(k,{scheduleAction:function(a,b){f.isFunction(a)&&(b&&f.isNumber(b)?setTimeout(a,b):"__on_next_frame__"===b?k.requestAnimationFrame(a):k.setImmediate(a))},ON_NEXT_FRAME:"__on_next_frame__"});j.FORCE_EVENT_PROPAGATION_DELAY=!1;j.POINTER_START=k.POINTER_START;j.POINTER_MOVE=k.POINTER_MOVE;j.POINTER_END=k.POINTER_END;j.POINTER_CANCEL=k.POINTER_CANCEL;j.GESTURE_START=k.GESTURE_START;j.GESTURE_CHANGE=k.GESTURE_CHANGE;j.GESTURE_END=k.GESTURE_END;var L=function(a,b,c){this.srcTarget=
this.src=a;this.type=b;this.data=c};L.prototype={src:null,srcTarget:null,type:"",data:null,destructor:function(){delete this.src;delete this.srcTarget;delete this.type;delete this.data}};j.Event=L;j.EVENT_SUPPORT_GESTURE=!1;r.prototype={__bindings__:null,__node_binds__:null,destructor:function(){var a,b,c;for(a in this.__bindings__){if(b=this.__bindings__[a]){c=void 0;for(var d=b.length;d--;)c=b[d],f.free(c)}delete this.__bindings__[a]}delete this.__bindings__;for(a in this.__node_binds__)if(c=this.__node_binds__[a],
"undefined"===typeof c)console.warn("vs.core.Object.destructor, no bind <"+a+" exists.");else for(b=0;b<c.length;b++)data=c[b],data.n.removeEventListener(event,data.h);delete this.__node_binds__;q.prototype.destructor.call(this)},_clone:function(a,b){q.prototype._clone.call(this,a,b);a.__bindings__={};a.__node_binds__={}},bind:function(a,b,c){if(a&&b)return b=new S(b,c),c=this.__bindings__[a],c||(c=[],this.__bindings__[a]=c),c.push(b),b},unbind:function(a,b,c){if(a=this.__bindings__[a])for(var d,
e=0;e<a.length;)d=a[e],d.obj===b?f.isString(c)||f.isFunction(c)?d.func_name===c||d.func_ptr===c?(a.remove(e),f.free(d)):e++:(a.remove(e),f.free(d)):e++},propagate:function(a,b,c){var d=this.__bindings__[a];!d||0===d.length?this.__parent&&(c||(c=this),this.__parent.propagate(a,b,c)):(a=new L(this,a,b),c&&(a.srcTarget=c),a&&d&&(K.push({handler_list:d,event:a}),O()))},notify:function(a){this.propagate(a.type,a.data)},nodeBind:function(a,b,c,d){if(a&&f.isString(b)){var e=this,g=null,i=null,h,x;if("undefined"===
typeof c)c="notify";else if(f.isString(c)){if(!f.isFunction(this[c])){console.warn("vs.core.Object.nodeBind, unknown function named: "+c);return}}else if(f.isFunction(c))g=c,c=g.name;else{console.error("vs.core.Object.nodeBind, invalid func parameter");return}i=!d||d===n.ANY_MASK?function(a){try{a.src=a.currentTarget,a.data=a,g||(g=e[c]),g.call(e,a)}catch(b){b.stack&&console.log(b.stack),console.error(b)}}:function(a){try{if(d||!a.altKey&&!a.ctrlKey&&!a.shiftKey&&!a.metaKey)d===n.ALT&&!a.altKey||
d===n.CTRL&&!a.ctrlKey||d===n.SHIFT&&!a.shiftKey||d===n.META&&!a.metaKey||(a.src=a.currentTarget,a.data=a,g||(g=e[c]),g.call(e,a))}catch(b){b.stack&&console.log(b.stack),console.error(b)}};x=b+c;this.__node_binds__?(h=this.__node_binds__[x],"undefined"===typeof h&&(h=[],this.__node_binds__[x]=h),h.push({n:a,h:i}),k.addPointerListener(a,b,i,!1)):console.error("nodeBind impossible")}},nodeUnbind:function(a,b,c){if(a&&f.isString(b)){var d,e;if("undefined"===typeof c)c="notify";else if(f.isString(c)){if(!f.isFunction(this[c])){console.warn("vs.core.Object.nodeUnbind, unknown function named: "+
c);return}}else if(f.isFunction(c))c=c.name;else{console.error("vs.core.Object.nodeBind, invalid func parameter");return}d=this.__node_binds__[b+c];if("undefined"===typeof d)console.warn("vs.core.Object.nodeUnbind, no bind <"+b+","+c+"> exists.");else{for(c=0;c<d.length;)e=d[c],e.n===a?(k.removePointerListener(a,b,e.h,!1),d.remove(c)):c++;a._object_=u}}}};f.extendClass(r,q);j.EventSource=r;A.prototype={__links__:null,__should_propagate_changes__:!0,_sync_service_:null,bindChange:function(a,b,c){b&&
this.bind(a?"change:"+a:"change",b,c)},unbindChange:function(a,b,c){this.unbind(a?"change:"+a:"change",b,c)},stopPropagation:function(){this.__should_propagate_changes__=!1},hasToPropagateChange:function(){return this.__should_propagate_changes__},change:function(a,b,c){this.__should_propagate_changes__=!0;a=a?"change:"+a:"change";b=new L(this,a,b);try{if(!c)for(var d=this.__links__.length;d--;)this.__links__[d].configure(this);"change"!==a&&T(b,this.__bindings__[a]);T(b,this.__bindings__.change)}catch(e){e.stack&&
console.error(e.stack),console.error(e)}},propagate:function(a,b,c){this.__should_propagate_changes__=!0;r.prototype.propagate.call(this,a,b,c)},linkTo:function(a){a instanceof k.core.Object&&-1===this.__links__.indexOf(a)&&this.__links__.push(a)},unlinkTo:function(a){a instanceof k.core.Object&&this.__links__.remove(a)},propertyChange:function(a){k._default_df_&&k._default_df_.propagate(this,a);if(this.__should_propagate_changes__){var b=this.__links__.length;if(a)for(;b--;)this.__links__[b][a]=
this[a];else for(;b--;)this.__links__[b].configure(this);this.change(null,null,!0)}},parseData:function(a){for(var b in a)this._parse_property(b,a[b])},_parse_property:function(a,b){var c=this.getModelProperties(),d="_"+f.underscore(a),e;b&&b.data||f.isArray(b)?(e=(new y({id:b.id})).init(),e.parseData(b)):e=b;-1===c.indexOf(a)&&(c={},d="_"+f.underscore(a),c.set=function(a,b){return function(c){this[b]=c;this.propertyChange(a)}}(a,d),c.get=function(a){return function(){return this[a]}}(d),this.defineProperty(a,
c));this[d]=e}};f.extendClass(A,r);j.Model=A;var n=new r("__KEYBOARD__");n._handler_set_down=!1;n._handler_set_up=!1;n.managePrevent=function(a,b){var c=this.__bindings__[a],d,e;if(c)for(d=0;d<c.length;d++)if(e=c[d],e.prevent){b.preventDefault();break}};n.KEY_UP=1E3;n.ESC=27;n.ENTER=13;n.SPACE=32;n.BACKSPACE=8;n.SHIFT=16;n.CTRL=17;n.ALT=18;n.NUMLOCK=144;n.LEFT_ARROW=37;n.UP_ARROW=38;n.RIGHT_ARROW=39;n.DOWN_ARROW=40;n.L=76;n.S=83;n.Z=90;n.META=2E3;n.ANY_MASK=3E3;n.UNDO=256;n.REDO=257;n.SAVE=258;j.KEYBOARD=
n;j.KEYBOARD.bind=function(a,b,c,d){var b=r.prototype.bind.call(this,a,b,c),e=this;d&&(b.prevent=!0);a>n.KEY_UP?this._handler_set_up||(X.documentElement.addEventListener("keyup",function(a){e.managePrevent(a.keyCode,a);e.propagate(a.keyCode+n.KEY_UP,a)},!1),this._handler_set_up=!0):this._handler_set_down||(X.documentElement.addEventListener("keydown",function(a){(a.ctrlKey||a.metaKey)&&!a.shiftKey&&a.keyCode===n.Z?(e.propagate(n.UNDO),a.preventDefault()):(a.ctrlKey||a.metaKey)&&a.shiftKey&&a.keyCode===
n.Z?(e.propagate(n.REDO),a.preventDefault()):(a.ctrlKey||a.metaKey)&&!a.shiftKey&&a.keyCode===n.S?(e.propagate(n.SAVE),a.preventDefault()):(a.ctrlKey||a.metaKey)&&!a.shiftKey&&a.keyCode?(e.managePrevent(n.META+a.keyCode,a),e.propagate(n.META+a.keyCode)):(e.managePrevent(a.keyCode,a),e.propagate(a.keyCode,a))},!1),this._handler_set_down=!0);return b};var E=function(a){this.parent=j.EventSource;this.parent(v());this.constructor=E;this.owner=a;this._list_of_state={};this._list_input=[];this._list_output=
[];this._current_state=this._initial_state="";this._inputs={};this._output_action={}};E.prototype={destructor:function(){delete this._list_of_state;this.owner=u;delete this._list_of_state;delete this._list_input;delete this._list_output;delete this._inputs;delete this._output_action;j.EventSource.prototype.destructor.call(this)},_clone:function(a,b){r.prototype._clone.call(this,a,b);a.owner=a.__config__.owner;a._current_state="";a._inputs={};a._output_action={}},initWithData:function(a,b,c,d){if(a&&
b&&c&&d){for(var e=0;e<a.length;e++)this.addState(a[e]);for(e=0;e<b.length;e++)this.addInput(b[e]);for(e=0;e<c.length;e++)this.addOutput(c[e]);for(e=0;e<d.length;e++)this.addTransition(d[e].from,d[e].to,d[e].on,d[e].output)}},initWithMatrix:function(a){for(var b=1;b<a[0].length;b++)this.addState(a[0][b]);for(b=1;b<a.length;b++)for(var c=a[b][0],d=1;d<a[0].length;d++){var e=a[0][d],g=a[b][d];g&&(g=g.split("/"),g[0]&&this.addInput(g[0]),g[1]&&this.addOutput(g[1]),this.addTransition(c,e,g[0],g[1]))}},
addInput:function(a){a&&!this.existInput(a)&&this._list_input.push(a)},getInputs:function(){return this._list_input.slice()},existInput:function(a){return!a?void 0:-1<this._list_input.findItem(a)},addOutput:function(a){a&&!this.existOutput(a)&&this._list_output.push(a)},getOutputs:function(){return this._list_output.slice()},existOutput:function(a){return!a?void 0:-1<this._list_output.findItem(a)},addState:function(a){if(!a||this.existState(a))return!1;this._list_of_state[a]={transitionEvents:{}};
return!0},removeState:function(a){if(!a||!this.existState(a))return!1;delete this._list_of_state[a];return!0},renameState:function(a,b){if(!a||!this.existState(a)||!b||this.existState(b))return!1;this._list_of_state[b]=this._list_of_state[a];delete this._list_of_state[a];this._initial_state===a&&(this._initial_state=b);for(var c in this._list_of_state){var d=this._list_of_state[c];if(null!==d)for(var e in d.transitionEvents){var g=d.transitionEvents[e];g.to===a&&(g.to=b)}}return!0},getListState:function(){var a=
[],b;for(b in this._list_of_state)a.push(b);return a},existState:function(a){return!a?!1:this._list_of_state[a]?!0:!1},addTransition:function(a,b,c,d){a&&this.existState(a)&&b&&this.existState(b)&&c&&this.existInput(c)&&(this._list_of_state[a].transitionEvents[c]={on:c,to:b,output:d})},removeTransitionFrom:function(a,b){if(a&&this.existState(a)&&b&&this.existInput(b)){var c=this._list_of_state[a];c.transitionEvents[b]&&delete c.transitionEvents[b]}},removeTransitionTo:function(a,b){if(a&&this.existState(a)&&
b&&this.existInput(b))for(var c in this._list_of_state){var d=this._list_of_state[c],e=d.transitionEvents[b];e&&e.to===a&&delete d.transitionEvents[b]}},getTransionsToState:function(a){if(this.existState(a)){var b=[],c;for(c in this._list_of_state){var d=this._list_of_state[c];if(null!==d)for(var e in d.transitionEvents){var g=d.transitionEvents[e];g.to===a&&(g=f.clone(g),g.from=c,b.push(g))}}return b}},getTransionsFromState:function(a){if(this.existState(a)){var b=[],c=this._list_of_state[a];if(null===
c)return null;for(var d in c.transitionEvents){var e=f.clone(c.transitionEvents[d]);e.from=a;b.push(e)}return b}},switchStates:function(a,b){if(!(a===b||!this.existState(a)||!this.existState(b))){for(var c=this.getTransionsToState(a),d=this.getTransionsFromState(a),e=this.getTransionsToState(b),g=this.getTransionsFromState(b),i=0;i<c.length;){var f=c[i];f.from===b?c.remove(f):i++}for(i=0;i<d.length;)f=d[i],f.to===b?d.remove(f):i++;for(i=0;i<c.length;i++)f=c[i],this.removeTransitionFrom(f.from,f.on);
for(i=0;i<d.length;i++)f=d[i],this.removeTransitionFrom(f.from,f.on);for(i=0;i<e.length;i++)f=e[i],this.removeTransitionFrom(f.from,f.on);for(i=0;i<g.length;i++)f=g[i],this.removeTransitionFrom(f.from,f.on);for(i=0;i<c.length;i++){var f=c[i],h=f.from===b?a:f.from;this.addTransition(h,b,f.on,f.output)}for(i=0;i<d.length;i++)f=d[i],c=f.from===b?a:f.to,this.addTransition(b,c,f.on,f.output);for(i=0;i<e.length;i++)f=e[i],h=f.from===a?b:f.from,this.addTransition(h,a,f.on,f.output);for(i=0;i<g.length;i++)f=
g[i],c=f.to===a?b:f.to,this.addTransition(a,c,f.on,f.output);this._initial_state===a?this._initial_state=b:this._initial_state===b&&(this._initial_state=a)}},setInput:function(a,b,c){if(a&&b&&c){if(b.bind)b.bind(c,this);else if(b.addEventListener)this.nodeBind(b,c);else return;var d=this._inputs[b];d||(d=[],this._inputs[b]=d);d.push([c,a,b])}},setOutput:function(a,b){a&&b&&(this._output_action[a]=b)},activate:function(){if(!this._initial_state||!this._list_of_state[this._initial_state])return!1;this.goTo(this._initial_state);
return!0},goTo:function(a,b,c){if(!this.existState(a))return!1;this._current_state=a;if(b&&this._output_action[b])if(a=this._output_action[b],f.isFunction(a))a.call(this.owner,c);else if(f.isString(a))this.owner[this._output_action[b]](c);return!0},clear:function(){this._list_of_state={};delete this._list_input;delete this._list_output;this._list_input=[];this._list_output=[];this._initial_state="";for(var a in this._inputs)for(var b=this._inputs[a],c=0;c<b.length;c++){var d=b[c][2],e=b[c][0];d.bind?
d.unbind(e,this):d.addEventListener&&this.nodeUnbind(d,e)}this._current_state=""},notify:function(a){var b=this._inputs[a.src];if(b)for(var c=0;c<b.length;c++)a.type===b[c][0]&&this._list_of_state[this._current_state]&&this.fsmNotify(b[c][1],a.data)},getAccessibleStateOn:function(a){if(this._list_of_state[this._current_state])return a=this._list_of_state[this._current_state].transitionEvents[a],!a?void 0:this._list_of_state[a.to]},fsmNotify:function(a,b,c){if(this._list_of_state[this._current_state]){var d=
this._list_of_state[this._current_state].transitionEvents[a];if(!d)return!1;this.goTo(d.to,d.output,{on:a,data:b},c);return!0}}};f.extendClass(E,r);f.defineClassProperty(E,"initialState",{set:function(a){a?this.existState(a)&&(this._initial_state=a):this._initial_state=u},get:function(){return this._initial_state}});j.Fsm=E;var Z=1;Q.prototype={propagate_values:function(a){var b=this.dataflow_edges[a._id],c,d=0,e=0,g=0,i,h,j,k=0,m=0,n=null,p;if(b){k=b.length;for(d=0;d<k;d++)if(c=b[d])if(j=c[0])if((c=
c[2])&&c.length)for(e=0;e<c.length;e++){i=c[e];n=i[3];p=[];h=i[1];m=h.length;for(g=0;g<m;g++)p.push(h[g].call(a));n&&(p=n.apply(o,p),f.isArray(p)||(p=[p]));h=i[2];m=h.length;if(p.length!==m){console.error("Dataflow, invalid parameters");return}for(g=0;g<m;g++)i=h[g],i.call(j,p[g]);j.__input_property__did__change__=!0}}},propagate:function(a,b,c){if(!this.is_propagating&&!this.__shouldnt_propagate__){this.is_propagating=!0;var b=0,d=this.dataflow_node,e=d.length;if(a){for(;b<e&&d[b]!==a;)b++;if(b<
e-1){if(!c&&a.propertiesDidChange&&a.propertiesDidChange()){this.is_propagating=!1;return}this.propagate_values(a);b++}else b=0}for(;b<e;b++)if((a=d[b])&&a.__input_property__did__change__)a.__input_property__did__change__=!1,(!a.propertiesDidChange||!a.propertiesDidChange())&&this.propagate_values(a);this.is_propagating=!1}},connect:function(a,b,c,d,e){var g,i,h,j,k=Z++;g=f.isString(a)?a:a._id;if(a=q._obs[g]){-1===a.__df__.indexOf(this)&&a.__df__.push(this);a=f.isString(c)?c:c._id;if(f.isString(b))b=
[b];else if(!f.isArray(b)){console.warn("DataFlow.connect, error");return}if(f.isString(d))d=[d];else if(!f.isArray(d)){console.warn("DataFlow.connect, error");return}if(!e&&d.length!==b.length)console.warn("DataFlow.connect, error");else{-1===this._list_node.indexOf(g)&&this._list_node.push(g);-1===this._list_node.indexOf(a)&&this._list_node.push(a);c=this._edges_from[g];c||(c=[],this._edges_from[g]=c);i=c.length;for(g=0;g<i;g++)if(h=c[g],h[0]===a){j=h[2];break}j||(j=[],c.push([a,1,j]));e=[k,b.slice(),
d.slice(),e];j.push(e);return k}}},unconnect:function(){1===arguments.length?this._unconnect_by_id(arguments[0]):this._unconnect_by_params.apply(this,arguments)},_unconnect_by_params:function(a,b,c,d){function e(a,b){b.forEach(function(b){b=a.indexOf(b);-1!==b&&a.remove(b)})}var g,i;Z++;var h,a=f.isString(a)?a:a._id;if(g=this._edges_from[a])if((a=q._obs[a])&&-1!==a.__df__.indexOf(this)){c=f.isString(c)?c:c._id;if(f.isString(b))b=[b];else if(!f.isArray(b)){console.warn("DataFlow.unconnect, error");
return}if(f.isString(d))d=[d];else if(!f.isArray(d)){console.warn("DataFlow.unconnect, error");return}for(a=0;a<g.length;a++)if(i=g[a],i[0]===c){i=i[2];for(var j=0;j<i.length;)h=i[j],properties_out_s=h[1],properties_in_s=h[2],e(properties_out_s,b),e(properties_in_s,d),0===properties_out_s.length||0===d.length?i.remove(j):j++;0===i.length?g.remove(a):a++}else a++}},_unconnect_by_id:function(a){for(var b in this._edges_from){var c=this._edges_from[b];if(c)for(var d=c.length,e=0;e<d;e++)for(var g=c[e][2],
f=0,h=g.length,j;f<h;f++)if((j=g[f])&&j[0]===a){g.remove(f);return}}},_sort:function(){var a=this._list_node.length,b=[],c,d,e,g;for(c=0;c<a;c++)b[c]=0;for(e in this._edges_from){g=this._edges_from[e];for(d=0;d<g.length;d++)a=this._list_node.findItem(g[d][0]),b[a]++}a=this._list_node.slice();c=[];for(e=0;0!==a.length;){d=this._array_min(b);g=b[d];b.remove(d);var f=a[d];a.remove(d);0<g&&e++;c.push(f);if(g=this._edges_from[f])for(d=0;d<g.length;d++)f=a.findItem(g[d][0]),-1!==f&&b[f]--}this._list_node=
c;this.is_sorted=!0;this.is_cyclic=0<e;0<e&&(b=Object.keys(this._edges_from).length,console.warn("WARNING: Cycles detected during topological sort.%d dependencies out of %d have been violated.\n",e,b));return!this.is_cyclic},_array_min:function(a){var b=a.length;if(0===b)return-1;if(1===b)return 0;for(var b=0,c=a[b],d=1;d<a.length;d++)a[d]<c&&(c=a[d],b=d);return b},build:function(){this._sort();this._data_optimize(this._edges_from,this._list_node)},pausePropagation:function(){this.__shouldnt_propagate__++},
restartPropagation:function(){this.__shouldnt_propagate__--;0>this.__shouldnt_propagate__&&(this.__shouldnt_propagate__=0)},_data_optimize:function(a,b){if(b&&a){var c=[],d,e,g,h,j,k,m,n,o,p,r,t,s,u,v,w;for(d=0;d<b.length;d++)p=b[d],(t=q._obs[p])&&c.push(t);this.dataflow_node=c;c={};for(p in a)if(t=q._obs[p])if(h=a[p],j=[],c[p]=j,h)for(d=0;d<h.length;d++)if(k=h[d],e=[3],j.push(e),r=k[0],r=q._obs[r]){e[0]=r;e[1]=k[1];k=k[2];m=[];e[2]=m;for(e=0;e<k.length;e++){n=k[e];o=[4];m.push(o);o[0]=n[0];f.isFunction(n[3])&&
(o[3]=n[3]);v=n[1];w=[];for(g=0;g<v.length;g++)s=v[g],(u=t.getPropertyDescriptor(s))&&(u.get?w.push(u.get):w.push(function(a){return function(){return this[a]}}("_"+f.underscore(s))));o[1]=w;v=n[2];w=[];for(g=0;g<v.length;g++)s=v[g],(u=r.getPropertyDescriptor(s))&&(u.set?w.push(u.set):w.push(function(a){return function(b){this[a]=b}}("_"+f.underscore(s))));o[2]=w}}this.dataflow_edges=c}}};j.DataFlow=Q;k._default_df_=new Q;m.STARTED=1;m.STOPPED=0;m.PAUSED=2;m.prototype={delegate:null,_state:m.STOPPED,
destructor:function(){this.stop();this._super()},start:function(){},stop:function(){},pause:function(){}};f.extendClass(m,j.Object);f.defineClassProperty(m,"state",{get:function(){return this._state}});k.par=function(){if(0!==arguments.length){var a=new B;a.setTasks(arguments);return a}};B.prototype={_tasksAndParams:null,_tasksWillEnded:null,setTasks:function(a){if(this._state!==m.STOPPED)return!1;var b,c,d,e;this._tasksAndParams=[];for(b=0;b<a.length;b++)if(c=a[b])d=e=null,f.isArray(c)?1===c.length?
d=c[0]:2===c.length&&(d=c[0],e=c[1]):(d=c,e=null),d?!d.start||!d.stop||!d.pause?console.warn("Invalid task: "+d.toString()):this._tasksAndParams.push([d,e]):console.warn("Undefined task")},start:function(a){if(this._state===m.STARTED)return!1;this._tasksWillEnded=this._tasksAndParams.length;this._state=m.STARTED;var b,c;for(c=0;c<this._tasksAndParams.length;c++)b=this._tasksAndParams[c],b[0].delegate=this,b[0].start(b[1]?b[1]:a);return!0},stop:function(){if(this._state===m.STOPPED)return!1;this._state=
m.STOPPED;var a,b;for(b=0;b<this._tasksAndParams.length;b++)a=this._tasksAndParams[b],a[0].stop();return!0},pause:function(){if(this._state===m.PAUSED)return!1;this._state=m.PAUSED;var a,b;for(b=0;b<this._tasksAndParams.length;b++)a=this._tasksAndParams[b],a[0].pause();return!0},taskDidStop:function(){this._state=m.STOPPED;this._tasksWillEnded--;0===this._tasksWillEnded&&this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this)},taskDidPause:function(){this._state=m.STOPPED;this._tasksWillEnded--;
0===this._tasksWillEnded&&this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this)},taskDidEnd:function(){this._state=m.STOPPED;this._tasksWillEnded--;0===this._tasksWillEnded&&this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this)}};f.extendClass(B,m);k.seq=function(){if(0!==arguments.length){var a=new C;a.setTasks(arguments);return a}};C.prototype={_tasksAndParams:null,_nextTaskToStart:0,_startParam:null,setTasks:function(a){if(this._state!==m.STOPPED)return!1;var b,
c,d,e;this._tasksAndParams=[];for(b=0;b<a.length;b++)if(c=a[b])d=e=null,f.isArray(c)?1===c.length?d=c[0]:2===c.length&&(d=c[0],e=c[1]):(d=c,e=null),d?!d.start||!d.stop||!d.pause?console.warn("Invalid task: "+d.toString()):this._tasksAndParams.push([d,e]):console.warn("Undefined task")},start:function(a){if(this._state===m.STARTED)return!1;this._state=m.STARTED;this._startParam=a;var b=this._tasksAndParams[this._nextTaskToStart];if(!b)return!1;this._nextTaskToStart++;b[0].delegate=this;b[0].start(b[1]?
b[1]:a);return!0},stop:function(){if(this._state===m.STOPPED)return!1;this._state=m.STOPPED;var a=this._tasksAndParams[this._nextTaskToStart-1];if(!a)return!1;this._nextTaskToStart=0;a[0].stop();return!0},pause:function(){if(this._state===m.PAUSED)return!1;this._state=m.PAUSED;var a=this._tasksAndParams[this._nextTaskToStart-1];if(!a)return!1;a[0].pause();return!0},taskDidStop:function(){this._state=m.STOPPED;0===this._nextTaskToStart&&(this._nextTaskToStart-=1);this.delegate&&this.delegate.taskDidStop&&
this.delegate.taskDidStop(this)},taskDidPause:function(){this._state=m.PAUSED;this._nextTaskToStart-=1;this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this)},taskDidEnd:function(){this._state=m.STOPPED;this._nextTaskToStart<this._tasksAndParams.length?this.start(this._startParam):(this._nextTaskToStart=0,this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this))}};f.extendClass(C,m);D.prototype={_time:0,_left_time:0,_timer:null,_start_time:0,start:function(){var a=
this,b=this._time;if(this._state===m.STARTED)return!1;this._state===m.PAUSED?b=this._left_time:this._left_time=b;this._state=m.STARTED;this._start_time=(new Date).getTime();a=this;this._timer=setTimeout(function(){a._state=m.STOPPED;a.delegate&&a.delegate.taskDidEnd&&a.delegate.taskDidEnd(a)},b);return!0},stop:function(){if(this._state===m.STOPPED)return!1;this._state=m.STOPPED;clearTimeout(this._timer);this._timer=null;this._left_time=this._time;this.delegate&&this.delegate.taskDidStop&&this.delegate.taskDidStop(this);
return!0},pause:function(){if(this._state===m.PAUSED)return!1;this._state=m.PAUSED;this._left_time=this._left_time-(new Date).getTime()+this._start_time;this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this);return!0}};f.extendClass(D,m);f.defineClassProperty(D,"state",{set:function(a){f.isNumber(a)&&(this._time=a)}});f.extend(j,{Task:m,Task_PAR:B,Task_SEQ:C,TaskWait:D});h.OS_UNKNOWN=0;h.OS_WINDOWS=1;h.OS_MACOS=2;h.OS_LINUX=4;h.OS_IOS=5;h.OS_WP7=6;h.OS_BLACK_BERRY=7;h.OS_SYMBIAN=
8;h.OS_ANDROID=9;h.OS_MEEGO=10;h.SR_UNKNOWN=0;h.SR_QVGA=1;h.SR_WQVGA=2;h.SR_HVGA=4;h.SR_VGA=5;h.SR_WVGA=6;h.SR_FWVGA=7;h.SR_SVGA=8;h.SR_DVGA=9;h.SR_WDVGA=10;h.SR_XGA=11;h.SR_N_HD=12;h.SR_Q_HD=13;h.SR_WXGA=14;h.SR_QXGA=15;h.BROWSER_UNKNOWN=0;h.BROWSER_CHROME=1;h.BROWSER_SAFARI=2;h.BROWSER_OPERA=3;h.BROWSER_FIREFOX=4;h.BROWSER_MSIE=5;h.SS_UNKNOWN=0;h.SS_4_INCH=1;h.SS_7_INCH=2;h.SS_10_INCH=3;h.prototype={os:h.OS_UNKNOWN,browser:h.BROWSER_UNKNOWN,screenResolution:h.SR_UNKNOWN,screenRatio:0,screenSize:h.SS_UNKNOWN,
virtualScreenSize:null,browserDetect:function(){function a(a){for(var c=a.length;c--;){var d=a[c].string,e=a[c].prop;if(d){if(d.match(a[c].subString))return a[c].identity}else if(e)return a[c].identity}}this.browser=a(h._data_browser)||h.BROWSER_UNKNOWN;this.os=a(h._data_OS)||h.OS_UNKNOWN},orientationDetect:function(){this.orientation=o.orientation?o.orientation:o.outerWidth>o.outerHeight?90:0},_getScreenSize:function(){return o.device&&o.device.width?[o.device.width,o.device.height]:this.os>=h.OS_IOS&&
this.os<=h.OS_MEEGO?[o.screen.width,o.screen.height]:[o.outerWidth,o.outerHeight]},screenDetect:function(){var a=o.devicePixelRatio,b;a||(a=1);b=this._getScreenSize();if(b[0]>b[1]){var c=b[0];b[0]=b[1];b[1]=c}this.screenResolution=h._getScreenResolutionCode(b[0],b[1]);this.screenRatio=b[1]/b[0];a*=160;o.device&&o.device.dpi&&(a=device.dpi);b=Math.sqrt(b[0]*b[0]+b[1]*b[1])/a;6>b?this.screenSize=h.SS_4_INCH:9>b?this.screenSize=h.SS_7_INCH:11>b&&(this.screenSize=h.SS_10_INCH)},getOrientation:function(){return this.orientation},
setDeviceId:function(a){f.isString(a)&&(this.screenResolution=h.SR_UNKNOWN,this.deviceId=a,-1!=a.indexOf("wp7")?(this.os=h.OS_WP7,this.screenResolution=h.SR_WVGA,this.screenRatio=1.6,this.screenSize=h.SS_4_INCH):-1!=a.indexOf("iphone")?(this.os=h.OS_IOS,this.screenResolution=h.SR_HVGA,-1!=a.indexOf("_3_2")?this.screenRatio=1.5:-1!=a.indexOf("_16_9")&&(this.screenRatio=16/9),this.screenSize=h.SS_4_INCH):-1!=a.indexOf("ipad")?(this.os=h.OS_IOS,this.screenResolution=h.SR_XGA,this.screenRatio=4/3,this.screenSize=
h.SS_10_INCH):-1!=a.indexOf("android")&&(this.os=h.OS_ANDROID,-1!=a.indexOf("_3_2")?this.screenRatio=1.5:-1!=a.indexOf("_16_10")?this.screenRatio=1.6:-1!=a.indexOf("_16_9")&&(this.screenRatio=16/9),-1!=a.indexOf("android_4")?this.screenSize=h.SS_4_INCH:-1!=a.indexOf("android_7")?this.screenSize=h.SS_7_INCH:-1!=a.indexOf("android_10")&&(this.screenSize=h.SS_10_INCH)))},generateDeviceId:function(a){if(a&&this.deviceId)return this.deviceId;this.orientationDetect();this.screenDetect();a="";switch(this.os){case h.OS_IOS:screenSize=
this._getScreenSize();if(320===screenSize[0]||480===screenSize[0])a+="iphone";if(640===screenSize[0]||960===screenSize[0])a+="iphone";if(768===screenSize[0]||1024===screenSize[0])a+="ipad";if(1536===screenSize[0]||2048===screenSize[0])a+="ipad";break;case h.OS_ANDROID:a+="android";break;case h.OS_WP7:a+="wp7";break;case h.OS_BLACK_BERRY:a+="blackberry"}switch(this.screenSize){case h.SS_4_INCH:a+="_3";break;case h.SS_7_INCH:a+="_7";break;case h.SS_10_INCH:a+="_10"}0.1>Math.abs(o.deviceConfiguration.screenRatio-
1.5)?a+="_3_2":0.1>Math.abs(o.deviceConfiguration.screenRatio-4/3)?a+="_4_3":0.1>Math.abs(o.deviceConfiguration.screenRatio-1.6)?a+="_16_10":0.1>Math.abs(o.deviceConfiguration.screenRatio-16/9)&&(a+="_16_9");switch(this.orientation){case 90:case -90:a+="_l";break;case 0:case 180:a+="_p"}return a},setOrientation:function(a,b){var c,d;d=o.innerWidth;var e=o.innerHeight,g;d>e&&(g=e,e=d,d=g);for(c in j.Object._obs)if(d=j.Object._obs[c])d._orientationWillChange&&d._orientationWillChange(a),d.orientationWillChange&&
d.orientationWillChange(a);this.targetId&&(c=this.targetId.replace("_p",""),c=c.replace("_l",""),this.targetId=0===a||180===a?c+"_p":c+"_l",this.setActiveStyleSheet(this.targetId));this.orientation=a;this.virtualScreenSize&&cordova&&cordova.exec&&cordova.exec(null,null,"VSD_Application","setAppSize",[{width:this.virtualScreenSize[0],height:this.virtualScreenSize[1]}]);c=function(){var b,c;for(b in j.Object._obs)(c=j.Object._obs[b])&&c.orientationDidChange&&c.orientationDidChange(a)};b?c.call(this):
setTimeout(c,100)},setActiveStyleSheet:function(a){f.setActiveStyleSheet(a)},registerTargetId:function(){}};h._getScreenResolutionCode=function(a,b){a*=o.devicePixelRatio;b*=o.devicePixelRatio;if(240===a&&320===b)return h.SR_QVGA;if(240===a&&400===b)return h.SR_WQVGA;if(320===a&&480===b)return h.SR_HVGA;if(480===a&&640===b)return h.SR_VGA;if(480===a&&800===b)return h.SR_WVGA;if(320===a&&854===b)return h.SR_WFVGA;if(600===a&&800===b)return h.SR_SVGA;if(640===a&&960===b)return h.SR_DVGA;if(640===a&&
1136===b)return h.SR_WDVGA;if(768===a&&1024===b)return h.SR_XGA;if(360===a&&640===b)return h.SR_N_HD;if(540===a&&960===b)return h.SR_Q_HD;if(720===a&&1280===b||768===a&&1280===b||800===a&&1280===b)return h.SR_WXGA;if(1536===a&&2048===b)return h.SR_QXGA};h._estimateScreenSize=function(a){var b=a.width/a.xdpi,a=a.height/a.ydpi,b=Math.sqrt(b*b+a*a);return 5>b?3:8>b?7:10};h._data_browser="undefined"!=typeof navigator?[{string:navigator.userAgent,subString:"Chrome",identity:h.BROWSER_CHROME},{string:navigator.vendor,
subString:"Apple",identity:h.BROWSER_SAFARI,versionSearch:"Version"},{prop:o.opera,identity:h.BROWSER_OPERA,versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:h.BROWSER_FIREFOX},{string:navigator.userAgent,subString:"MSIE",identity:h.BROWSER_MSIE,versionSearch:"MSIE"}]:[];h._data_OS="undefined"!=typeof navigator?[{string:navigator.platform,subString:"Win",identity:h.OS_WINDOWS},{string:navigator.platform,subString:"Mac",identity:h.OS_MACOS},{string:navigator.platform,
subString:"Linux",identity:h.OS_LINUX},{string:navigator.userAgent,subString:"iPad|iPhone|iPod",identity:h.OS_IOS},{string:navigator.userAgent,subString:"Android",identity:h.OS_ANDROID}]:[];"undefined"!=typeof o&&!o.deviceConfiguration&&(o.deviceConfiguration=new h);j.DeviceConfiguration=h;HTTPRequest=function(a){this.parent=j.EventSource;this.parent(a);this.constructor=HTTPRequest;this._headers={}};HTTPRequest.prototype={_url:"",_method:"GET",_login:"",_password:"",_content_type:"",_headers:null,
setHeaders:function(a){if(a)for(var b in a)this._headers[b]=a[b]},send:function(a){var b=new XMLHttpRequest;try{this._response_xml=this._response_text=null;b.open(this._method,this._url,!0,this._login||null,this._password||null);b.setRequestHeader("Cache-Control","no-cache");b.setRequestHeader("Pragma","no-cache");for(var c in this._headers)b.setRequestHeader(c,this._headers[c]);this._headers={};this._content_type&&b.setRequestHeader("Content-Type",this._content_type);var d=this;b.onabort=function(){b.onload=
b.onerror=b.onabort=null;delete b;d.propagate("loaderror",{status:"aborted"})};b.onerror=function(a){b.onload=b.onerror=b.onabort=null;delete b;d.propagate("loaderror",{status:"failed",response:a})};b.onload=function(){function a(c){d.propagate("loaderror",c);delete b;return!1}b.onload=b.onerror=b.onabort=null;if(4!==b.readyState)return a(xkr.statusText);return 200===b.status?(d._response_text=b.responseText,d._response_xml=b.responseXML,d.propagateChange(),d.propagate("textload",d._response_text),
d._response_xml&&d.propagate("xmlload",d._response_xml),delete b,!0):a({status:b.statusText,response:b.response})};b.send(a)}catch(e){b.onload=b.onerror=b.onabort=null,delete b,this.propagate("loaderror",e)}}};f.extendClass(HTTPRequest,j.EventSource);f.defineClassProperties(HTTPRequest,{url:{set:function(a){f.isString(a)&&(this._url=a)}},method:{set:function(a){"GET"!=a&&"POST"!=a||(this._method=a)}},login:{set:function(a){f.isString(a)&&(this._login=a)}},password:{set:function(a){f.isString(a)&&
(this._password=a)}},contentType:{set:function(a){f.isString(a)&&(this._content_type=a)}},responseText:{get:function(){return this._response_text}},responseXML:{get:function(){return this._response_xml}}});j.HTTPRequest=HTTPRequest;var $=j.createClass({parent:j.EventSource,_url:"",_clb_param_name:"callback",__index:0,properties:{url:{set:function(a){f.isString(a)&&(this._url=a)}},clbParamName:{set:function(a){f.isString(a)&&(this._clb_param_name=a)}},responseJson:{get:function(){return this._response_json}}},
send:function(){var a=this,b="jsonp"+a._id+a.__index++,c=this._clb_param_name+"="+b,d=a._url,e=d.length-1,d="?"===d[e]?d+c:"-1"!==d.indexOf("?")?d+("&"+c):"/"===d[e]?d.substr(0,e)+"?"+c:d+("?"+c),g=f.importFile(d,null,null,"js"),h=function(){g&&(g.parentElement.removeChild(g),g=u)},j=setTimeout(function(){h();b in o&&delete o[b];a.propagate("loaderror","Impossible to load data")},3E3);o[b]=function(c){clearTimeout(j);h();delete o[b];c&&(c.error?a.propagate("loaderror",c.error):(a._response_json=c,
a.outPropertyChange(),a.propagate("jsonload",c)))}}});j.AjaxJSONP=$;y.prototype={_data:null,_model_class:null,initComponent:function(){this._data=[];this.forEach=Array.prototype.forEach.bind(this._data)},forEach:function(){},item:function(a){return this._data[a]},_instanciateModel:function(a){if(a instanceof k.core.Model)return a;if(a instanceof Object&&this._model_class)try{var b=new this._model_class(a);b.init();return b}catch(c){c.stack&&console.log(c.stack),console.error(c.toString())}return a},
add:function(){for(var a=[],b=0;b<arguments.length;b++)a.push(this._instanciateModel(arguments[b]));this._data.push.apply(this._data,a);this.hasToPropagateChange()&&this.change("add");return this.length},addAtIndex:function(){if(!(2>arguments.length)){for(var a=[],b=1;b<arguments.length;b++)a.push(this._instanciateModel(arguments[b]));this._data.splice.apply(this._data,a);this.hasToPropagateChange()&&this.change("add",{from:a[0],to:a.length-2})}},remove:function(a,b){this._data.remove(a,b);this.hasToPropagateChange()&&
this.change("remove",{from:a,to:b})},removeAll:function(){this._data=[];this.forEach=Array.prototype.forEach.bind(this._data);this.hasToPropagateChange()&&this.change("removeall")},indexOf:function(){throw"method not yet implemented";},toJSON:function(){var a=this._toJSON(),b=0,c=this._data.length,d;for(a.data=[];b<c;b++)d=this._data[b],"undefined"!=typeof d&&(d instanceof Date?d='"/Date('+d.getTime()+')/"':d&&d.toJSON&&(d=d.toJSON()),a.data.push(d));return a},parseData:function(a){function b(a){h._data=
[];h.forEach=Array.prototype.forEach.bind(h._data);for(c=0;c<a.length;c++)g=a[c],(e=h._model_class?(new h._model_class).init():f.isArray(g)?(new y).init():f.isUndefined(g)||f.isString(g)||f.isNumber(g)||"boolean"==typeof g||null==g||g instanceof Date?null:(new A).init())?(e.parseData(g),h.add(e)):h.add(g)}var c,d,e,g,h=this;if(f.isArray(a))b(a);else for(d in a)"data"==d?b(a.data):this._parse_property(d,a[d])}};f.extendClass(y,j.Model);f.defineClassProperties(y,{data:{set:function(a){if(!this.__i__)throw"Component not initialized";
if(f.isArray(a))this._data=a.slice(),this.forEach=Array.prototype.forEach.bind(this._data);else if(a instanceof y)this._data=a._data.slice(),this.forEach=Array.prototype.forEach.bind(this._data);else return;this.hasToPropagateChange()&&this.change("add")},get:function(){if(!this.__i__)throw"Component not initialized";return this._data.slice()}},length:{get:function(){if(!this.__i__)throw"Component not initialized";return this._data.length}},modelClass:{set:function(a){f.isFunction(a)&&(this._model_class=
a)}}});j.Array=y;s.prototype={__models__:null,registerModel:function(a,b){a&&b&&(this.__models__[a]&&error.log("Model with the name already registered."),this.__models__[a]=b,b._sync_service_=this)},removeModel:function(a){a&&this.__models__[a]&&delete this.__models__[a]},save:function(){},load:function(){}};f.extendClass(s,j.EventSource);j.DataStorage=s;R.prototype={save:function(a){function b(a){var b,g=c.__models__[a];if(g){try{b=JSON.stringify(g)}catch(f){f.stack&&console.log(f.stack),error.log(f),
c.propagate("error",f)}localStorage.setItem(a,b)}}var c=this;if(a)b(a);else for(a in this.__models__)b(a);c.propagate("save")},load:function(a){function b(a){try{var b=c.__models__[a];if(b){var g=localStorage.getItem(a);b.parseJSON(g)}}catch(f){f.stack&&console.log(f.stack),console.error("LocalStorate.load failed. "+f.toString())}}var c=this;if(a)b(a);else for(a in this.__models__)b(a);c.propagate("load")}};f.extendClass(R,s);j.LocalStorage=R;t.XHR=0;t.JSONP=1;t.prototype={_xhrs:null,_mode:0,_headers:null,
_url:"",initComponent:function(){s.prototype.initComponent.call(this)},destructor:function(){s.prototype.destructor.call(this)},setHeaders:function(a){if(a){this._headers={};for(var b in a)this._headers[b]=a[b]}},save:function(a){function b(a){var b,g=c.__models__[a];if(g){try{b=JSON.stringify(g)}catch(f){f.stack&&console.log(f.stack),error.log(f),c.propagate("error",f)}t.setItem(a,b)}}var c=this;if(a)b(a);else for(a in this.__models__)b(a);c.propagate("save")},load:function(a){this._mode===t.XHR&&
this._load_xhr(a);this._mode===t.JSONP&&this._load_jsonp(a)},_load_xhr:function(a){function b(a){try{var b=c.__models__[a];if(b){var g=c._url+a,h=b.getModelProperties(),j=0;if(h&&h.length)for(var g=g+"?",k=0;k<h.length;k++){var m=h[k],n=b["_"+f.underscore(m)];if(!("id"===m||"modelClass"===m))if(f.isString(n)||f.isNumber(n))j++&&(g+="&"),g+=m+"="+escape(n)}var o=(new HTTPRequest).init();c._xhrs[o.id]=a;o.bind("textload",c,c._process_xhr_result);o.setHeaders(c._headers);o.url=g;o.method="GET";o.contentType=
"application/json";o.send()}}catch(p){p.stack&&console.log(p.stack),console.error("LocalStorate.load failed. "+p.toString())}}var c=this;if(a)b(a);else for(a in this.__models__)b(a)},_load_jsonp:function(a){function b(a){try{var b=c.__models__[a];if(b){var g=c._url+a+".json",h=b.getModelProperties(),j=0;if(h&&h.length)for(var g=g+"?",k=0;k<h.length;k++){var m=h[k],o=b["_"+f.underscore(m)];if(!("id"===m||"modelClass"===m))if(f.isString(o)||f.isNumber(o))j++&&(g+="&"),g+=m+"="+escape(o)}var n=(new $).init();
c._xhrs[n.id]=a;n.bind("jsonload",c,c._process_json_result);n.url=g;n.send()}}catch(p){p.stack&&console.log(p.stack),console.error("LocalStorate.load failed. "+p.toString())}}var c=this;if(a)b(a);else for(a in this.__models__)b(a)},_sync:function(){},_process_xhr_result:function(a){var b=a.data,a=a.src,c=this._xhrs[a.id];a.unbind("textload",this,this._process_xhr_result);k.util.free(a);delete this._xhrs[a.id];if(!b)return console.error("Failed to parse rss document that is null."),!1;if(a=this.__models__[c])a.parseJSON(b),
a.change(),this.propagate("load",a)},_process_json_result:function(a){var b=a.data,a=a.src,c=this._xhrs[a.id];a.unbind("textload",this,this._process_json_result);k.util.free(a);delete this._xhrs[a.id];if(a=this.__models__[c])a.parseData(b),a.change(),this.propagate("load",a)}};k.util.extendClass(t,s);k.util.defineClassProperties(t,{url:{set:function(a){k.util.isString(a)&&(this._url=a)},get:function(){return this._url}},mode:{set:function(a){if(0===a||1===a)this._mode=a}}});k.core.RestStorage=t})(window);
/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(r,n){function j(a){this.parent=i.Object;this.parent(a);this.constructor=j}function s(a){a?(this.url=a.getAttribute("url"),this.length=a.getAttribute("length"),this.type=a.getAttribute("type")):this.type=this.length=this.url=null}function t(a){a?(this.isPermaLink=a.getAttribute("isPermaLink"),this.value=a.childNodes[0].nodeValue):this.value=this.isPermaLink=null}function u(a){a?(this.url=a.getAttribute("url"),this.value=a.childNodes[0].nodeValue):this.value=this.url=null}function o(a){for(var b=
"title,link,description,author,comments,pubDate".split(","),d="_title,_link,_description,_author,_comments,_pub_date".split(","),c=null,h=0;h<b.length;h++)if(c=a.getElementsByTagName(b[h])[0])this[d[h]]=c.childNodes[0].nodeValue;this._category=new p(a.getElementsByTagName("category")[0]);this._enclosure=new s(a.getElementsByTagName("enclosure")[0]);this._guid=new t(a.getElementsByTagName("guid")[0]);this._source=new u(a.getElementsByTagName("source")[0]);if(this._image=new q(a.getElementsByTagName("content")[0]))this._image_url=
this.image.url}function p(a){a?(this.domain=a.getAttribute("domain"),this.value=a.childNodes[0].nodeValue):this.value=this.domain=null}function q(a){if(a){imgAttribs="url,title,link,width,height,description".split(",");for(var b=0;b<imgAttribs.length;b++)a.getAttribute(imgAttribs[b])&&(this[imgAttribs[b]]=a.getAttribute(imgAttribs[b]))}else this.description=this.height=this.width=this.link=this.url=null}var k=r.vs,e=k.util,i=k.core,m=k.data;j.prototype={_src:"",_anchor:"",_query:"",_file:"",_directory:"",
_path:"",_relative:"",_port:0,_host:"",_password:"",_user:"",_authority:"",_protocol:"",_query_key:null,__options:{strictMode:!1,key:"_source,_protocol,_authority,_userInfo,_user,_password,_host,_port,_relative,_path,_directory,_file,_query,_anchor".split(","),q:{name:"_query_key",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},
parse:function(a){if(e.isString(a)){this._src=a;for(var b=this.__options,a=b.parser[b.strictMode?"strict":"loose"].exec(a),d=14,c=this;d--;)this[b.key[d]]=a[d]||"";this[b.q.name]={};this[b.key[12]].replace(b.q.parser,function(a,d,e){d&&(c[b.q.name][d]=e)});this.outPropertyChange("src")}}};e.extendClass(j,i.Object);e.defineClassProperties(j,{src:{set:function(a){e.isString(a)&&this.parse(a)},get:function(){return this._src}},anchor:{get:function(){return this._anchor}},query:{get:function(){return this._query}},
queryKey:{get:function(){return this._query_key}},file:{get:function(){return this._file}},directory:{get:function(){return this._directory}},path:{get:function(){return this._path}},port:{get:function(){return this._port}},relative:{get:function(){return this._relative}},host:{get:function(){return this._host}},password:{get:function(){return this._password}},user:{get:function(){return this._user}},authority:{get:function(){return this._authority}},protocol:{get:function(){return this._protocol}}});
m.URL=j;o.prototype={_title:"",_link:"",_description:"",_author:"",_comments:"",_pub_date:"",_category:null,_enclosure:null,_guid:null,_source:null,_image:null,_image_url:"",_category:null,toString:function(){return this.title}};e.defineClassProperties(o,{title:{get:function(){return this._title}},link:{get:function(){return this._link}},description:{get:function(){return this._description}},author:{get:function(){return this._author}},comments:{get:function(){return this._comments}},pubDate:{get:function(){return this._pub_date}},
category:{get:function(){return this._category}},enclosure:{get:function(){return this._enclosure}},guid:{get:function(){return this._guid}},source:{get:function(){return this._source}},image:{get:function(){return this._image}},imageUrl:{get:function(){return this._image_url}}});var g=function(a){this.parent=k.core.EventSource;this.parent(a);this.constructor=g};g.prototype={_items:null,_title:null,_link:null,_description:null,_language:null,_copyright:null,_managing_editor:null,_web_master:null,
_pub_date:null,_last_build_date:null,_generator:null,_docs:null,_ttl:null,_rating:null};e.extendClass(g,i.EventSource);e.defineClassProperties(g,{items:{get:function(){return this._items}},title:{get:function(){return this._title}},link:{get:function(){return this._link}},description:{get:function(){return this._description}},language:{get:function(){return this._language}},copyright:{get:function(){return this._copyright}},managingEditor:{get:function(){return this._managing_editor}},webMaster:{get:function(){return this._web_master}},
pubDate:{get:function(){return this._pub_date}},lastBuildDate:{get:function(){return this._last_build_date}},generator:{get:function(){return this._generator}},docs:{get:function(){return this._docs}},rating:{get:function(){return this._rating}},image:{get:function(){return this._image}},imageUrl:{get:function(){return this._image_url}},category:{get:function(){return this._category}}});var l=function(a){this.parent=g;this.parent(a);this.constructor=l;this._rss=this};l.prototype={_url:"",_rss:null,
initComponent:function(){g.prototype.initComponent.call(this);this._xhr=new i.HTTPRequest;this._xhr.init();this._xhr.bind("xmlload",this,this.processRSS);this._xhr.bind("loaderror",this,this.processError)},destructor:function(){this._xhr.unbind("xmlload",this,this.processRSS);this._xhr.unbind("loaderror",this,this.processError);free(this._xhr);g.prototype.destructor.call(this)},loadRSS:function(){this._xhr.send()},processRSS:function(a){a=a.data;if(!a&&(a=(new DOMParser).parseFromString(this._xhr.responseText,
"application/xml"),!a))return console.error("Failed to parse rss document that is null."),this.propagate("rssloaderror","document null."),!1;var b=a;this._items=[];if(b){for(var a=b.getElementsByTagName("channel")[0],d=b.getElementsByTagName("item"),b=0;b<d.length;b++)Item=new o(d[b]),this._items.push(Item);for(var d="_title,_link,_description,_language,_copyright,_managing_editor,_web_master,_pub_date,_last_build_date,_generator,_docs,_ttl,_rating".split(","),c="title,link,description,language,copyright,managingEditor,webMaster,pubDate,lastBuildDate,generator,docs,ttl,rating".split(","),
h=null,b=0;b<c.length;b++)if(h=a.getElementsByTagName(c[b])[0])this[d[b]]=h.childNodes[0].nodeValue;this._category=new p(a.getElementsByTagName("category")[0]);this._image=new q(a.getElementsByTagName("image")[0])}else console.error("Failed to parse rss document that is null.");this.propagate("rssload",this);this.outPropertyChange()},processError:function(a){a&&a.data&&"failed"===a.data.status?this.performAlternateRequest?this.performAlternateRequest():this.propagate("rssloaderror"):this.propagate("rssloaderror")},
propertiesDidChange:function(){this.loadRSS();return!0},performAlternateRequest:function(){var a=(new i.AjaxJSONP).init();a.url="http://pipes.yahoo.com/pipes/pipe.run?_id=9oyONQzA2xGOkM4FqGIyXQ&_render=json&feed="+escape(this._url);a.clbParamName="_callback";a.bind("jsonload",this,function(a){a=a.data;if(!a||!a.value||!a.value.items)this.propagate("rssloaderror","document null.");else{a=a.value;this._pub_date=a.pubDate;this._items=[];itemElements=a.items;for(a=0;a<itemElements.length;a++)this._items.push(itemElements[a]);
this.propagate("rssload",this);this.outPropertyChange()}});a.bind("loaderror",this,function(){this.propagate("rssloaderror")});a.send()}};e.extendClass(l,g);e.defineClassProperties(l,{url:{set:function(a){e.isString(a)&&(this._url=a,this._xhr.url=a)}},rss:{get:function(){return this._rss}}});m.RSSFeed=g;m.RSSRequester=l;var c=function(a){this.parent=i.EventSource;this.parent(a);this.constructor=c;c.loadService(this);this.ERROR_CODE=0;this._addresses=[];this._position=[]};c.loadService=function(a){c.__google_loaded__||
(c.__google_wait_loaded__||(c.__google_wait_loaded__=!0,e.importFile("http://www.google.com/jsapi?key="+c.key+"&callback=vs.data.GoogleSearch.__on_loaded",null,null,"js")),a&&c._to_finish_init.push(a))};c.key=" ABQIAAAAE4BGaIh0t-7l9PDR7PA0rRR6KW34AlT62yZeC298tyhOjAL-9hQQpk22pW6ZfaCFEr3zjz2Q8rjqAw";c.__google_wait_loaded__=!1;c.__google_loaded__=!1;c._to_finish_init=[];c.LOCAL_SEARCH_ENGINE=1;c.VIDEO_SEARCH_ENGINE=2;c.__on_loaded=function(){google.load("search","1",{nocss:!0,callback:k.data.GoogleSearch.__on_search_loaded})};
c.__on_search_loaded=function(){var a,b;c.__google_loaded__=!0;c.__google_wait_loaded__=!1;for(a=0,b=c._to_finish_init.length;a<b;a++)c._to_finish_init[a].finishInit();c._to_finish_init=null};c.ERROR_CODE_STR="No error,Unknown error,Unvalid parameters data,Error with google server,Connexion error,Unvalid google response".split(",");c.prototype={__local_search:n,__video_search:n,__init_ok:!1,__engine_to_init:0,__end_init_clb:null,_engine_loaded:!1,_str_address:"",_addresses:null,_position:null,finishInit:function(){this.__init_ok=
!0;this.__engine_to_init&&(this.setSearchEngine(this.__engine_to_init),this.__engine_to_init=0)},setSearchEngine:function(a){this.__init_ok?(a|c.LOCAL_SEARCH_ENGINE&&!this.__local_search&&(this.__local_search=new google.search.LocalSearch,this.__local_search.setResultSetSize(google.search.Search.SMALL_RESULTSET),this.__local_search.setNoHtmlGeneration()),a|c.VIDEO_SEARCH_ENGINE&&!this.__video_search&&(this.__video_search=new google.search.VideoSearch,this.__video_search.setResultSetSize(google.search.Search.SMALL_RESULTSET),
this.__video_search.setNoHtmlGeneration()),this._engine_loaded=!0,this.propagate("engineload"),this.outPropertyChange("engineLoaded")):this.__engine_to_init=a},_newGoogleLocalSearch:function(a,b){var d=this;this.__local_search.setSearchCompleteCallback(this,function(){b.call(d,d.__local_search.results)});!a||"string"!==typeof a?(this.ERROR_CODE=2,b.call(d,null)):this.__local_search.execute(a)},_googleLocalSearch:function(a,b){if(this.__local_search)this._newGoogleLocalSearch(a,b);else if(!a||"string"!==
typeof a)this.ERROR_CODE=2,b.call(this,null);else{var d=new XMLHttpRequest;d.open("GET","http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q="+a,!1);d.send(null);4===d.readyState?(d=eval("("+d.responseText+")"),200!==d.responseStatus?(this.ERROR_CODE=3,b.call(this,null)):d.responseData?b.call(this,d.responseData):(this.ERROR_CODE=5,b.call(this,null))):(this.ERROR_CODE=4,b.call(this,null))}},GPSCoordinateToAddress:function(a,b,d){if(this.__local_search)if(d||(d=this),!a||!a.length)this.ERROR_CODE=
2,b.call(d,null);else{var c=this;this._googleLocalSearch(a[0]+","+a[1],function(a){if(a)if(0===a.length||!a[0])this.ERROR_CODE=5,b.call(d,null);else{c._addresses=[];var f={title:"",addressLine:"",streetAddress:"",city:"",region:"",country_code:"",postalCode:0};f.title=a[0].titleNoFormatting;f.addressLine=a[0].addressLines.join(", ");f.streetAddress=a[0].streetAddress;f.city=a[0].city;f.region=a[0].region;f.country_code=a[0].country;f.postalCode=a[0].postalCode;f.locale=c.countryToLocal(f.country_code);
c._addresses.push(f);b.call(d,f);c.outPropertyChange("addresses")}else this.ERROR_CODE=5,b.call(d,null)})}else console.error("The local search engine is not initialized")},countryToLocal:function(a){switch(a){case "US":return"en_US";case "GB":return"en_GB";case "FR":return"fr_FR";case "CA":return"fr_CA";case n:return"en_US";default:return a.toLowerCase()}},addressToGPSCoordinate:function(a,b,d){if(this.__local_search){var c=[0,0];d||(d=this);if(!a||"string"!==typeof a)this.ERROR_CODE=2,b.call(d,null);
else{var h=this;this._googleLocalSearch('"'+a+'"',function(a){a&&(a[0]?(c[0]=parseFloat(a[0].lat),c[1]=parseFloat(a[0].lng),h._position=c,b.call(d,c.slice()),h.outPropertyChange("position")):(this.ERROR_CODE=5,b.call(d,null)))})}}else console.error("The local search engine is not initialized")},searchAddress:function(a,b,c){if(this.__local_search)if(c||(c=this),!a||"string"!==typeof a)this.ERROR_CODE=2,b.call(c,null);else{var e=this;this._googleLocalSearch('"'+a+'"',function(a){e._addresses=[];if(a){for(var f=
0;f<a.length;f++){var g={};g.title=a[f].titleNoFormatting;g.addressLine=a[f].addressLines.join(", ");g.streetAddress=a[f].streetAddress;g.city=a[f].city;g.region=a[f].region;g.country_code=a[f].country;g.postalCode=a[f].postalCode;e._addresses.push(g)}b.call(c,e._addresses.slice())}else b.call(c,[]);e.outPropertyChange("addresses")})}else console.error("The local search engine is not initialized")}};e.extendClass(c,i.EventSource);e.defineClassProperties(c,{strAddress:{set:function(a){if(e.isString(a)){this._str_address=
a;var b=this;this.searchAddress(a,function(){b.addressToGPSCoordinate(a,function(){},this)},this)}}},addresses:{get:function(){return this._addresses}},position:{set:function(a){e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&this.GPSCoordinateToAddress(a,function(){},this)},get:function(){return this._position}},engineLoaded:{get:function(){return this._engine_loaded}}});m.GoogleSearch=c})(window);
/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.


 The code include code from :

 Copyright (c) 2009 Matteo Spinelli, http://cubiq.org/
 Released under MIT license
 http://cubiq.org/dropbox/mit-license.txt
 Version 3.4.5 - Last updated: 2010.07.04
*/
(function(m,p){function O(a){this._str=a}function wa(a){if(!a)return null;for(var a=a.split("."),b=m;b&&a.length;)b=b[a.shift()];return b}function la(a,b,c){var d=function(a,b,c){var d={},n="_"+f.underscore(b);d.set=function(a,b,c){return function(d){var f=0,n,e=a.length,v;for(this[c]=d;f<e;f++)n=a[f],3===n.nodeType?n.data=d:2===n.nodeType&&(v=eval(n.__attr_eval_str),"value"==n.name&&"INPUT"==n.ownerElement.tagName?n.ownerElement.value=v:n.value=v);"_$_"==b?this.propertyChange():this.propertyChange(b)}}(c,
b,n);d.get=function(a){return function(){return this[a]}}(n);a.defineProperty(b,d)},n=function(a,b,c,d){var n={},e="_"+f.underscore(b);n.set=function(a,b,c,d){return function(n){if(f.isArray(n)){var e=0,v=n.length,H;this[b]=n;for(f.removeAllElementChild(d);e<v;e++)H=pa(c,n[e]),d.appendChild(H.view);this.propertyChange(a)}}}(b,e,c,d);n.get=function(a){return function(){return this[a]}}(e);a.defineProperty(b,n)};(function(a,b,c){for(var f=[],e=b.__all_properties.length;e--;){var g=b.__all_properties[e],
h=b.__prop_nodes[e],j,k;if(h){k=b.__node;j=h;for(var m=[],o=0,p=j.length,q=void 0;o<p;o++)q=j[o],m.push([ba(k,q),q.__attr_eval_str]);j=m;k=c;for(var m=[],o=0,p=j.length,r=q=void 0;o<p;o++)q=j[o],r=fa(k,q[0]),r.__attr_eval_str=q[1],m.push(r);k=m;f.push([g,h]);"@"===g?d(a,"_$_",k):d(a,g,k)}}for(e=b.__all_properties.length;e--;)if(g=b.__all_properties[e],h=b.__list_iterate_prop[g])path=ba(b.__node,h.__parent_node),node_cloned=fa(c,path),n(a,g,h,node_cloned);a.__node__ref__=f})(a,b,c)}function pa(a,b){var c=
a.__node.cloneNode(!0),d=new a.__class({node:c});la(d,a,c);d.init();b&&d.configure(b);d.isProperty("_$_")&&(d._$_=b);return d}function qa(a,b){function c(b,d){var n=b.getAttribute("data-iterate");if(n){var e=b.parentElement;e.removeChild(b);-1===d.__all_properties.indexOf(n)&&d.__all_properties.push(n);var g={};d.__list_iterate_prop[n]=g;g.__prop_nodes=[];g.__list_iterate_prop={};g.__parent_node=e;g.__node=b;g.__all_properties=d.__all_properties;g.__class=q.View;d=g}n=b.attributes;e=d;if(n)for(g=
n.length;g--;){var h=n.item(g),j,m=h.value,o=[];a._regexp_index.lastIndex=0;if(j=a._regexp_index.exec(m)){for(;j;)j=parseInt(j[1],10),o.push(j),e.__prop_nodes[j]?e.__prop_nodes[j].push(h):e.__prop_nodes[j]=[h],j=a._regexp_index.exec(m);h.value="";for(var p=0;p<o.length;p++)j=o[p],m=m.replace("${*"+j+"*}",'"+this._'+f.underscore(e.__all_properties[j])+'+"');h.__attr_eval_str='"'+m+'"'}}n=b.childNodes;e=d;if(n)for(g=n.length;g--;)if(h=n.item(g),3===h.nodeType){m=h.data;j=0;a._regexp_index.lastIndex=
0;h.data=" ";for(o=a._regexp_index.exec(m);o;)if(o.index&&(p=k.createTextNode(m.substring(j,o.index)),b.insertBefore(p,h)),j=parseInt(o[1],10),e.__prop_nodes[j]?e.__prop_nodes[j].push(h):e.__prop_nodes[j]=[h],j=o.index+o[0].length,o=a._regexp_index.exec(m))p=k.createTextNode(" "),h.nextSibling?b.insertBefore(p,h.nextSibling):b.appendChild(p),h=p;if(m=m.substring(j))p=k.createTextNode(m),h.nextSibling?b.insertBefore(p,h.nextSibling):b.appendChild(p)}else 1===h.nodeType&&c(h,e)}var d={__prop_nodes:[],
__list_iterate_prop:{},__all_properties:[]};d.__class=wa(b);f.isFunction(d.__class)||(d.__class=q.View);a._regexp_templ.lastIndex=0;var n=a._str.replace(a._regexp_templ,function(a,b){var c=d.__all_properties.indexOf(b);-1===c&&(c=d.__all_properties.length,d.__all_properties.push(b));return"${*"+c+"*}"});d.__node=O.parseHTML(n);c(d.__node,d);return d}function A(a){this.constructor=A;this.delegate=a}function Q(a){this.parent=A;this.parent(a);this.constructor=Q}function ca(a){this.parent=A;this.parent(a);
this.constructor=ca}function ga(a){this.parent=A;this.parent(a);this.constructor=ga}function ha(a){this.parent=A;this.parent(a);this.constructor=ha}function ma(a,b){if(!a.getAttribute)return!1;if(a.getAttribute("x-hag-ref")===b||a.getAttribute("x-hag-comp")===b)return a;for(var c=a.firstElementChild,d;c;){if(d=ma(c,b))return d;c=c.nextElementSibling}return!1}function g(a){this.parent=h.EventSource;this.parent(a);this.constructor=g;this.__pointer_recognizers=[]}function ra(a){switch(a){case r.SS_7_INCH:return a=
1.2>=devicePixelRatio?[600,960]:1.4>=devicePixelRatio?[800,1280]:1.7>=devicePixelRatio?[900,1440]:[1200,1920],a;case r.SS_4_INCH:return a=1.2>=devicePixelRatio?[320,540]:1.4>=devicePixelRatio?[427,720]:1.7>=devicePixelRatio?[480,800]:[720,1080],a}}function T(a){if(!("touchstart"==a.type&&("INPUT"==a.target.tagName||"input"==a.target.tagName||"TEXTAREA"==a.target.tagName||"textarea"==a.target.tagName)))return a.preventDefault(),!1}function t(a){this.parent=g;this.parent(a);this.constructor=t;this.__ab_view_t_o=
[50,50]}function B(a){this.parent=t;this.parent(a);this.constructor=B}function U(a){this.parent=g;this.parent(a);this.constructor=U}function y(a){this.parent=g;this.parent(a);this.constructor=y}function I(a){this.parent=t;this.parent(a);this.constructor=I}function da(){this.parent=M;this.parent();this.constructor=M}function ia(a){this.parent=g;this.parent(a);this.constructor=ia}function sa(a,b,c,d){for(var n=k.createElement("li"),e=k.createElement("div"),v=k.createElement("ul"),g,o=a._model,P;c<o.length;){g=
o.item(c);if(f.isString(g))break;g=o.item(c);P=a.__template_obj?a.__template_obj.clone():(new da).init();g instanceof h.Model?P.link(g):P.configure(g);P.index=c;d&&j.addPointerListener(P.view,h.POINTER_START,a);v.appendChild(P.view);a.__item_obs.push(P);P.__parent=a;c++}b&&(a=m.deviceConfiguration.os,a==r.OS_MEEGO||a==r.OS_SYMBIAN?(e.appendChild(k.createElement("div")),a=k.createElement("div"),a.appendChild(k.createTextNode(b)),e.appendChild(a)):f.setElementInnerText(e,b),n.appendChild(e));0<v.childElementCount&&
n.appendChild(v);return[n,c]}function xa(a){if(this._model){var b=this._list_items,c,d,n;if(b){this._freeListItems();f.removeAllElementChild(b);N?J(b,"translate3d(0,0,0)"):J(b,"translate(0,0)");var e=b.parentElement;e.removeChild(b);c=0;for(f.setElementVisibility(b,!1);c<this._model.length;)d=this._model.item(c),n=null,f.isString(d)&&(n=d,c++),c=sa(this,n,c,a),b.appendChild(c[0]),c=c[1];e.appendChild(b);b.style.width="auto";f.setElementVisibility(b,!0)}}}function ya(a){if(this._model){var b=this._list_items,
c=this._direct_access,d,n,e;if(b){this._freeListItems();this.__direct_access_letters=[];f.removeAllElementChild(b);c&&f.removeAllElementChild(c);N?f.setElementTransform(b,"translate3d(0,0,0)"):f.setElementTransform(b,"translate(0,0)");var g=b.parentElement;g.removeChild(b);c&&this.view.removeChild(c);d=0;f.setElementVisibility(b,!1);for(var h=0;d<this._model.length;){n=this._model.item(d);e=null;if(f.isString(n)){e=n;d++;n=k.createElement("div");var j=e[0];f.setElementInnerText(n,j);this.__direct_access_letters.push(j);
n._index_=h++;c&&c.appendChild(n)}d=sa(this,e,d,a);b.appendChild(d[0]);d=d[1]}g.appendChild(b);c&&this.view.appendChild(c);b.style.width="auto";f.setElementVisibility(b,!0)}}}function ta(a){if(this._model){var b=this._list_items,c,d,n;if(b){this._freeListItems();f.removeAllElementChild(b);N?J(b,"translate3d(0,0,0)"):J(b,"translate(0,0)");var e=b.parentElement;e.removeChild(b);c=0;for(f.setElementVisibility(b,!1);c<this._model.length;)d=this._model.item(c),n=this.__template_obj?this.__template_obj.clone():
(new da).init(),d instanceof h.Model?n.link(d):n.configure(d),n.index=c,a&&j.addPointerListener(n.view,h.POINTER_START,this),b.appendChild(n.view),this.__item_obs.push(n),n.__parent=this,c++;e.appendChild(b);b.style.width="auto";f.setElementVisibility(b,!0)}}}function x(a){this.parent=I;this.parent(a);this.constructor=x;this.__item_obs=[]}function C(a){this._data=[];this._items={};this.parent=g;this.parent(a);this.constructor=C}function V(a){this.__inputs=[];this.__labels=[];this.parent=I;this.parent(a);
this.constructor=V}function W(a){this.__inputs=[];this.__labels=[];this.parent=I;this.parent(a);this.constructor=W;this._selected_indexes=[]}function K(a){this.parent=g;this.parent(a);this.constructor=K;this._states={}}function e(a){this.parent=g;this.parent(a);this.constructor=e;this._items={}}function X(a){this.parent=g;this.parent(a);this.constructor=X}function F(a){this.parent=g;this.parent(a);this.constructor=F}function E(a){this.parent=g;this.parent(a);this.constructor=E;this._range=[0,100]}
function L(a){this.parent=g;this.parent(a);this.constructor=L;this._range=[0,100]}function Y(a){this.parent=g;this.parent(a);this.constructor=Y}function z(a){this.parent=g;this.parent(a);this.constructor=z}function w(a){this.parent=g;this.parent(a);this.constructor=w}function D(a){this.parent=g;this.parent(a);this.constructor=D}function o(a){this.parent=g;this.parent(a);this.constructor=o}function Z(a){this.parent=g;this.parent(a);this.constructor=Z}function za(a,b,c){if(a&&c){var d=ja[a];if(d)d.push({elem_id:b,
svg_obj:c});else{d=[];d.push({elem_id:b,svg_obj:c});ja[a]=d;var n=k.createElement("object");n.data=a;n.type="image/svg+xml";n.width="0";n.height="0";n.style.visibility="hidden";n.onload=function(){var b=n.getSVGDocument();if(b){b=b.querySelector("svg");if(!ka){var c=k.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width","0");c.setAttribute("height","0");k.body.appendChild(c);ka=k.createElementNS("http://www.w3.org/2000/svg","defs");c.appendChild(ka)}ka.appendChild(b);k.body.removeChild(n);
ua[a]=b;if(c=ja[a]){delete ja[a];for(var d=0;d<c.length;d++){var f=c[d];f.svg_obj.__set_svg_doc(b,f.elem_id)}}}};k.body.appendChild(n)}}}function G(a){this.parent=g;this.parent(a);this.constructor=G}var k=m.document,j=m.vs,f=j.util,h=j.core,q=j.ui,J=f.setElementTransform,r=h.DeviceConfiguration,N=j.SUPPORT_3D_TRANSFORM;O.prototype={_str:null,_regexp_templ:/\$\{((([\w\-]+)(\.([\w\.]*)+)?)|@)\}/g,_regexp_index:/\$\{\*([\d]+)\*\}/g,_shadow_view:null,toString:function(){return this._str},compileView:function(a,
b){this._shadow_view||(this._shadow_view=qa(this,a));var c=pa(this._shadow_view,b);c.__shadow_view=this._shadow_view;c.clone=na.bind(c);c._clone=oa.bind(c);return c},__extend_component:function(a){this._shadow_view||(this._shadow_view=qa(this));var b=this._shadow_view.__node.cloneNode(!0);a.view=b;la(a,this._shadow_view,b);a.__shadow_view=this._shadow_view;a.clone=na.bind(a);a._clone=oa.bind(a);return b},apply:function(a){function b(b,d,n,f,e){b=a[d];if(e){n=n.split(".");e=1;d=n.length;for(b=a[n[0]];b&&
e<d;)b=b[n[e++]]}return b}return!a?this._str:this._str.replace(this._regexp_templ,b)}};var na=function(a,b){a||(a={});a.node=this.__shadow_view?this.__shadow_view.__node.cloneNode(!0):a.node?a.node:this.view.cloneNode(!0);return h.EventSource.prototype.clone.call(this,a,b)},oa=function(a,b){q.View.prototype._clone.call(this,a,b);la(a,this.__shadow_view,a.view);a.__shadow_view=this.__shadow_view;a.clone=na.bind(a);a._clone=oa.bind(a)},ba=function(a,b,c){var d=1,c=c||[];if(2===b.nodeType)return b.ownerElement&&
(c=ba(a,b.ownerElement,c)),c.push([2,b.nodeName.toLowerCase()]),c;if(a===b)return c;b.parentNode&&(c=ba(a,b.parentNode,c));for(a=b.previousSibling;a;)(1===a.nodeType||3===a.nodeType)&&a.nodeName==b.nodeName&&d++,a=a.previousSibling;c.push([1,b.nodeName.toLowerCase(),d]);return c},fa=function(a,b){if(!b||!b.length||!a)return a;var c=b.shift(),d,n;d=c[0];var f=c[1];if(2===d){d=a.attributes;for(c=d.length;c--;)if(n=d.item(c),n.nodeName.toLowerCase()==f)return n}else if(1===d){d=a.firstChild;for(c=c[2],
n=1;d;){if(d.nodeName.toLowerCase()===f){if(c===n)return fa(d,b);n++}d=d.nextSibling}}return null};O.parseHTML=function(a){var b=k.createElement("div");try{f.safeInnerHTML(b,a),(b=b.firstElementChild)&&b.parentElement.removeChild(b)}catch(c){return console.error("vs.ui.Template.parseHTML failed:"),c.stack&&console.log(c.stack),console.error(c),p}return b};j.ui.Template=O;var $=[];A.prototype={addPointerListener:function(a,b,c,d){if(!a||!b||!c)return!1;for(var n=0,f=$.length,e;n<f;n++)if(e=$[n],e.target===
a&&e.type===b&&e.listener===c)return e.nb++,!0;e={};e.target=a;e.type=b;e.listener=c;e.nb=1;$.push(e);j.addPointerListener(a,b,c,d);return!0},removePointerListener:function(a,b,c,d){if(!a||!b||!c)return!1;for(var n=0,f=$.length,e;n<f;n++)if(e=$[n],e.target===a&&e.type===b&&e.listener===c)return e.nb--,0===e.nb&&(j.removePointerListener(a,b,c,d),$.remove(n)),!0;return!1},init:function(a){this.obj=a},uninit:function(){},reset:function(){},pointerStart:function(){},pointerMove:function(){},pointerEnd:function(){},
pointerCancel:function(){},gestureStart:function(){},gestureChange:function(){},gestureEnd:function(){}};q.PointerRecognizer=A;var va={handleEvent:function(a){if(this.__pointer_recognizers.length){if(this._enable)switch(a.type){case h.POINTER_START:this.__pointer_recognizers.forEach(function(b){b.pointerStart(a)});break;case h.POINTER_MOVE:this.__pointer_recognizers.forEach(function(b){b.pointerMove(a)});break;case h.POINTER_END:this.__pointer_recognizers.forEach(function(b){b.pointerEnd(a)});break;
case h.POINTER_CANCEL:this.__pointer_recognizers.forEach(function(b){b.pointerCancel(a)});break;case h.GESTURE_START:this.__pointer_recognizers.forEach(function(b){b.gestureStart(a)});break;case h.GESTURE_CHANGE:this.__pointer_recognizers.forEach(function(b){b.gestureChange(a)});break;case h.GESTURE_END:this.__pointer_recognizers.forEach(function(b){b.gestureEnd(a)})}}else this._propagateToParent&&this._propagateToParent(a)},__pointer_recognizers:null,addPointerRecognizer:function(a){!a instanceof
A||-1!==this.__pointer_recognizers.indexOf(a)||(this.__pointer_recognizers.push(a),a.init(this))},removePointerRecognizer:function(a){!a instanceof A||(this.__pointer_recognizers.remove(a),a.uninit())}};q.RecognizerManager=va;Q.prototype={__is_touched:!1,__unselect_time_out:0,__did_tap_time_out:0,__tap_mode:0,init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.POINTER_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,h.POINTER_START,
this.obj)},pointerStart:function(a){if(!this.__is_touched&&!(0===a.targetPointerList.length||1<a.nbPointers)){0===this.__tap_mode&&(this.__tap_mode=1);this.__tap_elem=a.targetPointerList[0].currentTarget;this.__unselect_time_out&&(clearTimeout(this.__unselect_time_out),this.__unselect_time_out=0);try{this.delegate&&this.delegate.didTouch&&this.delegate.didTouch(this.__tap_elem._comp_,this.__tap_elem,a)}catch(b){b.stack&&console.log(b.stack),console.log(b)}this.__did_tap_time_out&&(this.__tap_mode++,
clearTimeout(this.__did_tap_time_out),this.__did_tap_time_out=0);this.addPointerListener(k,h.POINTER_END,this.obj);this.addPointerListener(k,h.POINTER_MOVE,this.obj);this.__start_x=a.targetPointerList[0].pageX;this.__start_y=a.targetPointerList[0].pageY;this.__is_touched=!0;return!1}},pointerMove:function(a){if(this.__is_touched&&0!==a.targetPointerList.length){var b=a.targetPointerList[0].pageY-this.__start_y;if(Math.abs(a.targetPointerList[0].pageX-this.__start_x)+Math.abs(b)<g.MOVE_THRESHOLD)return!1;
this.removePointerListener(k,h.POINTER_END,this.obj);this.removePointerListener(k,h.POINTER_MOVE,this.obj);this.__is_touched=!1;try{this.delegate&&this.delegate.didUntouch&&this.delegate.didUntouch(a.targetPointerList[0].currentTarget._comp_,a.targetPointerList[0].currentTarget,a)}catch(c){c.stack&&console.log(c.stack),console.log(c)}}},pointerEnd:function(a){if(this.__is_touched){this.__is_touched=!1;var b=this,c=b.__tap_elem,d=c?c._comp_:null;b.__tap_elem=p;this.removePointerListener(k,h.POINTER_END,
this.obj);this.removePointerListener(k,h.POINTER_MOVE,this.obj);this.delegate&&this.delegate.didUntouch&&(this.__unselect_time_out=setTimeout(function(){try{b.delegate.didUntouch(d,c,a)}catch(n){n.stack&&console.log(n.stack),console.log(n)}b.__unselect_time_out=0},g.UNSELECT_DELAY));this.delegate&&this.delegate.didTap?this.__did_tap_time_out=setTimeout(function(){try{b.delegate.didTap(b.__tap_mode,d,c,a)}catch(n){n.stack&&console.log(n.stack),console.log(n)}b.__tap_mode=0;b.__did_tap_time_out=0},
100):b.__tap_mode=0}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(Q,A);q.TapRecognizer=Q;ca.prototype={__is_dragged:!1,init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.POINTER_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,h.POINTER_START,this.obj)},pointerStart:function(a){if(!this.__is_dragged&&a.targetPointerList&&!(1<a.targetPointerList.length)){var b=a.targetPointerList[0];this.__start_x=b.pageX;
this.__start_y=b.pageY;this.__pointer_id=b.identifier;this.__is_dragged=!0;this.addPointerListener(k,h.POINTER_END,this.obj);this.addPointerListener(k,h.POINTER_MOVE,this.obj);try{this.delegate&&this.delegate.didDragStart&&this.delegate.didDragStart(a,a.targetPointerList[0].currentTarget._comp_)}catch(c){c.stack&&console.log(c.stack),console.log(c)}return!1}},pointerMove:function(a){if(this.__is_dragged){for(var b=0,c=a.targetPointerList.length,d;b<c;b++){d=a.targetPointerList[b];if(d.identifier===
this.__pointer_id)break;d=null}if(d){b=d.pageX-this.__start_x;d=d.pageY-this.__start_y;try{this.delegate&&this.delegate.didDrag&&this.delegate.didDrag({dx:b,dy:d},a,a.targetPointerList[0].currentTarget._comp_)}catch(n){n.stack&&console.log(n.stack),console.log(n)}}}},pointerEnd:function(a){if(this.__is_dragged){for(var b=0,c=a.changedPointerList.length,d;b<c;b++){d=a.changedPointerList[b];if(d.identifier===this.__pointer_id)break;d=null}if(d){this.__is_dragged=!1;this.__pointer_id=this.__start_y=
this.__start_x=p;this.removePointerListener(k,h.POINTER_END,this.obj);this.removePointerListener(k,h.POINTER_MOVE,this.obj);try{this.delegate&&this.delegate.didDragEnd&&this.delegate.didDragEnd(a,a.changedPointerList[0].target._comp_)}catch(n){n.stack&&console.log(n.stack),console.log(n)}}}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(ca,A);q.DragRecognizer=ca;ga.prototype={init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.GESTURE_START,
this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,h.GESTURE_START,this.obj)},gestureStart:function(){this.addPointerListener(k,h.GESTURE_CHANGE,this.obj);this.addPointerListener(k,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchStart&&this.delegate.didPinchStart(event,event.targetPointerList[0].target._comp_)}catch(a){a.stack&&console.log(a.stack),console.log(a)}return!1},gestureChange:function(a){try{this.delegate&&this.delegate.didPinchChange&&this.delegate.didPinchChange(a.scale,
a,a.targetPointerList[0].target._comp_)}catch(b){b.stack&&console.log(b.stack),console.log(b)}},gestureEnd:function(){this.removePointerListener(k,h.GESTURE_CHANGE,this.obj);this.removePointerListener(k,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didPinchEnd&&this.delegate.didPinchEnd(event,event.targetPointerList[0].target._comp_)}catch(a){a.stack&&console.log(a.stack),console.log(a)}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(ga,A);q.PinchRecognizer=ga;ha.prototype=
{init:function(a){A.prototype.init.call(this,a);this.addPointerListener(this.obj.view,h.GESTURE_START,this.obj);this.reset()},uninit:function(){this.removePointerListener(this.obj.view,h.GESTURE_START,this.obj)},gestureStart:function(){this.addPointerListener(k,h.GESTURE_CHANGE,this.obj);this.addPointerListener(k,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationStart&&this.delegate.didRotationStart(event)}catch(a){a.stack&&console.log(a.stack),console.log(a)}return!1},gestureChange:function(a){try{this.delegate&&
this.delegate.didRotationChange&&this.delegate.didRotationChange(a.rotation,a)}catch(b){b.stack&&console.log(b.stack),console.log(b)}},gestureEnd:function(){this.removePointerListener(k,h.GESTURE_CHANGE,this.obj);this.removePointerListener(k,h.GESTURE_END,this.obj);try{this.delegate&&this.delegate.didRotationEnd&&this.delegate.didRotationEnd(event)}catch(a){a.stack&&console.log(a.stack),console.log(a)}},pointerCancel:function(a){return this.pointerEnd(a)}};f.extendClass(ha,A);q.RotationRecognizer=
ha;g.DEFAULT_LAYOUT=null;g.HORIZONTAL_LAYOUT="horizontal";g.LEGACY_HORIZONTAL_LAYOUT="horizontal_layout";g.VERTICAL_LAYOUT="vertical";g.LEGACY_VERTICAL_LAYOUT="vertical_layout";g.ABSOLUTE_LAYOUT="absolute";g.LEGACY_ABSOLUTE_LAYOUT="absolute_layout";g.FLOW_LAYOUT="flow";g.LEGACY_FLOW_LAYOUT="flow_layout";g.SELECT_DELAY=150;g.UNSELECT_DELAY=300;g.MOVE_THRESHOLD=20;g.MAGNET_NONE=0;g.MAGNET_LEFT=3;g.MAGNET_BOTTOM=2;g.MAGNET_TOP=1;g.MAGNET_RIGHT=4;g.MAGNET_CENTER=5;g.NON_G_OBJECT="_non_g_object";g.ANY_PLACE=
"children";g._positionStyle=p;g.__comp_templates={};g._propagate_pointer_event=function(a,b,c){var d="";c.type===h.POINTER_START&&(d="POINTER_START");c.type===h.POINTER_END&&(d="POINTER_END");c.type===h.POINTER_MOVE&&(d="POINTER_MOVE");c.type=d;b.call(a,c)};var aa=null;g.prototype={_visible:!0,_magnet:g.MAGNET_NONE,_autosizing:null,_pointerevent_handlers:null,_enable:!0,_pos:null,__view_t_x:0,__view_t_y:0,_size:null,_opacity:1,_scaling:1,_rotation:0,_min_scale:0.5,_max_scale:3,_layout:null,_transform_origin:null,
_transforms_stack:null,_show_animation:null,__show_clb:null,_hide_animation:null,__hide_clb:null,destructor:function(){var a,b,c,d;this.__parent&&this.__parent.remove(this);for(a in this.__children)if(b=this.__children[a]){if(b instanceof Array)for(c=0;c<b.length;c++)d=b[c],f.free(d);else f.free(b);delete this.__children[a]}this.__children={};delete this.view;this.clearTransformStack();h.EventSource.prototype.destructor.call(this)},refresh:function(){var a,b,c,d;if((b=this.view)&&b.parentElement)this._size[0]=
b.offsetWidth,this._size[1]=b.offsetHeight,this._pos[0]=b.offsetLeft,this._pos[1]=b.offsetTop;for(a in this.__children)if(b=this.__children[a])if(b instanceof Array)for(c=0;c<b.length;c++)(d=b[c])&&d.refresh&&d.refresh();else b.refresh&&b.refresh()},clone:function(a,b){function c(a,b){for(var c=[],d=0,n=b.length,f;d<n;d++)f=b[d],c.push([f,ba(a,f)]);return c}function d(a,b,c){for(var d=0,n=b.length,f;d<n;d++)f=b[d],f.id||(f.id=h.createId()),c[f[0].id]=fa(a,f[1])}function n(a,b){function n(a){a.__gui_object__hack_view__?
h.push(a.__gui_object__hack_view__):a.view&&h.push(a.view);e(a)}function e(a){var b,c,d,g;for(b in a.__children)if(c=a.__children[b])if(f.isArray(c)){g=c.length;for(d=0;d<g;d++)n(c[d])}else n(c)}var g=a.view.cloneNode(!0),h=[],j;e(a);j=c(a.view,h);d(g,j,b);return g}b||(b={});b.__views__||(b.__views__={});a||(a={});if(!a.node){var e=b.__views__[this.view.id];e||(e=n(this,b.__views__));a.node=e}return h.EventSource.prototype.clone.call(this,a,b)},_clone_properties_value:function(a){for(var b in this)if("id"!=
b){if("size"==b||"position"==b)if(value=this.size,!value||3!==value.length||0===value[0]&&0===value[1])continue;this.isProperty(b)&&h.Object.__propertyCloneValue(b,this,a)}},_clone:function(a,b){function c(a,b){if(!a||!b)return null;if(b[a._id])return b[a._id];var c=b.__views__[a._id];return c?c._comp_:null}var d,f,e,g,j;h.EventSource.prototype._clone.call(this,a,b);this._show_animation&&(d=b[this._show_animation._id],a._show_animation=d?d:this._show_animation.clone(),a.__show_clb=this.__show_clb);
this._hide_animation&&(d=b[this._hide_animation._id],a._hide_animation=d?d:this._hide_animation.clone(),a.__hide_clb=this.__hide_clb);a.__parent=p;for(f in this.__children)if(d=this.__children[f],e=a._holes[f],d&&e)if(d instanceof Array)for(g=d.length;g--;)e=d[g],(j=c(e,b))?b[e._id]=j:(j=e.clone(null,b),a.add(j,f));else(j=c(d,b))?b[d._id]=j:(j=d.clone(null,b),a.add(j,f))},_getGUInode:function(a){var b=this.__getGUInode(a);if(b)return b;if(b=a.template?a.template:this.template)return a=new O(b),b=
a.__extend_component(this),f.free(a),b;if(this.html_template&&(b=O.parseHTML(this.html_template)))return b;b=f.isFunction(this.constructor)?this.constructor.name:f.isString(this.constructor)?this.constructor:g;console.warn("Impossible to instance view of component '"+b+", id ["+a.id+"]. A default one is created");return b=k.createElement("div")},__getGUInode:function(a){if(a.node)return a.node;var b=null,c,d,f;if(a.node_id&&(b=k.getElementById(a.node_id)))return b;if(c=a.node_ref)if((f=g._ref_template_reg.exec(c))&&
3==f.length?(d=f[1],c=f[2]):d=a.root_ref,c&&d&&((d=(d=h.Object._obs[d])&&d.view?d.view:k.getElementById(this.id))&&(b=ma(d,c)),b))return b;if(a.template_ref&&(b=this._getTemplateNode(a.template_ref))||a.id&&(b=k.getElementById(a.id)))return b;return p},_getTemplateNode:function(a){var b=null;aa||(aa=k.querySelector(".application_templates"))&&aa.parentElement.removeChild(aa);aa&&(b=aa.querySelector("."+a));if(b)return k.importNode(b,!0)},initComponent:function(){h.EventSource.prototype.initComponent.call(this);
this._pos=[-1,-1];this._size=[-1,-1];this._transform_origin=[0,0];this._autosizing=[4,4];this._holes={};this.__children={};this._pointerevent_handlers=[];this.__config__||(this.__config__={});this.__config__.id=this.id;(this.view=this._getGUInode(this.__config__))?(this.view.id=this._id,this.view._comp_=this,this.view.setAttribute("x-hag-comp",this.id),this._parse_view(this.view)):console.error("vs.ui.View constructor failed. No view!")},componentDidInitialize:function(){h.EventSource.prototype.componentDidInitialize.call(this);
this._magnet&&this.view.style.setProperty("position","absolute",null);this._magnet===g.MAGNET_CENTER&&(this._updateSizeAndPos(),this._applyTransformation())},viewDidAdd:function(){var a=this.view,b=this;a&&a.parentElement&&j.scheduleAction(function(){b._size[0]=a.offsetWidth;b._size[1]=a.offsetHeight;b._pos[0]=a.offsetLeft;b._pos[1]=a.offsetTop})},notify:function(){},_parse_view:function(a){if(a&&3!==a.nodeType){var b;if(null!==a.attributes&&(b=a.attributes.getNamedItem("x-hag-hole"))){this._holes[b.nodeValue]=
a;return}for(a=a.firstElementChild;a;)this._parse_view(a),a=a.nextElementSibling}},createAndAddComponent:function(a,b,c){var d=m[a];if(d){b||(b={});b.id||(b.id=h.createId());var f=this.__getGUInode(b),e;f||(f=this._getTemplateNode(a));f||d.prototype&&d.prototype.template&&(f=O.parseHTML(d.prototype.template));f||d.prototype&&d.prototype.node_template&&(f=k.importNode(d.prototype.node_template,!0));if(!f){f=a+".xhtml";e=g.__comp_templates[f];if(!e)if(e=new XMLHttpRequest,e.open("GET",f,!1),e.send(null),
4===e.readyState)if(200===e.status||0===e.status)e=e.responseText,g.__comp_templates[f]=e;else{console.error("Template file for component '"+a+"' unfound.");return}else{console.error("Pb when load the component '"+a+"' template.");return}f=O.parseHTML(e)}b.node=f;f=null;try{f=new d(b)}catch(j){a="Impossible to instanciate comp: "+a+(" => "+j.message);console.error(a);return}try{f.init(),f.configure(b)}catch(S){S.line&&S.sourceURL?(a="Error when initiate comp: "+a+(" => "+S.message),a+="\n"+S.sourceURL+
":"+S.line):a=S,console.error(a)}this.add(f,c);f.refresh();return f}console.error("Impossible to fund component '"+a+"'.")},isChild:function(a){if(!a)return!1;var b,c;for(b in this.__children)if((c=this.__children[b])&&(c===a||c instanceof Array&&-1!==c.indexOf(a)))return!0;return!1},add:function(a,b,c){if(a&&(c?a.__gui_object__hack_view__=c:c=a.view,!this.isChild(a))){var d,n,b=c?b?b:g.ANY_PLACE:g.NON_G_OBJECT;(d=this.__children[b])&&f.isArray(d)?d.push(a):d?(n=[],n.push(d),n.push(a),this.__children[b]=
n):this.__children[b]=a;b=this._holes[b];if(c&&b){if(c.parentElement){if(c.parentElement===b){a.__parent=this;a.viewDidAdd&&a.viewDidAdd();return}c.parentElement.removeChild(c)}b.appendChild(c);a.__parent=this;a.viewDidAdd&&a.viewDidAdd()}}},remove:function(a){if(a){var b,c,d;if(d=a.__gui_object__hack_view__?a.__gui_object__hack_view__:a.view)for(b in this.__children)if((c=this.__children[b])&&(c===a||c instanceof Array&&-1!==c.indexOf(a))){c instanceof Array?c.remove(a):delete this.__children[b];
d.parentElement&&d.parentElement.removeChild(d);a.__parent=null;break}}},removeAllChildren:function(a){function b(a){var b,c;if(b=d.__children[a]){if(b instanceof Array)for(;b.length;)c=b[0],d.remove(c),f.free(c);else d.remove(b),f.free(b);delete d.__children[a]}}var c,d=this;if(a)b(a);else{for(c in d.__children)b(c);this.__children={}}},findNodeRef:function(a){return!this.view?void 0:ma(this.view,a)},bind:function(a,b,c,d){if("POINTER_START"===a||"POINTER_END"===a||"POINTER_MOVE"===a||a===h.POINTER_START||
a===h.POINTER_END||a===h.POINTER_MOVE){if(!this.view)return;var n,e=this,k;c||(c="notify");if(f.isFunction(c))n=c;else if(f.isString(c)&&f.isFunction(b[c]))n=b[c];else{console.error("Invalid bind arguments.");return}if(!n){console.warn("Invalid bind arguments. Unknown func: "+c);return}e=this;k=function(a){if(!h.EVENT_SUPPORT_TOUCH||!(a.changedTouches&&1<a.changedTouches.length)){a.src=e;if(h.EVENT_SUPPORT_TOUCH&&a.changedTouches){a.pageX=a.changedTouches[0].pageX;a.pageY=a.changedTouches[0].pageY;
var c=f.getElementAbsolutePosition(e.view);a.offsetX=a.changedTouches[0].pageX-c.x;a.offsetY=a.changedTouches[0].pageY-c.y}g._propagate_pointer_event(b,n,a)}};"POINTER_START"===a&&(a=h.POINTER_START);"POINTER_MOVE"===a&&(a=h.POINTER_MOVE);"POINTER_END"===a&&(a=h.POINTER_END);this._pointerevent_handlers[b.id+a]=k;j.addPointerListener(this.view,a,k)}return h.EventSource.prototype.bind.call(this,a,b,c,d)},unbind:function(a,b){if(a&&b){if(a===h.POINTER_START||a===h.POINTER_END||a===h.POINTER_MOVE){var c=
this._pointerevent_handlers[b.id+a];if(!c||!this.view)return;j.removePointerListener(this.view,h.POINTER_END,c)}h.EventSource.prototype.unbind.call(this,a,b)}},_setMagnet:function(a){(this._magnet=a)?this.view.style.setProperty("position","absolute",null):this.view.style.removeProperty("position");this._updateSizeAndPos();this._applyTransformation()},_updateSizeAndPos:function(){var a=this._pos[0],b=this._pos[1],c=this._size[0],d=this._size[1],f=0,e=0,h="auto",j="auto",k="auto",m="auto",o=this._autosizing[0],
p=this._autosizing[1],q=this.view,r;if(q){if(r=q.parentElement)f=r.offsetWidth,e=r.offsetHeight;this._magnet===g.MAGNET_LEFT&&(a=0);this._magnet===g.MAGNET_TOP&&(b=0);if(4===o||5===o||6===o||7===o||2===o&&!f)h=a+"px";else if((2===o||0===o)&&f)h=100*(a/f)+"%";if(0<=c&&(1===o||3===o||5===o||7===o))k=f-(a+c),0>k&&(k=0),k+="px";if(4===p||5===p||6===p||7===p||2===p&&!e)j=b+"px";else if((2===p||0===p)&&e)j=100*(b/e)+"%";if(0<=d&&(1===p||3===p||5===p||7===p))m=e-(b+d),0>m&&(m=0),m+="px";this._magnet===g.MAGNET_BOTTOM&&
(j="auto",m="0px");this._magnet===g.MAGNET_RIGHT&&(h="auto",k="0px");this._magnet===g.MAGNET_CENTER&&(j="50%",m="auto",h="50%",k="auto");a=q.style;a.left=h;a.right=k;a.top=j;a.bottom=m;a.width=0>c?"":5===o||7===o?"auto":4===o||1===o?c+"px":2===o||3===o||6===o||0===o?f?100*(c/f)+"%":c+"px":"100%";a.height=0>d?"":5===p||7===p?"auto":4===p||1===p?d+"px":2===p||3===p||6===p||0===p?e?100*(d/e)+"%":d+"px":"100%"}},getStyle:function(a){if(!this.view)return p;var b=this.view.style,c;b&&(c=b[a]);return"opacity"===
a?c?parseFloat(c):1:"auto"===c?null:c},getComputedStyle:function(a){var b=this._getComputedStyle(this.view);return value=b?b[a]:null},_getComputedStyle:function(a){a||(a=this.view);if(!a)return p;var b=a.ownerDocument;if(!b||!b.defaultView)b=k;return!b||!b.defaultView?p:b.defaultView.getComputedStyle(a,null)},setStyle:function(a,b){a&&this.view&&this.view.style&&this.view.style.removeProperty&&this.view.style.setProperty&&("undefined"===typeof b?this.view.style.removeProperty(a):(f.isNumber(b)&&(b=
""+b),this.view.style.setProperty(a,b,null)))},setStyles:function(a){a&&this.view&&this.view.style&&f.setElementStyle(this.view,a)},addCssRules:function(a,b){f.addCssRules("#"+this._id+" "+a,b)},addCssRule:function(a,b){f.addCssRule("#"+this._id+" "+a,b)},redraw:function(a){if(this.view){var b=this.view,c=b.style.display,d=this;b.style.display="none";j.scheduleAction(function(){c?b.style.display=c:b.style.removeProperty("display");j.scheduleAction(function(){d.refresh();a&&f.isFunction(a)&&a.call(d)})})}},
show:function(){this.view&&!this._visible&&(this.__view_display?this.view.style.display=this.__view_display:this.view.style.removeProperty("display"),this.__view_display=p,this.__is_hidding=!1,this.__is_showing=!0,this._show_animation?this._show_animation.process(this,this._show_object,this):this._show_object())},_show_object:function(){if(this.view&&(this.__visibility_anim=p,this.__is_showing)){this.__is_showing=!1;this._visible=!0;var a=this;this.propertyChange();this.__show_clb&&(this._show_animation?
this.__show_clb.call(this):j.scheduleAction(function(){a.__show_clb.call(a)}))}},setShowAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._show_animation=null;else{if(a.constructor===j.fx.Animation)this._show_animation=a.clone();else if(f.isArray(a))this._show_animation=new j.fx.Animation,this._show_animation.setAnimations(a);else{console.warn("vs.ui.View.setShowAnimation invalid parameters!");return}b&&(b.duration&&(this._show_animation.duration=b.duration),b.timing&&(this._show_animation.timing=
b.timing),b.origin&&(this._show_animation.origin=b.origin),b.iterationCount&&(this._show_animation.iterationCount=b.iterationCount),b.delay&&(this._show_animation.delay=b.delay))}f.isFunction(c);this.__show_clb=c},hide:function(){if(this.view&&(this._visible||this.__is_showing))this.__is_showing=this._visible=!1,this.__is_hidding=!0,this._hide_animation?this._hide_animation.process(this,this._hide_object,this):this._hide_object()},_hide_object:function(){this.view&&!this._visible&&(this.__visibility_anim=
p,this.__is_hidding&&(this.__is_hidding=!1,this.view.style.display?(this.__view_display=this.view.style.display,"none"===this.__view_display&&(this.__view_display=p)):this.__view_display=p,this.view.style.display="none",this.__hide_clb&&this.__hide_clb.call(this),this.propertyChange()))},setHideAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._hide_animation=null;else{if(a.constructor===j.fx.Animation)this._hide_animation=a.clone();else if(f.isArray(a))this._hide_animation=new j.fx.Animation,
this._hide_animation.setAnimations(a);else{console.warn("vs.ui.View.setHideAnimation invalid parameters!");return}b&&(b.duration&&(this._hide_animation.duration=b.duration),b.timing&&(this._hide_animation.timing=b.timing),b.origin&&(this._hide_animation.origin=b.origin),b.iterationCount&&(this._hide_animation.iterationCount=b.iterationCount),b.delay&&(this._hide_animation.delay=b.delay))}f.isFunction(c);this.__hide_clb=c},setVisible:function(a){this.view&&f.setElementVisibility(this.view,a)},hasClassName:function(a){return!this.view?
!1:f.hasClassName(this.view,a)},addClassName:function(){if(this.view){var a=Array.prototype.slice.call(arguments);a.unshift(this.view);f.addClassName.apply(this.view,a)}},removeClassName:function(a){if(this.view){var b=Array.prototype.slice.call(arguments);b.unshift(this.view);f.removeClassName.apply(this.view,b)}},toggleClassName:function(a){this.view&&f.isString(a)&&f.toggleClassName(this.view,a)},_propagateToParent:function(a){this._bubbling&&this.__parent&&this.__parent.handleEvent&&this.__parent.handleEvent(a)},
notifyToParent:function(a){this.__parent&&(this.__parent.handleEvent?this.__parent.handleEvent(a):this.__parent.notify&&this.__parent.notify(a))},_didEnable:function(){},animate:function(a,b,c){var d;if(a instanceof j.fx.Animation)d=a;else if(f.isArray(a))d=new j.fx.Animation,d.setAnimations(a);else{console.warn("vs.ui.View.animate invalid parameters!");return}b&&(b.duration&&(d.duration=b.duration),b.timing&&(d.timing=b.timing),b.origin&&(d.origin=b.origin),b.iterationCount&&(d.iterationCount=b.iterationCount),
b.delay&&(d.delay=b.delay));return d.process(this,c,this)},translate:function(a,b){f.isNumber(a)&&f.isNumber(b)&&!(this.__view_t_x===a&&this.__view_t_y===b)&&(this.__view_t_x=a,this.__view_t_y=b,this._applyTransformation())},rotate:function(a){f.isNumber(a)&&this._rotation!==a&&(this._rotation=a,this._applyTransformation())},scale:function(a){f.isNumber(a)&&(a>this._max_scale&&(a=this._max_scale),a<this._min_scale&&(a=this._min_scale),this._scaling!==a&&(this._scaling=a,this._applyTransformation()))},
setNewTransformOrigin:function(a){a&&f.isNumber(a.x)&&f.isNumber(a.y)&&(this.flushTransformStack(),this._transform_origin=[a.x,a.y])},flushTransformStack:function(){var a=new j.CSSMatrix,a=a.translate(this._transform_origin[0],this._transform_origin[1],0),a=a.translate(this.__view_t_x,this.__view_t_y,0),a=a.rotate(0,0,this._rotation),a=a.scale(this._scaling,this._scaling,1),a=a.translate(-this._transform_origin[0],-this._transform_origin[1],0);this._transforms_stack||(this._transforms_stack=a);this._transforms_stack=
a.multiply(this._transforms_stack);delete a;this.__view_t_y=this.__view_t_x=0;this._scaling=1;this._rotation=0},pushNewTransform:function(a){a&&(this._transforms_stack=this._transforms_stack?a.multiply(this._transforms_stack):a)},clearTransformStack:function(){this._transforms_stack&&delete this._transforms_stack;this._transforms_stack=p},getCTM:function(){var a=new j.CSSMatrix,a=a.translate(this._transform_origin[0],this._transform_origin[1],0),a=a.translate(this.__view_t_x,this.__view_t_y,0),a=
a.rotate(0,0,this._rotation),a=a.scale(this._scaling,this._scaling,1),a=a.translate(-this._transform_origin[0],-this._transform_origin[1],0);return this._transforms_stack?a.multiply(this._transforms_stack):a},getParentCTM:function(){function a(b){return!b?new j.CSSMatrix:a(b.__parent).multiply(b.getCTM())}return a(this.__parent)},_applyTransformation:function(){var a=this.getCTM(),b=a.getMatrix3dStr();this._magnet===g.MAGNET_CENTER&&(b+=" translate(-50%,-50%)");J(this.view,b);delete a}};f.extend(g.prototype,
va);f.extendClass(g,h.EventSource);f.defineClassProperties(g,{size:{set:function(a){f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&this._updateSizeAndPos())},get:function(){return this._size.slice()}},position:{set:function(a){a&&f.isArray(a)&&2==a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._pos[0]=a[0],this._pos[1]=a[1],this.view&&this._updateSizeAndPos())},get:function(){return this._pos.slice()}},autosizing:{set:function(a){a&&
f.isArray(a)&&2==a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(this._autosizing[0]===a[0]&&this._autosizing[1]===a[1])&&(this._autosizing[0]=a[0],this._autosizing[1]=a[1],this.view&&this._updateSizeAndPos())}},magnet:{set:function(a){this._magnet===a||!f.isNumber(a)||0>a||5<a||this._setMagnet(a)}},visible:{set:function(a){a?this.show():this.hide()},get:function(){return this._visible}},bubbling:{set:function(a){this._bubbling=a?!0:!1}},enable:{set:function(a){a&&!this._enable?(this._enable=!0,this.removeClassName("disabled"),
this._didEnable()):!a&&this._enable&&(this._enable=!1,this.addClassName("disabled"),this._didEnable())},get:function(){return this._enable}},opacity:{set:function(a){if(f.isNumber(a)&&!(0>a||1<a))this.view&&(this.view.style.opacity=a),this._opacity=a}},translation:{set:function(a){f.isArray(a)&&2===a.length&&this.translate(a[0],a[1])},get:function(){return[this.__view_t_x,this.__view_t_y]}},rotation:{set:function(a){this.rotate(a)},get:function(){return this._rotation}},scaling:{set:function(a){this.scale(a)},
get:function(){return this._scaling}},minScale:{set:function(a){f.isNumber(a)&&(this._min_scale=a,this._scaling<this._min_scale&&this.scale(this._min_scale))},get:function(){return this._min_scale}},maxScale:{set:function(a){f.isNumber(a)&&(this._max_scale=a,this._scaling>this._max_scale&&this.scale(this._max_scale))},get:function(){return this._max_scale}},transformOrigin:{set:function(a){f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._transform_origin[0]=a[0],this._transform_origin[1]=
a[1])},get:function(){return this._transform_origin.slice()}},showAnimmation:{set:function(a){this.setShowAnimation(a)}},hideAnimation:{set:function(a){this.setHideAnimation(a)}},layout:{set:function(a){a!==g.HORIZONTAL_LAYOUT&&a!==g.DEFAULT_LAYOUT&&a!==g.ABSOLUTE_LAYOUT&&a!==g.VERTICAL_LAYOUT&&a!==g.FLOW_LAYOUT&&a!==g.LEGACY_HORIZONTAL_LAYOUT&&a!==g.LEGACY_ABSOLUTE_LAYOUT&&a!==g.LEGACY_VERTICAL_LAYOUT&&a!==g.LEGACY_FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):(this._layout&&this.removeClassName(this._layout),
(this._layout=!a||-1!==a.indexOf("_layout")?a:a+"_layout")&&this.addClassName(this._layout))}},innerHTML:{set:function(a){this.view&&f.safeInnerHTML(this.view,a)}}});g._ref_template_reg=/(\w+)#(\w+)/;q.View=g;g.getDeviceCSSCode=function(){var a=k.createElement("div"),b;a.className="device_test";k.body.appendChild(a);b=k.defaultView.getComputedStyle(a,null).getPropertyValue("margin-top");k.body.removeChild(a);return parseInt(b||0,10)};var u=function(a){this._layout=p;this.parent=g;this.parent(a);this.constructor=
u};u.CSS_DEFAULT=0;u.CSS_IOS=5;u.CSS_ANDROID=9;u.CSS_MEEGO=10;u.CSS_WP7=6;u.CSS_SYMBIAN=8;u.CSS_BLACKBERRY=7;u.CSS_PURE=100;var R={},Aa="onorientationchange"in m?"orientationchange":"resize";j.Application_applications=R;u.prototype={_prevent_scroll:!0,initComponent:function(){R[this.id]=this;g.prototype.initComponent.call(this);this.preventScroll=!0;if(this.view instanceof HTMLHtmlElement){var a=this.view;a._comp_=p;this.view=a.querySelector("body");if(!this.view){console.error("Invalid Application view");
return}this.view._comp_=this;a.removeAttribute("id");a.removeAttribute("x-hag-ref");a.removeAttribute("x-hag-comp")}this.view.setAttribute("id",this.id);this.view.setAttribute("x-hag-ref",this.id);this.view.setAttribute("x-hag-comp",this.id);var b=this;m.addEventListener(Aa,function(){var a=m.deviceConfiguration.setOrientation(m.orientation);a&&b.propagate("deviceChanged",a,null,!0)})},exit:function(){u.exit()},applicationStarted:function(){},_updateSizeAndPos:function(){this.view.style.width=this._size[0]+
"px";this.view.style.height=this._size[1]+"px";this.view.style.right="auto";this.view.style.bottom="auto";this.view.style.left=this._pos[0]+"px";this.view.style.top=this._pos[1]+"px";this.view.style.right="auto";this.view.style.bottom="auto"},setActiveStyleSheet:function(a){u.setActiveStyleSheet(a);this.propagate("deviceChanged",a,null,!0)},orientationWillChange:function(){},loadScript:function(a){var b=this;f.importFile(a,k,function(a){a&&b.propagate("scriptloaded",a)},"js")},loadCSS:function(a){var b=
this;f.importFile(a,k,function(a){a&&b.propagate("cssloaded",a)},"css")}};f.extendClass(u,g);f.defineClassProperties(u,{size:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSizeAndPos(),m.resizeTo(this._size[0],this._size[1])))},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}},preventScroll:{set:function(a){this._prevent_scroll=
a?!0:!1;k.preventScroll=a},get:function(){this._prevent_scroll=k.preventScroll;return this.__prevent_scroll}}});u.exit=function(){m.close&&m.close()};u.configureDevice=function(){function a(){function a(b,c){var d=k.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",b);d.setAttribute("media","screen");c?k.head.insertBefore(d,c):k.head.appendChild(d)}var b=m.target_css?m.target_css[m.deviceConfiguration.targetId]:"";b||(b="default");for(var c=
k.head.querySelectorAll("link"),f,e=0;e<c.length;e++)if(f=c.item(e),-1!==f.getAttribute("href").indexOf("vs_ui.css")){f=f.nextElementSibling;break}else f=null;if("default"==b)switch(m.deviceConfiguration.os){case r.OS_IOS:a("lib/css/vs_ui_ios.css",f);break;case r.OS_ANDROID:a("lib/css/vs_ui_android.css",f)}else a("lib/css/vs_ui_"+b+".css",f)}var b=m.deviceConfiguration.generateDeviceId(!0),c;m.deviceConfiguration.deviceId=b;m.deviceConfiguration.virtualScreenSize=null;if(m.target_device_ids)for(c in m.target_device_ids)if(-1!==
m.target_device_ids[c].indexOf(b)){m.deviceConfiguration.targetId=c;m.deviceConfiguration.setOrientation(m.orientation||0,!0);a();return}deviceConfiguration.screenSize===r.SS_4_INCH&&(c="phone3_4");deviceConfiguration.screenSize===r.SS_7_INCH&&(c="tablet7");deviceConfiguration.screenSize===r.SS_10_INCH&&(c="phone10");if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)c+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)c+="_l";if(m.target_device_ids&&
m.target_device_ids[c])m.deviceConfiguration.targetId=c,m.deviceConfiguration.setOrientation(m.orientation||0,!0),a();else{b=ra(r.SS_7_INCH);deviceConfiguration.screenSize===r.SS_10_INCH&&(c="tablet7");if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)c+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)c+="_l";if(m.target_device_ids&&m.target_device_ids[c])m.deviceConfiguration.targetId=c,m.deviceConfiguration.virtualScreenSize=b,m.deviceConfiguration.setOrientation(m.orientation||
0,!0),a();else{c="phone3_4";b=ra(r.SS_4_INCH);if(0===deviceConfiguration.orientation||90===deviceConfiguration.orientation)c+="_p";if(180===deviceConfiguration.orientation||-180===deviceConfiguration.orientation)c+="_l";m.target_device_ids&&m.target_device_ids[c]&&(m.deviceConfiguration.targetId=c,m.deviceConfiguration.virtualScreenSize=b,m.deviceConfiguration.setOrientation(m.orientation||0,!0),a())}}};u.getOrientation=function(){return m.deviceConfiguration.getOrientation()};u.start=function(){var a,
b;for(a in R)b=R[a],b.propertyChange(),b.applicationStarted(),j.scheduleAction(function(){b.refresh()});j.scheduleAction(function(){j._default_df_.build()})};u.stop=function(){var a,b;for(a in R)b=R[a],f.free(b);R={};for(a in j.core.Object._obs)b=j.core.Object._obs[a],j.util.free(b)};u.sendStart=function(){console.log("Application.sendStart is deprecated. Please use Application.start");u.start()};u.preloadTemplates=function(a){for(var b=0;b<a.length;b++)f.preloadTemplate(a[b])};var ea=function(a){for(var b=
0;b<a.length;b++)this.preload(a[b])};m.ImagePreloader=ea;ea.__image_path={};ea.prototype.preload=function(a){ea.__image_path[a]||((new Image).src=a,ea.__image_path[a]=!0)};u.prototype.mainViewVisibility=function(){};u.prototype.setImageBackground=function(){};u.prototype.loadingStart=function(){};u.prototype.loadingStop=function(){};q.Application=u;var s=j.core.createClass({parent:j.ui.View,properties:{delegate:{set:function(a){this._delegate=a}},mode:{set:function(a){a!==s.TABLET_MODE&&a!==s.MOBILE_MODE||
(this.removeClassName(this._mode),this._mode=a,this.addClassName(this._mode),this._orientation===s.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(){return this._mode}},hideMainPanelButton:{set:function(a){this._hide_main_panel_button=a;this._mode==s.TABLET_MODE&&this._hide_main_panel_button.hide();this._hide_main_panel_button.bind("select",this)}},showPopOverButton:{set:function(a){this._show_pop_over_button=a;this._mode==s.MOBILE_MODE&&this._show_pop_over_button.hide();
this._show_pop_over_button.bind("select",this)}},secondPanelPosition:{set:function(a){a!==s.LEFT&&a!==s.RIGHT&&a!==s.TOP&&a!==s.BOTTOM||(this.removeClassName(this._second_panel_position),this._second_panel_position=a,this.addClassName(this._second_panel_position))}},orientation:{set:function(a){a!==s.VERTICAL&&a!==s.HORIZONTAL||(this.removeClassName(this._orientation),this._orientation=a,this.addClassName(this._orientation),a===s.VERTICAL?this._set_orientation(0):this._set_orientation(90))},get:function(){return this._orientation}}},
_delegate:null,_mode:"",_second_panel_position:"",_orientation:"",_split_views:null,_fisrt_view_width:320,_pop_over_border_width:8,_pop_over:null,constructor:function(a){this._super(a);this._left_views=[];this._pop_over=new w},initComponent:function(){this._super();this._pop_over.init();this._pop_over.hide();k.body.appendChild(this._pop_over.view);this.mode=this._mode?this._mode:s.TABLET_MODE;if(this._orientation)this.orientation=this._orientation;else{var a=m.deviceConfiguration.getOrientation();
this.orientation=0===a||180===a?s.VERTICAL:s.HORIZONTAL}this.secondPanelPosition=this._second_panel_position?this._second_panel_position:s.LEFT},add:function(a,b){"second_panel"===b?(this._left_views.push(a),this._mode===s.MOBILE||this._orientation===s.HORIZONTAL?this._super(a,"second_panel"):this._pop_over.add(a)):this._super(a,"main_panel")},removeAllChildren:function(){var a,b,c;for(a in this.__children)if(b=this.__children[a]){if(b instanceof Array)for(;b.length;)c=b[0],this.remove(c),f.free(c);
else this.remove(b),f.free(b);delete this.__children[a]}this.__children={}},refresh:function(){this._super();this._pop_over.visible&&this._pop_over.refresh()},orientationWillChange:function(a){this.orientation=90===a||-90===a?s.HORIZONTAL:s.VERTICAL},_set_orientation:function(a){var b;if(b=this._left_views[0])this._mode===s.MOBILE_MODE||90===a||-90===a?(this._pop_over.hide(),this._pop_over.isChild(b)&&this._pop_over.remove(b),this.isChild(b)||g.prototype.add.call(this,b,"second_panel"),b.show(b.refresh),
this._delegate&&this._delegate.willShowView&&this._delegate.willShowView(b,this._pop_over),this._show_pop_over_button&&this._show_pop_over_button.hide()):(this.isChild(b)&&g.prototype.remove.call(this,b),this._pop_over.isChild(b)||this._pop_over.add(b),b.show(),this._pop_over.size=[this._fisrt_view_width+2*this._pop_over_border_width,500],this._show_pop_over_button&&this._show_pop_over_button.show(),this._delegate&&this._delegate.willShowView&&this._delegate.willHideView(b,this._pop_over))},orientationDidChange:function(){this.refresh()},
showPopOver:function(a,b){this._mode!==s.TABLET_MODE||this._orientation!==s.VERTICAL||(this._pop_over.show(a,b),this._pop_over.refresh())},hidePopOver:function(){this._pop_over.hide()},showMainView:function(a){var b=this;this._mode===s.MOBILE_MODE&&(this._hide_main_panel_button&&this._hide_main_panel_button.show(),a?b.addClassName("main_view_visible"):setTimeout(function(){b.addClassName("main_view_visible")},g.UNSELECT_DELAY))},hideMainView:function(){this._mode===s.MOBILE_MODE&&(this._hide_main_panel_button&&
this._hide_main_panel_button.hide(),this.removeClassName("main_view_visible"))},notify:function(a){"select"==a.type&&a.src==this._hide_main_panel_button&&this.hideMainView();"select"==a.type&&a.src==this._show_pop_over_button&&this.showPopOver([20,20])}});s.TABLET_MODE="tablet";s.MOBILE_MODE="mobile";s.VERTICAL="vertical";s.HORIZONTAL="horizontal";s.RIGHT="right";s.LEFT="left";s.BOTTOM="bottom";s.TOP="top";q.SplitView=s;"WebKitCSSMatrix"in m&&new WebKitCSSMatrix;(function(a,b,c){function d(a){if(""===
e)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return e+a}var f=Math,e=c.CSS_VENDOR,g=c.CSS_VENDOR?"-"+c.CSS_VENDOR+"-":"",h=d("transform"),j=d("transitionProperty"),k=c.TRANSITION_DURATION,m=c.TRANSFORM_ORIGIN,o=c.TRANSITION_TIMING_FUNC,q=c.TRANSITION_DELAY,r=/android/gi.test(navigator.appVersion),s=/iphone|ipad/gi.test(navigator.appVersion);/hp-tablet/gi.test(navigator.appVersion);var t=c.SUPPORT_3D_TRANSFORM,u="ontouchstart"in a,w=c.SUPPORT_CSS_TRANSFORM,x="onorientationchange"in a?"orientationchange":
"resize",B=c.POINTER_START,y=c.POINTER_MOVE,A=c.POINTER_END,D=c.POINTER_CANCEL,C=c.TRANSITION_END,F=c.requestAnimationFrame,E=c.cancelRequestAnimationFrame,z=t?" translateZ(0)":"",G=function(c,f,d){var e=this,n;e.wrapper="object"==typeof c?c:b.getElementById(c);e.wrapper.style.overflow="hidden";e.scroller=f;e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,
fixedScrollbar:r,hideScrollbar:s,fadeScrollbar:s&&t,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(n in d)e.options[n]=d[n];e.x=e.options.x;e.y=e.options.y;e.options.useTransform=w&&e.options.useTransform;
e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar;e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar;e.options.zoom=e.options.useTransform&&e.options.zoom;e.options.useTransition=w&&e.options.useTransition;e.options.zoom&&r&&(z="");e.scroller.style[j]=e.options.useTransform?g+"transform":"top left";e.scroller.style[k]="0";e.scroller.style[m]="0 0";e.options.useTransition&&(e.scroller.style[o]="cubic-bezier(0.33,0.66,0.66,1)");e.options.useTransform?e.scroller.style[h]="translate("+
e.x+"px,"+e.y+"px)"+z:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px";e.options.useTransition&&(e.options.fixedScrollbar=!0);e.refresh();e._bind(x,a);e._bind(B);!u&&"none"!=e.options.wheelAction&&(e._bind("DOMMouseScroll"),e._bind("mousewheel"));e.options.checkDOMChanges&&(e.checkDOMTime=setInterval(function(){e._checkDOMChanges()},500))};G.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case B:if(!u&&
0!==a.button)break;this._start(a);break;case y:this._move(a);break;case A:case D:this._end(a);break;case x:this._resize();break;case "DOMMouseScroll":case "mousewheel":this._wheel(a);break;case C:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(a){var c;this[a+"Scrollbar"]?(this[a+"ScrollbarWrapper"]||(c=
b.createElement("div"),this.options.scrollbarClass?c.className=this.options.scrollbarClass+a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:opacity;"+g+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?
"0":"1"),this.wrapper.appendChild(c),this[a+"ScrollbarWrapper"]=c,c=b.createElement("div"),this.options.scrollbarClass||(c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+g+"background-clip:padding-box;"+g+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+g+"border-radius:3px;border-radius:3px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:"+g+"transform;"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+
g+"transition-duration:0;"+g+"transform: translate(0,0)"+z,this.options.useTransition&&(c.style.cssText+=";"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[a+"ScrollbarWrapper"].appendChild(c),this[a+"ScrollbarIndicator"]=c),"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=f.max(f.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=
this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=f.max(f.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(a,!0)):
this[a+"ScrollbarWrapper"]&&(w&&(this[a+"ScrollbarIndicator"].style[h]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},r?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[h]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+z:(a=f.round(a),b=f.round(b),this.scroller.style.left=
a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var c="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(c*=this[a+"ScrollbarProp"],0>c?(this.options.fixedScrollbar||(c=this[a+"ScrollbarIndicatorSize"]+f.round(3*c),8>c&&(c=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px"),c=0):c>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?c=this[a+"ScrollbarMaxScroll"]:(c=this[a+"ScrollbarIndicatorSize"]-
f.round(3*(c-this[a+"ScrollbarMaxScroll"])),8>c&&(c=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px",c=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-c))),this[a+"ScrollbarWrapper"].style[q]="0",this[a+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style[h]="translate("+("h"==a?c+"px,0)":"0,"+c+"px)")+z)},_start:function(b){var c=b.pointerList[0],d,e;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,
b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&1<b.nbPointers&&(e=f.abs(b.pointerList[0].pageX-b.pointerList[1].pageX),d=f.abs(b.pointerList[0].pageY-b.pointerList[1].pageY),this.touchesDistStart=f.sqrt(e*e+d*d),this.originX=f.abs(b.pointerList[0].pageX+b.pointerList[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=f.abs(b.pointerList[0].pageY+
b.pointerList[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b));if(this.options.momentum&&(this.options.useTransform?(d=getComputedStyle(this.scroller,null)[h].replace(/[^0-9\-.,]/g,"").split(","),e=+(d[12]||d[4]),d=+(d[13]||d[5])):(e=+getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),d=+getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),e!=this.x||d!=this.y))this.options.useTransition?this._unbind(C):E(this.aniTime),
this.steps=[],this._pos(e,d),this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(y,a);this._bind(A,a);this._bind(D,a)}},_move:function(a){var b=a.pointerList[0],c=b.pageX-this.pointX,d=b.pageY-this.pointY,e=this.x+c,g=this.y+d,j=a.timeStamp||Date.now();
this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&1<a.nbPointers)e=f.abs(a.pointerList[0].pageX-a.pointerList[1].pageX),g=f.abs(a.pointerList[0].pageY-a.pointerList[1].pageY),this.touchesDist=f.sqrt(e*e+g*g),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=
b/this.scale,e=this.originX-this.originX*this.lastScale+this.x,g=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[h]="translate("+e+"px,"+g+"px) scale("+b+")"+z,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<e||e<this.maxScrollX)e=this.options.bounce?this.x+c/2:0<=e||0<=this.maxScrollX?0:this.maxScrollX;if(g>this.minScrollY||g<this.maxScrollY)g=this.options.bounce?this.y+d/2:g>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:
this.maxScrollY;this.distX+=c;this.distY+=d;this.absDistX=f.abs(this.distX);this.absDistY=f.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(g=this.y,d=0):this.absDistY>this.absDistX+5&&(e=this.x,c=0)),this.moved=!0,this._pos(e,g),this.dirX=0<c?-1:0>c?1:0,this.dirY=0<d?-1:0>d?1:0,300<j-this.startTime&&(this.startTime=j,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,a))}},_end:function(c){if(0===
c.nbPointers){var d=this,e=c.changedPointerList[0],g,j,m={dist:0,time:0},v={dist:0,time:0},o=(c.timeStamp||Date.now())-d.startTime,p=d.x,H=d.y;d._unbind(y,a);d._unbind(A,a);d._unbind(D,a);d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,c);if(d.zoomed)p=d.scale*d.lastScale,p=Math.max(d.options.zoomMin,p),p=Math.min(d.options.zoomMax,p),d.lastScale=p/d.scale,d.scale=p,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[k]="200ms",d.scroller.style[h]=
"translate("+d.x+"px,"+d.y+"px) scale("+d.scale+")"+z,d.zoomed=!1,d.refresh(),d.options.onZoomEnd&&d.options.onZoomEnd.call(d,c);else{if(d.moved){if(300>o&&d.options.momentum){m=p?d._momentum(p-d.startX,o,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):m;v=H?d._momentum(H-d.startY,o,-d.y,0>d.maxScrollY?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):v;p=d.x+m.dist;H=d.y+v.dist;if(0<d.x&&0<p||d.x<d.maxScrollX&&p<d.maxScrollX)m={dist:0,time:0};if(d.y>d.minScrollY&&
H>d.minScrollY||d.y<d.maxScrollY&&H<d.maxScrollY)v={dist:0,time:0}}m.dist||v.dist?(m=f.max(f.max(m.time,v.time),10),d.options.snap&&(v=p-d.absStartX,o=H-d.absStartY,f.abs(v)<d.options.snapThreshold&&f.abs(o)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(v=d._snap(p,H),p=v.x,H=v.y,m=f.max(v.time,m))),d.scrollTo(f.round(p),f.round(H),m)):d.options.snap?(v=p-d.absStartX,o=H-d.absStartY,f.abs(v)<d.options.snapThreshold&&f.abs(o)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,
200):(v=d._snap(d.x,d.y),(v.x!=d.x||v.y!=d.y)&&d.scrollTo(v.x,v.y,v.time))):d._resetPos(200)}else u&&(d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,c),d.zoom(d.pointX,d.pointY,1==d.scale?d.options.doubleTapZoom:1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,c)},200)):this.options.handleClick&&(d.doubleTapTimer=setTimeout(function(){d.doubleTapTimer=null;for(g=e.target;1!=g.nodeType;)g=
g.parentNode;"SELECT"!=g.tagName&&"INPUT"!=g.tagName&&"TEXTAREA"!=g.tagName&&(j=b.createEvent("MouseEvents"),j.initMouseEvent("click",!0,!0,c.view,1,e.screenX,e.screenY,e.clientX,e.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),j._fake=!0,g.dispatchEvent(j))},d.options.zoom?250:0))),d._resetPos(400);d.options.onTouchEnd&&d.options.onTouchEnd.call(d,c)}}},_resetPos:function(a){var b=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:
this.y<this.maxScrollY?this.maxScrollY:this.y;b==this.x&&c==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==e&&(this.hScrollbarWrapper.style[q]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&("webkit"==e&&(this.vScrollbarWrapper.style[q]="300ms"),this.vScrollbarWrapper.style.opacity="0")):this.scrollTo(b,c,a||0)},_wheel:function(a){var b=this,c,
d;if("wheelDeltaX"in a)c=a.wheelDeltaX/12,d=a.wheelDeltaY/12;else if("wheelDelta"in a)c=d=a.wheelDelta/12;else if("detail"in a)c=d=3*-a.detail;else return;"zoom"==b.options.wheelAction?(d=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),d<b.options.zoomMin&&(d=b.options.zoomMin),d>b.options.zoomMax&&(d=b.options.zoomMax),d!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,d,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&
b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400))):(c=b.x+c,d=b.y+d,0<c?c=0:c<b.maxScrollX&&(c=b.maxScrollX),d>b.minScrollY?d=b.minScrollY:d<b.maxScrollY&&(d=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(c,d,0))},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind(C),this._startAni())},_startAni:function(){var a=this,b=a.x,c=a.y,d=Date.now(),e,g,h;a.animating||(a.steps.length?(e=a.steps.shift(),e.x==b&&e.y==c&&(e.time=0),a.animating=!0,a.moved=!0,a.options.useTransition?(a._transitionTime(e.time),
a._pos(e.x,e.y),a.animating=!1,e.time?a._bind(C):a._resetPos(0)):(h=function(){var j=Date.now();j>=d+e.time?(a._pos(e.x,e.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni()):(j=(j-d)/e.time-1,g=f.sqrt(1-j*j),j=(e.x-b)*g+b,a._pos(j,(e.y-c)*g+c),a.animating&&(a.aniTime=F(h)))},h())):a._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[k]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[k]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[k]=
a)},_momentum:function(a,b,c,d,e){var b=f.abs(a)/b,g=b*b/0.0012;0<a&&g>c?(c+=e/(6/(6.0E-4*(g/b))),b=b*c/g,g=c):0>a&&g>d&&(d+=e/(6/(6.0E-4*(g/b))),b=b*d/g,g=d);return{dist:g*(0>a?-1:1),time:f.round(b/6.0E-4)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,c*=this.scale);return{left:b,top:c}},_snap:function(a,b){var c,d,e;e=this.pagesX.length-1;for(c=0,d=this.pagesX.length;c<d;c++)if(a>=this.pagesX[c]){e=c;
break}e==this.currPageX&&0<e&&0>this.dirX&&e--;a=this.pagesX[e];d=(d=f.abs(a-this.pagesX[this.currPageX]))?500*(f.abs(this.x-a)/d):0;this.currPageX=e;e=this.pagesY.length-1;for(c=0;c<e;c++)if(b>=this.pagesY[c]){e=c;break}e==this.currPageY&&0<e&&0>this.dirY&&e--;b=this.pagesY[e];c=(c=f.abs(b-this.pagesY[this.currPageY]))?500*(f.abs(this.y-b)/c):0;this.currPageY=e;e=f.round(f.max(d,c))||200;return{x:a,y:b,time:e}},_bind:function(a,b,d){c.addPointerListener(b||this.scroller,a,this,!!d)},_unbind:function(a,
b,d){c.removePointerListener(b||this.scroller,a,this,!!d)},destroy:function(){this.scroller.style[h]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(x,a);this._unbind(B);this._unbind(y,a);this._unbind(A,a);this._unbind(D,a);this.options.hasTouch||(this._unbind("DOMMouseScroll"),this._unbind("mousewheel"));this.options.useTransition&&this._unbind(C);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},
refresh:function(){var a,b,c,d=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=f.round(this.scroller.offsetWidth*this.scale);this.scrollerH=f.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;
this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=
[];c=this.scroller.querySelectorAll(this.options.snap);for(a=0,b=c.length;a<b;a++)d=this._offset(c[a]),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,this.pagesX[a]=d.left<this.maxScrollX?this.maxScrollX:d.left*this.scale,this.pagesY[a]=d.top<this.maxScrollY?this.maxScrollY:d.top*this.scale}else if(this.options.snap){for(this.pagesX=[];d>=this.maxScrollX;)this.pagesX[b]=d,d-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-
1]+this.pagesX[this.pagesX.length-1]);b=d=0;for(this.pagesY=[];d>=this.maxScrollY;)this.pagesY[b]=d,d-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[k]="0",this._resetPos(400))},scrollTo:function(a,b,c,d){var f=a;this.stop();f.length||(f=[{x:a,y:b,time:c,relative:d}]);for(a=0,b=f.length;a<b;a++)f[a].relative&&
(f[a].x=this.x-f[a].x,f[a].y=this.y-f[a].y),this.steps.push({x:f[a].x,y:f[a].y,time:f[a].time||0});this._startAni()},scrollToElement:function(a,b){var c;if(a=a.nodeType?a:this.scroller.querySelector(a))c=this._offset(a),c.left+=this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,c.left=0<c.left?0:c.left<this.maxScrollX?this.maxScrollX:c.left,c.top=c.top>this.minScrollY?this.minScrollY:c.top<this.maxScrollY?this.maxScrollY:c.top,b=b===p?f.max(2*f.abs(c.left),2*f.abs(c.top)):b,this.scrollTo(c.left,
c.top,b)},scrollToPage:function(a,b,c){c=c===p?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);this.options.snap?(a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b]):(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),
b<this.maxScrollY&&(b=this.maxScrollY));this.scrollTo(a,b,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(y,a);this._unbind(A,a);this._unbind(D,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(C):E(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,c,d){var f=c/this.scale;this.options.useTransform&&(this.zoomed=!0,d=d===p?200:d,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,
this.x=a-a*f+this.x,this.y=b-b*f+this.y,this.scale=c,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[k]=d+"ms",this.scroller.style[h]="translate("+this.x+"px,"+this.y+"px) scale("+c+")"+z,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};"undefined"!==typeof exports?exports.iScroll=G:a.iScroll=G})(m,k,j);t.NO_SCROLL=0;t.VERTICAL_SCROLL=
1;t.HORIZONTAL_SCROLL=2;t.SCROLL=3;t.NO_PINCH=0;t.ROTATION=1;t.SCALE=2;t.ROTATION_AND_SCALE=3;t.prototype={_delegate:null,_scroll:!1,__scroll_activated:!1,_pinch:t.NO_PINCH,_ab_view_t_x:0,_ab_view_t_y:0,_ab_view_s:1,_ab_view_r:0,_animation_duration:0,refresh:function(){var a,b=this.size,c=b[0],d=b[1],f,e=this._getComputedStyle(this.view),h=0,k=0;this._sub_view&&(this._sub_view.style.height="",this._sub_view.style.width="",j.scheduleAction(function(){if(this.__i__){g.prototype.refresh.call(this);e&&
(f=e["border-right-width"],h+=f?parseInt(f,10):0,f=e["border-left-width"],h+=f?parseInt(f,10):0,f=e["border-top-width"],k+=f?parseInt(f,10):0,f=e["borde-bottom-width"],k+=f?parseInt(f,10):0);c-=h;d-=k;for(a=this._sub_view.firstElementChild;a;)f=a.offsetHeight+a.offsetTop,f>d&&(d=f),f=a.offsetWidth+a.offsetLeft,f>c&&(c=f),a=a.nextElementSibling;this._scroll===t.SCROLL&&(this._sub_view.style.width=c+"px",this._sub_view.style.height=d+"px");this._scroll===t.HORIZONTAL_SCROLL&&(this._sub_view.style.width=
c+"px",this._sub_view.style.height=this.size[1]-h+"px");this._scroll===t.VERTICAL_SCROLL&&(this._sub_view.style.width=this.size[0]-k+"px",this._sub_view.style.height=d+"px");this._scroll===t.NO_SCROLL&&(b=this.size,this._sub_view.style.width=b[0]+"px",this._sub_view.style.height=b[1]+"px");this.__iscroll__&&this.__iscroll__.refresh()}}.bind(this)))},destructor:function(){this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p);this._scroll=!1;this._sub_view&&this._sub_view.parentElement&&
this._sub_view.parentElement.removeChild(this._sub_view);g.prototype.destructor.call(this);delete this._sub_view},add:function(a,b){a&&(a.constructor===K&&(b="top_bar"),a.constructor===e&&(b="bottom_bar"),g.prototype.add.call(this,a,b))},initComponent:function(){g.prototype.initComponent.call(this);this._sub_view=this.view.querySelector(".content");this.pinch=this._pinch;this.scroll=this._scroll;this.layout=this._layout;this.animationDuration=this._animation_duration;this.refresh()},_updateSize:function(){g.prototype._updateSize.call(this);
this.refresh()},_setup_iscroll:function(){this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p);if(this.view&&this._sub_view){var a={bubbling:!1,hScroll:!1,vScroll:!1};1===this._scroll?a.vScroll=!0:2===this._scroll?a.hScroll=!0:3===this._scroll&&(a.hScroll=!0,a.vScroll=!0);a.hScrollbar=!1;a.vScrollbar=!1;this.__iscroll__=new iScroll(this.view,this._sub_view,a);this.refresh()}}};f.extendClass(t,g);f.defineClassProperties(t,{delegate:{set:function(a){this._delegate=a}},scroll:{set:function(a){if(a!==
this._scroll)if(a){if(!0===a||1===a||2===a||3===a)this._scroll=a,this._setup_iscroll()}else this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p),this._scroll=!1},get:function(){return this._scroll}},pinch:{set:function(a){!(a!==t.NO_PINCH&&a!==t.ROTATION&&a!==t.SCALE&&a!==t.ROTATION_AND_SCALE)&&this.view&&(this._pinch=a)}},animationDuration:{set:function(a){a||(a=0);f.isNumber(a)&&(this._animation_duration=a,this._sub_view&&(this._sub_view.style.webkitTransitionDuration=a+"ms",(this.hScrollbar||
this.vScrollbar)&&this._scroll_transition_time(a)))}},layout:{set:function(a){a!==g.HORIZONTAL_LAYOUT&&a!==g.DEFAULT_LAYOUT&&a!==g.ABSOLUTE_LAYOUT&&a!==g.VERTICAL_LAYOUT&&a!==g.FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):this._sub_view?(this._layout&&f.removeClassName(this._sub_view,this._layout),(this._layout=a)&&f.addClassName(this._sub_view,this._layout)):this._layout=a}},innerHTML:{set:function(a){this._sub_view&&f.safeInnerHTML(this._sub_view,a)}}});q.ScrollView=t;B.STRETCH_NONE=
0;B.STRETCH_FILL=1;B.STRETCH_UNIFORM=2;B.STRETCH_UNIFORM_FILL=3;B.prototype={_image_data:null,_image_width:0,_image_height:0,_image_loaded:!1,_src:null,_stretch:B.STRETCH_FILL,destructor:function(){this._sub_view&&(this._image_data.onload=null,delete this._image_data,this._image_loaded=!1,this._sub_view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");t.prototype.destructor.call(this)},show:function(){t.prototype.show.call(this);this.stretch=this._stretch},refresh:function(){if(this._sub_view&&
this._image_loaded)if(this._stretch===B.STRETCH_FILL)this._sub_view.setAttribute("width","100%"),this._sub_view.setAttribute("height","100%");else if(this._stretch===B.STRETCH_NONE)this._sub_view.removeAttribute("width"),this._sub_view.removeAttribute("height");else if(this._stretch===B.STRETCH_UNIFORM){var a=this._size[0]/this._size[1],b=this._image_width/this._image_height,c=0,c=1;a<b?(c=this._image_width/this._size[0],c=(this._size[1]-this._image_height/c)/2,this._sub_view.setAttribute("width",
"100%"),this._sub_view.removeAttribute("height"),this._sub_view.style.left="0px",this._sub_view.style.top=c+"px"):(c=this._image_height/this._size[1],c=(this._size[0]-this._image_width/c)/2,this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%"),this._sub_view.style.top="0px",this._sub_view.style.left=c+"px")}else this._stretch===B.STRETCH_UNIFORM_FILL&&(a=this._size[0]/this._size[1],b=this._image_width/this._image_height,a>b?(this._sub_view.setAttribute("width","100%"),
this._sub_view.removeAttribute("height")):(this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%")));this.__scroll_activated&&this._scroll_refresh(this._pinch);g.prototype.refresh.call(this)},_image_onload:function(){this._image_loaded=!0;this._image_width=this._image_data.width;this._image_height=this._image_data.height;this._sub_view&&(this._sub_view.src=this._src);this.stretch=this._stretch;this.propagate("load");var a=this;j.scheduleAction(function(){a.refresh()})},
initComponent:function(){t.prototype.initComponent.call(this);var a=this;this._image_data=new Image;this._image_data.onload=function(b){a._image_onload(b)};this.pinch=this._pinch;this.pan=this._pan;this._sub_view&&this._sub_view.src&&(this._src=this._sub_view.getAttribute("src"),this._image_data.src=this._src,this._image_onload());this._sub_view&&(this._sub_view.ondragstart=function(a){a.preventDefault();return!1},this.stretch=this._stretch);this.refresh()}};f.extendClass(B,t);f.defineClassProperties(B,
{src:{set:function(a){f.isString(a)&&(this._image_loaded=!1,this._src=a,this._image_data.src=this._src)},get:function(){return this._src}},stretch:{set:function(a){f.isNumber(a)&&!(a!==B.STRETCH_FILL&&a!==B.STRETCH_NONE&&a!==B.STRETCH_UNIFORM&&a!==B.STRETCH_UNIFORM_FILL)&&(this._stretch=a,this.refresh())},get:function(){return this._stretch}},size:{set:function(a){if(f.isArray(a)||2===a.length||f.isNumber(a[0])&&f.isNumber(a[1]))this.stretch=this._stretch,this._size[0]=a[0],this._size[1]=a[1],this._updateSizeAndPos()},
get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});q.ScrollImageView=B;U.prototype={_ab_view_t_x:0,_ab_view_t_y:0,_value:"",destructor:function(){this.view.removeEventListener("change",this);this.view.removeEventListener("focus",this);this.view.removeEventListener("blur",this);this.view.removeEventListener("textInput",this);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);
f.isString(this._value)&&(this.view.value=this._value,this.view.addEventListener("textInput",this),this.view.addEventListener("change",this),this.view.addEventListener("focus",this),this.view.addEventListener("blur",this))},setFocus:function(){this.view.focus()},setBlur:function(){this.view.blur()},setPointerEvents:function(a){this._text_field.style.pointerEvents=a?"none":"auto"},handleEvent:function(a){function b(a){a.src!==c.view&&(j.removePointerListener(k,h.POINTER_START,b,!0),c.setBlur())}var c=
this;switch(a.type){case "focus":j.addPointerListener(k,h.POINTER_START,b,!0);break;case "change":this._value=this.view.value;this.outPropertyChange();this.propagate("change",this._value);break;case "textInput":this._value=this.view.value,this.outPropertyChange(),this.propagate("continuous_change",this._value)}}};f.extendClass(U,g);f.defineClassProperty(U,"value",{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=
a.toString()}this._value=a;this.view.value=a},get:function(){return this._value}});q.TextArea=U;y.DEFAULT_TYPE="default";y.DEFAULT_STYLE="default_style";y.GREEN_STYLE="green";y.RED_STYLE="red";y.GREY_STYLE="grey";y.NAVIGATION_TYPE="nav";y.NAVIGATION_BACK_TYPE="nav_back";y.NAVIGATION_FORWARD_TYPE="nav_forward";y.BLUE_STYLE="blue_style";y.BLACK_STYLE="black_style";y.SILVER_STYLE="silver_style";y.prototype={__tap_recognizer:null,_style:y.DEFAULT_STYLE,_type:y.DEFAULT_TYPE,_selected:!1,_text:"",_released_image:"",
_selected_image:"",_disabled_image:"",didTouch:function(){this.addClassName("pressed");this._selected=!0},didUntouch:function(){this.removeClassName("pressed");this._selected=!1},didTap:function(){this.propagate("select")},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this.text_view=this.view.firstElementChild;this.__tap_recognizer||
(this.__tap_recognizer=new Q(this),this.addPointerRecognizer(this.__tap_recognizer));this.text=this._text?this._text:"";this.view.name=this.id;this._style&&this.addClassName(this._style);this._type&&this.addClassName(this._type)}};f.extendClass(y,g);f.defineClassProperties(y,{text:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this.text_view&&f.setElementInnerText(this.text_view,this._text)},
get:function(){return this._text}},style:{set:function(a){f.isString(a)&&(a=a.replace("_ios",""),this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},type:{set:function(a){f.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}}});q.Button=y;I.prototype={__tap_recognizer:null,__list_time_out:0,_items_selectable:!0,_scroll:0,_model:null,__elem:null,
__scroll_start:0,add:function(){},remove:function(){},destructor:function(){t.prototype.destructor.call(this);this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);this._model.unbindChange(null,this,this._modelChanged);this._model_allocated&&f.free(this._model);this._model_allocated=!1},initComponent:function(){t.prototype.initComponent.call(this);this._model=new j.core.Array;this._model.init();this._model_allocated=!0;this._model.bindChange(null,
this,this._modelChanged);this._holes.item_children||(this._holes.item_children=this.view.querySelector("ul"));this._list_items=this._sub_view=this._holes.item_children;this.__tap_recognizer||(this.__tap_recognizer=new Q(this),this.addPointerRecognizer(this.__tap_recognizer));this.refresh()},refresh:function(){this.__iscroll__&&this.__iscroll__.refresh();t.prototype.refresh.call(this)},_modelChanged:function(){this._renderData(this._items_selectable);this.refresh()},propertiesDidChange:function(){this._modelChanged();
return!0},_renderData:function(){},_touchItemFeedback:function(){},_untouchItemFeedback:function(){},_updateSelectItem:function(){},didTouch:function(a,b){if(!this._items_selectable)return!1;b===this._sub_view||b===this.view?this.__elem=null:(this.__elem=b,this.__list_time_out&&(clearTimeout(this.__list_time_out),this.__list_time_out=0),this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),this.__elem_to_unselect=null),(this.__elem_to_unselect=b)&&this._touchItemFeedback(b))},
didUntouch:function(){!this.__list_time_out&&this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),this.__elem_to_unselect=null);this.__elem=null},didTap:function(){var a=this;if(this.__elem_to_unselect=this.__elem)this._updateSelectItem(this.__elem),this.__list_time_out=setTimeout(function(){a.__elem_to_unselect&&a._untouchItemFeedback(a.__elem_to_unselect);a.__elem_to_unselect=null;a.__list_time_out=0},g.UNSELECT_DELAY)},scrollToElementAt:function(a,b){if(this.__iscroll__){f.isNumber(b);
var c=this.__item_obs[a];c&&(c=this.__iscroll__._offset(c.view),c.top+=this.__iscroll__.wrapperOffsetTop,c.top=c.top>this.__iscroll__.minScrollY?this.__iscroll__.minScrollY:c.top<this.__iscroll__.maxScrollY?this.__iscroll__.maxScrollY:c.top,this.__iscroll__.scrollTo(0,c.top,200))}}};f.extendClass(I,t);f.defineClassProperties(I,{scroll:{set:function(a){a?(this._scroll=t.VERTICAL_SCROLL,this._setup_iscroll()):(this.__iscroll__&&(this.__iscroll__.destroy(),this.__iscroll__=p),this._scroll=!1)},get:function(){return this._scroll?
!0:!1}},model:{set:function(a){a&&(f.isArray(a)?(this._model.removeAll(),this._model.add.apply(this._model,a)):a.toJSON&&a.propertyChange&&(this._model_allocated&&(this._model.unbindChange(null,this,this._modelChanged),f.free(this._model)),this._model_allocated=!1,this._model=a,this._model.bindChange(null,this,this._modelChanged)))},get:function(){return this._model}},data:{set:function(a){f.isArray(a)&&(this._model_allocated?this._model.removeAll():(this._model=new j.core.Array,this._model.init(),
this._model_allocated=!0,this._model.bindChange(null,this,this._modelChanged)),this._model.add.apply(this._model,a),this._modelChanged())},get:function(){return this._model._data.slice()}}});q.AbstractList=I;var M=function(a){this.parent=g;this.parent(a);this.constructor=M};M.prototype={_index:0,_pressed:!1,_visible:!0,didSelect:function(){}};f.extendClass(M,g);f.defineClassProperties(M,{pressed:{set:function(a){this.view&&(a?(this.addClassName("pressed"),this._pressed=!0):(this.removeClassName("pressed"),
this._pressed=!1))},get:function(){return this._pressed}},index:{set:function(a){this._index=a},get:function(){return this._index}}});da.prototype={_title:"",_label:"",set title(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&(f.setElementInnerText(this.view,this._title),this.view.appendChild(this._label_view))},set label(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=
""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._label=a;this.view&&f.setElementInnerText(this._label_view,this._label);this._label&&!this._label_view.parentNode&&this.view.appendChild(this._label_view);!this._label&&this._label_view.parentNode&&this.view.removeChild(this._label_view)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=k.createElement("li"));M.prototype.initComponent.call(this);
this._label_view=k.createElement("span")}};f.extendClass(da,M);ia.prototype={_title:"",set title(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&f.setElementInnerText(this.title_view,this._title)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;if(!this.__config__.node){this.__config__.node=k.createElement("div");this.__config__.node.className="simplelist_item";
var a=k.createElement("div");a.className="title";this.__config__.node.appendChild(a)}M.prototype.initComponent.call(this);this._label_view=k.createElement("span");this.title_view=this.view.querySelector(".title")}};f.extendClass(ia,g);x.FILTER_EXACTS=0;x.FILTER_CONTAINS=1;x.FILTER_STARTS_WITH=2;x.BLOCK_LIST="BlockList";x.TAB_LIST="TabList";x.DEFAULT_LIST="DefaultList";x.prototype={_type:x.DEFAULT_LIST,_selected_index:0,_selected_item:0,_filters:null,_has_arrow:!0,__item_obs:null,__elem:null,__template_obj:null,
add:function(a){this.setItemTemplate(a)},setItemTemplate:function(a){a&&(f.isFunction(a)?this.__template_obj=(new a).init():a.constructor&&(this.__template_obj=a))},setItemTemplateName:function(a){return this.createAndAddComponent(a,{},"item_children")},remove:function(){},destructor:function(){this._freeListItems();I.prototype.destructor.call(this)},initComponent:function(){I.prototype.initComponent.call(this);this.addClassName(this._type);this.refresh()},getItems:function(){return this.__item_obs?
this.__item_obs.slice():[]},applyFilters:function(){if(this._filters&&this.__item_obs){var a,b,c;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],c=this._model.item(b.index),this.appyFiltersOnObj(b,c)}},appyFiltersOnObj:function(a,b){if(this._filters&&a&&b){var c,d,f,e,g,h=this._filters.length;if(0===h)a.show();else for(c=0;c<h;c++)if(d=this._filters[c],!d.property||!d.value)a.show();else{f=!1;e=b[d.property];g=d.value;!1===d.strict&&(e=e.toLowerCase(),g=g.toLowerCase());switch(d.matching){case p:case null:case x.FILTER_EXACTS:e!==
g&&(f=!0);break;case x.FILTER_STARTS_WITH:0!==e.indexOf(g)&&(f=!0);break;case x.FILTER_CONTAINS:-1===e.indexOf(g)&&(f=!0)}f?a.hide():a.show()}}},_freeListItems:function(){var a,b;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],b.__parent=p,f.free(b);this.__item_obs=[]},_renderData:ta,_modelChanged:function(){this._renderData(this._items_selectable);this.refresh()},_touchItemFeedback:function(a){a._comp_.pressed=!0},_untouchItemFeedback:function(a){a._comp_.pressed=!1},_updateSelectItem:function(a){this._selected_index=
a._comp_.index;this._selected_item=this._model.item(this._selected_index);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();this.outPropertyChange();this.propagate("itemselect",{index:this._selected_index,item:this._selected_item})},init_directAccessBar:function(){function a(a){if(0!==a.targetPointerList.length){a.stopPropagation();a.preventDefault();f.setElementTransform(b._list_items,"");b.__max_scroll=b.size[1]-b._list_items.offsetHeight;j.addPointerListener(k,h.POINTER_MOVE,e,!1);j.addPointerListener(k,
h.POINTER_END,g,!1);var m=a.targetPointerList[0].currentTarget._index_;f.isNumber(m)&&(a=b.__direct_access_letters[m],b._acces_index!==m&&(b._acces_index=m,m=-b.getTitlePosition(m),m<b.__max_scroll&&(m=b.__max_scroll),b.__scroll_start=m,N?f.setElementTransform(b._list_items,"translate3d(0,"+m+"px,0)"):f.setElementTransform(b._list_items,"translate(0,"+m+"px)"),b._scrollbar&&b._scrollbar.setPosition(m),c=f.getElementDimensions(b._direct_access),c.height-=10,d=f.getElementAbsolutePosition(b._direct_access),
d.y+=5,b._direct_access_value.style.opacity=1,b._direct_access_value.innerHTML=a,b._startScrolling&&b._startScrolling()))}}this._direct_access=k.createElement("div");this._direct_access.className="direct_access";this.view.appendChild(this._direct_access);this._direct_access_value=k.createElement("div");this._direct_access_value.className="direct_access_value";this.view.appendChild(this._direct_access_value);this._acces_index=0;var b=this,c,d;this.__access_bar_start=a;var e=function(a){a.stopPropagation();
a.preventDefault();var e;!c||!d?e=0:(a=a.pageY-d.y,0>a?a=0:a>c.height&&(a=c.height-1),e=Math.floor(a*b._direct_access.childElementCount/c.height));f.isNumber(e)&&b._acces_index!==e&&(b._acces_index=e,a=-b.getTitlePosition(e),e=b.__direct_access_letters[e],a<b.__max_scroll&&(a=b.__max_scroll),b.__scroll_start=a,N?f.setElementTransform(b._list_items,"translate3d(0,"+a+"px,0)"):f.setElementTransform(b._list_items,"translate(0,"+a+"px)"),b._direct_access_value.innerHTML=e,b._scrollbar&&b._scrollbar.setPosition(a),
b._isScrolling&&b._isScrolling())},g=function(){j.removePointerListener(k,h.POINTER_MOVE,e);j.removePointerListener(k,h.POINTER_END,g);b._direct_access_value.style.opacity=0;b._endScrolling&&b._endScrolling()};j.addPointerListener(this._direct_access,h.POINTER_START,a,!1)},remove_directAccessBar:function(){j.removePointerListener(this._direct_access,h.POINTER_START,this.__access_bar_start,!1);this.view.removeChild(this._direct_access);this._direct_access=p;this.view.removeChild(this._direct_access_value);
this._direct_access_value=p},getTitlePosition:function(a){a=this.view.querySelectorAll("ul > li > div").item(a);return!a?void 0:a.parentElement.offsetTop}};f.extendClass(x,I);f.defineClassProperties(x,{itemsSelectable:{set:function(a){if(!(a&&this._items_selectable||!a&&!this._items_selectable))if(a){this._items_selectable=!0;for(i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],j.addPointerListener(obj.view,h.POINTER_START,this,!0)}else{this._items_selectable=!1;for(i=0;i<this.__item_obs.length;i++)obj=
this.__item_obs[i],j.removePointerListener(obj.view,h.POINTER_START,this,!0)}}},selectedIndex:{get:function(){return this._selected_index}},selectedItem:{get:function(){return this._selected_item}},type:{set:function(a){f.isString(a)&&!(a!==x.BLOCK_LIST&&a!==x.TAB_LIST&&a!==x.DEFAULT_LIST)&&(this.removeClassName(this._type),this._type=a,this.addClassName(this._type),this._type===x.BLOCK_LIST&&(this._renderData=xa,this._direct_access&&this.remove_directAccessBar()),this._type===x.TAB_LIST&&(this._renderData=
ya,this._direct_access||this.init_directAccessBar()),this._type===x.DEFAULT_LIST&&(this._renderData=ta,this._direct_access&&this.remove_directAccessBar()),this._renderData(this._items_selectable))}},hasArrow:{set:function(a){a?(this._has_arrow=!0,this.addClassName("arrow")):(this._has_arrow=!1,this.removeClassName("arrow"))}},filters:{set:function(a){f.isArray(a)&&(this._filters=a,this.applyFilters(),this.refresh())},get:function(){return this._filters}}});q.List=x;q.AbstractListItem=M;q.DefaultListItem=
da;q.SimpleListItem=ia;C.NORMAL_MODE=1;C.NATIVE_MODE=2;C.prototype={_mode:C.NORMAL_MODE,_data:null,_selected_item:null,_items:null,destructor:function(){this._mode===C.NATIVE_MODE?(j.removePointerListener(this.view,h.POINTER_START,this),j.removePointerListener(this.view,h.POINTER_END,this)):(this.nodeUnbind(this._select,"change"),this.nodeUnbind(this._select,"blur"));g.prototype.destructor.call(this)},update_gui_combo_box:function(){if(f.isArray(this._data))if(this._mode===C.NORMAL_MODE){f.removeAllElementChild(this._select);
this._items={};var a,b;for(a=0;a<this._data.length;a++)b=k.createElement("option"),b.appendChild(k.createTextNode(this._data[a])),this._items[this._data[a]]=b,this._select.appendChild(b);this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0}else f.setElementInnerText(this._select,this._selected_item)},initComponent:function(){g.prototype.initComponent.call(this);m.cordova&&(m.deviceConfiguration.os===r.OS_IOS||m.deviceConfiguration.os===r.OS_ANDROID)&&m.plugins.combo_picker?
(this._mode=C.NATIVE_MODE,this._select=k.createElement("div"),this.view.appendChild(this._select),j.addPointerListener(this.view,h.POINTER_START,this),j.addPointerListener(this.view,h.POINTER_END,this)):(this._mode=C.NORMAL_MODE,this._select=k.createElement("select"),this.view.appendChild(this._select),this.nodeBind(this._select,"change"),this.nodeBind(this._select,"blur"));this.update_gui_combo_box()},handleEvent:function(a){a.preventDefault();a.stopPropagation();a.type===h.POINTER_START&&(this.setFocus(),
m.plugins.combo_picker.show(this,this._data,this._selected_item))},setFocus:function(){this._mode===C.NATIVE_MODE?this.addClassName("focus"):this._select.focus()},setBlur:function(){this._mode===C.NATIVE_MODE?this.removeClassName("focus"):this._select.blur()},notify:function(a){"change"===a.type?(this._selected_item=this._select.value,this.outPropertyChange(),this.propagate("change",this._selected_item)):"blur"===a.type&&m.scrollTo(0,0)}};f.extendClass(C,g);f.defineClassProperties(C,{selectedItem:{set:function(a){f.isString(a)&&
(this._selected_item=a,this._mode===C.NORMAL_MODE?this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0:f.setElementInnerText(this._select,this._selected_item))},get:function(){return this._selected_item}},data:{set:function(a){f.isArray(a)&&(this._data=a.slice(),this.update_gui_combo_box())}}});q.ComboBox=C;V.prototype={_selected_index:-1,__inputs:null,__labels:null,clean_gui:function(){var a;this.__scroll_start=0;for(f.removeAllElementChild(this._list_items);this.__inputs.length;)a=
this.__inputs[0],j.removePointerListener(a,h.POINTER_START,this),a.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var a,b,c,d;if(this._list_items){this.clean_gui();this._selected_index=-1;for(a=0,d=this._model.length;a<d;a++)c=this._model.item(a),b=k.createElement("input"),b.type="radio",b.name=this._id,b.value=a,b.id=this._id+"_l"+a,this._list_items.appendChild(b),this.__inputs[a]=b,j.addPointerListener(b,h.POINTER_START,
this),b.addEventListener("click",this),b=k.createElement("label"),b.value=a,b.setAttribute("for",this._id+"_l"+a),j.addPointerListener(b,h.POINTER_START,this),b.addEventListener("click",this),f.setElementInnerText(b,c),this._list_items.appendChild(b),this.__labels[a]=b;this.refresh()}else console.error("vs.ui.RadioButton uncorrectly initialized.")}},_touchItemFeedback:function(a){var a=a.value,b=this.__labels[a];f.addClassName(this.__inputs[a],"pressed");f.addClassName(b,"pressed")},_untouchItemFeedback:function(a){var a=
a.value,b=this.__labels[a];f.removeClassName(this.__inputs[a],"pressed");f.removeClassName(b,"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this.__inputs.length)this.selectedIndex=b,this.outPropertyChange(),this.propagate("change",{index:this._selected_index,item:this._model.item(this._selected_index)})}};f.extendClass(V,I);f.defineClassProperty(V,"selectedIndex",{set:function(a){f.isNumber(a)||(a=parseInt(a));if(!isNaN(a)&&
!(0>a||a>this.__inputs.length-1)&&this.__inputs[a]){var b=this.__inputs[a];b&&(b.checked=!0);this._selected_index=a}},get:function(){return this._selected_index}});q.RadioButton=V;W.prototype={_selected_indexes:null,__inputs:null,__labels:null,selectItem:function(a){if(f.isNumber(a)&&!(0>a||a>=this.__inputs.length)){var b=this.__inputs[a];if(b){for(var c=0;c<this._selected_indexes.length;c++)if(this._selected_indexes[c]===a){this._selected_indexes.remove(c);b.checked=!1;return}this._selected_indexes.push(a);
b.checked=!0}}},clean_gui:function(){var a;this.__scroll_start=0;for(f.removeAllElementChild(this._list_items);this.__inputs.length;)a=this.__inputs[0],j.removePointerListener(a,h.POINTER_START,this),a.removeEventListener("click",this),this.__inputs.remove(0),this.__labels.remove(0)},_renderData:function(){if(this._model){var a,b,c,d;if(this._list_items){this._selected_indexes=[];this.clean_gui();for(a=0,b=this._model.length;a<b;a++)c=this._model.item(a),d=k.createElement("input"),d.type="checkbox",
d.name=this._id,d.id=this._id+"_l"+a,d.value=a,this._list_items.appendChild(d),this.__inputs[a]=d,j.addPointerListener(d,h.POINTER_START,this),d.addEventListener("click",this),d=k.createElement("label"),d.value=a,d.setAttribute("for",this._id+"_l"+a),j.addPointerListener(d,h.POINTER_START,this),d.addEventListener("click",this),f.setElementInnerText(d,c),this._list_items.appendChild(d),this.__labels[a]=d;this.selectedItem=this._selected_indexes}else console.error("vs.ui.CheckBox uncorrectly initialized.")}},
_touchItemFeedback:function(a){var a=a.value,b=this.__labels[a];f.addClassName(this.__inputs[a],"pressed");f.addClassName(b,"pressed")},_untouchItemFeedback:function(a){var a=a.value,b=this.__labels[a];f.removeClassName(this.__inputs[a],"pressed");f.removeClassName(b,"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this.__inputs.length){this.selectItem(b);this.outPropertyChange();items=[];for(i=0,l=this._selected_indexes.length;i<
l;i++)items.push(this._model.item(this._selected_indexes[i]));this.propagate("change",{indexes:this._selected_indexes.slice(),items:items})}}};f.extendClass(W,I);f.defineClassProperty(W,"selectedIndexes",{set:function(a){if(f.isArray(a)){var b,c;this._selected_indexes=[];for(c=0;c<a.length;c++)b=a[c],f.isNumber(b)&&this._selected_indexes.push(b);for(c=0;c<this.__inputs.length;c++)if(b=this.__inputs[c])b.checked=!1;a=this._selected_indexes.length;for(c=0;c<a;c++)if(b=this.__inputs[this._selected_indexes[c]])b.checked=
!0}},get:function(){return this._selected_indexes.slice()}});q.CheckBox=W;K.DEFAULT_STYLE="blue_style";K.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";K.BLACK_STYLE="black_style";K.prototype={_hide_animation:null,_show_animation:null,_style:K.DEFAULT_STYLE,_states:null,_current_state:null,destructor:function(){g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);var a=m.deviceConfiguration.os;this._hide_animation=a==r.OS_SYMBIAN?new j.fx.Animation(["translateY",
"-50px"]):new j.fx.Animation(["translateY","-44px"]);this._show_animation=new j.fx.Animation(["translateY","0px"]);a=m.deviceConfiguration.os;a==r.OS_SYMBIAN?f.setElementStyle(this.view,{left:"0px",top:"0px",bottom:"auto",width:"100%",height:"50px"}):f.setElementStyle(this.view,{left:"0px",top:"0px",bottom:"auto",width:"100%",height:"44px"});this.style=this._style},setStateItems:function(a,b){var c;if(a&&f.isString(a)&&b&&f.isArray(b))if(this._states[a]=b.slice(),this._current_state===a){for(key in this.__children)if(children=
this.__children[key],f.isArray(children))for(c=0;c<children.length;c++)obj=children[c],0<=b.findItem(obj)||obj&&obj.hide&&obj.hide();else children.hide&&children.hide();for(c=0;c<b.length;c++)obj=b[c],this.isChild(obj)||this.add(obj,"children"),obj.show()}else for(c=0;c<b.length;c++)obj=b[c],this.isChild(obj)||this.add(obj,"children")},getStateItems:function(a){return!a||!f.isString(a)?p:this._states[a]?this._states[a].slice():p},changeState:function(a,b){if(a){var c=0,d,e,g,h,j;this._current_state=
a;(g=this._states[this._current_state])||(g=[]);d=g.length;for(j in this.__children)if(e=this.__children[j],f.isArray(e))for(c=0;c<e.length;c++)h=e[c],0<=g.findItem(h)||h&&h.hide&&h.hide();else e.hide&&e.hide();for(c=0;c<d;c++){h=g[c];if(b&&b[h.id])for(j in e=b[h.id],e)j&&(h[j]=e[j]);h&&h.show()}}},handleEvent:function(a){var b=a.currentTarget;switch(a.type){case h.POINTER_START:f.addClassName(b,"active");j.addPointerListener(a.currentTarget,h.POINTER_END,this,!0);j.addPointerListener(a.currentTarget,
h.POINTER_MOVE,this,!0);break;case h.POINTER_END:j.removePointerListener(a.currentTarget,h.POINTER_END,this);j.removePointerListener(a.currentTarget,h.POINTER_MOVE,this);setTimeout(function(){f.removeClassName(b,"active")},200);this.propagate("buttonselect",a.currentTarget.spec);break;case h.POINTER_MOVE:a.preventDefault(),setTimeout(function(){f.removeClassName(b,"active")},200),j.removePointerListener(a.currentTarget,h.POINTER_END,this),j.removePointerListener(a.currentTarget,h.POINTER_MOVE,this)}},
remove:function(a){var b,c;g.prototype.remove.call(this,a);for(b in this._states)c=this._states[b],-1!==c.indexOf(a)&&c.remove(a)}};f.extendClass(K,g);f.defineClassProperties(K,{style:{set:function(a){f.isString(a)&&(this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},position:{set:function(){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(){},get:function(){return[this.view.offsetWidth,
this.view.offsetHeight]}}});q.NavigationBar=K;e.DEFAULT_STYLE="black_style";e.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";e.BLUE_STYLE="blue_style";e.LEFT_POSITION="left";e.RIGHT_POSITION="right";e.prototype={_hide_animation:null,_show_animation:null,_style:e.DEFAULT_STYLE,_configuration:[],_items:null,destructor:function(){g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this._hide_animation=new j.fx.Animation(["translateY","44px"]);this._show_animation=
new j.fx.Animation(["translateY","0px"]);f.setElementStyle(this.view,{left:"0px",top:"auto",bottom:"0px",width:"100%",height:"44px"});this.style=this._style},notify:function(a){this.propagate("itemselect",a.data)},addButton:function(a,b,c){if(!this._items[a]){var d=new e.Button({id:a});d.init();c&&(d.position=c);d.name=b;this.add(d,"children");d.bind("select",this);return this._items[a]=d}},addItem:function(a){a&&!this._items[a.id]&&(this.add(a,"children"),a.bind("select",this),this._items[a.id]=
a)},removeItem:function(a){var b=this._items[a];if(b){try{this.remove(b)}catch(c){c.stack&&console.log(c.stack)}b.unbind("select",this);delete this._items[a]}}};f.extendClass(e,g);f.defineClassProperties(e,{style:{set:function(a){f.isString(a)&&(this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},configuration:{set:function(a){if(f.isArray(a)){var b,c;this._configuration=a;for(b in this._items)this.removeItem(b);for(b=0;b<
a.length;b++)c=a[b],this.addButton(c[0],c[1],c[2])}}},position:{set:function(){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(){},get:function(){return[this.view.offsetWidth,this.view.offsetHeight]}}});e.Item=function(a){this.parent=g;this.parent(a);this.constructor=e.Item};e.Item.prototype={_position:e.LEFT_POSITION,initComponent:function(){g.prototype.initComponent.call(this);this.view.appendChild(k.createElement("div"));this.addClassName(this._position);
this.view.addEventListener(h.POINTER_START,this,!0)},handleEvent:function(a){var b=a.currentTarget;switch(a.type){case h.POINTER_START:f.addClassName(b,"active");j.addPointerListener(a.currentTarget,h.POINTER_END,this,!0);j.addPointerListener(a.currentTarget,h.POINTER_MOVE,this,!0);break;case h.POINTER_END:j.removePointerListener(a.currentTarget,h.POINTER_END,this);j.removePointerListener(a.currentTarget,h.POINTER_MOVE,this);m.setTimeout(function(){f.removeClassName(b,"active")},200);this.propagate("select",
this.id);break;case h.POINTER_MOVE:a.preventDefault(),m.setTimeout(function(){f.removeClassName(b,"active")},200),j.removePointerListener(a.currentTarget,h.POINTER_END,this),j.removePointerListener(a.currentTarget,h.POINTER_MOVE,this)}}};f.extendClass(e.Item,g);f.defineClassProperty(e.Item,"position",{set:function(a){a!==e.LEFT_POSITION&&a!==e.RIGHT_POSITION||(this._position&&this.removeClassName(this._position),this._position=a,this.addClassName(this._position))},get:function(){return this._position}});
e.Text=function(a){this.parent=e.Item;this.parent(a);this.constructor=e.Text};e.Text.prototype={_text:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=k.createElement("div"),this.__config__.node.className="vs_ui_toolbar_text");e.Item.prototype.initComponent.call(this);var a,b;this._text_view=k.createElement("div");this._text_view.className="text_view";this.view.appendChild(this._text_view);a=k.createElement("div");
a.className="glow_view";this.view.appendChild(a);b=k.createElement("div");a.appendChild(b)}};f.extendClass(e.Text,e.Item);f.defineClassProperty(e.Text,"text",{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this._text_view&&f.setElementInnerText(this._text_view,this._text)},get:function(){return this._text}});e.Button=function(a){this.parent=e.Item;this.parent(a);this.constructor=e.Button};
e.Button.prototype={_name:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=k.createElement("div"),this.__config__.node.className="vs_ui_toolbar_button");e.Item.prototype.initComponent.call(this);this.size=[30,30]},setImage:function(a){this.view.style.backgroundImage="url("+a+")"}};f.extendClass(e.Button,e.Item);f.defineClassProperty(e.Button,"name",{set:function(a){f.isString(a)&&(this._name=a,this.addClassName(this._name))},
get:function(){return this._name}});e.BUTTON_ADD="add";e.BUTTON_ARROW_DOWN="arrow_down";e.BUTTON_ARROW_LEFT="arrow_left";e.BUTTON_ARROW_RIGHT="arrow_right";e.BUTTON_ARROW_UP="arrow_up";e.BUTTON_ATTACH="attach";e.BUTTON_AUCTION="auction";e.BUTTON_BELL_OFF="bell_off";e.BUTTON_BELL="bell";e.BUTTON_BLOG="blog";e.BUTTON_BOOK_MARKED="book_marked";e.BUTTON_BOOK="book";e.BUTTON_BOOKMARK_ADD="bookmark_add";e.BUTTON_BOORMARK="bookmark";e.BUTTON_BOX_FULL="box_full";e.BUTTON_BOX_MAIL="box_mail";e.BUTTON_BOX=
"box";e.BUTTON_BRIGHTNESS="brightness";e.BUTTON_BRUSH="brush";e.BUTTON_BULB_OFF="bulb_off";e.BUTTON_BULB_ON="bulb_on";e.BUTTON_BUZZER="buzzer";e.BUTTON_CALCULATOR="calculator";e.BUTTON_CALENDAR="calendar";e.BUTTON_CALL="call";e.BUTTON_CANCEL="cancel";e.BUTTON_CASE="case";e.BUTTON_CHECKMARK="checkmark";e.BUTTON_CIRCLE_ARROW_LEFT="circle_arrow_left";e.BUTTON_CIRCLE_ARROW_RIGHT="circle_arrow_right";e.BUTTON_COMMAND_LINE="command_line";e.BUTTON_COMMENT_ADD="command_add";e.BUTTON_COMMENT_DELETE="command_delete";
e.BUTTON_COMMENT_OK="command_ok";e.BUTTON_COMPUTER_OFF="computer_off";e.BUTTON_COMPUTER_ON="computer_on";e.BUTTON_CONSTRAST="contrast";e.BUTTON_CONTROL_1="controls_1";e.BUTTON_CONTROL_2="controls_2";e.BUTTON_CONTROL_3="controls_3";e.BUTTON_CONTROL_4="controls_4";e.BUTTON_CONTROL_5="controls_5";e.BUTTON_CONTROL_6="controls_6";e.BUTTON_CONTROL_7="controls_7";e.BUTTON_CONTROL_8="controls_8";e.BUTTON_COPY="copy";e.BUTTON_COURT="court";e.BUTTON_CREDIT_CARD="credit_card";e.BUTTON_CUT="cut";e.BUTTON_DANGER=
"danger";e.BUTTON_DELETE="delete";e.BUTTON_DISK="disk";e.BUTTON_DOCUMENT_BLANK="document_blank";e.BUTTON_DOCUMENT="document";e.BUTTON_DOLLAR="dollar";e.BUTTON_DOWNLAOD="download";e.BUTTON_ERROR="error";e.BUTTON_FAVORITIES_ADD="favorities_add";e.BUTTON_FAVORITIES_REMOVE="favorities_remove";e.BUTTON_FAVORITIES="favorities";e.BUTTON_FILM="film";e.BUTTON_FILMING="filming";e.BUTTON_FIRST_AID="first_aid";e.BUTTON_FLAG_BIS="flag_1";e.BUTTON_FLAG="flag";e.BUTTON_FLASH_ARROW="flash_arrow";e.BUTTON_FLASH="flash";
e.BUTTON_FOLDER_BOOKMARCK="folder_bookmark";e.BUTTON_FOLDER_GOTO="folder_goto";e.BUTTON_FOLDER="folder";e.BUTTON_FONT_CAPITAL="font_capital";e.BUTTON_FONT_ITALIC="font_italic";e.BUTTON_FONT_REGULAR="font_regular";e.BUTTON_FONT_UNDERLINE="font_undeline";e.BUTTON_FONT="font";e.BUTTON_FONTS="fonts";e.BUTTON_FORUM="forum";e.BUTTON_FRAME="frame";e.BUTTON_GRAPH_AREAS="graph_areas";e.BUTTON_GRAPH_BARS_DOWN="graph_bars_down";e.BUTTON_GRAPH_BARS_UP="graph_bars_up";e.BUTTON_GRAPH_BARS="graph_bars";e.BUTTON_GRAPH_DOWN=
"graph_down";e.BUTTON_GRAPH_LINES="graph_lines";e.BUTTON_GRAPH_UP="graph_up";e.BUTTON_HAT="hat";e.BUTTON_HELP="help";e.BUTTON_HOME="home";e.BUTTON_INFORMATION="information";e.BUTTON_KEY="key";e.BUTTON_KEYBOARD="keyboard";e.BUTTON_LAPTOP="laptop";e.BUTTON_LINK="links";e.BUTTON_LIST_BULLETS="bullets";e.BUTTON_LIST_NUMBERS="list_numbers";e.BUTTON_LOCK="lock";e.BUTTON_MAGNIFY_GLASS="magnify_glass";e.BUTTON_MAIL="mail";e.BUTTON_MANAGE="manage";e.BUTTON_MEASURE="measure";e.BUTTON_MEASURES="measures";e.BUTTON_MIC_BIS=
"mic_bis";e.BUTTON_MIC="mic";e.BUTTON_MINUS="minus";e.BUTTON_MUTE="mute";e.BUTTON_PAINT="pain";e.BUTTON_PAPER_PLANE="paper_plane";e.BUTTON_PAPER_TRASH="paper_trash";e.BUTTON_PAPERCLIO="paperclio";e.BUTTON_PARAGRAPH="paragraph";e.BUTTON_PENCIL="pencil";e.BUTTON_PHOTO="photo";e.BUTTON_PIECHART="113";e.BUTTON_POST="post";e.BUTTON_PROFILE="profile";e.BUTTON_REFRESH="refresh";e.BUTTON_RESIZE="resize";e.BUTTON_RSS="rss";e.BUTTON_SAD_FACE="sade_face";e.BUTTON_SAFE="safe";e.BUTTON_SAVE="save";e.BUTTON_SETTINGS=
"settings";e.SHOPPING_BAG="shopping_bag";e.SHOPPING_CART="shopping_cart";e.SHOPPING_HEAVY="shopping_heavy";e.SIM="sim";e.SMILE_FACE="smile_face";e.SORT_AZ="sort_az";e.SORT_ZA="sort_za";e.STAR="star";e.STORAGE="storage";e.SWITCH="switch";e.TAG_ADD="tag_add";e.TAG_CANCEL="tag_cancel";e.TAG_DELETE="tag_delete";e.TAG="tag";e.TEXT_ALIGN_CENTER="text_align_center";e.TEXT_ALIGN_JUSTIFY="text_align_justify";e.TEXT_ALIGN_LEFT="text_align_left";e.TEXT_ALIGN_RIGHT="text_align_right";e.TIME="time";e.TIMER="timer";
e.TRASH="trash";e.TWG="twg";e.UNLOCK="unlock";e.UPLOAD="upload";e.USER="user";e.USERS="users";e.VOLUME_DOWN="volume_down";e.VOLUME_UP="volume_up";e.VOLUME="volume";e.WALLET="wallet";e.WARNING="warning";e.WIFI="wifi";e.WINDOW_ERROR="window_error";e.WINDOW_GLOBE="window_globe";e.WINDOW_LOCK="window_lock";e.WINDOW="window";e.ZOOM_IN="zoom_in";e.ZOMM_OUT="zoom_out";q.ToolBar=e;X.prototype={_text:"",destructor:function(){g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);
this._text&&f.setElementInnerText(this.view,this._text)}};f.extendClass(X,g);f.defineClassProperty(X,"text",{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this.view&&f.setElementInnerText(this.view,this._text)},get:function(){return this._text}});q.TextLabel=X;F.prototype={canvas_ctx:null,canvas_node:null,destructor:function(){g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);
if(this.canvas_node=this.view.firstChild)this.canvas_ctx=this.canvas_node.getContext("2d"),this.canvas_node.width=this._size[0],this.canvas_node.height=this._size[1],this.draw(0,0,this._size[0],this._size[1])},getContext:function(){return this.canvas_ctx},drawRect:function(a,b,c,d,f,e){if(4===arguments.length)this.rect(a,b,c,d).stroke();else if(e){Math.sin(e);Math.cos(e);var g=[a,b],h=this.rotatePoint(c,0,e);g.push(a+h[0],b+h[1]);h=this.rotatePoint(c,d,e);g.push(a+h[0],b+h[1]);h=this.rotatePoint(0,
d,e);g.push(a+h[0],b+h[1]);f&&g.push(f);this.polygon.apply(this,g)}else this.polygon(a,b,a+c,b,a+c,b+d,a,b+d,f);return this},rotatePoint:function(a,b,c){return[a*Math.cos(c)-b*Math.sin(c),b*Math.cos(c)+a*Math.sin(c)]},polygon:function(){if(6>arguments.length)throw Error("not enough arguments");var a,b,c,d;this.beginPath();if(0===arguments.length%2){this.moveTo(arguments[0],arguments[1]);for(a=2;a<arguments.length;a+=2)this.lineTo(arguments[a],arguments[a+1])}else{b=arguments[arguments.length-1];c=
(arguments.length-1)/2;a=(arguments[2*c-2]+arguments[0])/2;d=(arguments[2*c-1]+arguments[1])/2;this.moveTo(a,d);for(a=0;a<c-1;a++)this.arcTo(arguments[2*a],arguments[2*a+1],arguments[2*a+2],arguments[2*a+3],b);this.arcTo(arguments[2*c-2],arguments[2*c-1],arguments[0],arguments[1],b)}this.closePath();this.moveTo(arguments[0],arguments[1]);this.stroke();return this},ellipse:function(a,b,c,d,f,e,g,h){f===p&&(f=0);e===p&&(e=0);g===p&&(g=2*Math.PI);h===p&&(h=!1);var j=this.rotatePoint(c*Math.cos(e),d*
Math.sin(e),f),k=a+j[0],j=b+j[1];this.rotatePoint(c*Math.cos(g),d*Math.sin(g),f);this.moveTo(k,j);this.translate(a,b);this.rotate(f);this.scale(c/d,1);this.arc(0,0,d,e,g,h);this.scale(d/c,1);this.rotate(-f);this.translate(-a,-b);this.stroke();return this},load:function(a){var b=m.innerWidth-25;this.__iframe=k.createElement("iframe");this.__iframe.id="canvas_load_iframe";this.__iframe.height="10px";this.__iframe.width=b+"px";this.__iframe.style.visibility="hidden";this.__iframe.src=a;this.nodeBind(this.__iframe,
"load","remotePageLoaded");k.body.appendChild(this.__iframe)},remotePageLoaded:function(){var a=this.__iframe.contentWindow,b=m.innerWidth-25,c=m.innerHeight;this.clearRect(0,0,this._size[0],this._size[1]);this.save();this.scale(this._size[0]/b,this._size[1]/c);this.canvas_ctx.drawWindow(a,0,0,b,c,"rgb(255,255,255)");this.restore()},draw:function(a,b,c,d){a||(a=0);b||(b=0);c||(c=this._size[0]);d||(d=this._size[1]);this.clearRect(a,b,c,d);this.lineWidth=3;this.shadowColor="white";this.shadowBlur=1;
for(var f,e,g,a=0;10>a;a++)this.strokeStyle="rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",b=Math.floor(Math.random()*c),f=Math.floor(Math.random()*d),e=Math.floor(Math.random()*c),g=Math.floor(Math.random()*d),this.beginPath(),this.moveTo(b,f),this.lineTo(e,g),this.closePath(),this.stroke()}};f.extendClass(F,g);F.methods="arc,arcTo,beginPath,bezierCurveTo,clearRect,clip,closePath,createImageData,createLinearGradient,createRadialGradient,createPattern,drawFocusRing,drawImage,fill,fillRect,fillText,getImageData,isPointInPath,lineTo,measureText,moveTo,putImageData,quadraticCurveTo,rect,restore,rotate,save,scale,setTransform,stroke,strokeRect,strokeText,transform,translate".split(",");
F.props="canvas,fillStyle,font,globalAlpha,globalCompositeOperation,lineCap,lineJoin,lineWidth,miterLimit,shadowOffsetX,shadowOffsetY,shadowBlur,shadowColor,strokeStyle,textAlign,textBaseline".split(",");F.setup=function(){var a,b;for(a=0;a<F.methods.length;a++)b=F.methods[a],F.prototype[b]=function(a){return function(b,c,f,e,g,h,j,k,m){this.canvas_ctx[a](b,c,f,e,g,h,j,k,m);return this}}(b);for(a=0;a<F.props.length;a++){b=F.props[a];var c={enumerable:!0};c.set=function(a){return function(b){this.canvas_ctx[a]=
b}}(b);c.get=function(a){return function(){return this.canvas_ctx[a]}}(b);f.defineProperty(F.prototype,b,c)}};F.setup();f.defineClassProperty(F,"size",{set:function(a){if(a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view)){this._updateSizeAndPos();if(!this.canvas_node){this.canvas_node=this.view.firstChild;if(!this.canvas_node){console.error("Uncompatible canvas view");return}this.canvas_ctx=this.canvas_node.getContext("2d")}this.canvas_node.width=
this._size[0];this.canvas_node.height=this._size[1];this.draw(0,0,this._size[0],this._size[1])}},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}});q.Canvas=F;E.BORDER_WIDTH_IOS=5;E.BORDER_WIDTH_ANDROID=5;E.BORDER_WIDTH_WP7=0;E.BORDER_WIDTH_SYMBIAN=0;E.BORDER_WIDTH_BB=1;E.prototype={__inner_view:null,_index:0,_indeterminate:!1,_range:null,__border_width:0,destructor:function(){g.prototype.destructor.call(this)},
_updateSize:function(){f.setElementSize(this.view,this._size[0],this._size[1]);this.index=this._index},initComponent:function(){g.prototype.initComponent.call(this);this.__inner_view=this.view.firstElementChild;this.indeterminate=this._indeterminate;var a=m.deviceConfiguration.os;a==r.OS_ANDROID?this.__border_width=2*E.BORDER_WIDTH_ANDROID:a==r.OS_IOS?this.__border_width=2*E.BORDER_WIDTH_IOS:a==r.OS_WP7?this.__border_width=2*E.BORDER_WIDTH_WP7:a==r.OS_SYMBIAN?this.__border_width=2*E.BORDER_WIDTH_SYMBIAN:
a==r.OS_BLACK_BERRY&&(this.__border_width=2*E.BORDER_WIDTH_BB);this.index=this._index},refresh:function(){this.index=this._index;g.prototype.refresh.call(this)}};f.extendClass(E,g);f.defineClassProperties(E,{index:{set:function(a){if(f.isNumber(a)&&(this._index=a,this.__inner_view)){var b=this.size[0],b=b-this.__border_width,a=b*(this._index-this._range[0])/(this._range[1]-this._range[0]);a>b&&(a=b);0>a&&(a=0);b=m.deviceConfiguration.os;this.__inner_view.style.width=b===r.OS_ANDROID||b===r.OS_IOS?
a+this.__border_width+"px":a+"px"}},get:function(){return this._index}},range:{set:function(a){if(f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.index=this._index},get:function(){return this._range.slice()}},indeterminate:{set:function(a){a?(this._indeterminate=!0,this.view&&f.addClassName(this.view,"indeterminate")):(this._indeterminate=!1,this.view&&f.removeClassName(this.view,"indeterminate"))},get:function(){return this._indeterminate}}});
q.ProgressBar=E;L.HORIZONTAL=0;L.VERTICAL=1;L.prototype={_orientation:L.HORIZONTAL,_value:0,_range:null,__v:0,__drag_x:0,__drag_y:0,__handle:null,__handle_width:0,__handle_delta:10,destructor:function(){this.__drag_recognizer&&(this.removePointerRecognizer(this.__drag_recognizer),this.__drag_recognizer=null);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);var a=j.ui.View.getDeviceCSSCode();a==r.OS_IOS?this.__handle_width=28:a==r.OS_WP7?this.__handle_width=
30:a==r.OS_ANDROID?this.__handle_width=34:a==r.OS_BLACK_BERRY?(this.__handle_width=35,this.__handle_height=12,this.__handle_delta=3):this.__handle_width=23;this.__handle=this.view.querySelector(".handle");j.addPointerListener(this.__handle,h.POINTER_START,this,!0);this.__drag_recognizer||(this.__drag_recognizer=new ca(this),this.addPointerRecognizer(this.__drag_recognizer));this.orientation=this._orientation;this.value=this._value},didDragStart:function(a){if(0!==a.targetPointerList.length){this.__handle_width=
this.__handle.offsetWidth;this.__handle_x=this.__handle.offsetLeft;this.__handle_y=this.__handle.offsetTop;this.__abs_pos=j.util.getElementAbsolutePosition(this.view);var b=a.targetPointerList[0].pageX-this.__abs_pos.x,a=a.targetPointerList[0].pageY-this.__abs_pos.y;this.value=0===this._orientation?this._range[0]+(this._range[1]-this._range[0])*b/this.view.offsetWidth:this._range[0]+(this._range[1]-this._range[0])*a/this.view.offsetHeight;this.__v=this._value;this.outPropertyChange();this.propagate("continuous_change",
this._value);this.propagate("change",this._value)}},didDrag:function(a,b){if(0!==b.targetPointerList.length){var c=b.targetPointerList[0].pageX-this.__abs_pos.x,d=b.targetPointerList[0].pageY-this.__abs_pos.y;this.value=0===this._orientation?this._range[0]+(this._range[1]-this._range[0])*c/this.view.offsetWidth:this._range[0]+(this._range[1]-this._range[0])*d/this.view.offsetHeight;this.outPropertyChange();this.propagate("continuous_change",this._value)}},didDragEnd:function(){this.propagate("change",
this._value)},refresh:function(){this.__handle_width=this.__handle.offsetWidth;this.value=this._value;g.prototype.refresh.call(this)}};f.extendClass(L,g);f.defineClassProperties(L,{value:{set:function(a){var b,c;if(!isNaN(a)){a<this._range[0]&&(a=this._range[0]);a>this._range[1]&&(a=this._range[1]);this._value=a;var d=this.__handle_width/2,f=0,f=m.deviceConfiguration.os===r.OS_BLACK_BERRY?(this.__handle_height-this.__handle_delta)/2:(this.__handle_width-this.__handle_delta)/2;0===this._orientation?
(c=this.view.offsetWidth,b=Math.floor((a-this._range[0])*c/(this._range[1]-this._range[0]))-d,N?J(this.__handle,"translate3d("+b+"px,-"+f+"px,0)"):J(this.__handle,"translate("+b+"px,-"+f+"px)"),this.view.style.backgroundSize=b+d+"px 10px"):(b=this.view.offsetHeight,c=Math.floor((a-this._range[0])*b/(this._range[1]-this._range[0]))-d,N?J(this.__handle,"translate3d(-"+f+"px,"+c+"px,0)"):J(this.__handle,"translate(-"+f+"px,"+c+"px)"),this.view.style.backgroundSize="10px "+(c+d)+"px")}},get:function(){return this._value}},
range:{set:function(a){if(f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.value=this._value},get:function(){return this._range.slice()}},orientation:{set:function(a){a!==L.HORIZONTAL&&a!==L.VERTICAL||(this._orientation=a,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):(this.addClassName("vertical"),this.removeClassName("horizontal")),this.value=this._value)},get:function(){return this._orientation}},
size:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSizeAndPos(),this.value=this._value))},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});q.Slider=L;Y.prototype={_src:null,destructor:function(){this.view&&(this.view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");g.prototype.destructor.call(this)},
initComponent:function(){g.prototype.initComponent.call(this);this.view.ondragstart=function(a){a.preventDefault();return!1};this.view.src?this._src=this.view.getAttribute("src"):this.view.src=this._src;this.view.setAttribute("width","100%");this.view.setAttribute("height","100%")}};f.extendClass(Y,g);f.defineClassProperties(Y,{src:{set:function(a){f.isString(a)&&(this._src=a,this.view&&(this.view.src=this._src))},get:function(){return this._src}},size:{set:function(a){if(f.isArray(a)||2===a.length||
f.isNumber(a[0])&&f.isNumber(a[1]))this.view&&(this.view.setAttribute("width",a[0]),this.view.setAttribute("height",a[1])),this._size[0]=a[0],this._size[1]=a[1],this._updateSizeAndPos()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});q.ImageView=Y;z.TEXT="text";z.PASSWORD="password";z.SEARCH="search";z.prototype={_text_field:null,_clear_button:null,_value:"",_placeholder:"type ...",_type:z.TEXT,
destructor:function(){this._text_field.removeEventListener("focus",this);this._text_field.removeEventListener("blur",this);this._text_field.removeEventListener("change",this);this._text_field.removeEventListener("input",this);this._clear_button&&this.nodeUnbind(this._clear_button,h.POINTER_START,"cleanData");delete this._text_field;g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this._text_field=this.view.querySelector("input");this._text_field.name=
this.id;(this._clear_button=this.view.querySelector(".clear_button"))&&this.nodeBind(this._clear_button,h.POINTER_START,"cleanData");this.type=this._type;this.value=this._value;this.placeholder=this._placeholder;this._text_field.addEventListener("focus",this);this._text_field.addEventListener("blur",this);this._text_field.addEventListener("change",this);this._text_field.addEventListener("input",this)},cleanData:function(){this._value=this._text_field.value="";this._activateDelete(!1);this.outPropertyChange();
this.propagate("continuous_change",this._value);this.propagate("change",this._value)},changeData:function(){(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1)},_activateDelete:function(a){this._clear_button&&(a?f.setElementVisibility(this._clear_button,!0):f.setElementVisibility(this._clear_button,!1))},onkeydown:function(a){var a=fixEvent(a),b=a.target;if(a.keyCode===TAB||a.keyCode===ENTER)return b.blur(),!1},setFocus:function(){this._text_field.focus()},setBlur:function(){this._text_field.blur()},
setPointerEvents:function(a){this._text_field.style.pointerEvents=a?"none":"auto"},_didEnable:function(){this._enable?this._text_field.removeAttribute("disabled"):this._text_field.setAttribute("disabled",!0)},handleEvent:function(a){function b(a){a.target===c.view||a.target===c._text_field||(a.target===c._clear_button?(c.cleanData(),a.stopPropagation(),a.preventDefault()):(j.removePointerListener(k,h.POINTER_START,b,!0),c.setBlur()))}var c=this;"change"===a.type?(this.changeData(),this.outPropertyChange(),
this.propagate("change",this._value)):"input"===a.type?(this.changeData(),this.outPropertyChange(),this.propagate("continuous_change",this._value)):"focus"===a.type?(this.addClassName("focus"),(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1),j.addPointerListener(k,h.POINTER_START,b,!0)):"blur"===a.type&&(this.removeClassName("focus"),this._activateDelete(!1),m.scrollTo(0,0))}};f.extendClass(z,g);f.defineClassProperties(z,{value:{set:function(a){if(null===a||"undefined"===
typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._value=a;this._text_field&&(this._text_field.value=this._value,!this._value||""===this._value?this._activateDelete(!1):this._activateDelete(!0))},get:function(){return this._value=this._text_field.value}},type:{set:function(a){!(a!==z.TEXT&&a!==z.PASSWORD&&a!==z.SEARCH)&&this.view&&(this.removeClassName(this._type),this._type=a,this.addClassName(this._type),this._text_field&&(this._type===
z.PASSWORD?this._text_field.setAttribute("type","password"):this._type===z.SEARCH?this._text_field.setAttribute("type","search"):this._text_field.setAttribute("type","text")))}},placeholder:{set:function(a){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._placeholder=a;this._text_field&&this._text_field.setAttribute("placeholder",this._placeholder)}}});q.InputField=z;w.BELOW=0;w.ABOVE=1;w.LEFT=2;w.RIGHT=3;w.prototype=
{_point_position:null,_has_footer:!1,_has_header:!1,initComponent:function(){g.prototype.initComponent.call(this);this._arrow=this.view.querySelector(".vs_ui_popover >.arrow");this.__show_clb=this._endShowConfiguration},_endShowConfiguration:function(){var a,b,c,d,e;e=this.size;var g=m.innerHeight,h=m.innerWidth;if("undefined"!==typeof this.__direction&&this._point_position){a=this._point_position[0]-e[0]/2;b=this._point_position[1]-e[1]/2;c=e[0];d=e[1];this.__direction!==w.BELOW&&this.__direction!==
w.ABOVE&&this.__direction!==w.RIGHT&&this.__direction!==w.LEFT&&(this.__direction=this._point_position[0]>h/2?w.RIGHT:w.LEFT,this._point_position[1]+d+30<g?this.__direction=w.BELOW:0<this._point_position[1]-d-30&&(this.__direction=w.ABOVE));switch(this.__direction){case w.BELOW:b=b+e[1]/2+15;5>a&&(a=5);a+c>h&&(a=h-c-5);this._arrow.className="arrow top";e=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right="5px";this._arrow.style["-webkit-mask-position-x"]=e+"px";this._arrow.style["-webkit-mask-position-y"]=
"0px";break;case w.ABOVE:b=b-e[1]/2-15;5>a&&(a=5);a+c>h&&(a=h-c-5);this._arrow.className="arrow bottom";e=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right="5px";this._arrow.style["-webkit-mask-position-x"]=e+"px";this._arrow.style["-webkit-mask-position-y"]="0px";break;case w.RIGHT:a=a-e[0]/2-15;5>b&&(b=5);b+d>g-20&&(b=g-d-20);this._arrow.className="arrow right";e=d-(this._point_position[1]-b+15)-2;this._arrow.style.left="auto";this._arrow.style.right="-13px";this._arrow.style["-webkit-mask-position-x"]=
"0px";this._arrow.style["-webkit-mask-position-y"]=e+"px";break;case w.LEFT:a=a+e[0]/2+15,5>b&&(b=5),b+d>g-20&&(b=g-d-20),this._arrow.className="arrow left",e=this._point_position[1]-b-15-2,this._arrow.style.left="-13px",this._arrow.style.right="auto",this._arrow.style["-webkit-mask-position-x"]="0px",this._arrow.style["-webkit-mask-position-y"]=e+"px"}this.position=(e=f.getElementAbsolutePosition(this.view.parentElement))?[a-e.x,b-e.y]:[a,b];this.size=[c,d]}this.redraw()},show:function(a,b){this.view&&
!this._visible&&(this._point_position=a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])?a.slice():null,this.__direction=b,this.view.style.setProperty("display","block",null),this.__view_display=p,this._show_animation?this._show_animation.process(this,this._show_object,this):this._show_object(),j.addPointerListener(k,h.POINTER_START,this,!0))},handleEvent:function(a){this.childOf(a.target,this.view)||(a.preventDefault(),a.stopPropagation(),this.hide())},childOf:function(a,b){if(a===
b)return!0;for(a=a.parentElement;a;){if(a===b)return!0;a=a.parentElement}return!1},hide:function(){this.view&&(g.prototype.hide.call(this),j.removePointerListener(k,h.POINTER_START,this,!0),this.view.style.display="none")}};f.extendClass(w,g);f.defineClassProperties(w,{hasFooter:{set:function(a){this._has_footer=a?!0:!1;this.view&&this._has_footer&&this.addClassName("withFooter");this.view&&!this._has_footer&&this.removeClassName("withFooter")},get:function(){return this._has_footer}},hasHeader:{set:function(a){this._has_header=
a?!0:!1;this.view&&this._has_header&&this.addClassName("withHeader");this.view&&!this._has_header&&this.removeClassName("withHeader")},get:function(){return this._has_header}}});q.PopOver=w;D.MODE_DEFAULT=0;D.MODE_IOS=1;D.MODE_ANDROID=2;D.MODE_MEEGO=3;D.MODE_WP7=4;D.MODE_SYMBIAN=5;D.MODE_BLACKBERRY=6;D.prototype={__tap_recognizer:null,__switch_translate:0,_selected:!1,_toggled:!0,_mode:D.MODE_DEFAULT,__toggle_on_view:null,__toggle_off_view:null,__switch_view:null,_text_on:"",_text_off:"",didTouch:function(){this.addClassName("pressed");
this._selected=!0},didUntouch:function(){this.removeClassName("pressed");this._selected=!1},_setToggle:function(a){var b=this;b._toggled=a?!0:!1;j.scheduleAction(function(){b._initWidthSwitch();b._toggled?(b.addClassName("on"),b._mode===D.MODE_IOS&&f.setElementTransform(b.__switch_view,"translate3d("+b.__switch_translate+"px,0,0)")):(b.removeClassName("on"),b._mode===D.MODE_IOS&&f.setElementTransform(b.__switch_view,"translate3d(0,0,0)"));b.outPropertyChange()})},viewDidAdd:function(){g.prototype.viewDidAdd.call(this);
this._setToggle(this._toggled)},refresh:function(){g.prototype.refresh.call(this);this._setToggle(this._toggled)},didTap:function(){this._setToggle(!this._toggled);this.propagate("change",this._toggled)},destructor:function(){this.__tap_recognizer&&(this.removePointerRecognizer(this.__tap_recognizer),this.__tap_recognizer=null);g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this.__toggle_on_view=this.view.querySelector(".vs_ui_switch .toggle_on");
this.__toggle_off_view=this.view.querySelector(".vs_ui_switch .toggle_off");this.__switch_view=this.view.querySelector(".vs_ui_switch .switch");this.__tap_recognizer||(this.__tap_recognizer=new Q(this),this.addPointerRecognizer(this.__tap_recognizer));j.ui.View.getDeviceCSSCode()==r.OS_IOS&&(this._mode=D.MODE_IOS);this._text_on&&(this.textOn=this._text_on);this._text_off&&(this.textOff=this._text_off);this.toggled=this._toggled},_initWidthSwitch:function(){this.__switch_translate=this.view.offsetWidth-
(this.__switch_view.offsetWidth+2*this.__switch_view.offsetLeft)-(parseInt(j.util.getElementStyle(this.view,"border-left-width"),10)+parseInt(j.util.getElementStyle(this.view,"border-right-width"),10))},_updateSizeAndPos:function(){var a=this._size[0],b=this._pos[0],c=this._pos[1],d,e=0,f=0,g="auto",h="auto",j="auto",k=this._autosizing[0],m=this._autosizing[1];this.view.parentNode&&(e=this.view.parentNode.offsetWidth,f=this.view.parentNode.offsetHeight);d=4===k||1===k?a+"px":5===k||7===k?"auto":2===
k||3===k||6===k||0===k?e?Math.round(100*(a/e))+"%":a+"px":"100%";if(4===k||5===k||6===k||7===k||2===k&&!e)g=b+"px";else if((2===k||0===k)&&e)g=Math.round(100*(b/e))+"%";if(1===k||3===k||5===k||7===k)j=e-(b+a)+"px";if(4===m||5===m||6===m||7===m||2===m&&!f)h=c+"px";else if((2===m||0===m)&&f)h=Math.round(100*(c/f))+"%";this.view.style.width=d;this.view.style.removeProperty("height");this.view.style.left=g;this.view.style.top=h;this.view.style.right=j;this.view.style.bottom="auto"}};f.extendClass(D,g);
f.defineClassProperties(D,{textOn:{set:function(a){if(this.__toggle_on_view){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text_on=a;f.setElementInnerText(this.__toggle_on_view,this._text_on)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_on}},textOff:{set:function(a){if(this.__toggle_off_view){if(null===a||"undefined"===typeof a)a="";else if(f.isNumber(a))a=
""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text_off=a;f.setElementInnerText(this.__toggle_off_view,this._text_off)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_off}},toggled:{set:function(a){var b=this;j.scheduleAction(function(){b._setToggle(a)})},get:function(){return this._toggled}}});q.Switch=D;o.NUMBERS={"0":0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};o.MODE_DEFAULT=0;o.MODE_IOS=1;o.MODE_ANDROID=2;o.MODE_WP7=
3;o.MODE_SYMBIAN=4;o.MODE_BLACK_BERRY=5;o.prototype={_mode:o.MODE_DEFAULT,_cell_height:44,_friction:0.003,_data:null,_slots_elements:null,_current_values:null,_selected_keys:null,_selected_values:null,destructor:function(){j.removePointerListener(this.view,h.POINTER_START,this,!1);j.removePointerListener(k,h.POINTER_START,this,!1);j.removePointerListener(k,h.POINTER_MOVE,this,!1);f.removeAllElementChild(this._slots_view);delete this._data;delete this._slots_elements;delete this._frame_view;delete this._slots_view;
delete this._current_values;g.prototype.destructor.call(this)},initComponent:function(){g.prototype.initComponent.call(this);this._data=[];this._slots_elements=[];var a=m.deviceConfiguration.os;this._mode=a==r.OS_IOS?o.MODE_IOS:a==r.OS_ANDROID?o.MODE_ANDROID:a==r.OS_WP7?o.MODE_WP7:a==r.OS_SYMBIAN?o.MODE_SYMBIAN:a==r.OS_BLACK_BERRY?o.MODE_BLACK_BERRY:o.MODE_DEFAULT;this._slots_view=this.view.querySelector(".slots");this._frame_view=this.view.querySelector(".frame");switch(this._mode){case o.MODE_BLACK_BERRY:this._cell_height=
50;case o.MODE_DEFAULT:case o.MODE_IOS:case o.MODE_SYMBIAN:j.addPointerListener(this.view,h.POINTER_START,this);this._frame_border_width=0;break;case o.MODE_WP7:this._cell_height=83;case o.MODE_ANDROID:this._frame_view.parentElement.removeChild(this._frame_view)}},removeAllSlots:function(){delete this._data;this._data=[];this._remove_all_slots()},_remove_all_slots:function(){f.removeAllElementChild(this._slots_view);delete this._slots_elements;this._slots_elements=[];this._active_slot=null},_render_slots:function(){for(var a=
0;a<this._data.length;a++)this._render_a_slot(a)},_render_a_slot:function(a){var b,c,d,e=this._data[a];if(e){c=0;d=m.deviceConfiguration.os;e.length&&d==r.OS_WP7&&(c=Math.floor(100/e.length));d=k.createElement("ul");d.index=a;c&&f.setElementStyle(d,{width:c+"%"});c="";for(b in e.values)c+="<li>"+e.values[b]+"</li>";f.safeInnerHTML(d,c);if(this._mode===o.MODE_ANDROID){b=k.createElement("div");c=this._generate_button(a);b.appendChild(c[0]);var g=k.createElement("div");g.className=e.style;g.appendChild(d);
b.appendChild(g);b.appendChild(c[1])}else b=k.createElement("div"),b.className=e.style,b.appendChild(d);this._slots_view.appendChild(b);d.slotPosition=a;d.slotYPosition=0;switch(this._mode){case o.MODE_WP7:d.slotMaxScroll=this.view.clientHeight-d.clientHeight,j.addPointerListener(d,h.POINTER_START,this,!0)}d.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";N?J(d,"translate3d(0,0,0)"):J(d,"translate(0,0)");this._slots_elements.push(d);e.defaultValue&&this.scrollToValue(a,e.defaultValue)}},
_generate_button:function(a){var b=this._data[a].style.match("readonly"),c=k.createElement("div");b?c.className="button_incr readonly":(c.className="button_incr",f.setElementInnerText(c,"+"),c.slotPosition=a);b||(j.addPointerListener(c,h.POINTER_START,this),j.addPointerListener(c,h.POINTER_END,this),j.addPointerListener(c,h.POINTER_CANCEL,this));var d=k.createElement("div");b?d.className="button_decr readonly":(d.className="button_decr",f.setElementInnerText(d,"-"),d.slotPosition=a);b||(j.addPointerListener(d,
h.POINTER_START,this),j.addPointerListener(d,h.POINTER_END,this),j.addPointerListener(d,h.POINTER_CANCEL,this));return[c,d]},_buttonSelected:function(a){var b=a.target.slotPosition;switch(a.type){case h.POINTER_START:f.addClassName(a.target,"active");break;case h.POINTER_END:var c=this._slots_elements[b],d=c.slotYPosition;f.hasClassName(a.target,"button_decr")?(d+=44,0<d&&(d=0)):(d-=44,c=this.getSlotMaxScroll(c),d<c&&(d=c));this._scrollTo(b,d);case h.POINTER_CANCEL:f.removeClassName(a.target,"active")}},
addSlot:function(a,b,c){b||(b="");var d={};d.values=a;d.style=b;d.defaultValue=c;this._data.push(d);this._render_a_slot(this._data.length-1)},getSelectedValues:function(){if(this._current_values)return this._current_values;var a,b,c,d;this._selected_keys=[];this._selected_values=[];for(c=0;c<this._slots_elements.length;c++)if(a=this._slots_elements[c])for(d in a.removeEventListener(j.TRANSITION_END,this,!1),a.style.setProperty(j.TRANSITION_DURATION,"0"),b=this.getSlotMaxScroll(a),0<a.slotYPosition?
this._setPosition(c,0):a.slotYPosition<b&&this._setPosition(c,b),a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[c].values){if(b==a){this._selected_keys.push(d);this._selected_values.push(this._data[c].values[d]);break}b++}return this._current_values={keys:this._selected_keys,values:this._selected_values}},_getSelectedValues:function(){if(this._current_values)return this._current_values;var a,b,c,d;this._selected_keys=[];this._selected_values=[];for(c=0;c<this._slots_elements.length;c++)if(a=
this._slots_elements[c])for(d in a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[c].values){if(b==a){this._selected_keys.push(d);this._selected_values.push(this._data[c].values[d]);break}b++}return this._current_values={keys:this._selected_keys,values:this._selected_values}},scrollToValue:function(a,b){var c,d;d=this._slots_elements[a];var e=this._data[a];if(!d||!e)return!1;d.removeEventListener(j.TRANSITION_END,this,!1);d.style.setProperty(j.TRANSITION_DURATION,"0");d=0;for(c in e.values){if(c==
b)return c=d*this._cell_height,this._setPosition(a,c),!0;d-=1}return!1},_setPosition:function(a,b){delete this._current_values;var c=this._slots_elements[a];c.slotYPosition=b;N?J(c,"translate3d(0,"+b+"px,0)"):J(c,"translate(0,"+b+"px)")},_scrollTo:function(a,b,c){var d=this._slots_elements[a];d.style.setProperty(j.TRANSITION_DURATION,c?c+"ms":"100ms");this._setPosition(a,b?b:0);a=this.getSlotMaxScroll(d);0<d.slotYPosition||d.slotYPosition<a?d.addEventListener(j.TRANSITION_END,this,!1):(this._delegate&&
this._delegate.pickerViewSelectRow&&this._delegate.pickerViewSelectRow(this),this.propagate("change",this._getSelectedValues()),this.outPropertyChange())},handleEvent:function(a){if(this._mode===o.MODE_ANDROID)this._buttonSelected(a);else switch(a.type){case h.POINTER_START:this._scrollStart(a);break;case h.POINTER_MOVE:this._scrollMove(a);break;case h.POINTER_END:this._scrollEnd(a);break;case j.TRANSITION_END:this._backWithinBoundaries(a)}},__get_slot_index:function(a){var b=a.target;if("UL"===b.nodeName)return b.index;
if("LI"===b.nodeName)return b.parentElement.index;if(b===this._frame_view){this._frame_border_width=(b=this._getComputedStyle(this._frame_view))?parseInt(b.getPropertyValue("border-left-width")):0;var b=0,c=f.getBoundingClientRect(this._slots_view);this._mode==o.MODE_BLACK_BERRY&&(b=8);a=a.clientX-c.left-this._frame_border_width-b;for(c=b=0;c<this._slots_elements.length;c++)if(b+=this._slots_elements[c].offsetWidth,a<b)return c}return p},_scrollStart:function(a){if(1<a.nbPointers)return!1;a.preventDefault();
a.stopPropagation();var b=a.targetPointerList[0];this._active_slot=p;switch(this._mode){case o.MODE_DEFAULT:case o.MODE_IOS:case o.MODE_SYMBIAN:case o.MODE_BLACK_BERRY:this._active_slot=this.__get_slot_index(b);break;case o.MODE_WP7:this._active_slot=a.currentTarget.index,f.addClassName("dragging")}if("undefined"!==typeof this._active_slot){if(this._data[this._active_slot].style.match("readonly"))return j.removePointerListener(k,h.POINTER_MOVE,this,!0),j.removePointerListener(k,h.POINTER_END,this,
!0),!1;var c=this._slots_elements[this._active_slot];c.slotMaxScroll=this.getSlotMaxScroll(c);c.removeEventListener(j.TRANSITION_END,this,!1);c.style.setProperty(j.TRANSITION_DURATION,"0");if(N){var d=j.util.getElementMatrixTransform(c).m42;d!=c.slotYPosition&&this._setPosition(this._active_slot,d)}this.startY=b.pageY;this.scrollStartY=c.slotYPosition;this.scrollStartTime=a.timeStamp;j.addPointerListener(k,h.POINTER_MOVE,this,!0);j.addPointerListener(k,h.POINTER_END,this,!0);switch(this._mode){case o.MODE_WP7:case o.MODE_BLACK_BERRY:this.__timer&&
(clearTimeout(this.__timer),this.__timer=0),this.__elem_to_hide&&this.__elem_to_hide!=c&&(f.removeClassName(this.__elem_to_hide.parentElement,"visible"),this.__elem_to_hide=null),f.addClassName(c.parentElement,"visible")}return!0}},_scrollMove:function(a){a.preventDefault();a.stopPropagation();var b=a.targetPointerList[0],c=b.pageY-this.startY,d=this._slots_elements[this._active_slot];if(0<d.slotYPosition||d.slotYPosition<d.slotMaxScroll)c/=2;this._setPosition(this._active_slot,d.slotYPosition+c);
this.startY=b.pageY;80<a.timeStamp-this.scrollStartTime&&(this.scrollStartY=d.slotYPosition,this.scrollStartTime=a.timeStamp)},_scrollEnd:function(a){j.removePointerListener(k,h.POINTER_MOVE,this,!0);j.removePointerListener(k,h.POINTER_END,this,!0);var b=this._slots_elements[this._active_slot],c,d=this;if(b){switch(this._mode){case o.MODE_BLACK_BERRY:case o.MODE_WP7:b.parentElement&&(this.__elem_to_hide=b,this.__timer=setTimeout(function(){f.removeClassName(d.__elem_to_hide.parentElement,"visible");
d.__elem_to_hide=null;d.removeClassName("dragging")},1E3))}if(0<b.slotYPosition||b.slotYPosition<b.slotMaxScroll)return this._scrollTo(this._active_slot,0<b.slotYPosition?0:b.slotMaxScroll),!1;c=b.slotYPosition-this.scrollStartY;if(c<this._cell_height/1.5&&c>-this._cell_height/1.5)return b.slotYPosition%this._cell_height&&this._scrollTo(this._active_slot,Math.round(b.slotYPosition/this._cell_height)*this._cell_height,100),!1;a=2*c/(a.timeStamp-this.scrollStartTime)/this._friction;c=this._friction/
2*a*a;0>a&&(a=-a,c=-c);c=b.slotYPosition+c;0<c?(c/=2,a/=3,c>this.view.clientHeight/4&&(c=this.view.clientHeight/4)):c<b.slotMaxScroll?(c=(c-b.slotMaxScroll)/2+b.slotMaxScroll,a/=3,c<b.slotMaxScroll-this.view.clientHeight/4&&(c=b.slotMaxScroll-this.view.clientHeight/4)):c=Math.round(c/this._cell_height)*this._cell_height;this._scrollTo(this._active_slot,Math.round(c),Math.round(a));return!0}},getSlotMaxScroll:function(a){switch(this._mode){case o.MODE_DEFAULT:return this.view.clientHeight-a.clientHeight-
66;case o.MODE_IOS:return this.view.clientHeight-a.clientHeight-86;case o.MODE_SYMBIAN:return this.view.clientHeight-a.clientHeight-80;case o.MODE_BLACK_BERRY:return this.view.clientHeight-a.clientHeight-93;case o.MODE_WP7:return this.view.clientHeight-a.clientHeight-103;case o.MODE_ANDROID:return this.view.clientHeight-a.clientHeight-121}return 0},_backWithinBoundaries:function(a){a=a.target;a.removeEventListener(j.TRANSITION_END,this,!1);slotMaxScroll=this.getSlotMaxScroll(a);this._scrollTo(a.slotPosition,
0<a.slotYPosition?0:slotMaxScroll,150);return!1}};f.extendClass(o,g);f.defineClassProperties(o,{delegate:{set:function(a){this._delegate=a}},data:{set:function(a){var b,c,d,e;if(f.isArray(a)){this.removeAllSlots();for(e=0;e<a.length;e++)b=a[e],c=b.values,d=b.style,b=b.defaultValue,c&&this.addSlot(c,d,b)}}},selectedKeys:{get:function(){this._current_values||this.getSelectedValues();return this._selected_keys}},selectedValues:{get:function(){this._current_values||this.getSelectedValues();return this._selected_values}}});
q.Picker=o;var ua={},ja={},ka=null;Z.prototype={_href:null,_view_box:null,__set_svg_doc:function(a,b){function c(a){var b=k.createElementNS("http://www.w3.org/2000/svg","use");b.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+a);return b}if(a){var d=k.createElementNS("http://www.w3.org/2000/svg","svg");f.removeAllElementChild(this.view);this.view.appendChild(d);this._view_box&&(this.viewBox=this._view_box);if(b)d.appendChild(c(b));else for(var e=a.childNodes,g=0;g<e.length;g++){var h=e[g];
1===h.nodeType&&"defs"!==h.nodeName&&(b=h.getAttribute("id"),b||(b=j.core.createId(),h.setAttribute("id",b)),d.appendChild(c(b)))}}}};f.extendClass(Z,g);f.defineClassProperties(Z,{href:{set:function(a){if(f.isString(a)){this._href=a;var b,c;-1!==a.indexOf("#")?(b=a.substr(0,a.indexOf("#")),c=a.substring(a.indexOf("#")+1)):b=this._href;(a=ua[b])?this.__set_svg_doc(a,c):za(b,c,this)}},get:function(){return this._href}},contentData:{set:function(a){f.isString(a)&&(f.removeAllElementChild(this.view),
this.__object&&delete this.__object,f.safeInnerHTML(this.view,a),this._href=p)}},viewBox:{set:function(a){if(f.isArray(a)&&4==a.length){this._view_box=a;var b=this.view.querySelector("svg");b&&(b.setAttribute("width",a[2]),b.setAttribute("height",a[3]),b.setAttribute("viewBox",a.join(" ")))}}}});q.SVGView=Z;G.DEFAULT_TYPE="default";G.BAR_TYPE="bar";G.HORIZONTAL=0;G.VERTICAL=1;G.prototype={_type:G.DEFAULT_TYPE,_is_toggle_buttons:!0,_items:null,_selected_index:-1,_div_list:null,_orientation:G.HORIZONTAL,
destructor:function(){this._cleanButtons();g.prototype.destructor.call(this)},_cleanButtons:function(){if(this.view)for(f.removeAllElementChild(this.view);this._div_list.length;)j.removePointerListener(this._div_list[0],h.POINTER_START,this),this._div_list.remove(0)},_renderButtons:function(){if(this.view){this._cleanButtons();var a="",b=m.deviceConfiguration.os;this._items.length&&b==r.OS_WP7&&(a=Math.floor(100/this._items.length));b=k.createElement("div");this.view.appendChild(b);for(var c=0,d=
this._items.length;c<d;c++){var e=k.createElement("div");e._index=c;f.setElementInnerText(e,this._items[c]);a&&f.setElementStyle(e,{width:a+"%"});j.addPointerListener(e,h.POINTER_START,this);this._div_list.push(e);b.appendChild(e)}this.orientation=this._orientation}},initComponent:function(){g.prototype.initComponent.call(this);this._items=[];this._div_list=[];this._renderButtons();this.selectedIndex=this._selected_index;this.type=this._type},handleEvent:function(a){var b;if(a.type===h.POINTER_START&&
!(1<a.nbPointers)){b=a.target;b.tagName||(b=b.parentElement);if(this._selected_index===b._index)return!1;a.stopPropagation();a.preventDefault();this.selectedIndex=b._index;this.propagate("select",{index:this._selected_index,item:this._items[this._selected_index]});this.outPropertyChange();return!1}}};f.extendClass(G,g);f.defineClassProperties(G,{items:{set:function(a){var b,c;if(f.isArray(a)&&a.length){this._items.removeAll();b=0;for(c=a.length;b<c;b++)a[b]&&this._items.push(a[b].toString());this._renderButtons();
this._is_toggle_buttons&&(this.selectedIndex=this._selected_index)}},get:function(){return this._text}},selectedIndex:{set:function(a){if(f.isNumber(a)&&!(0>a||a>=this._div_list.length)){var b=this._div_list[this._selected_index];b&&f.removeClassName(b,"selected");this._selected_index=a;(b=this._div_list[this._selected_index])&&f.addClassName(b,"selected");if(!this._is_toggle_buttons){var c=this;this.__button_time_out=setTimeout(function(){f.removeClassName(b,"selected");c.__button_time_out=0;c._selected_index=
-1},g.UNSELECT_DELAY)}}},get:function(){return this._selected_index}},type:{set:function(a){f.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}},isToggleButtons:{set:function(a){this._is_toggle_buttons=a?!0:!1},get:function(){return this._is_toggle_buttons}},orientation:{set:function(a){a!==G.HORIZONTAL&&a!==G.VERTICAL||(this._orientation=a,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):
(this.addClassName("vertical"),this.removeClassName("horizontal")))},get:function(){return this._orientation}}});q.SegmentedButton=G;g.prototype.html_template="<div class='vs_ui_view' x-hag-hole='children'></div>";s.prototype.html_template="<div class='vs_ui_splitview'>  <div x-hag-hole='second_panel'></div>  <div x-hag-hole='main_panel'></div></div>";t.prototype.html_template="<div class='vs_ui_scrollview'>  <div x-hag-hole='top_bar'></div>  <div class='content' x-hag-hole='children'></div>  <div x-hag-hole='bottom_bar'></div></div>";
B.prototype.html_template="<div class='vs_ui_scrollimageview'><img class='content'/></div>";U.prototype.html_template="<textarea class='vs_ui_textarea'></textarea>";y.prototype.html_template="<div class='vs_ui_button'><div></div></div>";x.prototype.html_template="<div class='vs_ui_list'><ul x-hag-hole='item_children'/></div>";K.prototype.html_template="<div class='vs_ui_navigationbar' x-hag-hole='children'></div>";e.prototype.html_template="<div class='vs_ui_toolbar black_ios_style' x-hag-hole='children'></div>";
F.prototype.html_template="<div class='vs_ui_canvas'><canvas class='canvas_inner'></canvas></div>";E.prototype.html_template="<div class='vs_ui_progressbar'><div></div></div>";X.prototype.html_template="<div class='vs_ui_textlabel'></div>";V.prototype.html_template="<div class='vs_ui_radiobutton'><fieldset x-hag-hole='item_children' /></div>";C.prototype.html_template="<div class='vs_ui_combobox'></div>";W.prototype.html_template="<div class='vs_ui_checkbox'><fieldset x-hag-hole='item_children' /></div>";
L.prototype.html_template="<div class='vs_ui_slider'><div class='handle'></div></div>";Y.prototype.html_template="<img class='vs_ui_imageview'></img>";z.prototype.html_template="<div class='vs_ui_inputfield'><input type='text' value='' placeholder='type ...' incremental='incremental'/><div class='clear_button'/></div>";w.prototype.html_template="<div class='vs_ui_popover'>  <div class='header' x-hag-hole='header'></div>  <div class='center' x-hag-hole='children'></div>  <div class='footer' x-hag-hole='footer'></div>  <div class='arrow'></div></div>";
D.prototype.html_template="<div class='vs_ui_switch'>  <div>    <div class='toggle_on'></div>    <div class='toggle_off'></div>     <div class='switch'></div>   </div></div>";o.prototype.html_template="<div class='vs_ui_picker'>  <div class='slots'></div>  <div class='frame'></div></div>";G.prototype.html_template="<div class='vs_ui_segmentedbutton'></div>";Z.prototype.html_template="<div class='vs_ui_svgview'></div>";f.defineProperty(k,"preventScroll",{get:function(){return k._preventScroll},set:function(a){(k._preventScroll=
a)?(k.addEventListener("touchstart",T,!1),k.addEventListener("touchmove",T,!1),k.addEventListener("scroll",T,!1),m.scrollTo(0,0)):(k.removeEventListener("touchstart",T,!1),k.removeEventListener("touchmove",T,!1),k.removeEventListener("scroll",T,!1))}})})(window);
/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(L,B){function z(a){return!l.CSS_VENDOR?a:"-"+l.CSS_VENDOR.toLowerCase()+"-"+a}function g(a){this.parent=o.Task;this.parent();this.constructor=g;arguments.length&&(this.setAnimations(arguments),this.keyFrames["100%"]=this)}function s(a){this.parent=o.EventSource;this.parent();this.constructor=s;a&&(this._fsm=new o.Fsm(this),this._fsm.goTo=this.goTo,this._owner=a)}function f(a){this.parent=s;this.parent(a);this.constructor=f;arguments.length&&(this._fsm.addInput(f.NEXT),this._fsm.addInput(f.PRED),
this._fsm.addInput(f.FIRST),this._states_array=[])}function p(a,c,b){this.parent=s;this.parent(a);this.constructor=p;arguments.length&&(this._animation_type=b==p.NO_ANIMATION||b==p.CARD_ANIMATION||b==p.SLIDE_ANIMATION?b:p.DEFAULT_ANIMATION,this.setNavigationBar(c),this.__nav_bar_states={})}function t(a,c){this.parent=f;this.parent(a,c);this.constructor=t;a&&a.setStyle("-webkit-transform-style","preserve-3d")}function y(a,c){this.parent=f;this.parent(a,c);this.constructor=y;this.animationDuration=
y.ANIMATION_DURATION}var x=L.document,l=L.vs,e=l.util,o=l.core,I=l.ui,w=l.fx,v=e.setElementTransform,u=l.SUPPORT_3D_TRANSFORM;l.CSS_VENDOR;var F=z("animation-duration"),J=z("animation-delay"),C=z("animation-name"),M=z("animation-timing-function"),N=z("animation-fill-mode"),G=z("transition-duration"),K=z("transition-delay"),O=z("transition-timing-function"),P=z("transition-property"),Q=z("transform-origin"),H=z("animation-iteration-count"),A=z("transform"),R=z("keyframes"),D="animationend",E="transitionend";
"webkit"===l.CSS_VENDOR?(D="webkitAnimationEnd",E="webkitTransitionEnd"):"ms"===l.CSS_VENDOR?(D="msAnimationEnd",E="msTransitionEnd"):"moz"===l.CSS_VENDOR&&(D="Mozanimationend",E="Moztransitionend");e.extend(l,{ANIMATION_DURATION:F,ANIMATION_DELAY:J,ANIMATION_NAME:C,ANIMATION_TIMING_FUNC:M,ANIMATION_FILL_MODE:N,TRANSITION_DURATION:G,TRANSITION_PROPERTY:P,TRANSITION_DELAY:K,TRANSITION_TIMING_FUNC:O,TRANSFORM_ORIGIN:Q,ITERATION_COUNT:H,TRANSFORM:A,KEY_FRAMES:R,ANIMATION_END:D,TRANSITION_END:E});var T=
RegExp(/\$width/g),U=RegExp(/\$height/g),V=RegExp(/\$x/g),W=RegExp(/\$y/g),S=RegExp(/\$\{([\w]+)\}/g),Y=function(a,c,b,d,h){function g(b,d){var h,n=[],f;if(e.isNumber(b))return b;if(e.isString(b)){b=b.replace(T,a.size[0]+"px");b=b.replace(U,a.size[1]+"px");b=b.replace(V,a.position[0]+"px");b=b.replace(W,a.position[1]+"px");for(h=S.exec(b);h&&2===h.length;)n.push(h[1]),h=S.exec(b);for(h=0;h<n.length;h++)f=n[h],"undefined"!==typeof d[f]?b=b.replace("${"+f+"}",d[f]):"undefined"!==typeof c[f]&&(b=b.replace("${"+
f+"}",c[f]));return b}console.warn("vs.fx.Animation._parseValue. Unknown value's type: "+b);return 0}if(!c||!a||!a.view)console.error("procesAnimation: invalid component parameter!");else{var f=function(a){var b={},c,d;b.properties=a.properties?a.properties.slice():[];b.values=a.values?a.values.slice():[];a.durations&&(b.durations=a.durations);b.timings=a.timings?a.timings.slice():[];a.origin&&(b.origin=a.origin.slice());b.iterationCount=a.iterationCount;b.delay=a.delay;b.additive=a.additive;b.keyFrames=
{};a.keyFrames["100%"]||(a.keyFrames["100%"]=a);var h;for(c in a.keyFrames)if(d=a.keyFrames[c],e.isArray(d)){h=[];for(var f=0;f<d.length;f++)value=d[f],null==value||"undefined"==typeof value||(h[f]=g(value,a));b.keyFrames[c]=h}else{for(f=0;f<a.properties.length;f++)b.values[f]=g(a.values[f],d);b.keyFrames[c]={}}return b}(c);return X(a,c,f,b,d,h)}},X=function(a,c,b,d,h,f){function q(){var c;c=r?F:G;e.isArray(b.origin)&&2===b.origin.length&&a.setStyle(Q,b.origin[0]+"% "+b.origin[1]+"%");f?a.setStyle(c,
0):e.isString(b.durations)?a.setStyle(c,b.durations):e.isArray(b.durations)?a.setStyle(c,b.durations.join(", ")):a.setStyle(c,g.DEFAULT_DURATION);c=r?J:K;!f&&e.isNumber(b.delay)?a.setStyle(c,b.delay+"ms"):a.setStyle(c,"0");c=r?M:O;e.isString(b.timings)?a.setStyle(c,b.timings):e.isArray(b.timings)?a.setStyle(c,b.timings.join(", ")):a.setStyle(c,g.EASE);r&&("infinite"===b.iterationCount?a.setStyle(H,"infinite"):!b.iterationCount||!e.isNumber(b.iterationCount)?a.setStyle(H,"1"):a.setStyle(H,b.iterationCount),
a.setStyle(N,"forwards"))}function j(){q();var e,g;e=function(g){g.currentTarget===a.view&&(s||a.view.removeEventListener(E,e,!1),a.view.style.removeProperty(G),a.view.style.removeProperty(K),c.delegate&&c.delegate.taskDidEnd&&c.delegate.taskDidEnd(b),d&&d.call(h?h:w))};g=parseFloat(a.view.style.getPropertyValue(G));if(f||0===g)s=!0;s?l.scheduleAction(function(){e({currentTarget:a.view})}):a.view.addEventListener(E,e,!1);k()}function k(){var c="",d,h=[],e;for(i=0;i<b.properties.length;i++)d=b.properties[i],
e=b.values[i],"rotate"===d?(c+="rotate("+e+") ",d=A):"skew"===d?(c+="skew("+e+") ",d=A):u&&"translate"===d?(c+="translate3d("+e+") ",d=A):"translate"===d?(c+="translate("+e+") ",d=A):"translateX"===d?(c+="translateX("+e+") ",d=A):"translateY"===d?(c+="translateY("+e+") ",d=A):"rotateX"===d?(c+="rotateX("+e+") ",d=A):"rotateY"===d?(c+="rotateY("+e+") ",d=A):"scale"===d?(c+="scale("+e+") ",d=A):a.setStyle(d,e),-1==h.indexOf(d)&&h.push(d);c&&(b.additive&&(c=a.getCTM().toString()+" "+c),v(a.view,c));
a.setStyle(P,h.join(","))}function m(){q();var b,e,j;b=function(f){if(f.currentTarget===a.view){s||a.view.removeEventListener(D,b,!1);r&&k();a.view.style.removeProperty(F);a.view.style.removeProperty(J);if(e=a.getStyle(C))e=e.replace(p,""),a.setStyle(C,e);try{if((data=g.__css_animations[p])&&2===data.length)x.getElementsByTagName("head")[0].removeChild(data[0]),delete g.__css_animations[p]}catch(n){return n.stack&&console.log(n.stack),console.error(n),!1}c.delegate&&c.delegate.taskDidStop&&c.delegate.taskDidEnd(c);
d&&d.call(h?h:w)}};j=parseFloat(a.view.style.getPropertyValue(F));if(f||0===j)s=!0;s?l.scheduleAction(function(){b({currentTarget:a.view})}):a.view.addEventListener(D,b,!1);e=(e=a.getStyle(C))?e+(", "+p):p;a.setStyle(C,e)}function t(){var c,d,h,f,n,j,q,l=x.createElement("style");l.type="text/css";var k="";for(d in b.keyFrames){j="";c=b.keyFrames[d];h="";if(e.isArray(c))for(f=0;f<c.length;f++)q=c[f],null==q||"undefined"==typeof q||(n=b.properties[f])&&("rotate"===n?j+="rotate("+q+") ":"skew"===n?j+=
"skew("+q+") ":u&&"translate"===n?j+="translate3d("+q+") ":"translate"===n?j+="translate("+q+") ":"translateX"===n?j+="translateX("+q+") ":"translateY"===n?j+="translateY("+q+") ":"rotateX"===n?j+="rotateX("+q+") ":"rotateY"===n?j+="rotateY("+q+") ":"scale"===n?j+="scale("+q+") ":"perspective"===n?j+="perspective("+q+") ":h+=n+":"+q+";");else for(f=0;f<b.properties.length;f++)q=b.values[f],(n=b.properties[f])&&("rotate"===n?j+="rotate("+q+") ":"skew"===n?j+="skew("+q+") ":u&&"translate"===n?j+="translate3d("+
q+") ":"translate"===n?j+="translate("+q+") ":"translateX"===n?j+="translateX("+q+") ":"translateY"===n?j+="translateY("+q+") ":"rotateX"===n?j+="rotateX("+q+") ":"rotateY"===n?j+="rotateY("+q+") ":"scale"===n?j+="scale("+q+") ":"perspective"===n?j+="perspective("+q+") ":h+=n+":"+q+";");j&&(b.additive&&(j=a.getCTM().toString()+" "+j),h+=A+": "+j+";");k+=d+" { "+h+" } "}c=x.createTextNode("@"+R+" "+p+" { "+k+" }");l.appendChild(c);x.getElementsByTagName("head")[0].appendChild(l);g.__css_animations[p]=
[l,a];m()}if(!b||!a||!a.view)console.error("procesAnimation: invalid component parameter!");else{var p=o.createId(),r=b.keyFrames["0%"]?!0:!1,s=!1,w=this;r?l.scheduleAction(t):l.scheduleAction(j);return p}};g.__css_animations={};g.DEFAULT_DURATION="0.3s";g.DEFAULT_TIMING=g.EASE;g.prototype={properties:null,values:null,durations:null,timings:null,origin:null,iterationCount:1,delay:0,keyFrames:null,additive:!0,setAnimations:function(a){var c,b,d;this.properties=[];this.values=[];this.timings=[];this.keyFrames=
{};this.timings=this.durations=this.origin=null;for(c=0;c<a.length;c++)d=a[c],!e.isArray(d)||2!==d.length?console.warn("vs.fx.Animation, invalid animations"):(b=d[0],d=d[1],!e.isString(b)||!e.isString(d)?console.warn("vs.fx.Animation, invalid constructor argument option: ["+b+", "+d+"]"):(this.properties.push(b),this.values.push(d)))},addKeyFrame:function(a,c){if(c)if("from"===a)this.keyFrames["0%"]=c;else if("to"===a)this.keyFrames["100%"]=c;else if(e.isNumber(a)&&!(0>a||100<a))this.keyFrames[a+
"%"]=c},process:function(a,c,b,d){return Y(a,this,c,b,d)},clone:function(){var a=new g,c,b;a.keyFrames={};a.keyFrames["100%"]=a;a.properties=this.properties?this.properties.slice():[];a.values=this.values?this.values.slice():[];this.durations&&(a.durations=this.durations);a.timings=this.timings?this.timings.slice():[];this.origin&&(a.origin=this.origin.slice());if(this.keyFrames)for(c in this.keyFrames)"100%"!==c&&(b=this.keyFrames[c],a.keyFrames[c]=e.isArray(b)?b.slice():l.util.clone(b));a.iterationCount=
this.iterationCount;a.delay=this.delay;return a},start:function(a){return this.process(a)}};e.extendClass(g,o.Task);e.defineClassProperties(g,{duration:{set:function(a){a&&(this.durations=[a])},get:function(){return this.durations&&this.durations.length?this.durations[0]:g.DEFAULT_DURATION}},timing:{set:function(a){a&&(this.timings=[a])},get:function(){return this.timings&&this.timings.length?this.timings[0]:g.EASE}}});g.EASE="ease";g.LINEAR="linear";g.EASE_IN="ease-in";g.EASE_OUT="ease-out";g.EASE_IN_OUT=
"ease-in-out";TranslateAnimation=function(a,c,b){this.parent=g;arguments.length?(u?this.parent(["translate","${x}px,${y}px,${z}px"]):this.parent(["translate","${x}px,${y}px"]),e.isNumber(a)&&(this.x=a),e.isNumber(c)&&(this.y=c),e.isNumber(b)&&(this.z=b)):this.parent();this.constructor=TranslateAnimation};TranslateAnimation.prototype={x:0,y:0,z:0};e.extendClass(TranslateAnimation,g);RotateAnimation=function(a){this.parent=g;arguments.length?(this.parent(["rotate","${deg}deg"]),e.isNumber(a)&&(this.deg=
a)):this.parent();this.constructor=RotateAnimation};RotateAnimation.prototype={deg:0};e.extendClass(RotateAnimation,g);RotateXYZAnimation=function(a,c,b){this.parent=g;arguments.length?(this.parent(["rotateX","${degX}deg"],["rotateY","${degY}deg"],["rotate","${degZ}deg"]),e.isNumber(a)&&(this.degX=a),e.isNumber(c)&&(this.degY=c),e.isNumber(b)&&(this.degZ=b)):this.parent();this.constructor=RotateXYZAnimation};RotateXYZAnimation.prototype={degX:0,degY:0,degZ:0};e.extendClass(RotateXYZAnimation,g);ScaleAnimation=
function(a,c,b){this.parent=g;arguments.length?!e.isNumber(c)&&!e.isNumber(c)?(this.parent(["scale","${sx}"]),this.sy=this.sx=a):(this.parent(["scaleX","${sx}"],["scaleY","${sy}"],["scaleZ","${sz}"]),e.isNumber(a)&&(this.sx=a),e.isNumber(c)&&(this.sy=c),e.isNumber(b)&&(this.sz=b)):this.parent();this.constructor=ScaleAnimation};ScaleAnimation.prototype={sx:1,sy:1,sz:1};e.extendClass(ScaleAnimation,g);SkewAnimation=function(a,c){this.parent=g;arguments.length?(this.parent(["skew","${ax}deg,${ay}deg"]),
e.isNumber(a)&&(this.ax=a),e.isNumber(c)&&(this.ay=c)):this.parent();this.constructor=SkewAnimation};SkewAnimation.prototype={ax:0,ay:0};e.extendClass(SkewAnimation,g);OpacityAnimation=function(a){this.parent=g;arguments.length?(this.parent(["opacity","${value}"]),e.isNumber(a)&&(this.value=a)):this.parent();this.constructor=OpacityAnimation};OpacityAnimation.prototype={value:1};e.extendClass(OpacityAnimation,g);g.SlideOutRight=new g(["translateX","$width"]);g.SlideOutRight.addKeyFrame(0,["0px"]);
g.SlideOutLeft=new g(["translateX","-$width"]);g.SlideOutLeft.addKeyFrame(0,["0px"]);g.SlideOutTop=new g(["translateY","-$height"]);g.SlideOutTop.addKeyFrame(0,["0px"]);g.SlideOutBottom=new g(["translateY","$height"]);g.SlideOutBottom.addKeyFrame(0,["0px"]);g.SlideInRight=new g(["translateX","0px"]);g.SlideInRight.addKeyFrame(0,["$width"]);g.SlideInLeft=new g(["translateX","0px"]);g.SlideInLeft.addKeyFrame(0,["-$width"]);g.SlideInTop=new g(["translateY","0px"]);g.SlideInTop.addKeyFrame(0,["-$height"]);
g.SlideInBottom=new g(["translateY","0px"]);g.SlideInBottom.addKeyFrame(0,["$height"]);g.FadeIn=new g(["opacity","1"]);g.FadeIn.addKeyFrame(0,["0"]);g.FadeOut=new g(["opacity","0"]);g.FadeOut.addKeyFrame(0,["1"]);w.Animation=g;w.cancelAnimation=function(a){if(!a)return!1;var c,b;if((b=g.__css_animations[a])&&2===b.length){if(!b[1]||!b[1].getStyle||!b[0])return!1;c=b[1].getStyle(C);if(!c)return!1;c=c.replace(a,"");b[1].setStyle(C,c);try{x.getElementsByTagName("head")[0].removeChild(b[0])}catch(d){return d.stack&&
console.log(d.stack),console.error(d),!1}delete g.__css_animations[a]}else return!1;return!0};w.TranslateAnimation=TranslateAnimation;w.RotateAnimation=RotateAnimation;w.RotateXYZAnimation=RotateXYZAnimation;w.ScaleAnimation=ScaleAnimation;w.SkewAnimation=SkewAnimation;w.OpacityAnimation=OpacityAnimation;s.prototype={_delegate:null,_owner:null,_fsm:null,_initial_component:null,destructor:function(){this._owner&&(this._owner.__controller__=B,this._owner.remove=this._owner._ab_controller_remove,this._owner._ab_controller_remove=
B);this._delegate=B;e.free(this._fsm);o.EventSource.prototype.destructor.call(this)},initComponent:function(){o.EventSource.prototype.initComponent.call(this);this._fsm&&this._fsm.init();this._owner?this._owner.__controller__?console.error("The owner already use a controller"):(this._owner.__controller__=this,this._owner._ab_controller_remove=this._owner.remove,this._owner.remove=this.ab_controller_remove):console.error("Invalid vs.fx.Controller, owner is null vs.fx.Controller.id = '"+this._id+"'")},
ab_controller_remove:function(a){a&&((state=this.__controller__._fsm._list_of_state[a.id])?this.__controller__.remove(a):this._ab_controller_remove(a))},isStateExit:function(a){return!this._fsm?!1:this._fsm._list_of_state[a]?!0:!1},add:function(a,c,b,d){console.warn("vs.fx.Controller.add is deprecated. Use vs.fx.Controller.push");return this.push(a,c,b,d)},push:function(a,c,b,d){if(a&&this._fsm){c||(c={});var h=null,n,f,h=e.isString(a)&&c.id?c.id:!e.isString(a)&&a.id?a.id:o.createId();if(!this.isStateExit(h)){this._fsm.addState(h);
this._fsm._list_of_state[h].bindings={};if(d&&d.length)for(f=0;f<d.length;f++)n=d[f],!n||3!==n.length?console.warn("vs.fx.Controller.push: invalid binding information"):this.componentBind(h,n[0],n[1],n[2]);this.setStateComponentInformation(h,a,b,c);return h}}},remove:function(a){if(a&&this._owner&&this._fsm){var c=null;e.isString(a)?c=a:e.isString(a)||(c=a.id);(a=this._fsm._list_of_state[c])&&a.comp&&this._owner._ab_controller_remove(a.comp);this._fsm.removeState(c)}},setStateComponentInformation:function(a,
c,b,d){a&&this._fsm&&this._fsm.existState(a)&&c&&this._owner&&(d=d?e.clone(d):{},a=this._fsm._list_of_state[a],a.init_data=d,e.isString(c)?(a.comp_name=c,a.comp=B):(a.comp_name="",a.comp=c,this._owner.isChild(c)||this._owner.add(c,b)))},addTransition:function(a,c,b,d,h){var e;if(a&&this._fsm&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&b)for(e in this._fsm.existInput(b)||this._fsm.addInput(b),this._fsm.addTransition(a,c,b),this._fsm._list_of_state[a].transitionEvents)b=this._fsm._list_of_state[a].transitionEvents[e],
b.to===c&&(b.animation_out=d,b.animation_in=h)},_animateComponents:function(a,c,b,d,h,e){var f=this,j=function(){try{h&&h.call(f._owner),f._delegate&&f._delegate.animationDidEnd&&(console.warn("animationDidEnd is deprecated. Please use 'controllerAnimationDidEnd'."),f._delegate.animationDidEnd(f)),f._delegate&&f._delegate.controllerAnimationDidEnd&&f._delegate.controllerAnimationDidEnd(a,c,f)}catch(b){b.stack&&console.log(b.stack),console.error(b)}};l.scheduleAction(function(){try{if(c.show(),!d&&
!b)j.call(f);else{if(e){if(d){var h=d.durations;d.durations="0s"}if(b){var g=b.durations;b.durations="0s"}}d&&!b?d.process(c,j,f):!d&&b?b.process(a,j,f):(d&&d.process(c,j,f),b&&b.process(a));e&&(d&&(d.durations=h),b&&(b.durations=g))}}catch(l){l.stack&&console.log(l.stack),console.error(l)}})},componentBind:function(a,c,b,d){if(this._fsm){var h=this._fsm._list_of_state[a],e;h&&(e=h.bindings[c],e||(e=[],h.bindings[c]=e),e.push([b,d]),a===this._current_state&&h.comp.bind(c,b,d))}},refresh:function(){},
getCurrentState:function(){return!this._fsm?void 0:this._fsm._current_state},configureNewComponent:function(){},_beforeStateEnter:function(a,c){if(a&&(a.comp_name||a.comp)){var b,d,h,e;a.comp||(a.comp=this._owner.createAndAddComponent(a.comp_name,a.init_data,a.extension),a.comp.configure(a.init_data),a.comp&&a.comp.propertiesDidChange&&a.comp.propertiesDidChange(),a.comp.propertyChange(),this.configureNewComponent(a.comp));h=c;a.data_adaptation_func&&(h=a.data_adaptation_func(c));if(h){for(d in h)if(a.comp.__lookupSetter__(d)||
a.comp.hasOwnProperty(d))a.comp[d]=h[d];a.comp.propertyChange()}for(b in a.bindings)if(d=a.bindings[b])for(h=0;h<d.length;h++)(e=d[h])&&(e[1]?a.comp.bind(b,e[0],e[1]):a.comp.bind(b,e[0]))}},_beforeStateExit:function(a){if(a&&a.comp){var c,b,d,e;for(c in a.bindings)if(b=a.bindings[c])for(d=0;d<b.length;d++)(e=b[d])&&(e[1]?a.comp.unbind(c,e[0],e[1]):a.comp.bind(c,e[0]))}},goTo:function(a,c,b,d){var h,f=null;if(!a||!this._list_of_state[a])return console.warn("vs.fx.Controller.goTo unknown State id:"+
a),!1;this._current_state&&(b&&(f=this._list_of_state[this._current_state].transitionEvents[b.on]),h=this._list_of_state[this._current_state],this.owner._beforeStateExit(h));this._current_state=a;a=this._list_of_state[this._current_state];this.owner._beforeStateEnter(a,b?b.data:null);h&&h.comp&&h.comp.viewWillDisappear&&h.comp.viewWillDisappear();a.comp.viewWillAppear&&a.comp.viewWillAppear();this.owner._delegate&&this.owner._delegate.controllerViewWillChange&&(h?this.owner._delegate.controllerViewWillChange(h.comp,
a.comp,this.owner):this.owner._delegate.controllerViewWillChange(null,a.comp,this.owner));f?this.owner._animateComponents(h.comp,a.comp,f.animation_out,f.animation_in,null,d):a.comp.show();if(c&&this._output_action[c])if(d=this._output_action[c],e.isFunction(d))d.call(this._owner,b);else if(e.isString(d))this._owner[this._output_action[c]](b);return!0},notify:function(a,c){this._fsm&&a&&a.type&&this._fsm.fsmNotify(a.type,a.data,c)},clear:function(){this._fsm&&this._fsm.clear()}};e.extendClass(s,o.EventSource);
e.defineClassProperties(s,{initialComponent:{set:function(a){!this._fsm||!a?this._initial_component=B:this._fsm.existState(a)&&(this._initial_component=a,this._fsm.initialState=a,this._fsm.goTo(a))},get:function(){return this._initial_component}},delegate:{set:function(a){this._delegate=a}}});w.Controller=s;f.ANIMATION_DURATION=350;f.NEXT="next";f.PRED="pred";f.FIRST="first";f.LAST="last";f.prototype={_is_tactile:!1,_owner_handler_event_extended:!1,_owner_handler_event:null,_animation_duration:f.ANIMATION_DURATION,
_last_comp_id:null,_states_array:null,__nb_panels:0,_view_size:null,destructor:function(){delete this._states_array;s.prototype.destructor.call(this)},initComponent:function(){s.prototype.initComponent.call(this);this.isTactile=this._is_tactile;this._updateViewSize()},push:function(a,c,b,d){if(a&&(c||(c={}),a=s.prototype.push.call(this,a,c,b,d))){this._states_array.push(a);this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,
a,f.NEXT);this.addTransition(a,this._last_comp_id,f.PRED);this.addTransition(a,this._initial_component,f.FIRST);this._last_state=a;if(this._last_comp_id===this._initial_state){state=this._fsm._list_of_state[a];if(!state){console.error("Unknown error in vs.fx.StackController.push");return}state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&
state.comp.propertiesDidChange(),state.comp.propertyChange());state.comp.show()}return this._last_comp_id=a}},_updateViewSize:function(){},remove:function(a){if(a){var c=null;e.isString(a)?c=a:e.isString(a)||(c=a.id);var b=this._states_array.findItem(c);if(-1!==b){this._fsm.removeTransitionTo(c,f.NEXT);this._fsm.removeTransitionFrom(c,f.PRED);this._fsm.removeTransitionFrom(c,f.FIRST);this._states_array.remove(b);this.__nb_panels--;if(0===b&&0<this.__nb_panels){this._initial_component=this._states_array[0];
for(var d in this._states_array)d!==c&&d!==this._initial_component&&(this._fsm.removeTransitionFrom(d,f.FIRST),this.addTransition(d,this._initial_component,f.FIRST))}0===this.__nb_panels&&(this._initial_component=B,this._fsm._current_state=B);this._initial_component&&(this._fsm._current_state===c?0===b?this._fsm.goTo(this._initial_component):(b===this._states_array.length&&b--,this._fsm.goTo(this._states_array[b])):this._fsm.goTo(this._fsm._current_state));s.prototype.remove.call(this,a)}}},orientationDidChange:function(){this._updateViewSize()},
goToViewId:function(a,c,b){a=this._states_array.findItem(a);if(-1===a)return!1;this.goToViewAt(a,c,b)},goToViewAt:function(a,c,b){if(0>a||a>this._states_array.length)return!1;var d=this._states_array.findItem(this._fsm._current_state);if(d===a)return!0;var e=this._fsm._list_of_state[this._fsm._current_state];if(a>d){for(;d<a-1;)this._fsm.fsmNotify(f.NEXT,null,!0),d++;this._fsm.fsmNotify(f.NEXT,null,!0);a=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(1,e.comp,a.comp,
c,b)}else{for(;a+1<d;)this._fsm.fsmNotify(f.PRED,null,!0),d--;this._fsm.fsmNotify(f.PRED,null,!0);a=this._fsm._list_of_state[this._fsm._current_state];this._stackAnimateComponents(-1,e.comp,a.comp,c,b)}},_stackAnimateComponents:function(){},_animateComponents:function(){},goToNextView:function(a,c){var b=this._fsm._list_of_state[this._fsm._current_state],d=this._fsm.fsmNotify(f.NEXT,null,!0),e=this._fsm._list_of_state[this._fsm._current_state];d&&this._stackAnimateComponents(1,b.comp,e.comp,a,c);
return d},goToPreviousView:function(a,c){var b=this._fsm._list_of_state[this._fsm._current_state],d=this._fsm.fsmNotify(f.PRED,null,!0),e=this._fsm._list_of_state[this._fsm._current_state];d&&this._stackAnimateComponents(-1,b.comp,e.comp,a,c);return d},goToFirstView:function(a,c,b){var d=this._fsm._list_of_state[this._fsm._current_state],e=this._fsm.fsmNotify(f.FIRST,null,!0),g=this._fsm._list_of_state[this._fsm._current_state];e&&this._stackAnimateComponents(b?b:-1,d.comp,g.comp,a,c);return e},goToLastView:function(a,
c,b){var d=this._fsm._list_of_state[this._fsm._current_state],e=this._fsm.goTo(this._last_state,null,{on:f.LAST,data:null},c),g=this._fsm._list_of_state[this._fsm._current_state];e&&this._stackAnimateComponents(b?b:1,d.comp,g.comp,a,c);return e},handleEvent:function(){}};e.extendClass(f,s);e.defineClassProperties(f,{viewSize:{set:function(a){a&&e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=a[0],this._view_size[1]=a[1],this._updateViewSize())},
get:function(){return!this._view_size?this._owner.size:this._view_size.slice()}},isTactile:{set:function(a){a?(this._is_tactile=!0,this._owner&&this._owner.view&&(this._owner_handler_event_extended||(this._owner_handler_event=this._owner.handleEvent,this._owner.handleEvent=this.handleEvent,l.addPointerListener(this._owner.view,o.POINTER_START,this._owner,!1)),this._owner_handler_event_extended=!0)):(this._is_tactile=!1,this._owner&&this._owner.view&&this._owner_handler_event_extended&&(l.removePointerListener(this._owner.view,
o.POINTER_START,this._owner,!1),this._owner.handleEvent=this._owner_handler_event,this._owner_handler_event_extended=!1))},get:function(){return this._is_tactile}},animationDuration:{set:function(a){a||(a=0);e.isNumber(a)&&(this._animation_duration=a)}}});w.StackController=f;var m=l.core.createClass({parent:l.fx.StackController,_delta:0,_orientation:0,_transition_out_left:null,_transition_out_right:null,_transition_in:null,_animation_mode:0,properties:{orientation:{set:function(a){a!==m.HORIZONTAL&&
a!==m.VERTICAL||(this._orientation=a,this._updateViewSize())},get:function(){return this._orientation}},animationDuration:{set:function(a){a||(a=0);e.isNumber(a)&&(this._animation_duration=a,this._transition_out_left.duration=this._animation_duration+"ms",this._transition_out_right.duration=this._animation_duration+"ms",this._transition_in.duration=this._animation_duration+"ms")}},animationMode:{set:function(a){a||(a=0);a!==m.POURCENTAGE&&a!==m.PIXEL||this._animation_mode===a||(this._animation_mode=
a,e.free(this._transition_out_right),e.free(this._transition_out_left),this._setUpAnimations(),this._updateViewSize())}}},constructor:function(a){this._super(a);this._orientation=m.HORIZONTAL;arguments.length&&(this._setUpAnimations(),this._transition_in=new g(["translate","0,0,0"]),this.animationDuration=m.ANIMATION_DURATION)},_setUpAnimations:function(){switch(this._animation_mode){case m.POURCENTAGE:this._transition_out_left=new g(["translate","${x}%,${y}%,0"]);this._transition_out_right=new g(["translate",
"${x}%,${y}%,0"]);break;case m.PIXEL:this._transition_out_left=new g(["translate","${x}px,${y}px,0"]),this._transition_out_right=new g(["translate","${x}px,${y}px,0"])}this._transition_out_left.x=0;this._transition_out_left.y=0;this._transition_out_left.duration=this._animation_duration+"ms";this._transition_out_right.duration=this._animation_duration+"ms"},_updateViewSize:function(){var a,c,b,d;switch(this._animation_mode){case m.POURCENTAGE:a=100;delta_str=a+"%";break;case m.PIXEL:c=this._owner.size,
this._orientation===m.HORIZONTAL?a=c[0]:this._orientation===m.VERTICAL&&(a=c[1]),delta_str=a+"px"}this._orientation===m.HORIZONTAL?(this._transition_out_left.x=-a,this._transition_out_left.y=0,this._transition_out_right.x=a,this._transition_out_right.y=0):this._orientation===m.VERTICAL&&(this._transition_out_left.x=0,this._transition_out_left.y=-a,this._transition_out_right.x=0,this._transition_out_right.y=a);this._orientation===m.HORIZONTAL?d="translate3D(-"+delta_str+",0,0)":this._orientation===
m.VERTICAL&&(d="translate3D(0,-"+delta_str+",0)");for(a=0;a<this._states_array.length;a++)if(c=this._states_array[a],(b=this._fsm._list_of_state[c])&&b.comp)this._fsm._current_state===c?(this._orientation===m.HORIZONTAL?d="translate3D("+delta_str+",0,0)":this._orientation===m.VERTICAL&&(d="translate3D(0,"+delta_str+",0)"),b.comp.view.style.webkitTransitionDuration="0",v(b.comp.view,"translate3D(0,0,0)")):(b.comp.view.style.webkitTransitionDuration="0",v(b.comp.view,d))},push:function(a,c,b,d){if(a&&
(c||(c={}),a=s.prototype.push.call(this,a,c,b,d))){this._states_array.push(a);this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,f.NEXT);this.addTransition(a,this._last_comp_id,f.PRED);if(state=this._fsm._list_of_state[a])return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position",
"absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=a;console.error("Unknown error in vs.fx.StackController.push")}},configureNewComponent:function(a){var c,b,d;switch(this._animation_mode){case m.POURCENTAGE:b=
"100%";break;case m.PIXEL:d=this._owner.size,this._orientation===m.HORIZONTAL?b=d[0]+"px":this._orientation===m.VERTICAL&&(b=d[1]+"px")}this._orientation===m.HORIZONTAL?c="translate3D("+b+",0,0)":this._orientation===m.VERTICAL&&(c="translate3D(0,"+b+",0)");a.view.style.webkitTransitionDuration="0";v(a.view,c);a.hide()},handleEvent:function(a){var c=!1,b=this.size,d=this.__controller__._animation_duration;a.type===o.POINTER_START?(this.__pos=this.__controller__._orientation===m.HORIZONTAL?a.changedTouches?
a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,l.addPointerListener(x,o.POINTER_END,this,!0),l.addPointerListener(x,o.POINTER_MOVE,this,!0),this.__delta=this.animationDuration=0):a.type===o.POINTER_MOVE?(a.preventDefault(),this.__delta=this.__controller__._orientation===m.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos:a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos):a.type===o.POINTER_END&&
(50<this.__delta?c=this.__controller__.goToPreviousView():-50>this.__delta&&(c=this.__controller__.goToNextView()),c||(this.animationDuration=d=this.__controller__._orientation===m.HORIZONTAL?Math.floor(d*this.__delta/b[0]):Math.floor(d*this.__delta/b[1])),l.removePointerListener(x,o.POINTER_END,this,!0),l.removePointerListener(x,o.POINTER_MOVE,this,!0))},refresh:function(){f.prototype.refresh.call(this);this._updateViewSize()},_stackAnimateComponents:function(a,c,b,d,e){var f=this._transition_in,
g,j,k;0<a?(j=this._transition_out_right,g=this._transition_out_left):(j=this._transition_out_left,g=this._transition_out_right);k=j.durations;j.durations="0s";var m=this,o=function(){c.hide();try{m._delegate&&m._delegate.controllerAnimationDidEnd&&m._delegate.controllerAnimationDidEnd(c,b,m),d&&d.call(m._owner)}catch(a){a.stack&&console.log(a.stack),console.error(a)}},p=function(){j.durations=k;try{b.show(),b.refresh(),l.scheduleAction(function(){if(e){var a=f.durations;f.durations="0s";var d=g.durations;
g.durations="0s"}f.process(b,o,m);g.process(c);e&&(f.durations=a,g.durations=d)})}catch(a){a.stack&&console.log(a.stack),console.error(a)}};j.process(b,function(){l.scheduleAction(function(){p()})})}});m.ANIMATION_DURATION=300;m.HORIZONTAL=0;m.VERTICAL=1;m.POURCENTAGE=0;m.PIXEL=1;w.SlideController=m;var r=l.core.createClass({parent:l.fx.StackController,_is_circular:!1,_is_continuous_swipe:!1,__delta:0,__current_pos:0,_orientation:0,properties:{orientation:{set:function(a){a!==r.HORIZONTAL&&a!==r.VERTICAL||
(this._orientation=a,this._updateViewSize())},get:function(){return this._orientation}},isTactile:{set:function(a){a?(this._is_tactile=!0,this._owner&&this._owner.view&&(!this._owner_handler_event_extended&&!this.__drag_recognizer&&(this.__drag_recognizer=new I.DragRecognizer(this),this._owner.addPointerRecognizer(this.__drag_recognizer)),this._owner_handler_event_extended=!0)):(this._is_tactile=!1,this._owner&&this._owner.view&&this._owner_handler_event_extended&&(this.__drag_recognizer&&(this._owner.removePointerRecognizer(this.__drag_recognizer),
this.__drag_recognizer=null),this._owner_handler_event_extended=!1))},get:function(){return this._is_tactile}},isCircular:{set:function(a){this._is_circular=a?!0:!1},get:function(){return this._is_circular}},isContinuousSwipe:{set:function(a){this._is_continuous_swipe=a?!0:!1},get:function(){return this._is_continuous_swipe}}},constructor:function(a){this._super(a);this._orientation=r.HORIZONTAL;arguments.length&&(this.animationDuration=r.ANIMATION_DURATION)},_updateViewSize:function(){var a,c,b;
a=this._owner.size;this._orientation===r.HORIZONTAL?b=a[0]:this._orientation===r.VERTICAL&&(b=a[1]);for(a=0;a<this._states_array.length;a++)c=this._states_array[a],(c=this._fsm._list_of_state[c])&&c.comp&&(this._orientation===r.HORIZONTAL?c.comp.translate(b*a,0,0):this._orientation===r.VERTICAL&&c.comp.translate(0,b*a,0))},push:function(a,c,b,d){if(a&&(c||(c={}),a=s.prototype.push.call(this,a,c,b,d))){this._states_array.push(a);this.__nb_panels++;if(1===this.__nb_panels)return this._last_comp_id=
this.initialComponent=a;this.addTransition(this._last_comp_id,a,f.NEXT);this.addTransition(a,this._last_comp_id,f.PRED);this.addTransition(a,this._initial_component,f.FIRST);this._last_state=a;if(state=this._fsm._list_of_state[a])return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&
state.comp.propertiesDidChange(),state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=a;console.error("Unknown error in vs.fx.StackController.push")}},configureNewComponent:function(){var a=this._owner.size;this._orientation===r.HORIZONTAL?state.comp.translate(a[0]*(this.__nb_panels-1),0,0):this._orientation===
r.VERTICAL&&state.comp.translate(0,a[1]*(this.__nb_panels-1),0)},didDrag:function(a){this.__delta=this._orientation===r.HORIZONTAL?a.dx:a.dy;this._is_continuous_swipe&&(a=this._owner._holes.children,a.style.webkitTransitionDuration="0ms",v(a,"translate3D("+(this.__delta+this.__current_pos)+"px,0,0)"))},didDragEnd:function(){function a(){var a=b._owner._holes.children;a.style.webkitTransitionDuration=b._animation_duration+"ms";b._orientation===r.HORIZONTAL?v(a,"translate3D("+b.__current_pos+"px,0,0)"):
v(a,"translate3D(0,"+b.__current_pos+"px,0)")}var c,b=this;50<this.__delta?(c=this._fsm.getAccessibleStateOn(f.PRED),(c=!c&&this._is_circular?this.goToLastView(null,null,-1):this.goToPreviousView())||a()):-50>this.__delta?(c=this._fsm.getAccessibleStateOn(f.NEXT),(c=!c&&this._is_circular?this.goToFirstView(null,null,1):this.goToNextView())||a()):this._is_continuous_swipe&&a()},refresh:function(){f.prototype.refresh.call(this);this._updateViewSize()},_stackAnimateComponents:function(a,c,b,d,e){var a=
this._owner.size,f=this._owner._holes.children,c=this._states_array.indexOf(b.id);f.style.webkitTransitionDuration="0ms";this.__current_pos=this._orientation===r.HORIZONTAL?c*-a[0]:c*-a[1];var g=this;(function(){try{b.show(),b.refresh(),l.scheduleAction(function(){f.style.webkitTransitionDuration=e?"0ms":g._animation_duration+"ms";g._orientation===r.HORIZONTAL?v(f,"translate3D("+g.__current_pos+"px,0,0)"):v(f,"translate3D(0,"+g.__current_pos+"px,0)")})}catch(a){a.stack&&console.log(a.stack),console.error(a)}})()}});
e.extend(r.prototype,I.RecognizerManager);r.ANIMATION_DURATION=300;r.HORIZONTAL=0;r.VERTICAL=1;r.PIXEL=1;w.SwipeController=r;p.NO_ANIMATION=0;p.CARD_ANIMATION=1;p.SLIDE_ANIMATION=2;p.DEFAULT_ANIMATION=p.SLIDE_ANIMATION;p.BACK="back";p.prototype={_nav_bar:null,__nav_bar_states:null,_animation_type:p.DEFAULT_ANIMATION,destructor:function(){s.prototype.destructor.call(this)},initComponent:function(){s.prototype.initComponent.call(this);this.__translate_in_right=new TranslateAnimation(0);this.__translate_out_right=
new g(["translate","100%,0,0"]);this.__translate_out_left=new g(["translate","-100%,0,0"]);this.__translate_in_left=new TranslateAnimation(0)},setNavigationBar:function(a){a&&!(!a instanceof I.NavigationBar)&&(this._nav_bar=a)},_updateViewSize:function(){},push:function(a,c,b){if(a&&(c||(c={}),a=s.prototype.push.call(this,a,c,null,b)))return(c=this._fsm._list_of_state[a])&&c.comp&&this.configureNewComponent(c.comp),a},configureNavigationBarState:function(a,c){var b,d,f,g,k=[],j={};if(this._fsm._list_of_state[a]&&
c){for(d=0,f=c.length;d<f;d++)if(g=c[d])if(b=g.comp)e.isString(b)&&(b=o.Object._obs[b]),!b instanceof l.ui.View||(k.push(b),g.properties&&(j[b.id]=g.properties));this.__nav_bar_states[a]=j;this._nav_bar&&this._nav_bar.setStateItems(a,k)}},configureTransition:function(a,c,b){a&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&b&&(this._fsm.existInput(b)||this._fsm.addInput(b),this._animation_type===p.SLIDE_ANIMATION?(this.addTransition(a,c,b,this.__translate_out_left,this.__translate_in_right),
this.addTransition(c,a,p.BACK,this.__translate_out_right,this.__translate_in_left),this.__translate_in_left.duration="300ms",this.__translate_out_left.duration="300ms",this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):this._animation_type===p.CARD_ANIMATION?(this.addTransition(a,c,b,null,this.__translate_in_right),this.addTransition(c,a,p.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):
(this.addTransition(a,c,b,null,this.__translate_in_right),this.addTransition(c,a,p.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="0",this.__translate_out_right.duration="0"))},configureNewComponent:function(a){this.__translate_out_right.process(a,null,null,!0)},goTo:function(a,c,b,d){s.prototype.goTo.call(this,a,c,b,d)&&this.owner._nav_bar&&this.owner._nav_bar.changeState(a,this.owner.__nav_bar_states[a])},_animateComponents:w.Controller.prototype._animateComponents};e.extendClass(p,
f);e.defineClassProperties(p,{viewSize:{set:function(a){a&&e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._view_size||(this._view_size=[]),this._view_size[0]=a[0],this._view_size[1]=a[1],this._updateViewSize())},get:function(){return!this._view_size?this._owner.size:this._view_size.slice()}},initialComponent:{set:function(a){if(a){if(this._fsm.existState(a)){this._initial_component=a;this._fsm.initialState=a;this._fsm.goTo(a);var a=this._fsm._list_of_state[a],c=this.__translate_in_right;
a&&a.comp&&c.process(a.comp,null,null,!0)}}else this._initial_component=B},get:function(){return this._initial_component}}});w.NavigationController=p;var k=l.core.createClass({parent:l.fx.StackController,_direction:0,_transition_out:null,_transition_in:null,properties:{direction:{set:function(a){a!==k.LEFT_OUT&&a!==k.RIGHT_OUT&&a!==k.BOTTOM_OUT&&a!==k.TOP_OUT||(this._direction=a,this._updateViewSize())},get:function(){return this._direction}},animationDuration:{set:function(a){a||(a=0);e.isNumber(a)&&
(this._animation_duration=a,this._transition_out&&(this._transition_out.duration=this._animation_duration+"ms"),this._transition_in&&(this._transition_in.duration=this._animation_duration+"ms"))}}},constructor:function(a){this._super(a);a&&(this._transition_out=new g(["translate","${x}%,${y}%,0"]),this._transition_out.x=0,this._transition_out.y=0,this._transition_in=new g(["translate","${x}%,${y}%,0"]),this._transition_in.x=0,this._transition_in.y=0,this.animationDuration=k.ANIMATION_DURATION);this._direction=
k.RIGHT_OUT},_updateViewSize:function(){this._transition_out&&(this._direction===k.LEFT_OUT?(this._transition_out.x=-100,this._transition_out.y=0):this._direction===k.RIGHT_OUT?(this._transition_out.x=100,this._transition_out.y=0):this._direction===k.BOTTOM_OUT?(this._transition_out.x=0,this._transition_out.y=100):(this._transition_out.x=0,this._transition_out.y=-100))},push:function(a,c,b,d){if(a&&(c||(c={}),a=s.prototype.push.call(this,a,c,b,d))){this._states_array.push(a);this.__nb_panels++;if(1===
this.__nb_panels)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,f.NEXT);this.addTransition(a,this._last_comp_id,f.PRED);if(state=this._fsm._list_of_state[a])return this._last_comp_id===this._initial_component?(state.comp||(state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),
state.comp.propertyChange()),state.comp.show(),state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)):state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp)),this._last_comp_id=a;console.error("Unknown error in vs.fx.CardController.push")}},configureNewComponent:function(a){var c;c=u?"translate3d":"translate";c=this._direction===k.LEFT_OUT?c+"(-100%,0":this._direction===k.RIGHT_OUT?c+"(100%,0":this._direction===k.BOTTOM_OUT?
c+"(0,100%":c+"(0,-100%";c=u?c+",0)":c+")";a.view.style.webkitTransitionDuration="0";v(a.view,c)},handleEvent:function(a){var c=!1,b,d;if(a.type===o.POINTER_START)this.__pos=this.__controller__._direction===k.LEFT_OUT||this.__controller__._direction===k.RIGHT_OUT?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,l.addPointerListener(x,o.POINTER_END,this,!0),l.addPointerListener(x,o.POINTER_MOVE,this,!0);else if(a.type===o.POINTER_MOVE)if(a.preventDefault(),
b=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],c=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),0<c&&(d=this.__controller__._states_array[c-1]),this.__controller__._direction===k.LEFT_OUT||this.__controller__._direction===k.RIGHT_OUT?(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=u?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?
a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,a=u?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__controller__._direction===k.LEFT_OUT||this.__controller__._direction===k.TOP_OUT)if(0>this.__delta)b.comp.view.style.webkitTransitionDuration=0,v(b.comp.view,a);else{if(d&&(b=this.__controller__._fsm._list_of_state[d])&&b.comp)a=this.__controller__._direction===k.LEFT_OUT||this.__controller__._direction===k.RIGHT_OUT?u?"translate3d("+(this.__delta-this._size[0])+
"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":u?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",b.comp.view.style.webkitTransitionDuration=0,v(b.comp.view,a)}else if(0<this.__delta)b.comp.view.style.webkitTransitionDuration=0,v(b.comp.view,a);else{if(d&&(b=this.__controller__._fsm._list_of_state[d])&&b.comp)a=this.__controller__._direction===k.LEFT_OUT||this.__controller__._direction===k.RIGHT_OUT?u?"translate3d("+(this._size[0]+
this.__delta)+"px,0px,0)":"translate("+(this._size[0]+this.__delta)+"px,0px)":u?"translate3d(0px,"+(this._size[1]+this.__delta)+"px,0)":"translate(0px,"+(this._size[1]+this.__delta)+"px)",b.comp.view.style.webkitTransitionDuration=0,v(b.comp.view,a)}else if(a.type===o.POINTER_END){b=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state];this.__controller__._direction===k.LEFT_OUT||this.__controller__._direction===k.TOP_OUT?50<this.__delta?c=this.__controller__.goToPreviousView():
-50>this.__delta&&(c=this.__controller__.goToNextView()):50<this.__delta?c=this.__controller__.goToNextView():-50>this.__delta&&(c=this.__controller__.goToPreviousView());if(!c)if(c=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),0<c&&(d=this.__controller__._states_array[c-1]),(this.__controller__._direction===k.LEFT_OUT||this.__controller__._direction===k.TOP_OUT)&&0>this.__delta)a=u?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=
this.__controller__._animation_duration+"ms",v(b.comp.view,a);else if((this.__controller__._direction===k.RIGHT_OUT||this.__controller__._direction===k.BOTTOM_OUT)&&0<this.__delta)a=u?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",v(b.comp.view,a);else if(d&&(b=this.__controller__._fsm._list_of_state[d])&&b.comp)a=this.__controller__._direction===k.LEFT_OUT?"(-100%,0px":this.__controller__._direction===k.RIGHT_OUT?"(100%,0px":
this.__controller__._direction===k.BOTTOM_OUT?"(0px,100%":"(0px,-100%",a=u?a+",0)":a+")",b.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",v(b.comp.view,a);l.removePointerListener(x,o.POINTER_END,this,!0);l.removePointerListener(x,o.POINTER_MOVE,this,!0)}},_stackAnimateComponents:function(a,c,b,d,e){var f,g,j,k;0<a?(f=this._transition_in,k=b):(f=this._transition_out,g=this._transition_in,k=c);g&&(j=g.durations,g.durations="0s");var m=this,o=function(){c.hide();
try{m._delegate&&m._delegate.controllerAnimationDidEnd&&m._delegate.controllerAnimationDidEnd(c,b,m),d&&d.call(this.owner)}catch(a){a.stack&&console.log(a.stack),console.error(a)}},p=function(){g&&(g.durations=j);try{b.show();if(e){var a=f.durations;f.durations="0s"}f.process(k,o,m);e&&(f.durations=a)}catch(c){c.stack&&console.log(c.stack),console.error(c)}};g?g.process(b,function(){l.scheduleAction(function(){p()})}):p()}});k.ANIMATION_DURATION=300;k.LEFT_OUT=0;k.RIGHT_OUT=1;k.TOP_OUT=2;k.BOTTOM_OUT=
3;w.CardController=k;t._translate_animation=new RotateXYZAnimation(-90,0,0);t._translate_animation.init();t._translate_animation.addKeyFrame("from",{degX:0});t._translate_animation.addKeyFrame(50,{degX:-92});t._translate_animation.addKeyFrame(70,{degX:-84});t._translate_animation.addKeyFrame(80,{degX:-90});t._translate_animation.addKeyFrame(95,{degX:-88});t._translate_animation.durations="2s";t.HORIZONTAL=0;t.VERTICAL=1;t.prototype={_orientation:t.HORIZONTAL,push:function(a,c,b){if(a){if(!e.isString(a)){var d=
this._states_array.length;a.position=[0,0];a.setStyle("z-index",1E3-d)}return f.prototype.push.call(this,a,c,b)}},handleEvent:function(a){var c=!1,b,d;if(a.type===o.POINTER_START)this.__pos=this.__layer._orientation===t.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,l.addPointerListener(x,o.POINTER_END,this,!0),l.addPointerListener(x,o.POINTER_MOVE,this,!0),this.animationDuration=0;else if(a.type===o.POINTER_MOVE)if(a.preventDefault(),
b=this.__layer._list_of_state[this.__layer._current_state],c=this.__layer._states_array.indexOf(this.__layer._current_state),0<c&&(d=this.__layer._states_array[c-1]),this.__layer._orientation===t.HORIZONTAL?(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=u?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,a=u?"translate3d(0px,"+this.__delta+
"px,0)":"translate(0px,"+this.__delta+"px)"),0>this.__delta)b.comp.view.style.webkitTransitionDuration=0,v(b.comp.view,a);else{if(d&&(b=this.__layer._list_of_state[d])&&b.comp)a=this.__layer._orientation===t.HORIZONTAL?u?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":u?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",b.comp.view.style.webkitTransitionDuration=0,v(b.comp.view,a)}else if(a.type===
o.POINTER_END){b=this.__layer._list_of_state[this.__layer._current_state];50<this.__delta?c=this.__layer.goToPreviousView():-50>this.__delta&&(c=this.__layer.goToNextView());if(!c)if(c=this.__layer._states_array.indexOf(this.__layer._current_state),0<c&&(d=this.__layer._states_array[c-1]),0>this.__delta)a=u?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",v(b.comp.view,a);else if(d&&(b=this.__layer._list_of_state[d])&&b.comp)a=
this.__layer._orientation===t.HORIZONTAL?u?"translate3d("+this._size[0]+"px,0px,0)":"translate("+this._size[0]+"px,0px)":u?"translate3d(0px,-"+this._size[1]+"px,0)":"translate(0px,-"+this._size[1]+"px)",b.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",v(b.comp.view,a);l.removePointerListener(x,o.POINTER_END,this,!0);l.removePointerListener(x,o.POINTER_MOVE,this,!0)}},goTo:function(a,c,b){function d(a){var b=this._list_of_state[this._states_array[a]];b&&(b.comp||(b.comp=
this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),b.comp.style("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange()),b.view?__setPos(b.view,0,0):b.comp.position=[0,0],b.comp.show(),b.comp.style("z-index",1E3-a))}var g=this._states_array.indexOf(a),k=this._list_of_state[this._current_state];f.prototype.goTo.call(this,a,c,b);if(a&&(this.owner.animationDuration=this._animation_duration,a=this._list_of_state[this._current_state],
a.comp.setStyle("position","absolute"),a.comp.position=[0,0],a.comp.setStyle("z-index",1E3-g),k&&a&&(k.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) translateZ(200px)"),a.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) rotateX(90deg) translateZ(200px)")),0<g&&d.call(this,g-1),g<this._states_array.length-1&&d.call(this,g+1),b&&b.on===f.NEXT&&k?t._translate_animation.process(this.owner):b&&b.on===f.PRED&&a&&(t._translate_animation.x=0,t._translate_animation.y=0,t._translate_animation.process(a.comp)),
c&&this._output_action[c]))if(g=this._output_action[c],e.isFunction(g))g.call(this.owner,b);else if(e.isString(g))this.owner[this._output_action[c]](b)}};e.extendClass(t,f);w.CubicController=t;y._opacity_animation=new OpacityAnimation(1);y._opacity_animation.init();y._opacity_animation.durations="0.2s";y.ANIMATION_DURATION=500;y.prototype={push:function(a,c,b){if(a){if(!e.isString(a)){var d=this._states_array.length;a.position=[0,0];a.setStyle("z-index",1E3-d)}f.prototype.push.call(this,a,c,b)}},
goTo:function(a,c,b){function d(a){var b=this._list_of_state[this._states_array[a]];b&&(b.comp||(b.comp=this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),b.comp.setStyle("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange()),b.view?__setPos(b.view,0,0):b.comp.position=[0,0],b.comp.show(),b.comp.setStyle("z-index",1E3-a))}var g=this._states_array.indexOf(a),k=this._list_of_state[this._current_state];
f.prototype.goTo.call(this,a,c,b);if(a&&(a=this._list_of_state[this._current_state],a.comp.setStyle("position","absolute"),a.comp.position=[0,0],a.comp.setStyle("z-index",1E3-g),0<g&&d.call(this,g-1),g<this._states_array.length-1&&d.call(this,g+1),b&&b.on===f.NEXT&&k?(y._opacity_animation.value=0,y._opacity_animation.process(k.comp)):b&&b.on===f.PRED&&a&&(y._opacity_animation.value=1,y._opacity_animation.process(a.comp)),c&&this._output_action[c]))if(g=this._output_action[c],e.isFunction(g))g.call(this.owner,
b);else if(e.isString(g))this.owner[this._output_action[c]](b)}};e.extendClass(y,f);e.defineClassProperty(y,"animationDuration",{set:function(a){a||(a=0);e.isNumber(a)&&(this._animation_duration=a,y._opacity_animation.durations=a/1E3+"s")}});w.OpacityController=y})(window);
/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(g){function c(a){a&&!a.size&&(a.size=[320,200]);this.parent=h.View;this.parent(a);this.constructor=c}function d(a){this.parent=b.EventSource;this.parent(a);this.constructor=d}var f=g.vs,e=f.util,b=f.core,h=f.ui,i=f.av;c.UNKNOWN_ERR=0;c.MEDIA_ERR_ABORTED=1;c.MEDIA_ERR_NETWORK=2;c.MEDIA_ERR_DECODE=3;c.MEDIA_ERR_SRC_NOT_SUPPORTED=4;c.prototype={delegate:null,_state:b.Task.STOPPED,__video_node:null,_src:"",_poster:"",_preload:"",_autoplay:!1,_loop:!1,_controls:!1,_volume:1,_muted:!1,_current_time:0,
play:function(){if(this._state===b.Task.STARTED)return!1;this.__video_node&&(this._state=b.Task.STARTED,this.__video_node.play())},start:function(){this.play()},pause:function(){if(this._state===b.Task.PAUSED)return!1;this.__video_node&&(this.__video_node.pause(),this._state=b.Task.PAUSED,this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this))},stop:function(){if(this._state===b.Task.STOPPED)return!1;this.__video_node&&(this.__video_node.stop?this.__video_node.stop():(this.__video_node.pause(),
this.__video_node.currentTime=0),this._state=b.Task.STOPPED,this.delegate&&this.delegate.taskDidStop&&this.delegate.taskDidStop(this))},destructor:function(){this.__i__&&(this.__video_node.removeEventListener("volumechange",this),this.__video_node.removeEventListener("ended",this),this.__video_node.removeEventListener("playing",this),this.__video_node.removeEventListener("play",this),this.__video_node.removeEventListener("pause",this),this.__video_node.removeEventListener("error",this),h.View.prototype.destructor.call(this))},
initComponent:function(){h.View.prototype.initComponent.call(this);if(this.__video_node=this.view.querySelector("video")){this.__video_node.addEventListener("volumechange",this);this.__video_node.addEventListener("ended",this);this.__video_node.addEventListener("playing",this);this.__video_node.addEventListener("play",this);this.__video_node.addEventListener("pause",this);this.__video_node.addEventListener("error",this);var a=this;this.__video_node.addEventListener("timeupdate",function(){a._current_time=
a.__video_node.currentTime;a.outPropertyChange("currentTime")},!1)}else console.error("Uncompatible video view")},handleEvent:function(a){switch(a.type){case "volumechange":this._volume=this.__video_node.getAttribute("volume");this.outPropertyChange("volume");this.propagate("volumechange",this._volume);break;case "ended":this._state=b.Task.STOPED;this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this);this.propagate(a.type);break;case "pause":this.delegate&&this.delegate.taskDidPause&&
this.delegate.taskDidPause(this);this._state=b.Task.PAUSED;this.propagate(a.type);break;case "playing":case "play":this._state=b.Task.STARTED;this.propagate(a.type);break;case "error":this.__video_node.error?this.propagate(a.type,this.__video_node.error.code):this.propagate(a.type,c.UNKNOWN_ERR)}}};e.extendClass(c,h.View);e.defineClassProperties(c,{controls:{set:function(a){this._controls=a?!0:!1;this.__video_node&&(this.__video_node.setAttribute("controls",this._controls),this.propertyChange("controls"))},
get:function(){return this._controls}},size:{set:function(a){if(a&&e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view)){this._updateSizeAndPos();if(!this.__video_node&&(this.__video_node=this.view.querySelector("video"),!this.__video_node)){console.error("Uncompatible video view");return}this.__video_node.setAttribute("width",this._size[0]);this.__video_node.setAttribute("height",this._size[1])}},get:function(){this.view&&this.view.parentNode&&
(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}},src:{set:function(a){e.isString(a)&&(this._src=a,this.__video_node&&(this.__video_node.setAttribute("src",this._src),this.propertyChange("src")))},get:function(){return this._src}},poster:{set:function(a){e.isString(a)&&(this._poster=a,this.__video_node&&(this.__video_node.setAttribute("poster",this._poster),this.propertyChange("poster")))},get:function(){return this._poster}},loop:{set:function(a){this._loop=
a?!0:!1;this.__video_node&&(this.__video_node.setAttribute("loop",this._loop),this.propertyChange("loop"))},get:function(){return this._loop}},autoplay:{set:function(a){this._autoplay=a?!0:!1;this.__video_node&&(this.__video_node.setAttribute("autoplay",this._autoplay),this.propertyChange("autoplay"))},get:function(){return this._autoplay}},volume:{set:function(a){if(e.isNumber(a)&&!(0>a||1<a))this._volume=a,this.__video_node&&(this.__video_node.setAttribute("volume",this._volume),this.propertyChange("volume"))},
get:function(){return this._volume}},muted:{set:function(a){this._muted=a?!0:!1;this.propertyChange("muted")},get:function(){return this._muted}},currentTime:{get:function(){return this._current_time}},state:{get:function(){return this._state}}});i.Video=c;d.UNKNOWN_ERR=0;d.MEDIA_ERR_ABORTED=1;d.MEDIA_ERR_NETWORK=2;d.MEDIA_ERR_DECODE=3;d.MEDIA_ERR_SRC_NOT_SUPPORTED=4;d.prototype={delegate:null,_state:b.Task.STOPPED,__audio:null,_src:"",_autoplay:!1,_loop:!1,_volume:1,_muted:!1,_current_time:0,play:function(){if(this._state===
b.Task.STARTED)return!1;this.__audio&&(this._state=b.Task.STARTED,this.__audio.play())},start:function(){this.play()},pause:function(){if(this._state===b.Task.PAUSED)return!1;this.__audio&&(this.__audio.pause(),this._state=b.Task.PAUSED,this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this))},stop:function(){if(this._state===b.Task.STOPPED)return!1;this.__audio&&(g.Media?this.__audio.stop():this.__audio.pause(),this._state=b.Task.STOPPED,this.delegate&&this.delegate.taskDidStop&&
this.delegate.taskDidStop(this))},destructor:function(){this.__i__&&(this.__audio.removeEventListener("volumechange",this),this.__audio.removeEventListener("ended",this),this.__audio.removeEventListener("playing",this),this.__audio.removeEventListener("play",this),this.__audio.removeEventListener("pause",this),this.__audio.removeEventListener("error",this),delete this.__audio,this.__audio=null,b.EventSource.prototype.destructor.call(this))},initComponent:function(){b.EventSource.prototype.initComponent.call(this);
this.__audio=new g.Audio;this.__audio.preload="auto";this.__audio.autoplay=this._autoplay;this.__audio.addEventListener("volumechange",this);this.__audio.addEventListener("ended",this);this.__audio.addEventListener("playing",this);this.__audio.addEventListener("play",this);this.__audio.addEventListener("pause",this);this.__audio.addEventListener("error",this);var a=this;this.__audio.addEventListener("timeupdate",function(){a._current_time=a.__audio.currentTime;a.outPropertyChange("currentTime")},
!1)},handleEvent:function(a){switch(a.type){case "volumechange":this._volume=this.__audio.volume;this.outPropertyChange("volume");this.propagate("volumechange",this._volume);break;case "ended":this._state=b.Task.STOPED;this.delegate&&this.delegate.taskDidEnd&&this.delegate.taskDidEnd(this);this.propagate(a.type);break;case "pause":this.delegate&&this.delegate.taskDidPause&&this.delegate.taskDidPause(this);this._state=b.Task.PAUSED;this.propagate(a.type);break;case "playing":case "play":this._state=
b.Task.STARTED;this.propagate(a.type);break;case "error":this.__audio.error?this.propagate(a.type,this.__audio.error.code):this.propagate(a.type,d.UNKNOWN_ERR)}}};e.extendClass(d,b.EventSource);e.defineClassProperties(d,{src:{set:function(a){if(f.util.isString(a)){this._src=a;self=this;if(g.Media)this.__audio=new g.Media(this._src,function(){self._state=b.Task.STOPED;self.delegate&&self.delegate.taskDidEnd&&self.delegate.taskDidEnd(self);self.propagate(event.type)}),this._autoplay&&this.play();else{if(!this.__audio)return;
this.__audio.src=this._src}this.propertyChange("src")}},get:function(){return this._src}},loop:{set:function(a){this._loop=a?!0:!1;this.__audio&&(this.__audio.loop=this._loop,this.propertyChange("loop"))},get:function(){return this._loop}},autoplay:{set:function(a){this._autoplay=a?!0:!1;this.__audio&&(this.__audio.autoplay=this._autoplay,this.propertyChange("autoplay"))},get:function(){return this._autoplay}},volume:{set:function(a){if(f.util.isNumber(a)&&!(0>a||1<a))this._volume=a,this.__audio&&
(this.__audio.volume=this._volume,this.propertyChange("volume"))},get:function(){return this._volume}},muted:{set:function(a){this._muted=a?!0:!1;this.propertyChange("muted")},get:function(){return this._muted}},currentTime:{get:function(){return this._current_time}},state:{get:function(){return this._state}}});i.Audio=d;c.prototype.html_template="<div class='vs_av_video'><video class='video_inner'></video></div>"})(window);
/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(m,k){function o(){b.InfoWindow=function(a,c,p,b,d){this.vs_map=a;this.id=c;this.type=p;a&&(this.setCoordinate(b,d),this.setValues({map:this.vs_map._gmap}))};b.InfoWindow.prototype=new google.maps.OverlayView;b.InfoWindow.prototype.destructor=function(){this.setMap(null);this.vs_map=this.marker=k};b.InfoWindow.prototype.hide=function(){this.view&&(this.view.style.display="none")};b.InfoWindow.prototype.show=function(){this.view&&(this.view.style.display="block")};b.InfoWindow.prototype.setMarker=
function(a){this.marker&&this.unbind("position");this.marker=a;this.id=this.marker.id;this.type=this.marker.type;this.info=this.marker.info;this.bindTo("position",this.marker._gmarker,"position");this.instanciateView(this.type,this.info)};b.InfoWindow.prototype.setCoordinate=function(a,c){this.position&&delete this.position;this.position=new google.maps.LatLng(a,c)};b.InfoWindow.prototype.setType=function(a){this.type=a;this.instanciateView(this.type,this.info)};b.InfoWindow.prototype.setInfo=function(a){this.info=
a;this.instanciateView(this.type,this.info)};b.InfoWindow.prototype.instanciateView=function(a,c){var d=i.createElement("div"),f=b._anotation_templates_[a];f||(f=b._anotation_templates_["default"]);f=f.infoWindow;if(c)for(key in c)var g=c[key],g=g?g:"",f=f.replace("{"+key+"}",g);e.safeInnerHTML(d,f);this.view||this.createView();e.safeInnerHTML(this.view,d.firstElementChild.innerHTML);this.view.className=d.firstElementChild.className};b.InfoWindow.prototype.createView=function(){this.view||(this.view=
i.createElement("div"),d.addPointerListener(this.view,g.POINTER_START,this))};b.InfoWindow.prototype.handleEvent=function(a){var c=this;switch(a.type){case g.POINTER_START:if(0===a.targetPointerList.length||1<a.nbPointers)break;d.addPointerListener(i,g.POINTER_END,this);d.addPointerListener(i,g.POINTER_MOVE,this);this.__start_x=a.targetPointerList[0].pageX;this.__start_y=a.targetPointerList[0].pageY;this.marker&&this.removeMapEvent();e.addClassName(this.view,"selected");return!1;case g.POINTER_MOVE:if(0===
a.targetPointerList.length)break;var b=a.targetPointerList[0].pageY-this.__start_y;if(10>Math.abs(a.targetPointerList[0].pageX-this.__start_x)+Math.abs(b))return a.preventDefault(),!1;d.removePointerListener(i,g.POINTER_END,this);d.removePointerListener(i,g.POINTER_MOVE,this);this.marker&&d.scheduleAction(function(){c.initMapEvent()});e.removeClassName(this.view,"selected");return!1;case g.POINTER_END:return a.stopPropagation(),a.preventDefault(),d.removePointerListener(i,g.POINTER_END,this),d.removePointerListener(i,
g.POINTER_MOVE,this),this.marker&&d.scheduleAction(function(){c.initMapEvent()}),e.removeClassName(this.view,"selected"),this.vs_map.annotationSelect(this.id),!1}};b.InfoWindow.prototype.onAdd=function(){this.view||this.createView();this.getPanes().floatPane.appendChild(this.view);var a=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){a.draw()})]};b.InfoWindow.prototype.onRemove=function(){this.view.parentNode.removeChild(this.view);for(var a=0,c=this.listeners_.length;a<
c;++a)google.maps.event.removeListener(this.listeners_[a])};b.InfoWindow.prototype.draw=function(){var a=this.getProjection().fromLatLngToDivPixel(this.get("position")),c=this.view;c.style.display="block";c.style.visibility="hidden";var b=0;if(this.marker){var b=10,f=this.marker._gmarker.getIcon();f&&(b+=f.size.height)}d.scheduleAction(function(){var d=c.offsetHeight;c.style.left=a.x-Math.ceil(c.offsetWidth/2)+"px";c.style.top=a.y-d-b+"px";c.style.visibility="visible"})};b.InfoWindow.prototype.initMapEvent=
function(){if(!this.map_listener){var a=this;this.map_listener=google.maps.event.addListener(this.vs_map._gmap,"click",function(){a.hide()})}};b.InfoWindow.prototype.removeMapEvent=function(){this.map_listener&&(google.maps.event.removeListener(this.map_listener),this.map_listener=k)};b.InfoWindowWithMarker=function(a){this.vs_map=a;this.setValues({map:this.vs_map._gmap});this.initMapEvent()};e.extendClass(b.InfoWindowWithMarker,b.InfoWindow)}function j(a){this.parent=d.ui.View;this.parent(a);this.constructor=
j;this.__indicators_list={}}var i=m.document,d=m.vs,e=d.util,g=d.core,l=d.ui,n=d.ext.ui,b=function(a){this.parent=d.ui.View;this.parent(a);this.constructor=b;this._center=[];this._center[0]=48.83763339660763;this._center[1]=2.3397827148437544;b.__google_loaded__||(b.__google_wait_loaded__||(b.__google_wait_loaded__=!0,d.util.importFile("http://maps.google.com/maps/api/js?sensor=true&callback=vs.ext.ui.GMap.__on_laoded",null,null,"js")),b._to_finish_init.push(this));this.__annotations={}};b.NO_MARKER=
0;b.DEVICE_IMAGE_MARKER=1;b.IMAGE_MARKER=2;b._anotation_templates_={};b._anotation_templates_["default"]={marker:{type:b.DEVICE_IMAGE_MARKER},infoWindow:'<div class="vs_ext_ui_gmap_info">    <div>{title}</div>    <div>{subtitle}</div>  </div>'};b.__google_wait_loaded__=!1;b.__google_loaded__=!1;b._to_finish_init=[];b.__on_laoded=function(){var a,c;b.__google_loaded__=!0;b.__google_wait_loaded__=!1;o();for(a=0,c=b._to_finish_init.length;a<c;a++)b._to_finish_init[a].finishInit();b._to_finish_init=null};
b.prototype={_zoom:10,_tilt:-1,_scroll:!0,_tap_to_zoom:!0,_max_zoom:20,_min_zoom:1,_zoom_control:!1,_street_view_control:!1,_center:null,_gmap:null,__init_finished:!1,__annotations:null,destructor:function(){delete this._gmap;d.ui.View.prototype.destructor.call(this)},initComponent:function(){d.ui.View.prototype.initComponent.call(this);b.__google_loaded__&&this.finishInit()},finishInit:function(){var a={zoom:this._zoom,center:new google.maps.LatLng(this._center[0],this._center[1]),disableDefaultUI:!0,
draggable:this._scroll,maxZoom:this._max_zoom,minZoom:this._min_zoom,disableDoubleClickZoom:!this._tap_to_zoom,streetViewControl:this._street_view_control,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},zoomControl:this._zoom_control,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,style:google.maps.ZoomControlStyle.SMALL},mapTypeControlOptions:{style:google.maps.ControlPosition.HORIZONTAL_BAR},mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};
this._gmap=new google.maps.Map(this.view,a);var c=this;d.scheduleAction(function(){c.__init_did_finish()})},__init_did_finish:function(){this.__init_finished=!0;this.streetViewControl=this._street_view_control;this.zoomControl=this._zoom_control;this.propagate("mapload")},isReady:function(){return this.__init_finished},getGoogleMapObject:function(){return this._gmap},showCenterMark:function(){this._center_mark||(this._center_mark=new google.maps.Marker({position:new google.maps.LatLng(this._center[0],
this._center[1]),icon:"css/kit/mapCenter.png"}));this._center_mark.setMap(this._gmap)},hideCenterMark:function(){this._center_mark&&this._center_mark.setMap(null)},refresh:function(){this._gmap&&(google.maps.event.trigger(this._gmap,"resize"),d.ui.View.prototype.refresh.call(this))},addAnnotation:function(a,c,d,f,i){if(this.__init_finished){if(!e.isString(a)||!a)a=g.createId();c=new b.Annotation(this,a,c,d,f,i);return this.__annotations[a]=c}},setAnnotationTemplate:function(a,c,d){if(e.isString(a)||
a){var f=b._anotation_templates_["default"];b._anotation_templates_[a]={marker:e.clone(c?c:f.marker),infoWindow:e.clone(d?d:f.infoWindow)}}},removeAnnotation:function(a){!e.isString(a)&&a.id&&(a=a.id);var c=this.__annotations[a];c&&(e.free(c),delete this.__annotations[a])},removeAnnotations:function(){for(var a in this.__annotations)this.removeAnnotation(a)},annotationSelect:function(a){this.propagate("annotationselect",a)}};e.extendClass(b,d.ui.View);e.defineClassProperties(b,{scroll:{set:function(a){this._scroll=
a?!0:!1;this.__init_finished&&this._gmap.setOptions({draggable:this._scroll})},get:function(){return this._scroll}},tapToZoom:{set:function(a){this._tap_to_zoom=a?!0:!1;this.__init_finished&&this._gmap.setOptions({disableDoubleClickZoom:!this._tap_to_zoom})},get:function(){return this._tap_to_zoom}},maxZoom:{set:function(a){d.util.isNumber(a)&&(this._max_zoom=a,this.__init_finished&&this._gmap.setOptions({maxZoom:this._max_zoom}))},get:function(){return this._max_zoom}},minZoom:{set:function(a){d.util.isNumber(a)&&
(this._min_zoom=a,this.__init_finished&&this._gmap.setOptions({maxZoom:this._min_zoom}))},get:function(){return this._min_zoom}},zoomControl:{set:function(a){this._zoom_control=a?!0:!1;this.__init_finished&&this._gmap.setOptions({zoomControl:this._zoom_control})},get:function(){return this._zoom_control}},zoom:{set:function(a){d.util.isNumber(a)&&this.__init_finished&&(a=Math.floor(a),a!==this._zoom&&(this._zoom=a,this._gmap.setZoom(this._zoom)))},get:function(){return!this._gmap?-1:this._zoom=this._gmap.getZoom()}},
tilt:{set:function(a){d.util.isNumber(a)&&this.__init_finished&&(this._tilt=a,this._gmap.setTilt(a))},get:function(){return!this._gmap?-1:this._tilt=this._gmap.getTilt()}},streetViewControl:{set:function(a){this._street_view_control=a?!0:!1;this.__init_finished&&this._gmap.setOptions({streetViewControl:this._street_view_control})},get:function(){return this._street_view_control}},center:{set:function(a){this.__init_finished&&a&&d.util.isArray(a)&&2===a.length&&d.util.isNumber(a[0])&&d.util.isNumber(a[1])&&
(this._center[0]=a[0],this._center[1]=a[1],a=new google.maps.LatLng(a[0],a[1]),this._gmap.setCenter(a),this._center_mark&&this._center_mark.setPosition(a))},get:function(){if(!this._gmap)return[0,0];var a=this._gmap.getCenter();this._center[0]=a.lat();this._center[1]=a.lng();return this._center.slice()}}});b.Annotation=function(a,c,e,f,g,i){this.map=a;this.id=c;this.info=g;this.type=i?i:"default";this._coordinate=new google.maps.LatLng(e,f);var h=b._anotation_templates_[this.type];h||(h=b._anotation_templates_["default"]);
this.image=null;h.marker.type==b.DEVICE_IMAGE_MARKER?(h=m.deviceConfiguration.os,this.image=h==d.core.DeviceConfiguration.OS_SYMBIAN?new google.maps.MarkerImage("css/kit/symbian_marker.png",new google.maps.Size(48,51),new google.maps.Point(0,0),new google.maps.Point(24,48)):h==d.core.DeviceConfiguration.OS_WP7?new google.maps.MarkerImage("css/kit/wp7_marker.png",new google.maps.Size(15,31),new google.maps.Point(0,0),new google.maps.Point(0,31)):new google.maps.MarkerImage("css/kit/ios_marker.png",
new google.maps.Size(32,41),new google.maps.Point(0,0),new google.maps.Point(8,36))):h.marker.type==b.IMAGE_MARKER&&(this.image=new google.maps.MarkerImage(h.marker.url));if(this.image){this._gmarker=new google.maps.Marker({position:this._coordinate,icon:this.image,map:a._gmap,animation:google.maps.Animation.DROP});var j=this;google.maps.event.addListener(this._gmarker,"click",function(){j.onselect()})}else this._infoWindow=new b.InfoWindow(this.map,c,e,f,i),this._infoWindow.setCoordinate(e,f),this._infoWindow.setInfo(g)};
b.Annotation.prototype={destructor:function(){this._gmarker&&(this._gmarker.setMap(null),delete this._gmarker);this._infoWindow&&free(this._infoWindow);this.image&&delete this.image;delete this._coordinate;this.map=k},onselect:function(){this.showInfoWindow()},showInfoWindow:function(){this.map._infoWindow||(this.map._infoWindow=new b.InfoWindowWithMarker(this.map));this.map._infoWindow.setMarker(this)}};e.defineClassProperties(b.Annotation,{coordinate:{set:function(a){if(e.isArray(a)||2==a.length)delete this._coordinate,
this._coordinate=new google.maps.LatLng(a[0],a[1]),this._gmarker&&this._gmarker.setPosition(this._coordinate)},get:function(){return[this._coordinate.lat(),this._coordinate.lng()]}},info:{set:function(a){this._info=a;this._infoWindow&&this._infoWindow.setInfo(a)},get:function(){return this._info}}});n.GMap=b;j.HORIZONTAL=d.fx.SwipeController.HORIZONTAL;j.VERTICAL=d.fx.SwipeController.VERTICAL;j.prototype={_indicators_visibility:!0,_delegate:null,_orientation:j.HORIZONTAL,_swipe_controller:null,__indicators:null,
__selected_indicator:null,__indicators_list:null,__indicators_timer:0,destructor:function(){e.free(this._swipe_controller);d.ui.View.prototype.destructor.call(this)},initComponent:function(){d.ui.View.prototype.initComponent.call(this);this.__indicators=this.view.querySelector(".vs_ext_ui_carousel >.indicators");d.util.addClassName(this.__indicators,"horizontal");this._swipe_controller=new d.fx.SwipeController(this);this._swipe_controller.delegate=this;this._swipe_controller.isTactile=!0;this._swipe_controller.animationMode=
d.fx.SwipeController.PIXEL;this._swipe_controller.init()},refresh:function(){this._swipe_controller&&this._swipe_controller.refresh&&this._swipe_controller.refresh();d.ui.View.prototype.refresh.call(this)},controllerViewWillChange:function(a,c){this.__indicators_timer&&(clearTimeout(this.__indicators_timer),__indicators_timer=0);var b=c.id,e=this;this.__indicators_timer=setTimeout(function(){e.__selected_indicator&&d.util.removeClassName(e.__selected_indicator,"selected");e.__selected_indicator=e.__indicators_list[b];
d.util.addClassName(e.__selected_indicator,"selected")},500);this._delegate&&this._delegate.carouselViewWillChange&&this._delegate.carouselViewWillChange(c)},add:function(a){d.ui.View.prototype.add.call(this,a,"children");this.push(a)},push:function(a,c){if(!this.isChild(a)||!this._swipe_controller.isStateExit(a.id)){var d,b=this._swipe_controller.push(a,c);d=i.createElement("span");this.__indicators.appendChild(d);this.__indicators_list[b]=d}},remove:function(a){a&&a.id&&(this.__indicators.removeChild(this.__indicators_list[a.id]),
delete this.__indicators_list[a.id],d.ui.View.prototype.remove.call(this,a))},removeAllChildren:function(){for(var a in this.__indicators_list)this.remove(d.core.Object._obs[a])},goToNextView:function(){this._swipe_controller.goToNextView()},goToPreviousView:function(){this._swipe_controller.goToPreviousView()},goToView:function(a){this._swipe_controller.goToViewId(a)},goToViewAt:function(a){this._swipe_controller.goToViewAt(a)}};e.extendClass(j,d.ui.View);e.defineClassProperties(j,{size:{set:function(a){a&&
e.isArray(a)&&2===a.length&&e.isNumber(a[0])&&e.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSizeAndPos(),this._swipe_controller&&this._swipe_controller.refresh&&this._swipe_controller.refresh()))},get:function(){var a=this.view;a&&a.parentNode&&(this._size[0]=a.offsetWidth,this._size[1]=a.offsetHeight);return this._size.slice()}},delegate:{set:function(a){this._delegate=a}},indicatorsVisibility:{set:function(a){a?(this._indicators_visibility=!0,e.setElementVisibility(this.__indicators,
!0)):(this._indicators_visibility=!1,e.setElementVisibility(this.__indicators,!1))}},isCircular:{set:function(a){this._swipe_controller.isCircular=a},get:function(){return this._swipe_controller.isCircular}},isContinuousSwipe:{set:function(a){this._swipe_controller.isContinuousSwipe=a},get:function(){return this._swipe_controller.isContinuousSwipe}},orientation:{set:function(a){a!==j.HORIZONTAL&&a!==j.VERTICAL||this._orientation===a||(a===j.HORIZONTAL?(d.util.removeClassName(this.__indicators,"vertical"),
d.util.addClassName(this.__indicators,"horizontal")):(d.util.removeClassName(this.__indicators,"horizontal"),d.util.addClassName(this.__indicators,"vertical")),this._orientation=a,this._swipe_controller.orientation=a)},get:function(){return this._orientation}}});n.Carousel=j;var h=function(a){this.parent=l.View;this.parent(a);this.constructor=h;this.__ab_a_items=[]};h.STRETCH_NONE=0;h.STRETCH_FILL=1;h.prototype={_stretch:h.STRETCH_NONE,__ab_a_items:k,__ab_a_current_index:k,__ab_a_head_height:33,push:function(a,
c){a&&(this.add(a),this.setPanelTitle(this._getIndexForChild(a),c))},add:function(a){if(a){var c;a.id||(a.id=d.core.createId());c=this.__ab_a_items.length;c=this._createView(a,"Section "+(c+1),c);this.view.appendChild(c.dt);l.View.prototype.add.call(this,a,"children",c.dd);this.__ab_a_items.push(c);this._updateSizePanel()}},remove:function(a){var c=this._getIndexForChild(a),b;-1!==c&&(l.View.prototype.remove.call(this,a),b=this.__ab_a_items[c],b.dd.removeChild(a.view),this.view.removeChild(b.dt),
d.removePointerListener(b.dt,g.POINTER_START,this),delete b.dt,delete b.dd,delete b,this.__ab_a_items.remove(c),c===this.__ab_a_current_index?(this.__ab_a_current_index=null,this.expandPanel(0)):this._updateSizePanel())},_getIndexForChild:function(a){if(!a)return-1;var c,b;for(c=0;c<this.__ab_a_items.length;c++)if((b=this.__ab_a_items[c])&&b.dd&&b.dd.__child===a)return c;return-1},_createView:function(a,c,b){var f={};f.dt=i.createElement("dt");e.setElementInnerText(f.dt,c);f.title=c;f.dd=i.createElement("dd");
this._stretch===h.STRETCH_FILL&&(a.position=[0,0]);f.dd.appendChild(a.view);c=b?"collapsed":"expanded";f.dd.setAttribute("class",c);f.dt.setAttribute("class",c);f.dd.__child=a;f.child=a;"collapsed"===c?(f.dd.style.width="100%",f.dd.style.height="0px"):(f.dd.style.width="100%",f.dd.style.height=a._size[1]+"px",this.__ab_a_current_index=b);this._stretch===h.STRETCH_FILL&&(a.size=[this._size[0]-2,this._size[1]]);f.dt.__dd=f.dd;f.dt.__index=b;d.addPointerListener(f.dt,g.POINTER_START,this);return f},
expandPanel:function(a){var c,b;if(e.isNumber(a)&&0<=a&&a<this.__ab_a_items.length){if(a!==this.__ab_a_current_index){if(c=this.__ab_a_items[this.__ab_a_current_index])e.removeClassName(c.dt,"expanded"),e.addClassName(c.dt,"collapsed"),e.removeClassName(c.dd,"expanded"),e.addClassName(c.dd,"collapsed"),c.dd.style.height="0px";c=this.__ab_a_items[a];e.removeClassName(c.dt,"collapsed");e.addClassName(c.dt,"expanded");e.removeClassName(c.dd,"collapsed");e.addClassName(c.dd,"expanded");this.__ab_a_current_index=
a;this._updateSizePanel();this.propagate("panel_select",a)}}else if(e.isString(a))for(b=0;b<this.__ab_a_items.length;b++)if(c=this.__ab_a_items[b],c.title===a){this.expandPanel(b);break}},setPanelTitle:function(a,c){var b,d;if(e.isNumber(a)&&0<=a&&a<this.__ab_a_items.length)b=this.__ab_a_items[a],b.title=c,e.setElementInnerText(b.dt,c);else if(e.isString(a))for(d=0;d<this.__ab_a_items.length;d++)if(b=this.__ab_a_items[d],b.title===a){this.setPanelTitle(d,c);break}},show:function(){d.ui.View.prototype.show.call(this);
this._updateSizePanel()},refresh:function(){d.ui.View.prototype.refresh.call(this);this._updateSizePanel()},_updateSize:function(){d.ui.View.prototype._updateSize.call(this);this._updateSizePanel()},_updateSizePanel:function(){var a,c;if(c=this.__ab_a_items[this.__ab_a_current_index])a=this._size[1],this.__ab_a_head_height=c.dt.offsetHeight,a-=this.__ab_a_items.length*this.__ab_a_head_height+2,c.dd.style.height=a+"px",this._stretch===h.STRETCH_FILL&&(c.child.size=[this._size[0]-2,a])},handleEvent:function(a){var c=
a.target,b=this;1!==c.nodeType&&(c=c.parentElement);if(a.type===g.POINTER_START){if(0===a.targetPointerList.length||1<a.nbPointers)return;a.stopPropagation();a.preventDefault();if(e.hasClassName(c,"expanded"))return!1;d.addPointerListener(i,g.POINTER_MOVE,this,!1);d.addPointerListener(i,g.POINTER_END,this,!1);this.__touch_start_x=a.targetPointerList[0].pageX;this.__touch_start_y=a.targetPointerList[0].pageY;this.__elem=c;this.__elem_to_unselect&&(e.removeClassName(this.__elem_to_unselect,"selected"),
this.__elem_to_unselect=null);this.__list_time_out=setTimeout(function(){e.addClassName(b.__elem,"selected");b.__list_time_out=0},0)}else if(a.type===g.POINTER_MOVE){if(0===a.targetPointerList.length)return;a.stopPropagation();a.preventDefault();c=a.targetPointerList[0].pageX;a=a.targetPointerList[0].pageY;a=Math.abs(a-this.__touch_start_y)+Math.abs(c-this.__touch_start_x);this.__elem&&a>2*l.View.MOVE_THRESHOLD&&(this.__list_time_out?(clearTimeout(this.__list_time_out),this.__list_time_out=0):e.removeClassName(this.__elem,
"selected"),this.__elem=null)}else a.type===g.POINTER_END&&(a.stopPropagation(),a.preventDefault(),d.removePointerListener(i,g.POINTER_MOVE,this),d.removePointerListener(i,g.POINTER_END,this),this.__elem&&(this.__list_time_out&&(clearTimeout(this.__list_time_out),e.addClassName(b.__elem,"selected")),this.__elem_to_unselect=this.__elem,this.__list_time_out=setTimeout(function(){e.removeClassName(b.__elem_to_unselect,"selected");b.__elem_to_unselect=null;b.__list_time_out=0},l.View.UNSELECT_DELAY),
e.isNumber(c.__index)&&this.expandPanel(c.__index)),this.__elem=null);return!1}};e.extendClass(h,d.ui.View);e.defineClassProperty(h,"stretch",{set:function(a){e.isNumber(a)&&!(a!==h.STRETCH_FILL&&a!==h.STRETCH_NONE)&&(this._stretch=a,this._stretch===h.STRETCH_FILL?e.addClassName(this.view,"fill"):e.removeClassName(this.view,"fill"),this._updateSizePanel())},get:function(){return this._stretch}});n.Accordion=h;b.prototype.html_template="<div class='vs_ext_ui_gmap'></div>";j.prototype.html_template=
"<div class='vs_ext_ui_carousel'>  <div class='views' x-hag-hole='children'></div>  <div class='indicators'></div></div>";h.prototype.html_template="<dl class='vs_ext_ui_accordion' x-hag-hole='children'></dl>"})(window);
/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(e){var e=e.vs,p=e.util,a=e.fx;e.ext.fx.Animation={};var c=new a.Animation(["translateY","0px"]);c.addKeyFrame(0,["0px"]);c.addKeyFrame(20,["0px"]);c.addKeyFrame(40,["-30px"]);c.addKeyFrame(50,["0px"]);c.addKeyFrame(60,["-15px"]);c.addKeyFrame(80,["0px"]);c.duration="1s";var b=new a.Animation(["translateX","0px"]);b.addKeyFrame(0,["0px"]);b.addKeyFrame(10,["-10px"]);b.addKeyFrame(20,["10px"]);b.addKeyFrame(30,["-10px"]);b.addKeyFrame(40,["10px"]);b.addKeyFrame(50,["-10px"]);b.addKeyFrame(60,
["10px"]);b.addKeyFrame(70,["-10px"]);b.addKeyFrame(80,["10px"]);b.addKeyFrame(90,["0px"]);b.duration="1s";var d=new a.Animation(["rotate","0deg"]);d.addKeyFrame(0,["0deg"]);d.addKeyFrame(20,["15deg"]);d.addKeyFrame(40,["-10deg"]);d.addKeyFrame(60,["5deg"]);d.addKeyFrame(80,["-5deg"]);d.duration="1s";d.origin=[50,0];var f=new a.Animation(["scale","1"]);f.addKeyFrame(0,["1"]);f.addKeyFrame(50,["1.1"]);f.addKeyFrame(80,["0.97"]);f.duration="1s";var g=new a.Animation(["perspective","400px"],["rotateX",
"0deg"],["opacity","1"]);g.addKeyFrame(0,["400px","90deg","0"]);g.addKeyFrame(40,["400px","-10deg"]);g.addKeyFrame(70,["400px","10deg"]);g.duration="1s";var i=new a.Animation(["perspective","400px"],["rotateX","90deg"],["opacity","0"]);i.addKeyFrame(0,["400px","0deg","1"]);i.duration="1s";var h=new a.Animation(["perspective","400px"],["rotateY","0deg"],["opacity","1"]);h.addKeyFrame(0,["400px","90deg","0"]);h.addKeyFrame(40,["400px","-10deg"]);h.addKeyFrame(70,["400px","10deg"]);h.duration="1s";var j=
new a.Animation(["perspective","400px"],["rotateY","90deg"],["opacity","0"]);j.addKeyFrame(0,["400px","0deg","1"]);j.duration="1s";var k=new a.Animation(["translateY","0px"],["opacity","1"]);k.addKeyFrame(0,["20px","0"]);k.duration="1s";var l=new a.Animation(["translateY","-20px"],["opacity","0"]);l.addKeyFrame(0,["0px","1"]);l.duration="1s";var m=new a.Animation(["translateY","0px"],["opacity","1"]);m.addKeyFrame(0,["-20px","0"]);m.duration="1s";var n=new a.Animation(["translateY","20px"],["opacity",
"0"]);n.addKeyFrame(0,["0px","1"]);n.duration="1s";var o=new a.Animation(["translateX","0px"],["opacity","1"]);o.addKeyFrame(0,["-20px","0"]);o.duration="1s";a=new a.Animation(["translateX","20px"],["opacity","0"]);a.addKeyFrame(0,["0px","1"]);a.duration="1s";p.extend(e.ext.fx.Animation,{Bounce:c,Shake:b,Swing:d,Pulse:f,FlipInX:g,FlipOutX:i,FlipInY:h,FlipOutY:j,FadeInUp:k,FadeOutUp:l,FadeInDown:m,FadeOutDown:n,FadeInLeft:o,FadeOutLeft:a})})(window);
